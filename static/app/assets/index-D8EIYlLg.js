(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();function Vp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vd={exports:{}},il={},gd={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ci=Symbol.for("react.element"),Bp=Symbol.for("react.portal"),Ap=Symbol.for("react.fragment"),Wp=Symbol.for("react.strict_mode"),Up=Symbol.for("react.profiler"),Hp=Symbol.for("react.provider"),Kp=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Qp=Symbol.for("react.memo"),qp=Symbol.for("react.lazy"),eu=Symbol.iterator;function Yp(t){return t===null||typeof t!="object"?null:(t=eu&&t[eu]||t["@@iterator"],typeof t=="function"?t:null)}var yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,wd={};function vn(t,e,s){this.props=t,this.context=e,this.refs=wd,this.updater=s||yd}vn.prototype.isReactComponent={};vn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nd(){}Nd.prototype=vn.prototype;function Io(t,e,s){this.props=t,this.context=e,this.refs=wd,this.updater=s||yd}var Do=Io.prototype=new Nd;Do.constructor=Io;xd(Do,vn.prototype);Do.isPureReactComponent=!0;var tu=Array.isArray,Sd=Object.prototype.hasOwnProperty,Fo={current:null},bd={key:!0,ref:!0,__self:!0,__source:!0};function jd(t,e,s){var n,i={},r=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)Sd.call(e,n)&&!bd.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Ci,type:t,key:r,ref:a,props:i,_owner:Fo.current}}function Jp(t,e){return{$$typeof:Ci,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oo(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ci}function Zp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var su=/\/+/g;function zl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zp(""+t.key):e.toString(36)}function mr(t,e,s,n,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ci:case Bp:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+zl(a,0):n,tu(i)?(s="",t!=null&&(s=t.replace(su,"$&/")+"/"),mr(i,e,s,"",function(u){return u})):i!=null&&(Oo(i)&&(i=Jp(i,s+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(su,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",tu(t))for(var o=0;o<t.length;o++){r=t[o];var c=n+zl(r,o);a+=mr(r,e,s,c,i)}else if(c=Yp(t),typeof c=="function")for(t=c.call(t),o=0;!(r=t.next()).done;)r=r.value,c=n+zl(r,o++),a+=mr(r,e,s,c,i);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ii(t,e,s){if(t==null)return t;var n=[],i=0;return mr(t,n,"","",function(r){return e.call(s,r,i++)}),n}function ev(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},pr={transition:null},tv={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:pr,ReactCurrentOwner:Fo};function Cd(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Ii,forEach:function(t,e,s){Ii(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Ii(t,function(){e++}),e},toArray:function(t){return Ii(t,function(e){return e})||[]},only:function(t){if(!Oo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=vn;X.Fragment=Ap;X.Profiler=Up;X.PureComponent=Io;X.StrictMode=Wp;X.Suspense=Xp;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tv;X.act=Cd;X.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=xd({},t.props),i=t.key,r=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Fo.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Sd.call(e,c)&&!bd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ci,type:t.type,key:i,ref:r,props:n,_owner:a}};X.createContext=function(t){return t={$$typeof:Kp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hp,_context:t},t.Consumer=t};X.createElement=jd;X.createFactory=function(t){var e=jd.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:Gp,render:t}};X.isValidElement=Oo;X.lazy=function(t){return{$$typeof:qp,_payload:{_status:-1,_result:t},_init:ev}};X.memo=function(t,e){return{$$typeof:Qp,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=pr.transition;pr.transition={};try{t()}finally{pr.transition=e}};X.unstable_act=Cd;X.useCallback=function(t,e){return De.current.useCallback(t,e)};X.useContext=function(t){return De.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return De.current.useDeferredValue(t)};X.useEffect=function(t,e){return De.current.useEffect(t,e)};X.useId=function(){return De.current.useId()};X.useImperativeHandle=function(t,e,s){return De.current.useImperativeHandle(t,e,s)};X.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return De.current.useMemo(t,e)};X.useReducer=function(t,e,s){return De.current.useReducer(t,e,s)};X.useRef=function(t){return De.current.useRef(t)};X.useState=function(t){return De.current.useState(t)};X.useSyncExternalStore=function(t,e,s){return De.current.useSyncExternalStore(t,e,s)};X.useTransition=function(){return De.current.useTransition()};X.version="18.3.1";gd.exports=X;var w=gd.exports;const rl=Vp(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv=w,nv=Symbol.for("react.element"),iv=Symbol.for("react.fragment"),rv=Object.prototype.hasOwnProperty,lv=sv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,av={key:!0,ref:!0,__self:!0,__source:!0};function kd(t,e,s){var n,i={},r=null,a=null;s!==void 0&&(r=""+s),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)rv.call(e,n)&&!av.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:nv,type:t,key:r,ref:a,props:i,_owner:lv.current}}il.Fragment=iv;il.jsx=kd;il.jsxs=kd;vd.exports=il;var l=vd.exports,Ta={},Ed={exports:{}},Ye={},_d={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,B){var A=P.length;P.push(B);e:for(;0<A;){var Y=A-1>>>1,Z=P[Y];if(0<i(Z,B))P[Y]=B,P[A]=Z,A=Y;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],A=P.pop();if(A!==B){P[0]=A;e:for(var Y=0,Z=P.length,ct=Z>>>1;Y<ct;){var Te=2*(Y+1)-1,Bt=P[Te],Ee=Te+1,et=P[Ee];if(0>i(Bt,A))Ee<Z&&0>i(et,Bt)?(P[Y]=et,P[Ee]=A,Y=Ee):(P[Y]=Bt,P[Te]=A,Y=Te);else if(Ee<Z&&0>i(et,A))P[Y]=et,P[Ee]=A,Y=Ee;else break e}}return B}function i(P,B){var A=P.sortIndex-B.sortIndex;return A!==0?A:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,v=!1,y=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var B=s(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=P)n(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=s(u)}}function N(P){if(g=!1,x(P),!y)if(s(c)!==null)y=!0,H(k);else{var B=s(u);B!==null&&$(N,B.startTime-P)}}function k(P,B){y=!1,g&&(g=!1,p(C),C=-1),v=!0;var A=f;try{for(x(B),d=s(c);d!==null&&(!(d.expirationTime>B)||P&&!L());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var Z=Y(d.expirationTime<=B);B=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===s(c)&&n(c),x(B)}else n(c);d=s(c)}if(d!==null)var ct=!0;else{var Te=s(u);Te!==null&&$(N,Te.startTime-B),ct=!1}return ct}finally{d=null,f=A,v=!1}}var E=!1,b=null,C=-1,M=5,j=-1;function L(){return!(t.unstable_now()-j<M)}function T(){if(b!==null){var P=t.unstable_now();j=P;var B=!0;try{B=b(!0,P)}finally{B?V():(E=!1,b=null)}}else E=!1}var V;if(typeof m=="function")V=function(){m(T)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=T,V=function(){W.postMessage(null)}}else V=function(){S(T,0)};function H(P){b=P,E||(E=!0,V())}function $(P,B){C=S(function(){P(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,H(k))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var A=f;f=B;try{return P()}finally{f=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var A=f;f=P;try{return B()}finally{f=A}},t.unstable_scheduleCallback=function(P,B,A){var Y=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?Y+A:Y):A=Y,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=A+Z,P={id:h++,callback:B,priorityLevel:P,startTime:A,expirationTime:Z,sortIndex:-1},A>Y?(P.sortIndex=A,e(u,P),s(c)===null&&P===s(u)&&(g?(p(C),C=-1):g=!0,$(N,A-Y))):(P.sortIndex=Z,e(c,P),y||v||(y=!0,H(k))),P},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(P){var B=f;return function(){var A=f;f=B;try{return P.apply(this,arguments)}finally{f=A}}}})(Md);_d.exports=Md;var ov=_d.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=w,qe=ov;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pd=new Set,si={};function $s(t,e){an(t,e),an(t+"Capture",e)}function an(t,e){for(si[t]=e,t=0;t<e.length;t++)Pd.add(e[t])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ra=Object.prototype.hasOwnProperty,uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nu={},iu={};function hv(t){return Ra.call(iu,t)?!0:Ra.call(nu,t)?!1:uv.test(t)?iu[t]=!0:(nu[t]=!0,!1)}function dv(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fv(t,e,s,n){if(e===null||typeof e>"u"||dv(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,s,n,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ke[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ke[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ke[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ke[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ke[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ke[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ke[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ke[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ke[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vo=/[\-:]([a-z])/g;function Bo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vo,Bo);ke[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vo,Bo);ke[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vo,Bo);ke[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ke[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ke[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ao(t,e,s,n){var i=ke.hasOwnProperty(e)?ke[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fv(e,s,i,n)&&(s=null),n||i===null?hv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Vt=cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Di=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),Wo=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),Ld=Symbol.for("react.provider"),Td=Symbol.for("react.context"),Uo=Symbol.for("react.forward_ref"),$a=Symbol.for("react.suspense"),Ia=Symbol.for("react.suspense_list"),Ho=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Rd=Symbol.for("react.offscreen"),ru=Symbol.iterator;function kn(t){return t===null||typeof t!="object"?null:(t=ru&&t[ru]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,$l;function Dn(t){if($l===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);$l=e&&e[1]||""}return`
`+$l+t}var Il=!1;function Dl(t,e){if(!t||Il)return"";Il=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Il=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Dn(t):""}function mv(t){switch(t.tag){case 5:return Dn(t.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return t=Dl(t.type,!1),t;case 11:return t=Dl(t.type.render,!1),t;case 1:return t=Dl(t.type,!0),t;default:return""}}function Da(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Os:return"Portal";case za:return"Profiler";case Wo:return"StrictMode";case $a:return"Suspense";case Ia:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Td:return(t.displayName||"Context")+".Consumer";case Ld:return(t._context.displayName||"Context")+".Provider";case Uo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ho:return e=t.displayName||null,e!==null?e:Da(t.type)||"Memo";case Kt:e=t._payload,t=t._init;try{return Da(t(e))}catch{}}return null}function pv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Da(e);case 8:return e===Wo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vv(t){var e=zd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fi(t){t._valueTracker||(t._valueTracker=vv(t))}function $d(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=zd(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Mr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fa(t,e){var s=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function lu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=ls(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Id(t,e){e=e.checked,e!=null&&Ao(t,"checked",e,!1)}function Oa(t,e){Id(t,e);var s=ls(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Va(t,e.type,s):e.hasOwnProperty("defaultValue")&&Va(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function au(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Va(t,e,s){(e!=="number"||Mr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Fn=Array.isArray;function Zs(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+ls(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ba(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ou(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(z(92));if(Fn(s)){if(1<s.length)throw Error(z(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:ls(s)}}function Dd(t,e){var s=ls(e.value),n=ls(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function cu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Aa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oi,Od=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ni(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var An={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gv=["Webkit","ms","Moz","O"];Object.keys(An).forEach(function(t){gv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),An[e]=An[t]})});function Vd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||An.hasOwnProperty(t)&&An[t]?(""+e).trim():e+"px"}function Bd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=Vd(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var yv=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wa(t,e){if(e){if(yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Ua(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ha=null;function Ko(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ka=null,en=null,tn=null;function uu(t){if(t=_i(t)){if(typeof Ka!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ul(e),Ka(t.stateNode,t.type,e))}}function Ad(t){en?tn?tn.push(t):tn=[t]:en=t}function Wd(){if(en){var t=en,e=tn;if(tn=en=null,uu(t),e)for(t=0;t<e.length;t++)uu(e[t])}}function Ud(t,e){return t(e)}function Hd(){}var Fl=!1;function Kd(t,e,s){if(Fl)return t(e,s);Fl=!0;try{return Ud(t,e,s)}finally{Fl=!1,(en!==null||tn!==null)&&(Hd(),Wd())}}function ii(t,e){var s=t.stateNode;if(s===null)return null;var n=ul(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(z(231,e,typeof s));return s}var Ga=!1;if($t)try{var En={};Object.defineProperty(En,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Ga=!1}function xv(t,e,s,n,i,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(h){this.onError(h)}}var Wn=!1,Pr=null,Lr=!1,Xa=null,wv={onError:function(t){Wn=!0,Pr=t}};function Nv(t,e,s,n,i,r,a,o,c){Wn=!1,Pr=null,xv.apply(wv,arguments)}function Sv(t,e,s,n,i,r,a,o,c){if(Nv.apply(this,arguments),Wn){if(Wn){var u=Pr;Wn=!1,Pr=null}else throw Error(z(198));Lr||(Lr=!0,Xa=u)}}function Is(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Gd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hu(t){if(Is(t)!==t)throw Error(z(188))}function bv(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(z(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===s)return hu(i),t;if(r===n)return hu(i),e;r=r.sibling}throw Error(z(188))}if(s.return!==n.return)s=i,n=r;else{for(var a=!1,o=i.child;o;){if(o===s){a=!0,s=i,n=r;break}if(o===n){a=!0,n=i,s=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===s){a=!0,s=r,n=i;break}if(o===n){a=!0,n=r,s=i;break}o=o.sibling}if(!a)throw Error(z(189))}}if(s.alternate!==n)throw Error(z(190))}if(s.tag!==3)throw Error(z(188));return s.stateNode.current===s?t:e}function Xd(t){return t=bv(t),t!==null?Qd(t):null}function Qd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qd(t);if(e!==null)return e;t=t.sibling}return null}var qd=qe.unstable_scheduleCallback,du=qe.unstable_cancelCallback,jv=qe.unstable_shouldYield,Cv=qe.unstable_requestPaint,me=qe.unstable_now,kv=qe.unstable_getCurrentPriorityLevel,Go=qe.unstable_ImmediatePriority,Yd=qe.unstable_UserBlockingPriority,Tr=qe.unstable_NormalPriority,Ev=qe.unstable_LowPriority,Jd=qe.unstable_IdlePriority,ll=null,jt=null;function _v(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ll,t,void 0,(t.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:Lv,Mv=Math.log,Pv=Math.LN2;function Lv(t){return t>>>=0,t===0?32:31-(Mv(t)/Pv|0)|0}var Vi=64,Bi=4194304;function On(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rr(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,r=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~i;o!==0?n=On(o):(r&=a,r!==0&&(n=On(r)))}else a=s&~i,a!==0?n=On(a):r!==0&&(n=On(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-mt(e),i=1<<s,n|=t[s],e&=~i;return n}function Tv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rv(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes;0<r;){var a=31-mt(r),o=1<<a,c=i[a];c===-1?(!(o&s)||o&n)&&(i[a]=Tv(o,e)):c<=e&&(t.expiredLanes|=o),r&=~o}}function Qa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zd(){var t=Vi;return Vi<<=1,!(Vi&4194240)&&(Vi=64),t}function Ol(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function ki(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mt(e),t[e]=s}function zv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-mt(s),r=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~r}}function Xo(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-mt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var J=0;function ef(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tf,Qo,sf,nf,rf,qa=!1,Ai=[],Jt=null,Zt=null,es=null,ri=new Map,li=new Map,Xt=[],$v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(t,e){switch(t){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":ri.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function _n(t,e,s,n,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},e!==null&&(e=_i(e),e!==null&&Qo(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Iv(t,e,s,n,i){switch(e){case"focusin":return Jt=_n(Jt,t,e,s,n,i),!0;case"dragenter":return Zt=_n(Zt,t,e,s,n,i),!0;case"mouseover":return es=_n(es,t,e,s,n,i),!0;case"pointerover":var r=i.pointerId;return ri.set(r,_n(ri.get(r)||null,t,e,s,n,i)),!0;case"gotpointercapture":return r=i.pointerId,li.set(r,_n(li.get(r)||null,t,e,s,n,i)),!0}return!1}function lf(t){var e=xs(t.target);if(e!==null){var s=Is(e);if(s!==null){if(e=s.tag,e===13){if(e=Gd(s),e!==null){t.blockedOn=e,rf(t.priority,function(){sf(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ya(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Ha=n,s.target.dispatchEvent(n),Ha=null}else return e=_i(s),e!==null&&Qo(e),t.blockedOn=s,!1;e.shift()}return!0}function mu(t,e,s){vr(t)&&s.delete(e)}function Dv(){qa=!1,Jt!==null&&vr(Jt)&&(Jt=null),Zt!==null&&vr(Zt)&&(Zt=null),es!==null&&vr(es)&&(es=null),ri.forEach(mu),li.forEach(mu)}function Mn(t,e){t.blockedOn===e&&(t.blockedOn=null,qa||(qa=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,Dv)))}function ai(t){function e(i){return Mn(i,t)}if(0<Ai.length){Mn(Ai[0],t);for(var s=1;s<Ai.length;s++){var n=Ai[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Jt!==null&&Mn(Jt,t),Zt!==null&&Mn(Zt,t),es!==null&&Mn(es,t),ri.forEach(e),li.forEach(e),s=0;s<Xt.length;s++)n=Xt[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Xt.length&&(s=Xt[0],s.blockedOn===null);)lf(s),s.blockedOn===null&&Xt.shift()}var sn=Vt.ReactCurrentBatchConfig,zr=!0;function Fv(t,e,s,n){var i=J,r=sn.transition;sn.transition=null;try{J=1,qo(t,e,s,n)}finally{J=i,sn.transition=r}}function Ov(t,e,s,n){var i=J,r=sn.transition;sn.transition=null;try{J=4,qo(t,e,s,n)}finally{J=i,sn.transition=r}}function qo(t,e,s,n){if(zr){var i=Ya(t,e,s,n);if(i===null)Ql(t,e,n,$r,s),fu(t,n);else if(Iv(i,t,e,s,n))n.stopPropagation();else if(fu(t,n),e&4&&-1<$v.indexOf(t)){for(;i!==null;){var r=_i(i);if(r!==null&&tf(r),r=Ya(t,e,s,n),r===null&&Ql(t,e,n,$r,s),r===i)break;i=r}i!==null&&n.stopPropagation()}else Ql(t,e,n,null,s)}}var $r=null;function Ya(t,e,s,n){if($r=null,t=Ko(n),t=xs(t),t!==null)if(e=Is(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Gd(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $r=t,null}function af(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kv()){case Go:return 1;case Yd:return 4;case Tr:case Ev:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var qt=null,Yo=null,gr=null;function of(){if(gr)return gr;var t,e=Yo,s=e.length,n,i="value"in qt?qt.value:qt.textContent,r=i.length;for(t=0;t<s&&e[t]===i[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===i[r-n];n++);return gr=i.slice(t,1<n?1-n:void 0)}function yr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wi(){return!0}function pu(){return!1}function Je(t){function e(s,n,i,r,a){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Wi:pu,this.isPropagationStopped=pu,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),e}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=Je(gn),Ei=de({},gn,{view:0,detail:0}),Vv=Je(Ei),Vl,Bl,Pn,al=de({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pn&&(Pn&&t.type==="mousemove"?(Vl=t.screenX-Pn.screenX,Bl=t.screenY-Pn.screenY):Bl=Vl=0,Pn=t),Vl)},movementY:function(t){return"movementY"in t?t.movementY:Bl}}),vu=Je(al),Bv=de({},al,{dataTransfer:0}),Av=Je(Bv),Wv=de({},Ei,{relatedTarget:0}),Al=Je(Wv),Uv=de({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Hv=Je(Uv),Kv=de({},gn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gv=Je(Kv),Xv=de({},gn,{data:0}),gu=Je(Xv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yv[t])?!!e[t]:!1}function Zo(){return Jv}var Zv=de({},Ei,{key:function(t){if(t.key){var e=Qv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(t){return t.type==="keypress"?yr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eg=Je(Zv),tg=de({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=Je(tg),sg=de({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),ng=Je(sg),ig=de({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),rg=Je(ig),lg=de({},al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ag=Je(lg),og=[9,13,27,32],ec=$t&&"CompositionEvent"in window,Un=null;$t&&"documentMode"in document&&(Un=document.documentMode);var cg=$t&&"TextEvent"in window&&!Un,cf=$t&&(!ec||Un&&8<Un&&11>=Un),xu=" ",wu=!1;function uf(t,e){switch(t){case"keyup":return og.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function ug(t,e){switch(t){case"compositionend":return hf(e);case"keypress":return e.which!==32?null:(wu=!0,xu);case"textInput":return t=e.data,t===xu&&wu?null:t;default:return null}}function hg(t,e){if(Bs)return t==="compositionend"||!ec&&uf(t,e)?(t=of(),gr=Yo=qt=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cf&&e.locale!=="ko"?null:e.data;default:return null}}var dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dg[t.type]:e==="textarea"}function df(t,e,s,n){Ad(n),e=Ir(e,"onChange"),0<e.length&&(s=new Jo("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Hn=null,oi=null;function fg(t){bf(t,0)}function ol(t){var e=Us(t);if($d(e))return t}function mg(t,e){if(t==="change")return e}var ff=!1;if($t){var Wl;if($t){var Ul="oninput"in document;if(!Ul){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),Ul=typeof Su.oninput=="function"}Wl=Ul}else Wl=!1;ff=Wl&&(!document.documentMode||9<document.documentMode)}function bu(){Hn&&(Hn.detachEvent("onpropertychange",mf),oi=Hn=null)}function mf(t){if(t.propertyName==="value"&&ol(oi)){var e=[];df(e,oi,t,Ko(t)),Kd(fg,e)}}function pg(t,e,s){t==="focusin"?(bu(),Hn=e,oi=s,Hn.attachEvent("onpropertychange",mf)):t==="focusout"&&bu()}function vg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(oi)}function gg(t,e){if(t==="click")return ol(e)}function yg(t,e){if(t==="input"||t==="change")return ol(e)}function xg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:xg;function ci(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Ra.call(e,i)||!vt(t[i],e[i]))return!1}return!0}function ju(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cu(t,e){var s=ju(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ju(s)}}function pf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vf(){for(var t=window,e=Mr();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Mr(t.document)}return e}function tc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wg(t){var e=vf(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&pf(s.ownerDocument.documentElement,s)){if(n!==null&&tc(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!t.extend&&r>n&&(i=n,n=r,r=i),i=Cu(s,r);var a=Cu(s,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),r>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ng=$t&&"documentMode"in document&&11>=document.documentMode,As=null,Ja=null,Kn=null,Za=!1;function ku(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Za||As==null||As!==Mr(n)||(n=As,"selectionStart"in n&&tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kn&&ci(Kn,n)||(Kn=n,n=Ir(Ja,"onSelect"),0<n.length&&(e=new Jo("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=As)))}function Ui(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Ws={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionend:Ui("Transition","TransitionEnd")},Hl={},gf={};$t&&(gf=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function cl(t){if(Hl[t])return Hl[t];if(!Ws[t])return t;var e=Ws[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in gf)return Hl[t]=e[s];return t}var yf=cl("animationend"),xf=cl("animationiteration"),wf=cl("animationstart"),Nf=cl("transitionend"),Sf=new Map,Eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,e){Sf.set(t,e),$s(e,[t])}for(var Kl=0;Kl<Eu.length;Kl++){var Gl=Eu[Kl],Sg=Gl.toLowerCase(),bg=Gl[0].toUpperCase()+Gl.slice(1);cs(Sg,"on"+bg)}cs(yf,"onAnimationEnd");cs(xf,"onAnimationIteration");cs(wf,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(Nf,"onTransitionEnd");an("onMouseEnter",["mouseout","mouseover"]);an("onMouseLeave",["mouseout","mouseover"]);an("onPointerEnter",["pointerout","pointerover"]);an("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vn));function _u(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,Sv(n,e,void 0,t),t.currentTarget=null}function bf(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&i.isPropagationStopped())break e;_u(i,o,u),r=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&i.isPropagationStopped())break e;_u(i,o,u),r=c}}}if(Lr)throw t=Xa,Lr=!1,Xa=null,t}function se(t,e){var s=e[io];s===void 0&&(s=e[io]=new Set);var n=t+"__bubble";s.has(n)||(jf(e,t,2,!1),s.add(n))}function Xl(t,e,s){var n=0;e&&(n|=4),jf(s,t,n,e)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function ui(t){if(!t[Hi]){t[Hi]=!0,Pd.forEach(function(s){s!=="selectionchange"&&(jg.has(s)||Xl(s,!1,t),Xl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hi]||(e[Hi]=!0,Xl("selectionchange",!1,e))}}function jf(t,e,s,n){switch(af(e)){case 1:var i=Fv;break;case 4:i=Ov;break;default:i=qo}s=i.bind(null,e,s,t),i=void 0,!Ga||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Ql(t,e,s,n,i){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=xs(o),a===null)return;if(c=a.tag,c===5||c===6){n=r=a;continue e}o=o.parentNode}}n=n.return}Kd(function(){var u=r,h=Ko(s),d=[];e:{var f=Sf.get(t);if(f!==void 0){var v=Jo,y=t;switch(t){case"keypress":if(yr(s)===0)break e;case"keydown":case"keyup":v=eg;break;case"focusin":y="focus",v=Al;break;case"focusout":y="blur",v=Al;break;case"beforeblur":case"afterblur":v=Al;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ng;break;case yf:case xf:case wf:v=Hv;break;case Nf:v=rg;break;case"scroll":v=Vv;break;case"wheel":v=ag;break;case"copy":case"cut":case"paste":v=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=yu}var g=(e&4)!==0,S=!g&&t==="scroll",p=g?f!==null?f+"Capture":null:f;g=[];for(var m=u,x;m!==null;){x=m;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,p!==null&&(N=ii(m,p),N!=null&&g.push(hi(m,N,x)))),S)break;m=m.return}0<g.length&&(f=new v(f,y,null,s,h),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&s!==Ha&&(y=s.relatedTarget||s.fromElement)&&(xs(y)||y[It]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=s.relatedTarget||s.toElement,v=u,y=y?xs(y):null,y!==null&&(S=Is(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(g=vu,N="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=yu,N="onPointerLeave",p="onPointerEnter",m="pointer"),S=v==null?f:Us(v),x=y==null?f:Us(y),f=new g(N,m+"leave",v,s,h),f.target=S,f.relatedTarget=x,N=null,xs(h)===u&&(g=new g(p,m+"enter",y,s,h),g.target=x,g.relatedTarget=S,N=g),S=N,v&&y)t:{for(g=v,p=y,m=0,x=g;x;x=Ds(x))m++;for(x=0,N=p;N;N=Ds(N))x++;for(;0<m-x;)g=Ds(g),m--;for(;0<x-m;)p=Ds(p),x--;for(;m--;){if(g===p||p!==null&&g===p.alternate)break t;g=Ds(g),p=Ds(p)}g=null}else g=null;v!==null&&Mu(d,f,v,g,!1),y!==null&&S!==null&&Mu(d,S,y,g,!0)}}e:{if(f=u?Us(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var k=mg;else if(Nu(f))if(ff)k=yg;else{k=vg;var E=pg}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=gg);if(k&&(k=k(t,u))){df(d,k,s,h);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Va(f,"number",f.value)}switch(E=u?Us(u):window,t){case"focusin":(Nu(E)||E.contentEditable==="true")&&(As=E,Ja=u,Kn=null);break;case"focusout":Kn=Ja=As=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,ku(d,s,h);break;case"selectionchange":if(Ng)break;case"keydown":case"keyup":ku(d,s,h)}var b;if(ec)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Bs?uf(t,s)&&(C="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(cf&&s.locale!=="ko"&&(Bs||C!=="onCompositionStart"?C==="onCompositionEnd"&&Bs&&(b=of()):(qt=h,Yo="value"in qt?qt.value:qt.textContent,Bs=!0)),E=Ir(u,C),0<E.length&&(C=new gu(C,t,null,s,h),d.push({event:C,listeners:E}),b?C.data=b:(b=hf(s),b!==null&&(C.data=b)))),(b=cg?ug(t,s):hg(t,s))&&(u=Ir(u,"onBeforeInput"),0<u.length&&(h=new gu("onBeforeInput","beforeinput",null,s,h),d.push({event:h,listeners:u}),h.data=b))}bf(d,e)})}function hi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Ir(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=ii(t,s),r!=null&&n.unshift(hi(t,r,i)),r=ii(t,e),r!=null&&n.push(hi(t,r,i))),t=t.return}return n}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mu(t,e,s,n,i){for(var r=e._reactName,a=[];s!==null&&s!==n;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=ii(s,r),c!=null&&a.unshift(hi(s,c,o))):i||(c=ii(s,r),c!=null&&a.push(hi(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var Cg=/\r\n?/g,kg=/\u0000|\uFFFD/g;function Pu(t){return(typeof t=="string"?t:""+t).replace(Cg,`
`).replace(kg,"")}function Ki(t,e,s){if(e=Pu(e),Pu(t)!==e&&s)throw Error(z(425))}function Dr(){}var eo=null,to=null;function so(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var no=typeof setTimeout=="function"?setTimeout:void 0,Eg=typeof clearTimeout=="function"?clearTimeout:void 0,Lu=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof Lu<"u"?function(t){return Lu.resolve(null).then(t).catch(Mg)}:no;function Mg(t){setTimeout(function(){throw t})}function ql(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),ai(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);ai(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var yn=Math.random().toString(36).slice(2),St="__reactFiber$"+yn,di="__reactProps$"+yn,It="__reactContainer$"+yn,io="__reactEvents$"+yn,Pg="__reactListeners$"+yn,Lg="__reactHandles$"+yn;function xs(t){var e=t[St];if(e)return e;for(var s=t.parentNode;s;){if(e=s[It]||s[St]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Tu(t);t!==null;){if(s=t[St])return s;t=Tu(t)}return e}t=s,s=t.parentNode}return null}function _i(t){return t=t[St]||t[It],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ul(t){return t[di]||null}var ro=[],Hs=-1;function us(t){return{current:t}}function ie(t){0>Hs||(t.current=ro[Hs],ro[Hs]=null,Hs--)}function te(t,e){Hs++,ro[Hs]=t.current,t.current=e}var as={},Le=us(as),Ae=us(!1),Cs=as;function on(t,e){var s=t.type.contextTypes;if(!s)return as;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in s)i[r]=e[r];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function We(t){return t=t.childContextTypes,t!=null}function Fr(){ie(Ae),ie(Le)}function Ru(t,e,s){if(Le.current!==as)throw Error(z(168));te(Le,e),te(Ae,s)}function Cf(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(z(108,pv(t)||"Unknown",i));return de({},s,n)}function Or(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||as,Cs=Le.current,te(Le,t),te(Ae,Ae.current),!0}function zu(t,e,s){var n=t.stateNode;if(!n)throw Error(z(169));s?(t=Cf(t,e,Cs),n.__reactInternalMemoizedMergedChildContext=t,ie(Ae),ie(Le),te(Le,t)):ie(Ae),te(Ae,s)}var _t=null,hl=!1,Yl=!1;function kf(t){_t===null?_t=[t]:_t.push(t)}function Tg(t){hl=!0,kf(t)}function hs(){if(!Yl&&_t!==null){Yl=!0;var t=0,e=J;try{var s=_t;for(J=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}_t=null,hl=!1}catch(i){throw _t!==null&&(_t=_t.slice(t+1)),qd(Go,hs),i}finally{J=e,Yl=!1}}return null}var Ks=[],Gs=0,Vr=null,Br=0,st=[],nt=0,ks=null,Mt=1,Pt="";function gs(t,e){Ks[Gs++]=Br,Ks[Gs++]=Vr,Vr=t,Br=e}function Ef(t,e,s){st[nt++]=Mt,st[nt++]=Pt,st[nt++]=ks,ks=t;var n=Mt;t=Pt;var i=32-mt(n)-1;n&=~(1<<i),s+=1;var r=32-mt(e)+i;if(30<r){var a=i-i%5;r=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Mt=1<<32-mt(e)+i|s<<i|n,Pt=r+t}else Mt=1<<r|s<<i|n,Pt=t}function sc(t){t.return!==null&&(gs(t,1),Ef(t,1,0))}function nc(t){for(;t===Vr;)Vr=Ks[--Gs],Ks[Gs]=null,Br=Ks[--Gs],Ks[Gs]=null;for(;t===ks;)ks=st[--nt],st[nt]=null,Pt=st[--nt],st[nt]=null,Mt=st[--nt],st[nt]=null}var Qe=null,Xe=null,le=!1,ft=null;function _f(t,e){var s=it(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function $u(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Xe=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Xe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=ks!==null?{id:Mt,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=it(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Qe=t,Xe=null,!0):!1;default:return!1}}function lo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ao(t){if(le){var e=Xe;if(e){var s=e;if(!$u(t,e)){if(lo(t))throw Error(z(418));e=ts(s.nextSibling);var n=Qe;e&&$u(t,e)?_f(n,s):(t.flags=t.flags&-4097|2,le=!1,Qe=t)}}else{if(lo(t))throw Error(z(418));t.flags=t.flags&-4097|2,le=!1,Qe=t}}}function Iu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function Gi(t){if(t!==Qe)return!1;if(!le)return Iu(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!so(t.type,t.memoizedProps)),e&&(e=Xe)){if(lo(t))throw Mf(),Error(z(418));for(;e;)_f(t,e),e=ts(e.nextSibling)}if(Iu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Xe=ts(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Xe=null}}else Xe=Qe?ts(t.stateNode.nextSibling):null;return!0}function Mf(){for(var t=Xe;t;)t=ts(t.nextSibling)}function cn(){Xe=Qe=null,le=!1}function ic(t){ft===null?ft=[t]:ft.push(t)}var Rg=Vt.ReactCurrentBatchConfig;function Ln(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(z(309));var n=s.stateNode}if(!n)throw Error(z(147,t));var i=n,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof t!="string")throw Error(z(284));if(!s._owner)throw Error(z(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Du(t){var e=t._init;return e(t._payload)}function Pf(t){function e(p,m){if(t){var x=p.deletions;x===null?(p.deletions=[m],p.flags|=16):x.push(m)}}function s(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=rs(p,m),p.index=0,p.sibling=null,p}function r(p,m,x){return p.index=x,t?(x=p.alternate,x!==null?(x=x.index,x<m?(p.flags|=2,m):x):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,x,N){return m===null||m.tag!==6?(m=ia(x,p.mode,N),m.return=p,m):(m=i(m,x),m.return=p,m)}function c(p,m,x,N){var k=x.type;return k===Vs?h(p,m,x.props.children,N,x.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kt&&Du(k)===m.type)?(N=i(m,x.props),N.ref=Ln(p,m,x),N.return=p,N):(N=Cr(x.type,x.key,x.props,null,p.mode,N),N.ref=Ln(p,m,x),N.return=p,N)}function u(p,m,x,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=ra(x,p.mode,N),m.return=p,m):(m=i(m,x.children||[]),m.return=p,m)}function h(p,m,x,N,k){return m===null||m.tag!==7?(m=bs(x,p.mode,N,k),m.return=p,m):(m=i(m,x),m.return=p,m)}function d(p,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ia(""+m,p.mode,x),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Di:return x=Cr(m.type,m.key,m.props,null,p.mode,x),x.ref=Ln(p,null,m),x.return=p,x;case Os:return m=ra(m,p.mode,x),m.return=p,m;case Kt:var N=m._init;return d(p,N(m._payload),x)}if(Fn(m)||kn(m))return m=bs(m,p.mode,x,null),m.return=p,m;Xi(p,m)}return null}function f(p,m,x,N){var k=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:o(p,m,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Di:return x.key===k?c(p,m,x,N):null;case Os:return x.key===k?u(p,m,x,N):null;case Kt:return k=x._init,f(p,m,k(x._payload),N)}if(Fn(x)||kn(x))return k!==null?null:h(p,m,x,N,null);Xi(p,x)}return null}function v(p,m,x,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(x)||null,o(m,p,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Di:return p=p.get(N.key===null?x:N.key)||null,c(m,p,N,k);case Os:return p=p.get(N.key===null?x:N.key)||null,u(m,p,N,k);case Kt:var E=N._init;return v(p,m,x,E(N._payload),k)}if(Fn(N)||kn(N))return p=p.get(x)||null,h(m,p,N,k,null);Xi(m,N)}return null}function y(p,m,x,N){for(var k=null,E=null,b=m,C=m=0,M=null;b!==null&&C<x.length;C++){b.index>C?(M=b,b=null):M=b.sibling;var j=f(p,b,x[C],N);if(j===null){b===null&&(b=M);break}t&&b&&j.alternate===null&&e(p,b),m=r(j,m,C),E===null?k=j:E.sibling=j,E=j,b=M}if(C===x.length)return s(p,b),le&&gs(p,C),k;if(b===null){for(;C<x.length;C++)b=d(p,x[C],N),b!==null&&(m=r(b,m,C),E===null?k=b:E.sibling=b,E=b);return le&&gs(p,C),k}for(b=n(p,b);C<x.length;C++)M=v(b,p,C,x[C],N),M!==null&&(t&&M.alternate!==null&&b.delete(M.key===null?C:M.key),m=r(M,m,C),E===null?k=M:E.sibling=M,E=M);return t&&b.forEach(function(L){return e(p,L)}),le&&gs(p,C),k}function g(p,m,x,N){var k=kn(x);if(typeof k!="function")throw Error(z(150));if(x=k.call(x),x==null)throw Error(z(151));for(var E=k=null,b=m,C=m=0,M=null,j=x.next();b!==null&&!j.done;C++,j=x.next()){b.index>C?(M=b,b=null):M=b.sibling;var L=f(p,b,j.value,N);if(L===null){b===null&&(b=M);break}t&&b&&L.alternate===null&&e(p,b),m=r(L,m,C),E===null?k=L:E.sibling=L,E=L,b=M}if(j.done)return s(p,b),le&&gs(p,C),k;if(b===null){for(;!j.done;C++,j=x.next())j=d(p,j.value,N),j!==null&&(m=r(j,m,C),E===null?k=j:E.sibling=j,E=j);return le&&gs(p,C),k}for(b=n(p,b);!j.done;C++,j=x.next())j=v(b,p,C,j.value,N),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?C:j.key),m=r(j,m,C),E===null?k=j:E.sibling=j,E=j);return t&&b.forEach(function(T){return e(p,T)}),le&&gs(p,C),k}function S(p,m,x,N){if(typeof x=="object"&&x!==null&&x.type===Vs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Di:e:{for(var k=x.key,E=m;E!==null;){if(E.key===k){if(k=x.type,k===Vs){if(E.tag===7){s(p,E.sibling),m=i(E,x.props.children),m.return=p,p=m;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kt&&Du(k)===E.type){s(p,E.sibling),m=i(E,x.props),m.ref=Ln(p,E,x),m.return=p,p=m;break e}s(p,E);break}else e(p,E);E=E.sibling}x.type===Vs?(m=bs(x.props.children,p.mode,N,x.key),m.return=p,p=m):(N=Cr(x.type,x.key,x.props,null,p.mode,N),N.ref=Ln(p,m,x),N.return=p,p=N)}return a(p);case Os:e:{for(E=x.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){s(p,m.sibling),m=i(m,x.children||[]),m.return=p,p=m;break e}else{s(p,m);break}else e(p,m);m=m.sibling}m=ra(x,p.mode,N),m.return=p,p=m}return a(p);case Kt:return E=x._init,S(p,m,E(x._payload),N)}if(Fn(x))return y(p,m,x,N);if(kn(x))return g(p,m,x,N);Xi(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(s(p,m.sibling),m=i(m,x),m.return=p,p=m):(s(p,m),m=ia(x,p.mode,N),m.return=p,p=m),a(p)):s(p,m)}return S}var un=Pf(!0),Lf=Pf(!1),Ar=us(null),Wr=null,Xs=null,rc=null;function lc(){rc=Xs=Wr=null}function ac(t){var e=Ar.current;ie(Ar),t._currentValue=e}function oo(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function nn(t,e){Wr=t,rc=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Be=!0),t.firstContext=null)}function lt(t){var e=t._currentValue;if(rc!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(Wr===null)throw Error(z(308));Xs=t,Wr.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var ws=null;function oc(t){ws===null?ws=[t]:ws.push(t)}function Tf(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,oc(e)):(s.next=i.next,i.next=s),e.interleaved=s,Dt(t,n)}function Dt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Gt=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,q&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Dt(t,s)}return i=n.interleaved,i===null?(e.next=e,oc(n)):(e.next=i.next,i.next=e),n.interleaved=e,Dt(t,s)}function xr(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Xo(t,s)}}function Fu(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};r===null?i=r=a:r=r.next=a,s=s.next}while(s!==null);r===null?i=r=e:r=r.next=e}else i=r=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ur(t,e,s,n){var i=t.updateQueue;Gt=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;a=0,h=u=c=null,o=r;do{var f=o.lane,v=o.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,g=o;switch(f=e,v=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(v,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(v,d,f):y,f==null)break e;d=de({},d,f);break e;case 2:Gt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else v={eventTime:v,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);_s|=a,t.lanes=a,t.memoizedState=d}}function Ou(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(z(191,i));i.call(n)}}}var Mi={},Ct=us(Mi),fi=us(Mi),mi=us(Mi);function Ns(t){if(t===Mi)throw Error(z(174));return t}function uc(t,e){switch(te(mi,e),te(fi,t),te(Ct,Mi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Aa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Aa(e,t)}ie(Ct),te(Ct,e)}function hn(){ie(Ct),ie(fi),ie(mi)}function zf(t){Ns(mi.current);var e=Ns(Ct.current),s=Aa(e,t.type);e!==s&&(te(fi,t),te(Ct,s))}function hc(t){fi.current===t&&(ie(Ct),ie(fi))}var ue=us(0);function Hr(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jl=[];function dc(){for(var t=0;t<Jl.length;t++)Jl[t]._workInProgressVersionPrimary=null;Jl.length=0}var wr=Vt.ReactCurrentDispatcher,Zl=Vt.ReactCurrentBatchConfig,Es=0,he=null,xe=null,Ne=null,Kr=!1,Gn=!1,pi=0,zg=0;function _e(){throw Error(z(321))}function fc(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!vt(t[s],e[s]))return!1;return!0}function mc(t,e,s,n,i,r){if(Es=r,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wr.current=t===null||t.memoizedState===null?Fg:Og,t=s(n,i),Gn){r=0;do{if(Gn=!1,pi=0,25<=r)throw Error(z(301));r+=1,Ne=xe=null,e.updateQueue=null,wr.current=Vg,t=s(n,i)}while(Gn)}if(wr.current=Gr,e=xe!==null&&xe.next!==null,Es=0,Ne=xe=he=null,Kr=!1,e)throw Error(z(300));return t}function pc(){var t=pi!==0;return pi=0,t}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function at(){if(xe===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=xe.next;var e=Ne===null?he.memoizedState:Ne.next;if(e!==null)Ne=e,xe=t;else{if(t===null)throw Error(z(310));xe=t,t={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function vi(t,e){return typeof e=="function"?e(t):e}function ea(t){var e=at(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=xe,i=n.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}n.baseQueue=i=r,s.pending=null}if(i!==null){r=i.next,n=n.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((Es&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=n):c=c.next=d,he.lanes|=h,_s|=h}u=u.next}while(u!==null&&u!==r);c===null?a=n:c.next=o,vt(n,e.memoizedState)||(Be=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do r=i.lane,he.lanes|=r,_s|=r,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function ta(t){var e=at(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,r=e.memoizedState;if(i!==null){s.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);vt(r,e.memoizedState)||(Be=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),s.lastRenderedState=r}return[r,n]}function $f(){}function If(t,e){var s=he,n=at(),i=e(),r=!vt(n.memoizedState,i);if(r&&(n.memoizedState=i,Be=!0),n=n.queue,vc(Of.bind(null,s,n,t),[t]),n.getSnapshot!==e||r||Ne!==null&&Ne.memoizedState.tag&1){if(s.flags|=2048,gi(9,Ff.bind(null,s,n,i,e),void 0,null),Se===null)throw Error(z(349));Es&30||Df(s,e,i)}return i}function Df(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Ff(t,e,s,n){e.value=s,e.getSnapshot=n,Vf(e)&&Bf(t)}function Of(t,e,s){return s(function(){Vf(e)&&Bf(t)})}function Vf(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!vt(t,s)}catch{return!0}}function Bf(t){var e=Dt(t,1);e!==null&&pt(e,t,1,-1)}function Vu(t){var e=Nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},e.queue=t,t=t.dispatch=Dg.bind(null,he,t),[e.memoizedState,t]}function gi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Af(){return at().memoizedState}function Nr(t,e,s,n){var i=Nt();he.flags|=t,i.memoizedState=gi(1|e,s,void 0,n===void 0?null:n)}function dl(t,e,s,n){var i=at();n=n===void 0?null:n;var r=void 0;if(xe!==null){var a=xe.memoizedState;if(r=a.destroy,n!==null&&fc(n,a.deps)){i.memoizedState=gi(e,s,r,n);return}}he.flags|=t,i.memoizedState=gi(1|e,s,r,n)}function Bu(t,e){return Nr(8390656,8,t,e)}function vc(t,e){return dl(2048,8,t,e)}function Wf(t,e){return dl(4,2,t,e)}function Uf(t,e){return dl(4,4,t,e)}function Hf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kf(t,e,s){return s=s!=null?s.concat([t]):null,dl(4,4,Hf.bind(null,e,t),s)}function gc(){}function Gf(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&fc(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Xf(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&fc(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Qf(t,e,s){return Es&21?(vt(s,e)||(s=Zd(),he.lanes|=s,_s|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Be=!0),t.memoizedState=s)}function $g(t,e){var s=J;J=s!==0&&4>s?s:4,t(!0);var n=Zl.transition;Zl.transition={};try{t(!1),e()}finally{J=s,Zl.transition=n}}function qf(){return at().memoizedState}function Ig(t,e,s){var n=is(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Yf(t))Jf(e,s);else if(s=Tf(t,e,s,n),s!==null){var i=$e();pt(s,t,n,i),Zf(s,e,n)}}function Dg(t,e,s){var n=is(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yf(t))Jf(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,s);if(i.hasEagerState=!0,i.eagerState=o,vt(o,a)){var c=e.interleaved;c===null?(i.next=i,oc(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=Tf(t,e,i,n),s!==null&&(i=$e(),pt(s,t,n,i),Zf(s,e,n))}}function Yf(t){var e=t.alternate;return t===he||e!==null&&e===he}function Jf(t,e){Gn=Kr=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Zf(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Xo(t,s)}}var Gr={readContext:lt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Fg={readContext:lt,useCallback:function(t,e){return Nt().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:Bu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Nr(4194308,4,Hf.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Nr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nr(4,2,t,e)},useMemo:function(t,e){var s=Nt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Nt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ig.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=Nt();return t={current:t},e.memoizedState=t},useState:Vu,useDebugValue:gc,useDeferredValue:function(t){return Nt().memoizedState=t},useTransition:function(){var t=Vu(!1),e=t[0];return t=$g.bind(null,t[1]),Nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=he,i=Nt();if(le){if(s===void 0)throw Error(z(407));s=s()}else{if(s=e(),Se===null)throw Error(z(349));Es&30||Df(n,e,s)}i.memoizedState=s;var r={value:s,getSnapshot:e};return i.queue=r,Bu(Of.bind(null,n,r,t),[t]),n.flags|=2048,gi(9,Ff.bind(null,n,r,s,e),void 0,null),s},useId:function(){var t=Nt(),e=Se.identifierPrefix;if(le){var s=Pt,n=Mt;s=(n&~(1<<32-mt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=pi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=zg++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Og={readContext:lt,useCallback:Gf,useContext:lt,useEffect:vc,useImperativeHandle:Kf,useInsertionEffect:Wf,useLayoutEffect:Uf,useMemo:Xf,useReducer:ea,useRef:Af,useState:function(){return ea(vi)},useDebugValue:gc,useDeferredValue:function(t){var e=at();return Qf(e,xe.memoizedState,t)},useTransition:function(){var t=ea(vi)[0],e=at().memoizedState;return[t,e]},useMutableSource:$f,useSyncExternalStore:If,useId:qf,unstable_isNewReconciler:!1},Vg={readContext:lt,useCallback:Gf,useContext:lt,useEffect:vc,useImperativeHandle:Kf,useInsertionEffect:Wf,useLayoutEffect:Uf,useMemo:Xf,useReducer:ta,useRef:Af,useState:function(){return ta(vi)},useDebugValue:gc,useDeferredValue:function(t){var e=at();return xe===null?e.memoizedState=t:Qf(e,xe.memoizedState,t)},useTransition:function(){var t=ta(vi)[0],e=at().memoizedState;return[t,e]},useMutableSource:$f,useSyncExternalStore:If,useId:qf,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function co(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:de({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var fl={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=$e(),i=is(t),r=Rt(n,i);r.payload=e,s!=null&&(r.callback=s),e=ss(t,r,i),e!==null&&(pt(e,t,i,n),xr(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=$e(),i=is(t),r=Rt(n,i);r.tag=1,r.payload=e,s!=null&&(r.callback=s),e=ss(t,r,i),e!==null&&(pt(e,t,i,n),xr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=$e(),n=is(t),i=Rt(s,n);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,n),e!==null&&(pt(e,t,n,s),xr(e,t,n))}};function Au(t,e,s,n,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,r,a):e.prototype&&e.prototype.isPureReactComponent?!ci(s,n)||!ci(i,r):!0}function em(t,e,s){var n=!1,i=as,r=e.contextType;return typeof r=="object"&&r!==null?r=lt(r):(i=We(e)?Cs:Le.current,n=e.contextTypes,r=(n=n!=null)?on(t,i):as),e=new e(s,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function Wu(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&fl.enqueueReplaceState(e,e.state,null)}function uo(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},cc(t);var r=e.contextType;typeof r=="object"&&r!==null?i.context=lt(r):(r=We(e)?Cs:Le.current,i.context=on(t,r)),i.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(co(t,e,r,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fl.enqueueReplaceState(i,i.state,null),Ur(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dn(t,e){try{var s="",n=e;do s+=mv(n),n=n.return;while(n);var i=s}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:i,digest:null}}function sa(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function ho(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function tm(t,e,s){s=Rt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Qr||(Qr=!0,So=n),ho(t,e)},s}function sm(t,e,s){s=Rt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){ho(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(s.callback=function(){ho(t,e),typeof n!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Uu(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Bg;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=t0.bind(null,t,e,s),e.then(t,t))}function Hu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ku(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Rt(-1,1),e.tag=2,ss(s,e,1))),s.lanes|=1),t)}var Ag=Vt.ReactCurrentOwner,Be=!1;function Re(t,e,s,n){e.child=t===null?Lf(e,null,s,n):un(e,t.child,s,n)}function Gu(t,e,s,n,i){s=s.render;var r=e.ref;return nn(e,i),n=mc(t,e,s,n,r,i),s=pc(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ft(t,e,i)):(le&&s&&sc(e),e.flags|=1,Re(t,e,n,i),e.child)}function Xu(t,e,s,n,i){if(t===null){var r=s.type;return typeof r=="function"&&!Cc(r)&&r.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=r,nm(t,e,r,n,i)):(t=Cr(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&i)){var a=r.memoizedProps;if(s=s.compare,s=s!==null?s:ci,s(a,n)&&t.ref===e.ref)return Ft(t,e,i)}return e.flags|=1,t=rs(r,n),t.ref=e.ref,t.return=e,e.child=t}function nm(t,e,s,n,i){if(t!==null){var r=t.memoizedProps;if(ci(r,n)&&t.ref===e.ref)if(Be=!1,e.pendingProps=n=r,(t.lanes&i)!==0)t.flags&131072&&(Be=!0);else return e.lanes=t.lanes,Ft(t,e,i)}return fo(t,e,s,n,i)}function im(t,e,s){var n=e.pendingProps,i=n.children,r=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(qs,Ge),Ge|=s;else{if(!(s&1073741824))return t=r!==null?r.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(qs,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:s,te(qs,Ge),Ge|=n}else r!==null?(n=r.baseLanes|s,e.memoizedState=null):n=s,te(qs,Ge),Ge|=n;return Re(t,e,i,s),e.child}function rm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function fo(t,e,s,n,i){var r=We(s)?Cs:Le.current;return r=on(e,r),nn(e,i),s=mc(t,e,s,n,r,i),n=pc(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ft(t,e,i)):(le&&n&&sc(e),e.flags|=1,Re(t,e,s,i),e.child)}function Qu(t,e,s,n,i){if(We(s)){var r=!0;Or(e)}else r=!1;if(nn(e,i),e.stateNode===null)Sr(t,e),em(e,s,n),uo(e,s,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=We(s)?Cs:Le.current,u=on(e,u));var h=s.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Wu(e,a,n,u),Gt=!1;var f=e.memoizedState;a.state=f,Ur(e,n,a,i),c=e.memoizedState,o!==n||f!==c||Ae.current||Gt?(typeof h=="function"&&(co(e,s,h,n),c=e.memoizedState),(o=Gt||Au(e,s,o,n,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Rf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ht(e.type,o),a.props=u,d=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=lt(c):(c=We(s)?Cs:Le.current,c=on(e,c));var v=s.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&Wu(e,a,n,c),Gt=!1,f=e.memoizedState,a.state=f,Ur(e,n,a,i);var y=e.memoizedState;o!==d||f!==y||Ae.current||Gt?(typeof v=="function"&&(co(e,s,v,n),y=e.memoizedState),(u=Gt||Au(e,s,u,n,f,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return mo(t,e,s,n,r,i)}function mo(t,e,s,n,i,r){rm(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&zu(e,s,!1),Ft(t,e,r);n=e.stateNode,Ag.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=un(e,t.child,null,r),e.child=un(e,null,o,r)):Re(t,e,o,r),e.memoizedState=n.state,i&&zu(e,s,!0),e.child}function lm(t){var e=t.stateNode;e.pendingContext?Ru(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ru(t,e.context,!1),uc(t,e.containerInfo)}function qu(t,e,s,n,i){return cn(),ic(i),e.flags|=256,Re(t,e,s,n),e.child}var po={dehydrated:null,treeContext:null,retryLane:0};function vo(t){return{baseLanes:t,cachePool:null,transitions:null}}function am(t,e,s){var n=e.pendingProps,i=ue.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),te(ue,i&1),t===null)return ao(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,r?(n=e.mode,r=e.child,a={mode:"hidden",children:a},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=vl(a,n,0,null),t=bs(t,n,s,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=vo(s),e.memoizedState=po,t):yc(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Wg(t,e,a,n,o,i,s);if(r){r=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=rs(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=rs(o,r):(r=bs(r,a,s,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,a=t.child.memoizedState,a=a===null?vo(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=t.childLanes&~s,e.memoizedState=po,n}return r=t.child,t=r.sibling,n=rs(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function yc(t,e){return e=vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qi(t,e,s,n){return n!==null&&ic(n),un(e,t.child,null,s),t=yc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wg(t,e,s,n,i,r,a){if(s)return e.flags&256?(e.flags&=-257,n=sa(Error(z(422))),Qi(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=n.fallback,i=e.mode,n=vl({mode:"visible",children:n.children},i,0,null),r=bs(r,i,a,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&un(e,t.child,null,a),e.child.memoizedState=vo(a),e.memoizedState=po,r);if(!(e.mode&1))return Qi(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,r=Error(z(419)),n=sa(r,n,void 0),Qi(t,e,a,n)}if(o=(a&t.childLanes)!==0,Be||o){if(n=Se,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Dt(t,i),pt(n,t,i,-1))}return jc(),n=sa(Error(z(421))),Qi(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s0.bind(null,t),i._reactRetry=e,null):(t=r.treeContext,Xe=ts(i.nextSibling),Qe=e,le=!0,ft=null,t!==null&&(st[nt++]=Mt,st[nt++]=Pt,st[nt++]=ks,Mt=t.id,Pt=t.overflow,ks=e),e=yc(e,n.children),e.flags|=4096,e)}function Yu(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),oo(t.return,e,s)}function na(t,e,s,n,i){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=s,r.tailMode=i)}function om(t,e,s){var n=e.pendingProps,i=n.revealOrder,r=n.tail;if(Re(t,e,n.children,s),n=ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yu(t,s,e);else if(t.tag===19)Yu(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(te(ue,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&Hr(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),na(e,!1,i,s,r);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hr(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}na(e,!0,s,null,r);break;case"together":na(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ft(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,s=rs(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=rs(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Ug(t,e,s){switch(e.tag){case 3:lm(e),cn();break;case 5:zf(e);break;case 1:We(e.type)&&Or(e);break;case 4:uc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;te(Ar,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(te(ue,ue.current&1),e.flags|=128,null):s&e.child.childLanes?am(t,e,s):(te(ue,ue.current&1),t=Ft(t,e,s),t!==null?t.sibling:null);te(ue,ue.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return om(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(ue,ue.current),n)break;return null;case 22:case 23:return e.lanes=0,im(t,e,s)}return Ft(t,e,s)}var cm,go,um,hm;cm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};go=function(){};um=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ns(Ct.current);var r=null;switch(s){case"input":i=Fa(t,i),n=Fa(t,n),r=[];break;case"select":i=de({},i,{value:void 0}),n=de({},n,{value:void 0}),r=[];break;case"textarea":i=Ba(t,i),n=Ba(t,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Dr)}Wa(s,n);var a;s=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(si.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(r||(r=[]),r.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(si.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",t),r||o===c||(r=[])):(r=r||[]).push(u,c))}s&&(r=r||[]).push("style",s);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};hm=function(t,e,s,n){s!==n&&(e.flags|=4)};function Tn(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Hg(t,e,s){var n=e.pendingProps;switch(nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return We(e.type)&&Fr(),Me(e),null;case 3:return n=e.stateNode,hn(),ie(Ae),ie(Le),dc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Gi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(Co(ft),ft=null))),go(t,e),Me(e),null;case 5:hc(e);var i=Ns(mi.current);if(s=e.type,t!==null&&e.stateNode!=null)um(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return Me(e),null}if(t=Ns(Ct.current),Gi(e)){n=e.stateNode,s=e.type;var r=e.memoizedProps;switch(n[St]=e,n[di]=r,t=(e.mode&1)!==0,s){case"dialog":se("cancel",n),se("close",n);break;case"iframe":case"object":case"embed":se("load",n);break;case"video":case"audio":for(i=0;i<Vn.length;i++)se(Vn[i],n);break;case"source":se("error",n);break;case"img":case"image":case"link":se("error",n),se("load",n);break;case"details":se("toggle",n);break;case"input":lu(n,r),se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},se("invalid",n);break;case"textarea":ou(n,r),se("invalid",n)}Wa(s,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?n.textContent!==o&&(r.suppressHydrationWarning!==!0&&Ki(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Ki(n.textContent,o,t),i=["children",""+o]):si.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&se("scroll",n)}switch(s){case"input":Fi(n),au(n,r,!0);break;case"textarea":Fi(n),cu(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Dr)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[St]=e,t[di]=n,cm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ua(s,n),s){case"dialog":se("cancel",t),se("close",t),i=n;break;case"iframe":case"object":case"embed":se("load",t),i=n;break;case"video":case"audio":for(i=0;i<Vn.length;i++)se(Vn[i],t);i=n;break;case"source":se("error",t),i=n;break;case"img":case"image":case"link":se("error",t),se("load",t),i=n;break;case"details":se("toggle",t),i=n;break;case"input":lu(t,n),i=Fa(t,n),se("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=de({},n,{value:void 0}),se("invalid",t);break;case"textarea":ou(t,n),i=Ba(t,n),se("invalid",t);break;default:i=n}Wa(s,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?Bd(t,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Od(t,c)):r==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ni(t,c):typeof c=="number"&&ni(t,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(si.hasOwnProperty(r)?c!=null&&r==="onScroll"&&se("scroll",t):c!=null&&Ao(t,r,c,a))}switch(s){case"input":Fi(t),au(t,n,!1);break;case"textarea":Fi(t),cu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ls(n.value));break;case"select":t.multiple=!!n.multiple,r=n.value,r!=null?Zs(t,!!n.multiple,r,!1):n.defaultValue!=null&&Zs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dr)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Me(e),null;case 6:if(t&&e.stateNode!=null)hm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(s=Ns(mi.current),Ns(Ct.current),Gi(e)){if(n=e.stateNode,s=e.memoizedProps,n[St]=e,(r=n.nodeValue!==s)&&(t=Qe,t!==null))switch(t.tag){case 3:Ki(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ki(n.nodeValue,s,(t.mode&1)!==0)}r&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[St]=e,e.stateNode=n}return Me(e),null;case 13:if(ie(ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&Xe!==null&&e.mode&1&&!(e.flags&128))Mf(),cn(),e.flags|=98560,r=!1;else if(r=Gi(e),n!==null&&n.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[St]=e}else cn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),r=!1}else ft!==null&&(Co(ft),ft=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?we===0&&(we=3):jc())),e.updateQueue!==null&&(e.flags|=4),Me(e),null);case 4:return hn(),go(t,e),t===null&&ui(e.stateNode.containerInfo),Me(e),null;case 10:return ac(e.type._context),Me(e),null;case 17:return We(e.type)&&Fr(),Me(e),null;case 19:if(ie(ue),r=e.memoizedState,r===null)return Me(e),null;if(n=(e.flags&128)!==0,a=r.rendering,a===null)if(n)Tn(r,!1);else{if(we!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Hr(t),a!==null){for(e.flags|=128,Tn(r,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)r=s,t=n,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,t=a.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return te(ue,ue.current&1|2),e.child}t=t.sibling}r.tail!==null&&me()>fn&&(e.flags|=128,n=!0,Tn(r,!1),e.lanes=4194304)}else{if(!n)if(t=Hr(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Tn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!le)return Me(e),null}else 2*me()-r.renderingStartTime>fn&&s!==1073741824&&(e.flags|=128,n=!0,Tn(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(s=r.last,s!==null?s.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=me(),e.sibling=null,s=ue.current,te(ue,n?s&1|2:s&1),e):(Me(e),null);case 22:case 23:return bc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ge&1073741824&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Kg(t,e){switch(nc(e),e.tag){case 1:return We(e.type)&&Fr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hn(),ie(Ae),ie(Le),dc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hc(e),null;case 13:if(ie(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));cn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ie(ue),null;case 4:return hn(),null;case 10:return ac(e.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var qi=!1,Pe=!1,Gg=typeof WeakSet=="function"?WeakSet:Set,O=null;function Qs(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){fe(t,e,n)}else s.current=null}function yo(t,e,s){try{s()}catch(n){fe(t,e,n)}}var Ju=!1;function Xg(t,e){if(eo=zr,t=vf(),tc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var v;d!==s||i!==0&&d.nodeType!==3||(o=a+i),d!==r||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===t)break t;if(f===s&&++u===i&&(o=a),f===r&&++h===n&&(c=a),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(to={focusedElem:t,selectionRange:s},zr=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,S=y.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:ht(e.type,g),S);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(N){fe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return y=Ju,Ju=!1,y}function Xn(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var r=i.destroy;i.destroy=void 0,r!==void 0&&yo(e,s,r)}i=i.next}while(i!==n)}}function ml(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function xo(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function dm(t){var e=t.alternate;e!==null&&(t.alternate=null,dm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[St],delete e[di],delete e[io],delete e[Pg],delete e[Lg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fm(t){return t.tag===5||t.tag===3||t.tag===4}function Zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wo(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Dr));else if(n!==4&&(t=t.child,t!==null))for(wo(t,e,s),t=t.sibling;t!==null;)wo(t,e,s),t=t.sibling}function No(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(No(t,e,s),t=t.sibling;t!==null;)No(t,e,s),t=t.sibling}var be=null,dt=!1;function Wt(t,e,s){for(s=s.child;s!==null;)mm(t,e,s),s=s.sibling}function mm(t,e,s){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ll,s)}catch{}switch(s.tag){case 5:Pe||Qs(s,e);case 6:var n=be,i=dt;be=null,Wt(t,e,s),be=n,dt=i,be!==null&&(dt?(t=be,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):be.removeChild(s.stateNode));break;case 18:be!==null&&(dt?(t=be,s=s.stateNode,t.nodeType===8?ql(t.parentNode,s):t.nodeType===1&&ql(t,s),ai(t)):ql(be,s.stateNode));break;case 4:n=be,i=dt,be=s.stateNode.containerInfo,dt=!0,Wt(t,e,s),be=n,dt=i;break;case 0:case 11:case 14:case 15:if(!Pe&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&yo(s,e,a),i=i.next}while(i!==n)}Wt(t,e,s);break;case 1:if(!Pe&&(Qs(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){fe(s,e,o)}Wt(t,e,s);break;case 21:Wt(t,e,s);break;case 22:s.mode&1?(Pe=(n=Pe)||s.memoizedState!==null,Wt(t,e,s),Pe=n):Wt(t,e,s);break;default:Wt(t,e,s)}}function eh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Gg),e.forEach(function(n){var i=n0.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function ut(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:be=o.stateNode,dt=!1;break e;case 3:be=o.stateNode.containerInfo,dt=!0;break e;case 4:be=o.stateNode.containerInfo,dt=!0;break e}o=o.return}if(be===null)throw Error(z(160));mm(r,a,i),be=null,dt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pm(e,t),e=e.sibling}function pm(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),xt(t),n&4){try{Xn(3,t,t.return),ml(3,t)}catch(g){fe(t,t.return,g)}try{Xn(5,t,t.return)}catch(g){fe(t,t.return,g)}}break;case 1:ut(e,t),xt(t),n&512&&s!==null&&Qs(s,s.return);break;case 5:if(ut(e,t),xt(t),n&512&&s!==null&&Qs(s,s.return),t.flags&32){var i=t.stateNode;try{ni(i,"")}catch(g){fe(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var r=t.memoizedProps,a=s!==null?s.memoizedProps:r,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&Id(i,r),Ua(o,a);var u=Ua(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?Bd(i,d):h==="dangerouslySetInnerHTML"?Od(i,d):h==="children"?ni(i,d):Ao(i,h,d,u)}switch(o){case"input":Oa(i,r);break;case"textarea":Dd(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var v=r.value;v!=null?Zs(i,!!r.multiple,v,!1):f!==!!r.multiple&&(r.defaultValue!=null?Zs(i,!!r.multiple,r.defaultValue,!0):Zs(i,!!r.multiple,r.multiple?[]:"",!1))}i[di]=r}catch(g){fe(t,t.return,g)}}break;case 6:if(ut(e,t),xt(t),n&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,r=t.memoizedProps;try{i.nodeValue=r}catch(g){fe(t,t.return,g)}}break;case 3:if(ut(e,t),xt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ai(e.containerInfo)}catch(g){fe(t,t.return,g)}break;case 4:ut(e,t),xt(t);break;case 13:ut(e,t),xt(t),i=t.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Nc=me())),n&4&&eh(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Pe=(u=Pe)||h,ut(e,t),Pe=u):ut(e,t),xt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(O=t,h=t.child;h!==null;){for(d=O=h;O!==null;){switch(f=O,v=f.child,f.tag){case 0:case 11:case 14:case 15:Xn(4,f,f.return);break;case 1:Qs(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){fe(n,s,g)}}break;case 5:Qs(f,f.return);break;case 22:if(f.memoizedState!==null){sh(d);continue}}v!==null?(v.return=f,O=v):sh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Vd("display",a))}catch(g){fe(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){fe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ut(e,t),xt(t),n&4&&eh(t);break;case 21:break;default:ut(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(fm(s)){var n=s;break e}s=s.return}throw Error(z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ni(i,""),n.flags&=-33);var r=Zu(t);No(t,r,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Zu(t);wo(t,o,a);break;default:throw Error(z(161))}}catch(c){fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qg(t,e,s){O=t,vm(t)}function vm(t,e,s){for(var n=(t.mode&1)!==0;O!==null;){var i=O,r=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||qi;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Pe;o=qi;var u=Pe;if(qi=a,(Pe=c)&&!u)for(O=i;O!==null;)a=O,c=a.child,a.tag===22&&a.memoizedState!==null?nh(i):c!==null?(c.return=a,O=c):nh(i);for(;r!==null;)O=r,vm(r),r=r.sibling;O=i,qi=o,Pe=u}th(t)}else i.subtreeFlags&8772&&r!==null?(r.return=i,O=r):th(t)}}function th(t){for(;O!==null;){var e=O;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||ml(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Pe)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:ht(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Ou(e,r,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ou(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ai(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Pe||e.flags&512&&xo(e)}catch(f){fe(e,e.return,f)}}if(e===t){O=null;break}if(s=e.sibling,s!==null){s.return=e.return,O=s;break}O=e.return}}function sh(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var s=e.sibling;if(s!==null){s.return=e.return,O=s;break}O=e.return}}function nh(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ml(4,e)}catch(c){fe(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){fe(e,i,c)}}var r=e.return;try{xo(e)}catch(c){fe(e,r,c)}break;case 5:var a=e.return;try{xo(e)}catch(c){fe(e,a,c)}}}catch(c){fe(e,e.return,c)}if(e===t){O=null;break}var o=e.sibling;if(o!==null){o.return=e.return,O=o;break}O=e.return}}var qg=Math.ceil,Xr=Vt.ReactCurrentDispatcher,xc=Vt.ReactCurrentOwner,rt=Vt.ReactCurrentBatchConfig,q=0,Se=null,ye=null,Ce=0,Ge=0,qs=us(0),we=0,yi=null,_s=0,pl=0,wc=0,Qn=null,Ve=null,Nc=0,fn=1/0,Et=null,Qr=!1,So=null,ns=null,Yi=!1,Yt=null,qr=0,qn=0,bo=null,br=-1,jr=0;function $e(){return q&6?me():br!==-1?br:br=me()}function is(t){return t.mode&1?q&2&&Ce!==0?Ce&-Ce:Rg.transition!==null?(jr===0&&(jr=Zd()),jr):(t=J,t!==0||(t=window.event,t=t===void 0?16:af(t.type)),t):1}function pt(t,e,s,n){if(50<qn)throw qn=0,bo=null,Error(z(185));ki(t,s,n),(!(q&2)||t!==Se)&&(t===Se&&(!(q&2)&&(pl|=s),we===4&&Qt(t,Ce)),Ue(t,n),s===1&&q===0&&!(e.mode&1)&&(fn=me()+500,hl&&hs()))}function Ue(t,e){var s=t.callbackNode;Rv(t,e);var n=Rr(t,t===Se?Ce:0);if(n===0)s!==null&&du(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&du(s),e===1)t.tag===0?Tg(ih.bind(null,t)):kf(ih.bind(null,t)),_g(function(){!(q&6)&&hs()}),s=null;else{switch(ef(n)){case 1:s=Go;break;case 4:s=Yd;break;case 16:s=Tr;break;case 536870912:s=Jd;break;default:s=Tr}s=jm(s,gm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function gm(t,e){if(br=-1,jr=0,q&6)throw Error(z(327));var s=t.callbackNode;if(rn()&&t.callbackNode!==s)return null;var n=Rr(t,t===Se?Ce:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Yr(t,n);else{e=n;var i=q;q|=2;var r=xm();(Se!==t||Ce!==e)&&(Et=null,fn=me()+500,Ss(t,e));do try{Zg();break}catch(o){ym(t,o)}while(!0);lc(),Xr.current=r,q=i,ye!==null?e=0:(Se=null,Ce=0,e=we)}if(e!==0){if(e===2&&(i=Qa(t),i!==0&&(n=i,e=jo(t,i))),e===1)throw s=yi,Ss(t,0),Qt(t,n),Ue(t,me()),s;if(e===6)Qt(t,n);else{if(i=t.current.alternate,!(n&30)&&!Yg(i)&&(e=Yr(t,n),e===2&&(r=Qa(t),r!==0&&(n=r,e=jo(t,r))),e===1))throw s=yi,Ss(t,0),Qt(t,n),Ue(t,me()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:ys(t,Ve,Et);break;case 3:if(Qt(t,n),(n&130023424)===n&&(e=Nc+500-me(),10<e)){if(Rr(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){$e(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=no(ys.bind(null,t,Ve,Et),e);break}ys(t,Ve,Et);break;case 4:if(Qt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-mt(n);r=1<<a,a=e[a],a>i&&(i=a),n&=~r}if(n=i,n=me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qg(n/1960))-n,10<n){t.timeoutHandle=no(ys.bind(null,t,Ve,Et),n);break}ys(t,Ve,Et);break;case 5:ys(t,Ve,Et);break;default:throw Error(z(329))}}}return Ue(t,me()),t.callbackNode===s?gm.bind(null,t):null}function jo(t,e){var s=Qn;return t.current.memoizedState.isDehydrated&&(Ss(t,e).flags|=256),t=Yr(t,e),t!==2&&(e=Ve,Ve=s,e!==null&&Co(e)),t}function Co(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function Yg(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],r=i.getSnapshot;i=i.value;try{if(!vt(r(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qt(t,e){for(e&=~wc,e&=~pl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-mt(e),n=1<<s;t[s]=-1,e&=~n}}function ih(t){if(q&6)throw Error(z(327));rn();var e=Rr(t,0);if(!(e&1))return Ue(t,me()),null;var s=Yr(t,e);if(t.tag!==0&&s===2){var n=Qa(t);n!==0&&(e=n,s=jo(t,n))}if(s===1)throw s=yi,Ss(t,0),Qt(t,e),Ue(t,me()),s;if(s===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,Ve,Et),Ue(t,me()),null}function Sc(t,e){var s=q;q|=1;try{return t(e)}finally{q=s,q===0&&(fn=me()+500,hl&&hs())}}function Ms(t){Yt!==null&&Yt.tag===0&&!(q&6)&&rn();var e=q;q|=1;var s=rt.transition,n=J;try{if(rt.transition=null,J=1,t)return t()}finally{J=n,rt.transition=s,q=e,!(q&6)&&hs()}}function bc(){Ge=qs.current,ie(qs)}function Ss(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Eg(s)),ye!==null)for(s=ye.return;s!==null;){var n=s;switch(nc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fr();break;case 3:hn(),ie(Ae),ie(Le),dc();break;case 5:hc(n);break;case 4:hn();break;case 13:ie(ue);break;case 19:ie(ue);break;case 10:ac(n.type._context);break;case 22:case 23:bc()}s=s.return}if(Se=t,ye=t=rs(t.current,null),Ce=Ge=e,we=0,yi=null,wc=pl=_s=0,Ve=Qn=null,ws!==null){for(e=0;e<ws.length;e++)if(s=ws[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,r=s.pending;if(r!==null){var a=r.next;r.next=i,n.next=a}s.pending=n}ws=null}return t}function ym(t,e){do{var s=ye;try{if(lc(),wr.current=Gr,Kr){for(var n=he.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Kr=!1}if(Es=0,Ne=xe=he=null,Gn=!1,pi=0,xc.current=null,s===null||s.return===null){we=1,yi=e,ye=null;break}e:{var r=t,a=s.return,o=s,c=e;if(e=Ce,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Hu(a);if(v!==null){v.flags&=-257,Ku(v,a,o,r,e),v.mode&1&&Uu(r,u,e),e=v,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){Uu(r,u,e),jc();break e}c=Error(z(426))}}else if(le&&o.mode&1){var S=Hu(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ku(S,a,o,r,e),ic(dn(c,o));break e}}r=c=dn(c,o),we!==4&&(we=2),Qn===null?Qn=[r]:Qn.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var p=tm(r,c,e);Fu(r,p);break e;case 1:o=c;var m=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ns===null||!ns.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var N=sm(r,o,e);Fu(r,N);break e}}r=r.return}while(r!==null)}Nm(s)}catch(k){e=k,ye===s&&s!==null&&(ye=s=s.return);continue}break}while(!0)}function xm(){var t=Xr.current;return Xr.current=Gr,t===null?Gr:t}function jc(){(we===0||we===3||we===2)&&(we=4),Se===null||!(_s&268435455)&&!(pl&268435455)||Qt(Se,Ce)}function Yr(t,e){var s=q;q|=2;var n=xm();(Se!==t||Ce!==e)&&(Et=null,Ss(t,e));do try{Jg();break}catch(i){ym(t,i)}while(!0);if(lc(),q=s,Xr.current=n,ye!==null)throw Error(z(261));return Se=null,Ce=0,we}function Jg(){for(;ye!==null;)wm(ye)}function Zg(){for(;ye!==null&&!jv();)wm(ye)}function wm(t){var e=bm(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?Nm(t):ye=e,xc.current=null}function Nm(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Kg(s,e),s!==null){s.flags&=32767,ye=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,ye=null;return}}else if(s=Hg(s,e,Ge),s!==null){ye=s;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);we===0&&(we=5)}function ys(t,e,s){var n=J,i=rt.transition;try{rt.transition=null,J=1,e0(t,e,s,n)}finally{rt.transition=i,J=n}return null}function e0(t,e,s,n){do rn();while(Yt!==null);if(q&6)throw Error(z(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var r=s.lanes|s.childLanes;if(zv(t,r),t===Se&&(ye=Se=null,Ce=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Yi||(Yi=!0,jm(Tr,function(){return rn(),null})),r=(s.flags&15990)!==0,s.subtreeFlags&15990||r){r=rt.transition,rt.transition=null;var a=J;J=1;var o=q;q|=4,xc.current=null,Xg(t,s),pm(s,t),wg(to),zr=!!eo,to=eo=null,t.current=s,Qg(s),Cv(),q=o,J=a,rt.transition=r}else t.current=s;if(Yi&&(Yi=!1,Yt=t,qr=i),r=t.pendingLanes,r===0&&(ns=null),_v(s.stateNode),Ue(t,me()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Qr)throw Qr=!1,t=So,So=null,t;return qr&1&&t.tag!==0&&rn(),r=t.pendingLanes,r&1?t===bo?qn++:(qn=0,bo=t):qn=0,hs(),null}function rn(){if(Yt!==null){var t=ef(qr),e=rt.transition,s=J;try{if(rt.transition=null,J=16>t?16:t,Yt===null)var n=!1;else{if(t=Yt,Yt=null,qr=0,q&6)throw Error(z(331));var i=q;for(q|=4,O=t.current;O!==null;){var r=O,a=r.child;if(O.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(O=u;O!==null;){var h=O;switch(h.tag){case 0:case 11:case 15:Xn(8,h,r)}var d=h.child;if(d!==null)d.return=h,O=d;else for(;O!==null;){h=O;var f=h.sibling,v=h.return;if(dm(h),h===u){O=null;break}if(f!==null){f.return=v,O=f;break}O=v}}}var y=r.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}O=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,O=a;else e:for(;O!==null;){if(r=O,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Xn(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,O=p;break e}O=r.return}}var m=t.current;for(O=m;O!==null;){a=O;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,O=x;else e:for(a=m;O!==null;){if(o=O,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ml(9,o)}}catch(k){fe(o,o.return,k)}if(o===a){O=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,O=N;break e}O=o.return}}if(q=i,hs(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ll,t)}catch{}n=!0}return n}finally{J=s,rt.transition=e}}return!1}function rh(t,e,s){e=dn(s,e),e=tm(t,e,1),t=ss(t,e,1),e=$e(),t!==null&&(ki(t,1,e),Ue(t,e))}function fe(t,e,s){if(t.tag===3)rh(t,t,s);else for(;e!==null;){if(e.tag===3){rh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ns===null||!ns.has(n))){t=dn(s,t),t=sm(e,t,1),e=ss(e,t,1),t=$e(),e!==null&&(ki(e,1,t),Ue(e,t));break}}e=e.return}}function t0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=$e(),t.pingedLanes|=t.suspendedLanes&s,Se===t&&(Ce&s)===s&&(we===4||we===3&&(Ce&130023424)===Ce&&500>me()-Nc?Ss(t,0):wc|=s),Ue(t,e)}function Sm(t,e){e===0&&(t.mode&1?(e=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):e=1);var s=$e();t=Dt(t,e),t!==null&&(ki(t,e,s),Ue(t,s))}function s0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Sm(t,s)}function n0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),Sm(t,s)}var bm;bm=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ae.current)Be=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Be=!1,Ug(t,e,s);Be=!!(t.flags&131072)}else Be=!1,le&&e.flags&1048576&&Ef(e,Br,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sr(t,e),t=e.pendingProps;var i=on(e,Le.current);nn(e,s),i=mc(null,e,n,t,i,s);var r=pc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(n)?(r=!0,Or(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cc(e),i.updater=fl,e.stateNode=i,i._reactInternals=e,uo(e,n,t,s),e=mo(null,e,n,!0,r,s)):(e.tag=0,le&&r&&sc(e),Re(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Sr(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=r0(n),t=ht(n,t),i){case 0:e=fo(null,e,n,t,s);break e;case 1:e=Qu(null,e,n,t,s);break e;case 11:e=Gu(null,e,n,t,s);break e;case 14:e=Xu(null,e,n,ht(n.type,t),s);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),fo(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),Qu(t,e,n,i,s);case 3:e:{if(lm(e),t===null)throw Error(z(387));n=e.pendingProps,r=e.memoizedState,i=r.element,Rf(t,e),Ur(e,n,null,s);var a=e.memoizedState;if(n=a.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=dn(Error(z(423)),e),e=qu(t,e,n,s,i);break e}else if(n!==i){i=dn(Error(z(424)),e),e=qu(t,e,n,s,i);break e}else for(Xe=ts(e.stateNode.containerInfo.firstChild),Qe=e,le=!0,ft=null,s=Lf(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(cn(),n===i){e=Ft(t,e,s);break e}Re(t,e,n,s)}e=e.child}return e;case 5:return zf(e),t===null&&ao(e),n=e.type,i=e.pendingProps,r=t!==null?t.memoizedProps:null,a=i.children,so(n,i)?a=null:r!==null&&so(n,r)&&(e.flags|=32),rm(t,e),Re(t,e,a,s),e.child;case 6:return t===null&&ao(e),null;case 13:return am(t,e,s);case 4:return uc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=un(e,null,n,s):Re(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),Gu(t,e,n,i,s);case 7:return Re(t,e,e.pendingProps,s),e.child;case 8:return Re(t,e,e.pendingProps.children,s),e.child;case 12:return Re(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,te(Ar,n._currentValue),n._currentValue=a,r!==null)if(vt(r.value,a)){if(r.children===i.children&&!Ae.current){e=Ft(t,e,s);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=Rt(-1,s&-s),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=s,c=r.alternate,c!==null&&(c.lanes|=s),oo(r.return,s,e),o.lanes|=s;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(z(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),oo(a,s,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Re(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,nn(e,s),i=lt(i),n=n(i),e.flags|=1,Re(t,e,n,s),e.child;case 14:return n=e.type,i=ht(n,e.pendingProps),i=ht(n.type,i),Xu(t,e,n,i,s);case 15:return nm(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),Sr(t,e),e.tag=1,We(n)?(t=!0,Or(e)):t=!1,nn(e,s),em(e,n,i),uo(e,n,i,s),mo(null,e,n,!0,t,s);case 19:return om(t,e,s);case 22:return im(t,e,s)}throw Error(z(156,e.tag))};function jm(t,e){return qd(t,e)}function i0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,e,s,n){return new i0(t,e,s,n)}function Cc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r0(t){if(typeof t=="function")return Cc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uo)return 11;if(t===Ho)return 14}return 2}function rs(t,e){var s=t.alternate;return s===null?(s=it(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Cr(t,e,s,n,i,r){var a=2;if(n=t,typeof t=="function")Cc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Vs:return bs(s.children,i,r,e);case Wo:a=8,i|=8;break;case za:return t=it(12,s,e,i|2),t.elementType=za,t.lanes=r,t;case $a:return t=it(13,s,e,i),t.elementType=$a,t.lanes=r,t;case Ia:return t=it(19,s,e,i),t.elementType=Ia,t.lanes=r,t;case Rd:return vl(s,i,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ld:a=10;break e;case Td:a=9;break e;case Uo:a=11;break e;case Ho:a=14;break e;case Kt:a=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=it(a,s,e,i),e.elementType=t,e.type=n,e.lanes=r,e}function bs(t,e,s,n){return t=it(7,t,n,e),t.lanes=s,t}function vl(t,e,s,n){return t=it(22,t,n,e),t.elementType=Rd,t.lanes=s,t.stateNode={isHidden:!1},t}function ia(t,e,s){return t=it(6,t,null,e),t.lanes=s,t}function ra(t,e,s){return e=it(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l0(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kc(t,e,s,n,i,r,a,o,c){return t=new l0(t,e,s,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=it(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(r),t}function a0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Cm(t){if(!t)return as;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var s=t.type;if(We(s))return Cf(t,s,e)}return e}function km(t,e,s,n,i,r,a,o,c){return t=kc(s,n,!0,t,i,r,a,o,c),t.context=Cm(null),s=t.current,n=$e(),i=is(s),r=Rt(n,i),r.callback=e??null,ss(s,r,i),t.current.lanes=i,ki(t,i,n),Ue(t,n),t}function gl(t,e,s,n){var i=e.current,r=$e(),a=is(i);return s=Cm(s),e.context===null?e.context=s:e.pendingContext=s,e=Rt(r,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ss(i,e,a),t!==null&&(pt(t,i,a,r),xr(t,i,a)),a}function Jr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Ec(t,e){lh(t,e),(t=t.alternate)&&lh(t,e)}function o0(){return null}var Em=typeof reportError=="function"?reportError:function(t){console.error(t)};function _c(t){this._internalRoot=t}yl.prototype.render=_c.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));gl(t,e,null,null)};yl.prototype.unmount=_c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){gl(null,t,null,null)}),e[It]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=nf();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Xt.length&&e!==0&&e<Xt[s].priority;s++);Xt.splice(s,0,t),s===0&&lf(t)}};function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ah(){}function c0(t,e,s,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=Jr(a);r.call(u)}}var a=km(e,n,t,0,null,!1,!1,"",ah);return t._reactRootContainer=a,t[It]=a.current,ui(t.nodeType===8?t.parentNode:t),Ms(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Jr(c);o.call(u)}}var c=kc(t,0,!1,null,null,!1,!1,"",ah);return t._reactRootContainer=c,t[It]=c.current,ui(t.nodeType===8?t.parentNode:t),Ms(function(){gl(e,c,s,n)}),c}function wl(t,e,s,n,i){var r=s._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var c=Jr(a);o.call(c)}}gl(e,a,t,i)}else a=c0(s,e,t,i,n);return Jr(a)}tf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=On(e.pendingLanes);s!==0&&(Xo(e,s|1),Ue(e,me()),!(q&6)&&(fn=me()+500,hs()))}break;case 13:Ms(function(){var n=Dt(t,1);if(n!==null){var i=$e();pt(n,t,1,i)}}),Ec(t,1)}};Qo=function(t){if(t.tag===13){var e=Dt(t,134217728);if(e!==null){var s=$e();pt(e,t,134217728,s)}Ec(t,134217728)}};sf=function(t){if(t.tag===13){var e=is(t),s=Dt(t,e);if(s!==null){var n=$e();pt(s,t,e,n)}Ec(t,e)}};nf=function(){return J};rf=function(t,e){var s=J;try{return J=t,e()}finally{J=s}};Ka=function(t,e,s){switch(e){case"input":if(Oa(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=ul(n);if(!i)throw Error(z(90));$d(n),Oa(n,i)}}}break;case"textarea":Dd(t,s);break;case"select":e=s.value,e!=null&&Zs(t,!!s.multiple,e,!1)}};Ud=Sc;Hd=Ms;var u0={usingClientEntryPoint:!1,Events:[_i,Us,ul,Ad,Wd,Sc]},Rn={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h0={bundleType:Rn.bundleType,version:Rn.version,rendererPackageName:Rn.rendererPackageName,rendererConfig:Rn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xd(t),t===null?null:t.stateNode},findFiberByHostInstance:Rn.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{ll=Ji.inject(h0),jt=Ji}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0;Ye.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(e))throw Error(z(200));return a0(t,e,null,s)};Ye.createRoot=function(t,e){if(!Mc(t))throw Error(z(299));var s=!1,n="",i=Em;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kc(t,1,!1,null,null,s,!1,n,i),t[It]=e.current,ui(t.nodeType===8?t.parentNode:t),new _c(e)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Xd(e),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return Ms(t)};Ye.hydrate=function(t,e,s){if(!xl(e))throw Error(z(200));return wl(null,t,e,!0,s)};Ye.hydrateRoot=function(t,e,s){if(!Mc(t))throw Error(z(405));var n=s!=null&&s.hydratedSources||null,i=!1,r="",a=Em;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=km(e,null,t,1,s??null,i,!1,r,a),t[It]=e.current,ui(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new yl(e)};Ye.render=function(t,e,s){if(!xl(e))throw Error(z(200));return wl(null,t,e,!1,s)};Ye.unmountComponentAtNode=function(t){if(!xl(t))throw Error(z(40));return t._reactRootContainer?(Ms(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[It]=null})}),!0):!1};Ye.unstable_batchedUpdates=Sc;Ye.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!xl(s))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return wl(t,e,s,!1,n)};Ye.version="18.3.1-next-f1338f8080-20240426";function _m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_m)}catch(t){console.error(t)}}_m(),Ed.exports=Ye;var d0=Ed.exports,oh=d0;Ta.createRoot=oh.createRoot,Ta.hydrateRoot=oh.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ch="popstate";function f0(t={}){function e(n,i){let{pathname:r,search:a,hash:o}=n.location;return ko("",{pathname:r,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:xi(i)}return p0(e,s,null,t)}function ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ot(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m0(){return Math.random().toString(36).substring(2,10)}function uh(t,e){return{usr:t.state,key:t.key,idx:e}}function ko(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?xn(e):e,state:s,key:e&&e.key||n||m0()}}function xi({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function xn(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function p0(t,e,s,n={}){let{window:i=document.defaultView,v5Compat:r=!1}=n,a=i.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let S=h(),p=S==null?null:S-u;u=S,c&&c({action:o,location:g.location,delta:p})}function f(S,p){o="PUSH";let m=ko(g.location,S,p);u=h()+1;let x=uh(m,u),N=g.createHref(m);try{a.pushState(x,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(N)}r&&c&&c({action:o,location:g.location,delta:1})}function v(S,p){o="REPLACE";let m=ko(g.location,S,p);u=h();let x=uh(m,u),N=g.createHref(m);a.replaceState(x,"",N),r&&c&&c({action:o,location:g.location,delta:0})}function y(S){return v0(S)}let g={get action(){return o},get location(){return t(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ch,d),c=S,()=>{i.removeEventListener(ch,d),c=null}},createHref(S){return e(i,S)},createURL:y,encodeLocation(S){let p=y(S);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(S){return a.go(S)}};return g}function v0(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ae(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:xi(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function Mm(t,e,s="/"){return g0(t,e,s,!1)}function g0(t,e,s,n){let i=typeof e=="string"?xn(e):e,r=Ot(i.pathname||"/",s);if(r==null)return null;let a=Pm(t);y0(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=M0(r);o=E0(a[c],u,n)}return o}function Pm(t,e=[],s=[],n="",i=!1){let r=(a,o,c=i,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;ae(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=zt([n,h.relativePath]),f=s.concat(h);a.children&&a.children.length>0&&(ae(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Pm(a.children,e,f,d,c)),!(a.path==null&&!a.index)&&e.push({path:d,score:C0(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))r(a,o);else for(let u of Lm(a.path))r(a,o,!0,u)}),e}function Lm(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),r=s.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let a=Lm(n.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),i&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function y0(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:k0(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var x0=/^:[\w-]+$/,w0=3,N0=2,S0=1,b0=10,j0=-2,hh=t=>t==="*";function C0(t,e){let s=t.split("/"),n=s.length;return s.some(hh)&&(n+=j0),e&&(n+=N0),s.filter(i=>!hh(i)).reduce((i,r)=>i+(x0.test(r)?w0:r===""?S0:b0),n)}function k0(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function E0(t,e,s=!1){let{routesMeta:n}=t,i={},r="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=Zr({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&s&&!n[n.length-1].route.index&&(d=Zr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:zt([r,d.pathname]),pathnameBase:R0(zt([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=zt([r,d.pathnameBase]))}return a}function Zr(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=_0(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:d},f)=>{if(h==="*"){let y=o[f]||"";a=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[f];return d&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:t}}function _0(t,e=!1,s=!0){ot(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function M0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ot(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ot(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}var Tm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P0=t=>Tm.test(t);function L0(t,e="/"){let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?xn(t):t,r;if(s)if(P0(s))r=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),ot(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${s}`)}s.startsWith("/")?r=dh(s.substring(1),"/"):r=dh(s,e)}else r=e;return{pathname:r,search:z0(n),hash:$0(i)}}function dh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function la(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T0(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Pc(t){let e=T0(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function Lc(t,e,s,n=!1){let i;typeof t=="string"?i=xn(t):(i={...t},ae(!i.pathname||!i.pathname.includes("?"),la("?","pathname","search",i)),ae(!i.pathname||!i.pathname.includes("#"),la("#","pathname","hash",i)),ae(!i.search||!i.search.includes("#"),la("#","search","hash",i)));let r=t===""||i.pathname==="",a=r?"/":i.pathname,o;if(a==null)o=s;else{let d=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let c=L0(i,o),u=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var zt=t=>t.join("/").replace(/\/\/+/g,"/"),R0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,I0=class{constructor(t,e,s,n=!1){this.status=t,this.statusText=e||"",this.internal=n,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function D0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function F0(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Rm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zm(t,e){let s=t;if(typeof s!="string"||!Tm.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let n=s,i=!1;if(Rm)try{let r=new URL(window.location.href),a=s.startsWith("//")?new URL(r.protocol+s):new URL(s),o=Ot(a.pathname,e);a.origin===r.origin&&o!=null?s=o+a.search+a.hash:i=!0}catch{ot(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $m=["POST","PUT","PATCH","DELETE"];new Set($m);var O0=["GET",...$m];new Set(O0);var wn=w.createContext(null);wn.displayName="DataRouter";var Nl=w.createContext(null);Nl.displayName="DataRouterState";var V0=w.createContext(!1),Im=w.createContext({isTransitioning:!1});Im.displayName="ViewTransition";var B0=w.createContext(new Map);B0.displayName="Fetchers";var A0=w.createContext(null);A0.displayName="Await";var Ze=w.createContext(null);Ze.displayName="Navigation";var Pi=w.createContext(null);Pi.displayName="Location";var kt=w.createContext({outlet:null,matches:[],isDataRoute:!1});kt.displayName="Route";var Tc=w.createContext(null);Tc.displayName="RouteError";var Dm="REACT_ROUTER_ERROR",W0="REDIRECT",U0="ROUTE_ERROR_RESPONSE";function H0(t){if(t.startsWith(`${Dm}:${W0}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function K0(t){if(t.startsWith(`${Dm}:${U0}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new I0(e.status,e.statusText,e.data)}catch{}}function G0(t,{relative:e}={}){ae(Nn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=w.useContext(Ze),{hash:i,pathname:r,search:a}=Li(t,{relative:e}),o=r;return s!=="/"&&(o=r==="/"?s:zt([s,r])),n.createHref({pathname:o,search:a,hash:i})}function Nn(){return w.useContext(Pi)!=null}function ds(){return ae(Nn(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Pi).location}var Fm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Om(t){w.useContext(Ze).static||w.useLayoutEffect(t)}function Sn(){let{isDataRoute:t}=w.useContext(kt);return t?ly():X0()}function X0(){ae(Nn(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(wn),{basename:e,navigator:s}=w.useContext(Ze),{matches:n}=w.useContext(kt),{pathname:i}=ds(),r=JSON.stringify(Pc(n)),a=w.useRef(!1);return Om(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(ot(a.current,Fm),!a.current)return;if(typeof c=="number"){s.go(c);return}let h=Lc(c,JSON.parse(r),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:zt([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,r,i,t])}w.createContext(null);function Li(t,{relative:e}={}){let{matches:s}=w.useContext(kt),{pathname:n}=ds(),i=JSON.stringify(Pc(s));return w.useMemo(()=>Lc(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function Q0(t,e){return Vm(t,e)}function Vm(t,e,s,n,i){var m;ae(Nn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(Ze),{matches:a}=w.useContext(kt),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let x=d&&d.path||"";Am(u,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=ds(),v;if(e){let x=typeof e=="string"?xn(e):e;ae(h==="/"||((m=x.pathname)==null?void 0:m.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),v=x}else v=f;let y=v.pathname||"/",g=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=Mm(t,{pathname:g});ot(d||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ot(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=ey(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:zt([h,r.encodeLocation?r.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:zt([h,r.encodeLocation?r.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),a,s,n,i);return e&&p?w.createElement(Pi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},p):p}function q0(){let t=ry(),e=D0(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:r},"ErrorBoundary")," or"," ",w.createElement("code",{style:r},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:i},s):null,a)}var Y0=w.createElement(q0,null),Bm=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=K0(t.digest);s&&(t=s)}let e=t!==void 0?w.createElement(kt.Provider,{value:this.props.routeContext},w.createElement(Tc.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?w.createElement(J0,{error:t},e):e}};Bm.contextType=V0;var aa=new WeakMap;function J0({children:t,error:e}){let{basename:s}=w.useContext(Ze);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=H0(e.digest);if(n){let i=aa.get(e);if(i)throw i;let r=zm(n.location,s);if(Rm&&!aa.get(e))if(r.isExternal||n.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:n.replace}));throw aa.set(e,a),a}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return t}function Z0({routeContext:t,match:e,children:s}){let n=w.useContext(wn);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(kt.Provider,{value:t},s)}function ey(t,e=[],s=null,n=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,a=s==null?void 0:s.errors;if(a!=null){let h=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);ae(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let o=!1,c=-1;if(s)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:v}=s,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!v||v[d.route.id]===void 0);if(d.route.lazy||y){o=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let u=s&&n?(h,d)=>{var f,v;n(h,{location:s.location,params:((v=(f=s.matches)==null?void 0:f[0])==null?void 0:v.params)??{},unstable_pattern:F0(s.matches),errorInfo:d})}:void 0;return r.reduceRight((h,d,f)=>{let v,y=!1,g=null,S=null;s&&(v=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||Y0,o&&(c<0&&f===0?(Am("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):c===f&&(y=!0,S=d.route.hydrateFallbackElement||null)));let p=e.concat(r.slice(0,f+1)),m=()=>{let x;return v?x=g:y?x=S:d.route.Component?x=w.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,w.createElement(Z0,{match:d,routeContext:{outlet:h,matches:p,isDataRoute:s!=null},children:x})};return s&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(Bm,{location:s.location,revalidation:s.revalidation,component:g,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0},onError:u}):m()},null)}function Rc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ty(t){let e=w.useContext(wn);return ae(e,Rc(t)),e}function sy(t){let e=w.useContext(Nl);return ae(e,Rc(t)),e}function ny(t){let e=w.useContext(kt);return ae(e,Rc(t)),e}function zc(t){let e=ny(t),s=e.matches[e.matches.length-1];return ae(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function iy(){return zc("useRouteId")}function ry(){var n;let t=w.useContext(Tc),e=sy("useRouteError"),s=zc("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function ly(){let{router:t}=ty("useNavigate"),e=zc("useNavigate"),s=w.useRef(!1);return Om(()=>{s.current=!0}),w.useCallback(async(i,r={})=>{ot(s.current,Fm),s.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...r}))},[t,e])}var fh={};function Am(t,e,s){!e&&!fh[t]&&(fh[t]=!0,ot(!1,s))}w.memo(ay);function ay({routes:t,future:e,state:s,onError:n}){return Vm(t,void 0,s,n,e)}function $c({to:t,replace:e,state:s,relative:n}){ae(Nn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=w.useContext(Ze);ot(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=w.useContext(kt),{pathname:a}=ds(),o=Sn(),c=Lc(t,Pc(r),a,n==="path"),u=JSON.stringify(c);return w.useEffect(()=>{o(JSON.parse(u),{replace:e,state:s,relative:n})},[o,u,n,e,s]),null}function Bn(t){ae(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oy({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:i,static:r=!1,unstable_useTransitions:a}){ae(!Nn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:i,static:r,unstable_useTransitions:a,future:{}}),[o,i,r,a]);typeof s=="string"&&(s=xn(s));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:v="default"}=s,y=w.useMemo(()=>{let g=Ot(u,o);return g==null?null:{location:{pathname:g,search:h,hash:d,state:f,key:v},navigationType:n}},[o,u,h,d,f,v,n]);return ot(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(Ze.Provider,{value:c},w.createElement(Pi.Provider,{children:e,value:y}))}function cy({children:t,location:e}){return Q0(Eo(t),e)}function Eo(t,e=[]){let s=[];return w.Children.forEach(t,(n,i)=>{if(!w.isValidElement(n))return;let r=[...e,i];if(n.type===w.Fragment){s.push.apply(s,Eo(n.props.children,r));return}ae(n.type===Bn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ae(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Eo(n.props.children,r)),s.push(a)}),s}var kr="get",Er="application/x-www-form-urlencoded";function Sl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function uy(t){return Sl(t)&&t.tagName.toLowerCase()==="button"}function hy(t){return Sl(t)&&t.tagName.toLowerCase()==="form"}function dy(t){return Sl(t)&&t.tagName.toLowerCase()==="input"}function fy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function my(t,e){return t.button===0&&(!e||e==="_self")&&!fy(t)}var Zi=null;function py(){if(Zi===null)try{new FormData(document.createElement("form"),0),Zi=!1}catch{Zi=!0}return Zi}var vy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oa(t){return t!=null&&!vy.has(t)?(ot(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Er}"`),null):t}function gy(t,e){let s,n,i,r,a;if(hy(t)){let o=t.getAttribute("action");n=o?Ot(o,e):null,s=t.getAttribute("method")||kr,i=oa(t.getAttribute("enctype"))||Er,r=new FormData(t)}else if(uy(t)||dy(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(n=c?Ot(c,e):null,s=t.getAttribute("formmethod")||o.getAttribute("method")||kr,i=oa(t.getAttribute("formenctype"))||oa(o.getAttribute("enctype"))||Er,r=new FormData(o,t),!py()){let{name:u,type:h,value:d}=t;if(h==="image"){let f=u?`${u}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else u&&r.append(u,d)}}else{if(Sl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=kr,n=null,i=Er,a=t}return r&&i==="text/plain"&&(a=r,r=void 0),{action:n,method:s.toLowerCase(),encType:i,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ic(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yy(t,e,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${s}`:e&&Ot(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function xy(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wy(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ny(t,e,s){let n=await Promise.all(t.map(async i=>{let r=e.routes[i.route.id];if(r){let a=await xy(r,s);return a.links?a.links():[]}return[]}));return Cy(n.flat(1).filter(wy).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function mh(t,e,s,n,i,r){let a=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,o=(c,u)=>{var h;return s[u].pathname!==c.pathname||((h=s[u].route.path)==null?void 0:h.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return r==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):r==="data"?e.filter((c,u)=>{var d;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=s[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Sy(t,e,{includeHydrateFallback:s}={}){return by(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function by(t){return[...new Set(t)]}function jy(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function Cy(t,e){let s=new Set;return new Set(e),t.reduce((n,i)=>{let r=JSON.stringify(jy(i));return s.has(r)||(s.add(r),n.push({key:r,link:i})),n},[])}function Wm(){let t=w.useContext(wn);return Ic(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ky(){let t=w.useContext(Nl);return Ic(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Dc=w.createContext(void 0);Dc.displayName="FrameworkContext";function Um(){let t=w.useContext(Dc);return Ic(t,"You must render this element inside a <HydratedRouter> element"),t}function Ey(t,e){let s=w.useContext(Dc),[n,i]=w.useState(!1),[r,a]=w.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,f=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=p=>{p.forEach(m=>{a(m.isIntersecting)})},S=new IntersectionObserver(g,{threshold:.5});return f.current&&S.observe(f.current),()=>{S.disconnect()}}},[t]),w.useEffect(()=>{if(n){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[n]);let v=()=>{i(!0)},y=()=>{i(!1),a(!1)};return s?t!=="intent"?[r,f,{}]:[r,f,{onFocus:zn(o,v),onBlur:zn(c,y),onMouseEnter:zn(u,v),onMouseLeave:zn(h,y),onTouchStart:zn(d,v)}]:[!1,f,{}]}function zn(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function _y({page:t,...e}){let{router:s}=Wm(),n=w.useMemo(()=>Mm(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?w.createElement(Py,{page:t,matches:n,...e}):null}function My(t){let{manifest:e,routeModules:s}=Um(),[n,i]=w.useState([]);return w.useEffect(()=>{let r=!1;return Ny(t,e,s).then(a=>{r||i(a)}),()=>{r=!0}},[t,e,s]),n}function Py({page:t,matches:e,...s}){let n=ds(),{manifest:i,routeModules:r}=Um(),{basename:a}=Wm(),{loaderData:o,matches:c}=ky(),u=w.useMemo(()=>mh(t,e,c,i,n,"data"),[t,e,c,i,n]),h=w.useMemo(()=>mh(t,e,c,i,n,"assets"),[t,e,c,i,n]),d=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,g=!1;if(e.forEach(p=>{var x;let m=i.routes[p.route.id];!m||!m.hasLoader||(!u.some(N=>N.route.id===p.route.id)&&p.route.id in o&&((x=r[p.route.id])!=null&&x.shouldRevalidate)||m.hasClientLoader?g=!0:y.add(p.route.id))}),y.size===0)return[];let S=yy(t,a,"data");return g&&y.size>0&&S.searchParams.set("_routes",e.filter(p=>y.has(p.route.id)).map(p=>p.route.id).join(",")),[S.pathname+S.search]},[a,o,n,i,u,e,t,r]),f=w.useMemo(()=>Sy(h,i),[h,i]),v=My(h);return w.createElement(w.Fragment,null,d.map(y=>w.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...s})),f.map(y=>w.createElement("link",{key:y,rel:"modulepreload",href:y,...s})),v.map(({key:y,link:g})=>w.createElement("link",{key:y,nonce:s.nonce,...g})))}function Ly(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Ty=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ty&&(window.__reactRouterVersion="7.11.0")}catch{}function Ry({basename:t,children:e,unstable_useTransitions:s,window:n}){let i=w.useRef();i.current==null&&(i.current=f0({window:n,v5Compat:!0}));let r=i.current,[a,o]=w.useState({action:r.action,location:r.location}),c=w.useCallback(u=>{s===!1?o(u):w.startTransition(()=>o(u))},[s]);return w.useLayoutEffect(()=>r.listen(c),[r,c]),w.createElement(oy,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r,unstable_useTransitions:s})}var Hm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bl=w.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:i,reloadDocument:r,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f,...v},y){let{basename:g,unstable_useTransitions:S}=w.useContext(Ze),p=typeof u=="string"&&Hm.test(u),m=zm(u,g);u=m.to;let x=G0(u,{relative:i}),[N,k,E]=Ey(n,v),b=Dy(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:S});function C(j){e&&e(j),j.defaultPrevented||b(j)}let M=w.createElement("a",{...v,...E,href:m.absoluteURL||x,onClick:m.isExternal||r?e:C,ref:Ly(y,k),target:c,"data-discover":!p&&s==="render"?"true":void 0});return N&&!p?w.createElement(w.Fragment,null,M,w.createElement(_y,{page:x})):M});bl.displayName="Link";var zy=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:i=!1,style:r,to:a,viewTransition:o,children:c,...u},h){let d=Li(a,{relative:u.relative}),f=ds(),v=w.useContext(Nl),{navigator:y,basename:g}=w.useContext(Ze),S=v!=null&&Ay(d)&&o===!0,p=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,m=f.pathname,x=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(m=m.toLowerCase(),x=x?x.toLowerCase():null,p=p.toLowerCase()),x&&g&&(x=Ot(x,g)||x);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let k=m===p||!i&&m.startsWith(p)&&m.charAt(N)==="/",E=x!=null&&(x===p||!i&&x.startsWith(p)&&x.charAt(p.length)==="/"),b={isActive:k,isPending:E,isTransitioning:S},C=k?e:void 0,M;typeof n=="function"?M=n(b):M=[n,k?"active":null,E?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let j=typeof r=="function"?r(b):r;return w.createElement(bl,{...u,"aria-current":C,className:M,ref:h,style:j,to:a,viewTransition:o},typeof c=="function"?c(b):c)});zy.displayName="NavLink";var $y=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:i,state:r,method:a=kr,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f,...v},y)=>{let{unstable_useTransitions:g}=w.useContext(Ze),S=Vy(),p=By(o,{relative:u}),m=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&Hm.test(o),N=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,b=(E==null?void 0:E.getAttribute("formmethod"))||a,C=()=>S(E||k.currentTarget,{fetcherKey:e,method:b,navigate:s,replace:i,state:r,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f});g&&s!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:y,method:m,action:p,onSubmit:n?c:N,...v,"data-discover":!x&&t==="render"?"true":void 0})});$y.displayName="Form";function Iy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Km(t){let e=w.useContext(wn);return ae(e,Iy(t)),e}function Dy(t,{target:e,replace:s,state:n,preventScrollReset:i,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Sn(),h=ds(),d=Li(t,{relative:r});return w.useCallback(f=>{if(my(f,e)){f.preventDefault();let v=s!==void 0?s:xi(h)===xi(d),y=()=>u(t,{replace:v,state:n,preventScrollReset:i,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o});c?w.startTransition(()=>y()):y()}},[h,u,d,s,n,e,t,i,r,a,o,c])}var Fy=0,Oy=()=>`__${String(++Fy)}__`;function Vy(){let{router:t}=Km("useSubmit"),{basename:e}=w.useContext(Ze),s=iy(),n=t.fetch,i=t.navigate;return w.useCallback(async(r,a={})=>{let{action:o,method:c,encType:u,formData:h,body:d}=gy(r,e);if(a.navigate===!1){let f=a.fetcherKey||Oy();await n(f,s,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await i(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,i,e,s])}function By(t,{relative:e}={}){let{basename:s}=w.useContext(Ze),n=w.useContext(kt);ae(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),r={...Li(t||".",{relative:e})},a=ds();if(t==null){r.search=a.search;let o=new URLSearchParams(r.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();r.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(r.pathname=r.pathname==="/"?s:zt([s,r.pathname])),xi(r)}function Ay(t,{relative:e}={}){let s=w.useContext(Im);ae(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Km("useViewTransitionState"),i=Li(t,{relative:e});if(!s.isTransitioning)return!1;let r=Ot(s.currentLocation.pathname,n)||s.currentLocation.pathname,a=Ot(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Zr(i.pathname,a)!=null||Zr(i.pathname,r)!=null}const Gm=w.createContext(),Ut={DARK:"dark",LIGHT:"light",GLASS:"glass"};function Wy({children:t}){const[e,s]=w.useState(()=>{const a=localStorage.getItem("theme");return Object.values(Ut).includes(a)?a:Ut.DARK}),n=async a=>{var o;if(Object.values(Ut).includes(a)){s(a),localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a);const c=localStorage.getItem("access_token");if(c)try{const d=((o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${c}`}})).json()).profile)==null?void 0:o.preferences)||{};await fetch("/profile/me",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({preferences:{...d,theme:a}})})}catch(u){console.error("Failed to sync theme to backend:",u)}}},i=async()=>{var o,c;const a=localStorage.getItem("access_token");if(a)try{const d=(c=(o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${a}`}})).json()).profile)==null?void 0:o.preferences)==null?void 0:c.theme;d&&Object.values(Ut).includes(d)&&d!==e&&(s(d),localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d))}catch(u){console.error("Failed to fetch user theme:",u)}};w.useEffect(()=>{i()},[]),w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),w.useEffect(()=>{const a=o=>{o.key==="theme"&&Object.values(Ut).includes(o.newValue)&&s(o.newValue)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const r={theme:e,setTheme:n,syncThemeWithBackend:i,isDark:e===Ut.DARK,isLight:e===Ut.LIGHT,isGlass:e===Ut.GLASS};return l.jsx(Gm.Provider,{value:r,children:t})}function Xm(){const t=w.useContext(Gm);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const Qm=w.createContext(null);function Uy({children:t}){const[e,s]=w.useState([]),n=w.useCallback((u,h="info",d=5e3)=>{const f=Date.now()+Math.random(),v={id:f,message:u,type:h,duration:d};return s(y=>[...y,v]),d>0&&setTimeout(()=>{s(y=>y.filter(g=>g.id!==f))},d),f},[]),i=w.useCallback(u=>{s(h=>h.filter(d=>d.id!==u))},[]),r=w.useCallback(u=>n(u,"error",6e3),[n]),a=w.useCallback(u=>n(u,"success",4e3),[n]),o=w.useCallback(u=>n(u,"info",4e3),[n]),c=w.useCallback(u=>n(u,"warning",5e3),[n]);return l.jsxs(Qm.Provider,{value:{toasts:e,addToast:n,removeToast:i,showError:r,showSuccess:a,showInfo:o,showWarning:c},children:[t,l.jsx(Hy,{toasts:e,removeToast:i})]})}function Hy({toasts:t,removeToast:e}){return t.length===0?null:l.jsx("div",{className:"toast-container",children:t.map(s=>l.jsxs("div",{className:`toast toast-${s.type}`,children:[l.jsxs("div",{className:"toast-icon",children:[s.type==="error"&&"",s.type==="success"&&"",s.type==="warning"&&"",s.type==="info"&&""]}),l.jsx("div",{className:"toast-message",children:s.message}),l.jsx("button",{className:"toast-close",onClick:()=>e(s.id),children:""})]},s.id))})}function Ky(){const t=w.useContext(Qm);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const qm=w.createContext(),Ym=()=>{const t=w.useContext(qm);if(!t)throw new Error("useLoading must be used within LoadingProvider");return t},Gy=({children:t})=>{const[e,s]=w.useState(!1),[n,i]=w.useState(""),r=(o="Loading...")=>{i(o),s(!0)},a=()=>{s(!1),i("")};return l.jsx(qm.Provider,{value:{isLoading:e,loadingMessage:n,showLoading:r,hideLoading:a},children:t})},Xy=()=>{const{isLoading:t,loadingMessage:e}=Ym();return t?l.jsxs("div",{className:"loading-overlay",children:[l.jsx("div",{className:"loading-backdrop"}),l.jsxs("div",{className:"loading-content",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{className:"loading-message",children:e})]})]}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qy=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),ph=t=>{const e=qy(t);return e.charAt(0).toUpperCase()+e.slice(1)},Jm=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),Yy=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:a,...o},c)=>w.createElement("svg",{ref:c,...Jy,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:Jm("lucide",i),...!r&&!Yy(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>w.createElement(u,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=(t,e)=>{const s=w.forwardRef(({className:n,...i},r)=>w.createElement(Zy,{ref:r,iconNode:e,className:Jm(`lucide-${Qy(ph(t))}`,`lucide-${t}`,n),...i}));return s.displayName=ph(t),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],tx=fs("activity",ex);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],nx=fs("building-2",sx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],rx=fs("chart-line",ix);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ax=fs("chevron-right",lx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cx=fs("layout-dashboard",ox);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hx=fs("settings",ux);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fx=fs("star",dx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],px=fs("trending-up",mx),vx=[{id:"dashboard",label:"Dashboard",icon:cx,subsections:[]},{id:"trading",label:"Market Sandbox",icon:px,subsections:[]},{id:"real-trading",label:"Market Connect",icon:nx,subsections:[]},{id:"market",label:"Market Data",icon:rx,subsections:[{id:"gainers",label:"Top Gainers"},{id:"losers",label:"Top Losers"},{id:"nifty-contributors",label:"Nifty Contributors"},{id:"fii-dii",label:"FII/DII Activity"},{id:"weekly",label:"Weekly Movers"},{id:"bulk",label:"Bulk Deals"}]},{id:"watchlist",label:"Watchlist",icon:fx,subsections:[]},{id:"documentation",label:"Platform Guide",icon:"",subsections:[]},{id:"settings",label:"Settings",icon:hx,subsections:[{id:"profile",label:"Profile"},{id:"preferences",label:"Preferences"}]}];function gx({activeSection:t,onSectionChange:e,collapsed:s,onToggleCollapse:n,mobileOpen:i,onMobileClose:r}){const[a,o]=w.useState([]),c=h=>{o(d=>d.includes(h)?[]:[h])},u=(h,d=null)=>{if(h.subsections.length>0&&!d)c(h.id);else{const f=d?`${h.id}.${d.id}`:h.id;e(f),i&&r&&r()}};return l.jsxs("aside",{className:`sidebar ${s?"collapsed":""} ${i?"mobile-open":""}`,children:[l.jsxs("div",{className:"sidebar-header",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"sidebar-brand",children:[l.jsx("span",{className:"brand-icon",children:l.jsx(tx,{size:24})}),l.jsx("span",{className:"brand-text",children:"StockServs"})]}),l.jsx("p",{className:"sidebar-tagline",children:"Smart Trading Intelligence"})]}),l.jsx("button",{className:"sidebar-toggle",onClick:n,children:s?"":""})]}),l.jsx("nav",{className:"sidebar-nav",children:vx.map(h=>{const d=a.includes(h.id),f=t===h.id||t.startsWith(`${h.id}.`),v=h.subsections.length>0;return l.jsxs("div",{className:`nav-group ${f?"active":""}`,children:[l.jsxs("button",{className:`nav-item ${f&&!v?"active":""}`,onClick:()=>u(h),title:s?h.label:void 0,children:[l.jsx("span",{className:"nav-icon",children:rl.createElement(h.icon,{size:20})}),!s&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"nav-label",children:h.label}),v&&l.jsx("span",{className:`nav-arrow ${d?"expanded":""}`,children:l.jsx(ax,{size:16})})]})]}),!s&&v&&d&&l.jsx("div",{className:"nav-subsections",children:h.subsections.map(y=>l.jsx("button",{className:`nav-subitem ${t===`${h.id}.${y.id}`?"active":""}`,onClick:()=>u(h,y),children:y.label},y.id))})]},h.id)})}),l.jsx("div",{className:"sidebar-footer",children:!s&&l.jsxs("div",{className:"sidebar-footer-content",children:[l.jsx("span",{className:"footer-label",children:"Market Sandbox Mode"}),l.jsx("span",{className:"footer-badge",children:"Demo"})]})})]})}const Zm=3e4,er=new Map,yx=async(t,e={},s=Zm)=>{const n=new AbortController,i=setTimeout(()=>n.abort(),s);try{return await fetch(t,{...e,signal:n.signal})}finally{clearTimeout(i)}},el=async(t,e={})=>{const s=await yx(t,e,e.timeout||Zm);if(!s.ok){let n=`Request failed (${s.status})`;try{n=(await s.json()).detail||n}catch{}const i=new Error(n);throw i.status=s.status,i}return s.json()},Q=async(t,e={})=>{const s=localStorage.getItem("access_token");if(!s)throw new Error("Not authenticated");const n={...e.headers||{},Authorization:`Bearer ${s}`},i={...e,headers:n},r=!i.method||i.method==="GET";if(r&&er.has(t))return er.get(t);const a=el(t,i).finally(()=>{r&&er.delete(t)});return r&&er.set(t,a),a},ze=async(t,e={},s=null)=>{var n,i;try{return await Q(t,e)}catch(r){return!(r.name==="AbortError"||((n=r.message)==null?void 0:n.includes("aborted"))||((i=r.message)==null?void 0:i.includes("signal")))&&s&&typeof s=="function"&&s(r.message||"Request failed"),null}};function Fc(){return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}))}function Ps(){const t=Fc(),e=t.getDay(),s=t.getHours(),n=t.getMinutes();if(e===0||e===6)return!1;const i=s*60+n,r=9*60+15,a=15*60+30;return i>=r&&i<=a}function vh(){return Ps()?"Open":"Closed"}function xx(){if(Ps())return 0;const t=Fc(),e=t.getDay(),s=t.getHours(),n=t.getMinutes();let i=new Date(t);return e===6?i.setDate(i.getDate()+2):e===0?i.setDate(i.getDate()+1):s>=15&&(s>15||n>30)&&(i.setDate(i.getDate()+1),i.getDay()===6&&i.setDate(i.getDate()+2)),i.setHours(9,15,0,0),i.getTime()-t.getTime()}function wx(){if(!Ps())return 0;const t=Fc(),e=new Date(t);return e.setHours(15,30,0,0),e.getTime()-t.getTime()}function gh(t){if(t<=0)return"Now";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),n=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}h ${s}m`:s>0?`${s}m ${n}s`:`${n}s`}function yh(){if(Ps()){const e=wx();return{event:"close",countdown:gh(e),ms:e}}else{const e=xx();return{event:"open",countdown:gh(e),ms:e}}}let tr=null;class Nx{constructor(){this.subscriptions=new Map,this.timers=new Map,this.inFlight=new Map,this.isPaused=!1,this.isTabVisible=!0,this.isOnline=typeof navigator<"u"?navigator.onLine:!0,this.listeners=new Set,typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isTabVisible=!document.hidden,this.handleStateChange()}),typeof window<"u"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.handleStateChange()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.handleStateChange()}))}handleStateChange(){this.shouldRefresh()?this.resumeAll():this.pauseAll(),this.notifyListeners()}shouldRefresh(){return!this.isPaused&&this.isTabVisible&&this.isOnline&&Ps()}isMarketOpen(){return Ps()}subscribe(e,s,n=1e3){return this.subscriptions.set(e,{callback:s,interval:n}),this.shouldRefresh()&&this.startTimer(e),this.notifyListeners(),e}unsubscribe(e){this.stopTimer(e),this.subscriptions.delete(e),this.notifyListeners()}startTimer(e){const s=this.subscriptions.get(e);if(!s)return;this.stopTimer(e);const n=setInterval(async()=>{if(!this.inFlight.get(e))if(this.shouldRefresh())try{this.inFlight.set(e,!0),await s.callback()}catch(i){console.error(`Error in auto-refresh callback for ${e}:`,i)}finally{this.inFlight.delete(e)}else this.stopTimer(e)},s.interval);this.timers.set(e,n)}stopTimer(e){const s=this.timers.get(e);s&&(clearInterval(s),this.timers.delete(e))}pauseAll(){this.timers.forEach((e,s)=>{clearInterval(e)}),this.timers.clear()}resumeAll(){this.shouldRefresh()&&this.subscriptions.forEach((e,s)=>{this.timers.has(s)||this.startTimer(s)})}togglePause(){this.isPaused=!this.isPaused,this.handleStateChange()}setPaused(e){this.isPaused!==e&&(this.isPaused=e,this.handleStateChange())}getPaused(){return this.isPaused}getOnline(){return this.isOnline}getActiveCount(){return this.timers.size}getTotalCount(){return this.subscriptions.size}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(s){console.error("Error in refresh manager listener:",s)}})}checkMarketHours(){this.handleStateChange()}}function ep(){return tr||(tr=new Nx,setInterval(()=>{tr.checkMarketHours()},3e4)),tr}function bn(t,e,s=1e3,n=!0){const i=ep(),r=w.useRef(e),[a,o]=w.useState(Date.now());return w.useEffect(()=>{r.current=e},[e]),w.useEffect(()=>{if(!n)return;const c=()=>{r.current(),o(Date.now())};return i.subscribe(t,c,s),()=>{i.unsubscribe(t)}},[t,s,n]),{lastUpdate:a}}function Sx(){const t=ep(),[e,s]=w.useState({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()});w.useEffect(()=>{const r=()=>{s({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()})};t.addListener(r);const a=setInterval(r,6e4);return()=>{t.removeListener(r),clearInterval(a)}},[]);const n=w.useCallback(()=>{t.togglePause()},[]),i=w.useCallback(r=>{t.setPaused(r)},[]);return{isPaused:e.isPaused,isOnline:e.isOnline,isMarketOpen:e.isMarketOpen,activeCount:e.activeCount,totalCount:e.totalCount,togglePause:n,setPaused:i}}function Ti(t){const[e,s]=w.useState("");return w.useEffect(()=>{const n=()=>{const r=Math.floor((Date.now()-t)/1e3);if(r<2)s("Just now");else if(r<60)s(`${r}s ago`);else if(r<3600){const a=Math.floor(r/60);s(`${a}m ago`)}else{const a=Math.floor(r/3600);s(`${a}h ago`)}};n();const i=setInterval(n,1e3);return()=>clearInterval(i)},[t]),e}const sr=window.location.origin;function xh({onNavigate:t}){var M,j,L,T,V,F,W,H;const{showError:e}=Ky(),[s,n]=w.useState(null),[i,r]=w.useState(!0),[a,o]=w.useState({gainers:[],losers:[]}),[c,u]=w.useState(null),h=w.useRef({message:"",time:0}),{lastUpdate:d}=bn("dashboard-market",()=>g(),1e4),f=Ti(d);w.useEffect(()=>{p()},[]);const v=$=>{const P=Date.now();h.current.message===$&&P-h.current.time<3e4||(h.current={message:$,time:P},e($))},y=async()=>{const $=await ze(`${sr}/portfolio/summary`,{},P=>{v(`Error fetching portfolio: ${P}`)});$&&n($)},g=async()=>{const[$,P]=await Promise.all([ze(`${sr}/nse_data/top-gainers`,{},B=>{v(`Error fetching NSE data for Top Gainers: ${B}`)}),ze(`${sr}/nse_data/top-losers`,{},B=>{v(`Error fetching NSE data for Top Losers: ${B}`)})]);o({gainers:($==null?void 0:$.top_gainers)||[],losers:(P==null?void 0:P.top_losers)||[]})},S=async()=>{try{const $=await Q(`${sr}/nse_data/fii-dii-activity`).catch(()=>null);$&&u($)}catch($){console.error("Failed to load FII/DII data:",$)}},p=async()=>{r(!0);try{await Promise.all([y(),g(),S()])}catch($){console.error("Failed to load dashboard data:",$)}finally{r(!1)}},m=$=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format($||0),x=$=>{if(!$&&$!==0)return"N/A";const P=Number($);return isNaN(P)?"N/A":`${(P/100).toFixed(0)} Cr`},N=(s==null?void 0:s.wallet_balance)??1e5,k=(s==null?void 0:s.total_invested)??0,E=(s==null?void 0:s.current_value)??0,b=(s==null?void 0:s.total_pnl)??0,C=k>0?(b/k*100).toFixed(2):0;return l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Dashboard"})]}),l.jsx("button",{onClick:p,disabled:i,children:i?"Loading...":"Refresh"})]}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-value",children:m(N)}),l.jsx("div",{className:"stat-card-label",children:"Available Balance"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-value",children:m(k)}),l.jsx("div",{className:"stat-card-label",children:"Total Invested"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-value",children:m(E)}),l.jsx("div",{className:"stat-card-label",children:"Current Value"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsxs("div",{className:"stat-card-header",children:[l.jsx("div",{className:"stat-card-icon green",children:""}),l.jsxs("span",{className:`stat-card-change ${b>=0?"positive":"negative"}`,children:[b>=0?"+":"",C,"%"]})]}),l.jsxs("div",{className:`stat-card-value ${b>=0?"positive":"negative"}`,children:[b>=0?"+":"",m(b)]}),l.jsx("div",{className:"stat-card-label",children:"Total P&L"})]})]}),l.jsxs("div",{className:"dashboard-actions",children:[l.jsx("h3",{children:"Quick Actions"}),l.jsxs("div",{className:"quick-actions-grid",children:[l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.trade"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Trade Stocks"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"View Portfolio"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.gainers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Gainers"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.losers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Losers"})]})]})]}),c&&l.jsxs("div",{className:"fii-dii-container",children:[l.jsxs("h3",{children:[" FII/DII Activity ",c.date&&l.jsxs("span",{className:"fii-dii-date",children:["(",c.date,")"]})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:x((M=c.fii)==null?void 0:M.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:x((j=c.fii)==null?void 0:j.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((L=c.fii)==null?void 0:L.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:x((T=c.fii)==null?void 0:T.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:x((V=c.dii)==null?void 0:V.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:x((F=c.dii)==null?void 0:F.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((W=c.dii)==null?void 0:W.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:x((H=c.dii)==null?void 0:H.netValue)})]})]})]})]})]}),l.jsxs("div",{className:"last-updated",children:[l.jsxs("svg",{className:"last-updated-icon",fill:"currentColor",viewBox:"0 0 16 16",children:[l.jsx("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),l.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),l.jsxs("span",{className:"last-updated-text",children:["Market data updated ",f]})]}),l.jsxs("div",{className:"dashboard-market-grid",children:[l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Gainers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.gainers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[a.gainers.slice(0,5).map(($,P)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:$.symbol}),l.jsxs("span",{className:"market-price",children:["",Number($.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change positive",children:["+",Number($.pChange||0).toFixed(2),"%"]})]},$.symbol||P)),a.gainers.length===0&&l.jsx("div",{className:"loading",children:"No data available"})]})]}),l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Losers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.losers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[a.losers.slice(0,5).map(($,P)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:$.symbol}),l.jsxs("span",{className:"market-price",children:["",Number($.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change negative",children:[Number($.pChange||0).toFixed(2),"%"]})]},$.symbol||P)),a.losers.length===0&&l.jsx("div",{className:"loading",children:"No data available"})]})]})]})]})}const bx=()=>{const[t,e]=w.useState([]),[s,n]=w.useState(!0),[i,r]=w.useState(!1),a=async()=>{try{const o=await Q(`${window.location.origin}/fyers/market/major-indices`);if(r(o.fyers_connected??!1),o.indices){const c=o.indices.map(u=>({symbol:u.symbol||u.identifier,exchange:"NSE",last:u.lastPrice||0,change:u.change||0,pChange:u.pChange||0,open:u.open||0,high:u.high||0,low:u.low||0,previousClose:u.previousClose||0}));e(c)}}catch(o){console.error("Failed to load major indices from Fyers",o)}finally{n(!1)}};return bn("market-status",a,1e4),w.useEffect(()=>{a()},[]),s&&t.length===0?l.jsx("div",{className:"market-status-loading",children:"Loading market data..."}):!i&&!s&&t.length===0?l.jsx("div",{className:"market-status-bar market-status-disconnected",children:l.jsx("span",{className:"connect-prompt",children:"Connect Fyers to view live indices"})}):l.jsx("div",{className:"market-status-bar",children:t.map(o=>l.jsxs("div",{className:"market-index-item",children:[l.jsxs("div",{className:"index-name",children:[o.symbol,l.jsx("span",{className:"index-exchange",children:o.exchange})]}),l.jsxs("div",{className:"index-price-group",children:[l.jsx("span",{className:"index-price",children:(o.last||0).toLocaleString("en-IN",{minimumFractionDigits:2})}),l.jsxs("span",{className:`index-change ${(o.change||0)>=0?"positive":"negative"}`,children:[(o.change||0)>=0?"+":"",(o.change||0).toFixed(2)," (",(o.pChange||0).toFixed(2),"%)"]})]})]},o.symbol))})},G={container:{padding:"1rem",color:"#e1e3e6",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},controls:{display:"flex",gap:"1rem",alignItems:"center"},select:{padding:"0.5rem",borderRadius:"6px",background:"#2d333b",border:"1px solid #444c56",color:"white"},tableContainer:{flex:1,overflow:"auto",border:"1px solid #444c56",borderRadius:"8px"},table:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},th:{position:"sticky",top:0,background:"#22272e",padding:"0.75rem",textAlign:"center",borderBottom:"1px solid #444c56",zIndex:10},td:{padding:"0.5rem",textAlign:"center",borderBottom:"1px solid #2d333b",color:"#adbac7"},strikeRow:{background:"#2d333b",fontWeight:"bold"},callBg:{background:"rgba(0, 208, 156, 0.05)"},putBg:{background:"rgba(255, 77, 77, 0.05)"}},jx=({symbol:t="NIFTY",onClose:e,onSelectToken:s})=>{var N,k,E,b,C,M;const[n,i]=w.useState(null),[r,a]=w.useState([]),[o,c]=w.useState(""),[u,h]=w.useState(!1),[d,f]=w.useState(t),[v,y]=w.useState(""),[g,S]=w.useState(""),p=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","RELIANCE","HDFCBANK","INFY","TCS"],m=async(j,L="")=>{h(!0),y("");try{let T=`${window.location.origin}/fyers/market/option-chain/${j}`;L&&(T+=`?expiry=${L}`);const V=await Q(T);if(!V.fyers_connected){y("Fyers not connected. Connect via Settings to view live option chain."),i(null);return}if(V.error){y(V.error),i(null);return}if(S(V.spotSource||""),V.strikeData){const F=V.expiryDates&&V.expiryDates.length>0?V.expiryDates:V.expiryDate?[V.expiryDate]:[],W={underlyingValue:V.spotPrice||0,pcr:V.pcr||0,expiryDates:F,currentExpiry:V.expiryDate,data:Object.entries(V.strikeData).map(([H,$])=>({strikePrice:parseFloat(H),expiryDate:V.expiryDate,CE:$.call_oi||$.call_ltp?{openInterest:$.call_oi||0,totalTradedVolume:$.call_volume||0,lastPrice:$.call_ltp||0,change:$.call_change||0,pChange:$.call_pChange||0,identifier:$.call_identifier||null}:null,PE:$.put_oi||$.put_ltp?{openInterest:$.put_oi||0,totalTradedVolume:$.put_volume||0,lastPrice:$.put_ltp||0,change:$.put_change||0,pChange:$.put_pChange||0,identifier:$.put_identifier||null}:null})).sort((H,$)=>H.strikePrice-$.strikePrice)};i(W),!L&&F.length>0&&(a(F),c(W.currentExpiry))}else i(V),!L&&V.expiryDates&&V.expiryDates.length>0&&(a(V.expiryDates),c(V.currentExpiry))}catch(T){console.error("Failed to fetch option chain from Fyers",T),y(T.message||"Failed to fetch option chain. Please try again.")}finally{h(!1)}};w.useEffect(()=>{m(d,o)},[d,o]);const x=j=>{f(j.target.value),c("")};return l.jsxs("div",{style:G.container,children:[l.jsxs("div",{style:G.header,children:[l.jsxs("div",{style:G.controls,children:[l.jsx("h2",{style:{margin:0},children:"Option Chain"}),l.jsx("select",{style:G.select,value:d,onChange:x,children:p.map(j=>l.jsx("option",{value:j,children:j},j))}),l.jsx("select",{style:G.select,value:o,onChange:j=>c(j.target.value),disabled:!r.length,children:r.map(j=>l.jsx("option",{value:j,children:j},j))})]}),l.jsxs("div",{children:[n&&l.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:["Spot: ",l.jsx("span",{style:{color:"#00d09c"},children:(N=n.underlyingValue)==null?void 0:N.toFixed(2)}),l.jsxs("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#adbac7"},children:["PCR: ",n.pcr]})]}),e&&l.jsx("button",{onClick:e,style:{padding:"0.5rem 1rem",marginLeft:"1rem",background:"#373e47",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"Close"})]})]}),g==="prev_close"&&l.jsx("div",{style:{padding:"0.5rem 1rem",marginBottom:"0.5rem",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"6px",color:"#ffd700",fontSize:"0.85rem",textAlign:"center"},children:"Market closed - showing last available data"}),v&&l.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1rem",background:"rgba(255, 77, 77, 0.1)",border:"1px solid rgba(255, 77, 77, 0.3)",borderRadius:"8px",color:"#ff4d4d"},children:v}),u?l.jsx("div",{style:{textAlign:"center",marginTop:"2rem",color:"#adbac7"},children:"Loading Option Chain..."}):!v&&(!((k=n==null?void 0:n.data)!=null&&k.length)||((E=n==null?void 0:n.data)==null?void 0:E.length)>0&&!n.data.some(j=>j.CE||j.PE))?l.jsxs("div",{style:{textAlign:"center",marginTop:"3rem",color:"#adbac7"},children:[l.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:((b=n==null?void 0:n.data)==null?void 0:b.length)>0?"Option data unavailable":"No option chain data available"}),l.jsx("p",{style:{fontSize:"0.85rem",color:"#768390"},children:((C=n==null?void 0:n.data)==null?void 0:C.length)>0?"Market may be closed or option quotes are unavailable. Try again during market hours.":"Select a symbol above or check your Fyers connection in Settings."})]}):!v&&l.jsx("div",{style:G.tableContainer,children:l.jsxs("table",{style:G.table,children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{colSpan:"4",style:{...G.th,...G.callBg,color:"#00d09c"},children:"CALLS"}),l.jsx("th",{style:G.th,children:"STRIKE"}),l.jsx("th",{colSpan:"4",style:{...G.th,...G.putBg,color:"#ff4d4d"},children:"PUTS"})]}),l.jsxs("tr",{children:[l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"OI"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"Price"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),l.jsx("th",{style:{...G.th,top:"40px",fontSize:"0.75rem"},children:"OI"})]})]}),l.jsx("tbody",{children:(M=n==null?void 0:n.data)==null?void 0:M.map((j,L)=>{var V,F,W,H,$,P,B,A,Y,Z,ct,Te,Bt,Ee,et,jn,ms,At;n.atmStrike,j.strikePrice;const T=n.underlyingValue;return Math.abs(j.strikePrice-T),l.jsxs("tr",{children:[l.jsx("td",{style:{...G.td,...G.callBg},children:((F=(V=j.CE)==null?void 0:V.openInterest)==null?void 0:F.toLocaleString())||"-"}),l.jsx("td",{style:{...G.td,...G.callBg},children:((H=(W=j.CE)==null?void 0:W.totalTradedVolume)==null?void 0:H.toLocaleString())||"-"}),l.jsxs("td",{style:{...G.td,...G.callBg,color:(($=j.CE)==null?void 0:$.change)>=0?"#00d09c":"#ff4d4d"},children:[((B=(P=j.CE)==null?void 0:P.lastPrice)==null?void 0:B.toFixed(2))||"-",j.CE&&s&&l.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>{var Oe,Ke;return s({...j.CE,identifier:(Oe=j.CE)==null?void 0:Oe.identifier,symbol:d,expiry:j.expiryDate,strike:j.strikePrice,type:"CE",ltp:(Ke=j.CE)==null?void 0:Ke.lastPrice})},children:"B"}),l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>{var Oe,Ke;return s({...j.CE,identifier:(Oe=j.CE)==null?void 0:Oe.identifier,symbol:d,expiry:j.expiryDate,strike:j.strikePrice,type:"CE",ltp:(Ke=j.CE)==null?void 0:Ke.lastPrice})},children:"S"})]})]}),l.jsx("td",{style:{...G.td,...G.callBg,color:((A=j.CE)==null?void 0:A.pChange)>=0?"#00d09c":"#ff4d4d"},children:j.CE?`${((Y=j.CE.pChange)==null?void 0:Y.toFixed(1))??"0.0"}%`:"-"}),l.jsx("td",{style:{...G.td,...G.strikeRow},children:j.strikePrice}),l.jsx("td",{style:{...G.td,...G.putBg,color:((Z=j.PE)==null?void 0:Z.pChange)>=0?"#00d09c":"#ff4d4d"},children:j.PE?`${((ct=j.PE.pChange)==null?void 0:ct.toFixed(1))??"0.0"}%`:"-"}),l.jsxs("td",{style:{...G.td,...G.putBg,color:((Te=j.PE)==null?void 0:Te.change)>=0?"#00d09c":"#ff4d4d"},children:[((Ee=(Bt=j.PE)==null?void 0:Bt.lastPrice)==null?void 0:Ee.toFixed(2))||"-",j.PE&&s&&l.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>{var Oe,Ke;return s({...j.PE,identifier:(Oe=j.PE)==null?void 0:Oe.identifier,symbol:d,expiry:j.expiryDate,strike:j.strikePrice,type:"PE",ltp:(Ke=j.PE)==null?void 0:Ke.lastPrice})},children:"B"}),l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>{var Oe,Ke;return s({...j.PE,identifier:(Oe=j.PE)==null?void 0:Oe.identifier,symbol:d,expiry:j.expiryDate,strike:j.strikePrice,type:"PE",ltp:(Ke=j.PE)==null?void 0:Ke.lastPrice})},children:"S"})]})]}),l.jsx("td",{style:{...G.td,...G.putBg},children:((jn=(et=j.PE)==null?void 0:et.totalTradedVolume)==null?void 0:jn.toLocaleString())||"-"}),l.jsx("td",{style:{...G.td,...G.putBg},children:((At=(ms=j.PE)==null?void 0:ms.openInterest)==null?void 0:At.toLocaleString())||"-"})]},L)})})]})})]})},ca=window.location.origin;function Cx({subSection:t,onNavigate:e}){const[s,n]=w.useState(null),[i,r]=w.useState([]),[a,o]=w.useState(!0);w.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[p,m]=await Promise.all([Q(`${ca}/portfolio/summary`).catch(()=>null),Q(`${ca}/portfolio/orders`).catch(()=>({orders:[]}))]);n(p),r(m.orders||[])}catch(p){console.error("Failed to load wallet data:",p)}finally{o(!1)}},u=async(p,m)=>{const x=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(p),N=m==="SET"?"reset your balance to":"add";if(window.confirm(`Are you sure you want to ${N} ${x}?`)){o(!0);try{await Q(`${ca}/portfolio/funds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:p,type:m})}),alert("Wallet updated successfully!"),c(),m==="SET"&&e("wallet.balance")}catch(k){console.error("Failed to update funds:",k),alert("Failed to update funds: "+k.message)}finally{o(!1)}}},h=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(p||0),d=p=>p?new Date(p).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",f=(s==null?void 0:s.wallet_balance)??1e5,v=(s==null?void 0:s.total_invested)??0,y=(s==null?void 0:s.current_value)??0,g=(s==null?void 0:s.total_pnl)??0,S=f+y;return t==="transactions"?l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Transactions"})]}),l.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading transactions..."}):i.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Transactions"}),l.jsx("div",{className:"empty-state-text",children:"Start trading to see your transaction history here."}),l.jsx("button",{className:"primary-btn",onClick:()=>e("trading.trade"),children:"Start Trading"})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Type"}),l.jsx("th",{className:"text-right",children:"Amount"})]})}),l.jsx("tbody",{children:i.map((p,m)=>{var x;return l.jsxs("tr",{children:[l.jsx("td",{children:d(p.created_at)}),l.jsxs("td",{children:[p.side==="BUY"?"Bought":"Sold"," ",p.quantity," ",p.symbol]}),l.jsx("td",{children:l.jsx("span",{className:`order-side ${(x=p.side)==null?void 0:x.toLowerCase()}`,children:p.side})}),l.jsxs("td",{className:`text-right ${p.side==="BUY"?"negative":"positive"}`,children:[p.side==="BUY"?"-":"+","",Number(p.total_value||0).toLocaleString()]})]},p.id||m)})})]})})]}):t==="funds"?l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Add Funds"})]}),l.jsx("button",{onClick:()=>e("wallet.balance"),children:"Back to Wallet"})]}),l.jsxs("div",{className:"wallet-plans-section",children:[l.jsx("h3",{children:"Subscription Plans (Reset Balance)"}),l.jsx("p",{className:"section-subtitle",children:"Choose a plan to reset your sandbox capital."}),l.jsxs("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:[l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Basic Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Start Fresh"})]})]}),l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(1e6,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Standard Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"10,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Most Popular"})]})]}),l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(2e6,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Premium Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"20,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Pro Trader"})]})]})]}),l.jsx("h3",{style:{marginTop:"2rem"},children:"Top Up"}),l.jsx("p",{className:"section-subtitle",children:"Add more funds to your current balance."}),l.jsx("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"TOPUP"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Top Up Pack"}),l.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Cost: 299"})]})]})})]})]}):l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Wallet"})]}),l.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading wallet..."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"wallet-overview",children:[l.jsxs("div",{className:"wallet-balance-card",children:[l.jsx("div",{className:"wallet-balance-label",children:"Available Balance"}),l.jsx("div",{className:"wallet-balance-value",children:h(f)}),l.jsx("div",{className:"wallet-balance-change",children:l.jsxs("span",{className:g>=0?"positive":"negative",children:[g>=0?"":""," ",h(Math.abs(g))," today"]})})]}),l.jsxs("div",{className:"wallet-actions-card",children:[l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.trade"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"Trade Stocks"})]}),l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.transactions"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"View Transactions"})]}),l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.portfolio"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"View Portfolio"})]}),l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.funds"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"Add Funds"})]})]})]}),l.jsxs("div",{className:"wallet-stats-grid",children:[l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Net Worth"}),l.jsx("span",{className:"wallet-stat-value",children:h(S)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Invested"}),l.jsx("span",{className:"wallet-stat-value",children:h(v)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Current Value"}),l.jsx("span",{className:"wallet-stat-value",children:h(y)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Total P&L"}),l.jsxs("span",{className:`wallet-stat-value ${g>=0?"positive":"negative"}`,children:[g>=0?"+":"",h(g)]})]})]})]}),i.length>0&&l.jsxs("div",{className:"wallet-recent",children:[l.jsxs("div",{className:"wallet-recent-header",children:[l.jsx("h3",{children:"Recent Transactions"}),l.jsx("button",{className:"link-btn",onClick:()=>e("wallet.transactions"),children:"View All "})]}),l.jsx("div",{className:"wallet-recent-list",children:i.slice(0,5).map((p,m)=>{var x;return l.jsxs("div",{className:"wallet-recent-item",children:[l.jsxs("div",{className:"wallet-recent-info",children:[l.jsx("span",{className:`order-side ${(x=p.side)==null?void 0:x.toLowerCase()}`,children:p.side}),l.jsxs("span",{className:"wallet-recent-desc",children:[p.quantity," ",p.symbol]})]}),l.jsxs("span",{className:p.side==="BUY"?"negative":"positive",children:[p.side==="BUY"?"-":"+","",Number(p.total_value||0).toLocaleString()]})]},p.id||m)})})]})]})]})}function ne(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function js(t,e){return t.width===e.width&&t.height===e.height}var kx=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(i){return i!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Ex(t){return new kx(t)}var _x=function(){function t(e,s,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ne({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(r){return r},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ne({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ne(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;js(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=ne(this._transformBitmapSize(e,this._canvasElementClientSize)),i=js(this.bitmapSize,n)?null:n;s===null&&i===null||s!==null&&i!==null&&js(s,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(s,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Px().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=wh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Ex(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=wh(this._canvasElement);if(n!==null){var i=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,r=this._canvasElement.getClientRects(),a=r[0]!==void 0?Lx(r[0],i):ne({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(a){return a.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],r=ne({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Mx(t,e){return new _x(t,e.transform,e.options)}function wh(t){return t.ownerDocument.defaultView}function Px(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Lx(t,e){return ne({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Tx=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ls(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new Tx(i,s,n)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Rx={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},zx={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},$x={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Ix={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Dx={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fx={color:"#26a69a",base:0},tp={color:"#2196f3"},sp={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Nh,tl;function Ts(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function np(t,e,s,n){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(s,e+i),t.lineTo(n,e+i),t.stroke()}function os(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ie(t){if(t===void 0)throw new Error("Value is undefined");return t}function R(t){if(t===null)throw new Error("Value is null");return t}function Ys(t){return R(Ie(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Nh||(Nh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(tl||(tl={}));const Sh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function tt(t){return t<0?0:t>255?255:Math.round(t)||0}function ip(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const Ox=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Vx=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Bx=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Ax=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function wi(t){(t=t.toLowerCase())in Sh&&(t=Sh[t]);{const e=Ax.exec(t)||Bx.exec(t);if(e)return[tt(parseInt(e[1],10)),tt(parseInt(e[2],10)),tt(parseInt(e[3],10)),ip(e.length<5?1:parseFloat(e[4]))]}{const e=Vx.exec(t);if(e)return[tt(parseInt(e[1],16)),tt(parseInt(e[2],16)),tt(parseInt(e[3],16)),1]}{const e=Ox.exec(t);if(e)return[tt(17*parseInt(e[1],16)),tt(17*parseInt(e[2],16)),tt(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function rp(t){return .199*t[0]+.687*t[1]+.114*t[2]}function jl(t){const e=wi(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:rp(e)>160?"black":"white"}}class pe{constructor(){this.h=[]}l(e,s,n){const i={o:e,_:s,u:n===!0};this.h.push(i)}v(e){const s=this.h.findIndex(n=>e===n.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,n){const i=[...this.h];this.h=this.h.filter(r=>!r.u),i.forEach(r=>r.o(e,s,n))}M(){return this.h.length>0}S(){this.h=[]}}function gt(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:gt(t[n],s[n]));return t}function bt(t){return typeof t=="number"&&isFinite(t)}function Ni(t){return typeof t=="number"&&t%1==0}function Ri(t){return typeof t=="string"}function nr(t){return typeof t=="boolean"}function Lt(t){const e=t;if(!e||typeof e!="object")return e;let s,n,i;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],s[n]=i&&typeof i=="object"?Lt(i):i);return s}function Wx(t){return t!==null}function Si(t){return t===null?void 0:t}const Oc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function mn(t,e,s){return e===void 0&&(e=Oc),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class Ux{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),n=this.H();return e.P===s&&e.D===n||(e.P=s,e.D=n,e.R=mn(s,n),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Vc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,n){this.Y.forEach(i=>{i.X(e,s,n)})}}class yt{X(e,s,n){e.useBitmapCoordinateSpace(i=>this.K(i,s,n))}}class Hx extends yt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,r=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let u=i.to-1;u>=i.from;--u){const h=r.it[u],d=Math.round(h.nt*s)+a,f=h.st*n,v=c*n+a;e.moveTo(d,f),e.arc(d,f,v,0,2*Math.PI)}e.fill()};r.et>0&&(e.fillStyle=r.rt,o(r.ht+r.et)),e.fillStyle=r.lt,o(r.ht)}}function Kx(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Gx={from:0,to:1};class Xx{constructor(e,s){this.ut=new Vc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(Kx),this.ct=this.dt.map(n=>{const i=new Hx;return i.J(n),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),n=this.vt.xt(),i=this.F.St();s.forEach((r,a)=>{var o;const c=this.dt[a],u=r.kt(n);if(e||u===null||!r.yt())return void(c.tt=null);const h=R(r.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=r.Dt().Rt(u._t,h.Vt),c.rt=(o=u.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/r.Dt().At()),c.it[0].ot=n,c.it[0].nt=i.It(n),c.tt=Gx})}}class Qx extends yt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=this.zt.Lt.yt,a=this.zt.Et.yt;if(!r&&!a)return;const o=Math.round(this.zt.nt*n),c=Math.round(this.zt.st*i);e.lineCap="butt",r&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Ts(e,this.zt.Lt.Nt),function(u,h,d,f){u.beginPath();const v=u.lineWidth%2?.5:0;u.moveTo(h+v,d),u.lineTo(h+v,f),u.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Ts(e,this.zt.Et.Nt),np(e,c,0,s.width))}}class qx{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new Qx(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=R(this.jt.Ht()),n=s.$t().W().crosshair,i=this.Ft;if(n.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(s),i.Lt.yt=e&&this.jt.qt(),i.Et.et=n.horzLine.width,i.Et.Nt=n.horzLine.style,i.Et.V=n.horzLine.color,i.Lt.et=n.vertLine.width,i.Lt.Nt=n.vertLine.style,i.Lt.V=n.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function Yx(t,e,s,n,i,r){t.fillRect(e+r,s,n-2*r,r),t.fillRect(e+r,s+i-r,n-2*r,r),t.fillRect(e,s,r,i),t.fillRect(e+n-r,s,r,i)}function Cl(t,e,s,n,i,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,s,n,i),t.restore()}function bh(t,e,s,n,i,r){t.beginPath(),t.roundRect?t.roundRect(e,s,n,i,r):(t.lineTo(e+n-r[1],s),r[1]!==0&&t.arcTo(e+n,s,e+n,s+r[1],r[1]),t.lineTo(e+n,s+i-r[2]),r[2]!==0&&t.arcTo(e+n,s+i,e+n-r[2],s+i,r[2]),t.lineTo(e+r[3],s+i),r[3]!==0&&t.arcTo(e,s+i,e,s+i-r[3],r[3]),t.lineTo(e,s+r[0]),r[0]!==0&&t.arcTo(e,s,e+r[0],s,r[0]))}function jh(t,e,s,n,i,r,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===r)return bh(t,e,s,n,i,o),t.fillStyle=r,t.fill(),void t.restore();const u=a/2;var h;bh(t,e+u,s+u,n-a,i-a,(h=-u,o.map(d=>d===0?d:d+h))),r!=="transparent"&&(t.fillStyle=r,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function lp(t,e,s,n,i,r,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,r),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,n,i),t.restore()}class Ch{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,n,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const r=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const h=this.Gt(c,s,n,i),d=h.Jt;return h.Qt?jh(u,d.ti,d.ii,d.ni,d.si,a,d.ei,[d.ht,0,0,d.ht],a):jh(u,d.ri,d.ii,d.ni,d.si,a,d.ei,[0,d.ht,d.ht,0],a),this.zt.hi&&(u.fillStyle=r,u.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(h.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=r,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,n,i){var r;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:h}=e,d=this.zt.hi||!this.zt.mi?s.T:0,f=this.zt.bi?s.C:0,v=s.L+this.Xt.wi,y=s.B+this.Xt.gi,g=s.A,S=s.I,p=this.zt.Kt,m=s.P,x=n.Mi(a,p),N=Math.ceil(n.xi(a,p)),k=m+v+y,E=s.C+g+S+N+d,b=Math.max(1,Math.floor(h));let C=Math.round(k*h);C%2!=b%2&&(C+=1);const M=f>0?Math.max(1,Math.floor(f*u)):0,j=Math.round(E*u),L=Math.round(d*u),T=(r=this.Xt.Si)!==null&&r!==void 0?r:this.Xt.ki,V=Math.round(T*h)-Math.floor(.5*h),F=Math.floor(V+b/2-C/2),W=F+C,H=i==="right",$=H?c.width-f:f,P=H?o.width-M:M;let B,A,Y;return H?(B=P-j,A=P-L,Y=$-d-g-f):(B=P+j,A=P+L,Y=$+d+g),{Qt:H,Jt:{ii:F,li:V,ci:W,ni:j,si:C,ht:2*u,ei:M,ti:B,ri:P,ai:A,oi:b,ui:o.width},di:{ii:F/h,ci:W/h,fi:Y,pi:x}}}}class kl{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||Ch)(this.Ci,this.yi),this.Ri=new(e||Ch)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class Jx extends kl{constructor(e,s,n){super(),this.jt=e,this.Li=s,this.Ei=n}zi(e,s,n){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const r=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||r===null)return;const a=jl(i.labelBackgroundColor);n.t=a.t,e.V=a.i;const o=2/12*this.Li.P();n.wi=o,n.gi=o;const c=this.Ei(this.Li);n.ki=c.ki,e.Kt=this.Li.Fi(c._t,r),e.yt=!0}}const Zx=/[1-9]/g;class ap{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=s.R,Math.round(s.Wi.xi(f,R(this.zt).Kt,Zx))));if(n<=0)return;const i=s.ji,r=n+2*i,a=r/2,o=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+r>o&&(c-=Math.abs(o-(u+r)),u=Math.floor(c-a)+.5);const h=u+r,d=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:v,verticalPixelRatio:y})=>{const g=R(this.zt);f.fillStyle=g.t;const S=Math.round(u*v),p=Math.round(0*y),m=Math.round(h*v),x=Math.round(d*y),N=Math.round(2*v);if(f.beginPath(),f.moveTo(S,p),f.lineTo(S,x-N),f.arcTo(S,x,S+N,x,N),f.lineTo(m-N,x),f.arcTo(m,x,m,x-N,N),f.lineTo(m,p),f.fill(),g.hi){const k=Math.round(g.ki*v),E=p,b=Math.round((E+s.T)*y);f.fillStyle=g.V;const C=Math.max(1,Math.floor(v)),M=Math.floor(.5*v);f.fillRect(k-M,E,C,b-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const v=R(this.zt),y=0+s.C+s.T+s.L+s.P/2;f.font=s.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=v.V;const g=s.Wi.Mi(f,"Apr0");f.translate(u+i,y+g),f.fillText(v.Kt,0,0)})}}class ew{constructor(e,s,n){this.ft=!0,this.Wt=new ap,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const r=n.Ui(this.vt.xt());e.Kt=n.qi(R(r)),e.yt=!0;const a=jl(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=n.W().ticksVisible}}class Bc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Yn;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Yn||(Yn={}));class tw extends Bc{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new Xx(e,this),this.fn=((i,r)=>a=>{const o=r(),c=i();if(a===R(this.tn).vn())return{_t:c,ki:o};{const u=R(a.Ct());return{_t:a.pn(o,u),ki:o}}})(()=>this.nn,()=>this.an);const n=((i,r)=>()=>{const a=this.$i.St().mn(i()),o=r();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new ew(this,e,n),this.wn=new qx(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,s,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,n){this.Bn(e,s,n)&&this.Vn()}Bn(e,s,n){const i=this.ln,r=this.an,a=this.nn,o=this.sn,c=this.tn,u=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const h=u!==null?u.Ct():null;return u!==null&&h!==null?(this.nn=s,this.an=u.Rt(s,h)):(this.nn=NaN,this.an=NaN),i!==this.ln||r!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(Wx),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,n){let i=e.get(s);return i===void 0&&(i=new Jx(this,s,n),e.set(s,i)),i}}function El(t){return t==="left"||t==="right"}class je{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const n=function(i,r){return i===void 0?r:{Fn:Math.max(i.Fn,r.Fn),Wn:i.Wn||r.Wn}}(this.zn.get(e),s);this.zn.set(e,n)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,n)=>{this.Nn(n,s)})}static ss(){return new je(2)}static es(){return new je(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const kh=".";function Tt(t,e){if(!bt(t))return"n/a";if(!Ni(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class _l{constructor(e,s){if(s||(s=1),bt(e)&&Ni(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let n=Math.floor(e),i="";const r=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-n*s).toFixed(this._s);a>=s&&(a-=s,n+=1),i=kh+Tt(+a.toFixed(this._s)*this.rs,r)}else n=Math.round(n*s)/s,r>0&&(i=kh+Tt(0,r));return n.toFixed(0)+i}}class op extends _l{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class sw{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const n=Math.pow(10,this.us);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(i,r)=>r)}}function cp(t,e,s,n,i,r,a){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[n.from];let d=r(t,h),f=h;if(n.to-n.from<2){const v=i/2;o.beginPath();const y={nt:h.nt-v,st:h.st},g={nt:h.nt+v,st:h.st};o.moveTo(y.nt*c,y.st*u),o.lineTo(g.nt*c,g.st*u),a(t,d,y,g)}else{const v=(g,S)=>{a(t,d,f,S),o.beginPath(),d=g,f=S};let y=f;o.beginPath(),o.moveTo(h.nt*c,h.st*u);for(let g=n.from+1;g<n.to;++g){y=e[g];const S=r(t,y);switch(s){case 0:o.lineTo(y.nt*c,y.st*u);break;case 1:o.lineTo(y.nt*c,e[g-1].st*u),S!==d&&(v(S,y),o.lineTo(y.nt*c,e[g-1].st*u)),o.lineTo(y.nt*c,y.st*u);break;case 2:{const[p,m]=nw(e,g-1,g);o.bezierCurveTo(p.nt*c,p.st*u,m.nt*c,m.st*u,y.nt*c,y.st*u);break}}s!==1&&S!==d&&(v(S,y),o.moveTo(y.nt*c,y.st*u))}(f!==y||f===y&&s===1)&&a(t,d,f,y)}}const Eh=6;function ua(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function _h(t,e){return{nt:t.nt/e,st:t.st/e}}function nw(t,e,s){const n=Math.max(0,e-1),i=Math.min(t.length-1,s+1);var r,a;return[(r=t[e],a=_h(ua(t[s],t[n]),Eh),{nt:r.nt+a.nt,st:r.st+a.st}),ua(t[s],_h(ua(t[i],t[e]),Eh))]}function iw(t,e,s,n,i){const{context:r,horizontalPixelRatio:a,verticalPixelRatio:o}=e;r.lineTo(i.nt*a,t*o),r.lineTo(n.nt*a,t*o),r.closePath(),r.fillStyle=s,r.fill()}class up extends yt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:n,tt:i,ds:r,et:a,Nt:o,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=a,Ts(h,o),h.lineWidth=1,cp(e,n,c,i,r,this.bs.bind(this),iw.bind(null,u))}}function _o(t,e,s){return Math.min(Math.max(t,e),s)}function ir(t,e,s){return e-t<=s}function hp(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Ac{ws(e,s){const n=this.gs,{Ms:i,xs:r,Ss:a,ks:o,ys:c,vs:u}=s;if(this.Cs===void 0||n===void 0||n.Ms!==i||n.xs!==r||n.Ss!==a||n.ks!==o||n.vs!==u||n.ys!==c){const h=e.context.createLinearGradient(0,0,0,c);if(h.addColorStop(0,i),u!=null){const d=_o(u*e.verticalPixelRatio/c,0,1);h.addColorStop(d,r),h.addColorStop(d,a)}h.addColorStop(1,o),this.Cs=h,this.gs=s}return this.Cs}}class rw extends up{constructor(){super(...arguments),this.Ts=new Ac}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function lw(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class dp extends yt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:n,ds:i,fs:r,et:a,Nt:o,Ds:c}=this.G;if(n===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,Ts(u,o),u.lineJoin="round";const h=this.Vs.bind(this);r!==void 0&&cp(e,s,r,n,i,h,lw),c&&function(d,f,v,y,g){const{horizontalPixelRatio:S,verticalPixelRatio:p,context:m}=d;let x=null;const N=Math.max(1,Math.floor(S))%2/2,k=v*p+N;for(let E=y.to-1;E>=y.from;--E){const b=f[E];if(b){const C=g(d,b);C!==x&&(m.beginPath(),x!==null&&m.fill(),m.fillStyle=C,x=C);const M=Math.round(b.nt*S)+N,j=b.st*p;m.moveTo(M,j),m.arc(M,j,k,0,2*Math.PI)}}m.fill()}(e,s,c,n,h)}}class fp extends dp{Vs(e,s){return s.lt}}function mp(t,e,s,n,i=0,r=e.length){let a=r-i;for(;0<a;){const o=a>>1,c=i+o;n(e[c],s)===t?(i=c+1,a-=o+1):a=o}return i}const zi=mp.bind(null,!0),pp=mp.bind(null,!1);function aw(t,e){return t.ot<e}function ow(t,e){return e<t.ot}function vp(t,e,s){const n=e.Os(),i=e.ui(),r=zi(t,n,aw),a=pp(t,i,ow);if(!s)return{from:r,to:a};let o=r,c=a;return r>0&&r<t.length&&t[r].ot>=n&&(o=r-1),a>0&&a<t.length&&t[a-1].ot<=i&&(c=a+1),{from:o,to:c}}class Wc{constructor(e,s,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const n=s.Xs();if(n===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=vp(this.zs,n,this.Fs),this.Gs(e,s,i.Vt),this.Js())}}class Ml extends Wc{constructor(e,s){super(e,s,!0)}Gs(e,s,n){s.Qs(this.zs,Si(this.Ls)),e.te(this.zs,n,Si(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const n=s.Vt[3];return this.se(s.ee,n,e)})}}class cw extends Ml{constructor(e,s){super(e,s),this.js=new Vc,this.re=new rw,this.he=new fp,this.js.Z([this.re,this.he])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class uw extends yt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let i=null;const r=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];i!==o.ce&&(e.fillStyle=o.ce,i=o.ce);const c=Math.floor(.5*this.oe),u=Math.round(o.nt*s),h=u-c,d=this.oe,f=h+d-1,v=Math.min(o.de,o.fe),y=Math.max(o.de,o.fe),g=Math.round(v*n)-c,S=Math.round(y*n)+c,p=Math.max(S-g,this.oe);e.fillRect(h,g,d,p);const m=Math.ceil(1.5*this.ae);if(r){if(this.zt.ve){const E=u-m;let b=Math.max(g,Math.round(o.pe*n)-c),C=b+d-1;C>g+p-1&&(C=g+p-1,b=C-d+1),e.fillRect(E,b,h-E,C-b+1)}const x=u+m;let N=Math.max(g,Math.round(o.me*n)-c),k=N+d-1;k>g+p-1&&(k=g+p-1,N=k-d+1),e.fillRect(f+1,N,x-f,k-N+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(n,i){return Math.floor(.3*n*i)}(R(this.zt).le,e)))}}class gp extends Wc{constructor(e,s){super(e,s,!1)}Gs(e,s,n){s.Qs(this.zs,Si(this.Ls)),e.be(this.zs,n,Si(this.Ls))}we(e,s,n){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class hw extends gp{constructor(){super(...arguments),this.js=new uw}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class dw extends up{constructor(){super(...arguments),this.Ts=new Ac}bs(e,s){const n=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:n.vs})}}class fw extends dp{constructor(){super(...arguments),this.Pe=new Ac}Vs(e,s){const n=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:n.vs})}}class mw extends Ml{constructor(e,s){super(e,s),this.js=new Vc,this.Ve=new dw,this.Oe=new fw,this.js.Z([this.Ve,this.Oe])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),n=this.Es.Dt().Rt(s.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:n,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:i})}}class pw extends yt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(r,a){if(r>=2.5&&r<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),c=Math.floor(r*o*a),u=Math.floor(r*a),h=Math.min(c,u);return Math.max(Math.floor(a),h)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const i=this.ze(s);(!this.zt._i||this.ae>2*i)&&this.Le(e,n,this.zt.tt)}Ae(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(r),Math.floor(this.zt.le*r));c=Math.max(Math.floor(r),Math.min(c,this.ae));const u=Math.floor(.5*c);let h=null;for(let d=n.from;d<n.to;d++){const f=s[d];f.Ee!==o&&(i.fillStyle=f.Ee,o=f.Ee);const v=Math.round(Math.min(f.pe,f.me)*a),y=Math.round(Math.max(f.pe,f.me)*a),g=Math.round(f.de*a),S=Math.round(f.fe*a);let p=Math.round(r*f.nt)-u;const m=p+c-1;h!==null&&(p=Math.max(h+1,p),p=Math.min(p,m));const x=m-p+1;i.fillRect(p,g,x,v-g),i.fillRect(p,y+1,x,S-y),h=m}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),s);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="";const c=this.ze(r);let u=null;for(let h=n.from;h<n.to;h++){const d=s[h];d.Ne!==o&&(i.fillStyle=d.Ne,o=d.Ne);let f=Math.round(d.nt*r)-Math.floor(.5*this.ae);const v=f+this.ae-1,y=Math.round(Math.min(d.pe,d.me)*a),g=Math.round(Math.max(d.pe,d.me)*a);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,v)),this.zt.le*r>2*c)Yx(i,f,y,v-f+1,g-y+1,c);else{const S=v-f+1;i.fillRect(f,y,S,g-y+1)}u=v}}Le(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="";const c=this.ze(r);for(let u=n.from;u<n.to;u++){const h=s[u];let d=Math.round(Math.min(h.pe,h.me)*a),f=Math.round(Math.max(h.pe,h.me)*a),v=Math.round(h.nt*r)-Math.floor(.5*this.ae),y=v+this.ae-1;if(h.ce!==o){const g=h.ce;i.fillStyle=g,o=g}this.zt._i&&(v+=c,d+=c,y-=c,f-=c),d>f||i.fillRect(v,d,y-v+1,f-d+1)}}}class vw extends gp{constructor(){super(...arguments),this.js=new pw}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class gw{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,n){this.Fe.draw(e,this.Li,s,n)}}class ha extends Wc{constructor(e,s,n){super(e,s,!1),this.wn=n,this.js=new gw(this.wn.renderer(),i=>{const r=e.Ct();return r===null?null:e.Dt().Rt(i,r.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,Si(this.Ls))}Js(){this.wn.update({bars:this.zs.map(yw),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function yw(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class xw extends yt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const i=Math.max(1,Math.floor(n)),r=Math.round(this.zt.Ye*n)-Math.floor(i/2),a=r+i;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],u=this.Ue[o-this.zt.tt.from],h=Math.round(c.st*n);let d,f;e.fillStyle=c.ce,h<=r?(d=h,f=a):(d=r,f=h-Math.floor(i/2)+i),e.fillRect(u.Os,d,u.ui-u.Os+1,f-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.zt.it[r],o=Math.round(a.nt*e);let c,u;if(n%2){const h=(n-1)/2;c=o-h,u=o+h}else{const h=n/2;c=o-h,u=o+h-1}this.Ue[r-this.zt.tt.from]={Os:c,ui:u,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let r=this.zt.tt.from+1;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from],o=this.Ue[r-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let i=Math.ceil(this.zt.le*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;i=Math.min(o,i)}if(s>0&&i<4)for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from];a.ui-a.Os+1>i&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class ww extends Ml{constructor(){super(...arguments),this.js=new xw}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,R(this.Es.Ct()).Vt)};this.js.J(e)}}class Nw extends Ml{constructor(){super(...arguments),this.js=new fp}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const Sw=/[2-9]/g;class bi{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,n){return this.sr(e,s,n).width}Mi(e,s,n){const i=this.sr(e,s,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,s,n){const i=n||Sw,r=String(s).replace(i,"0");if(this.tr.has(r))return Ie(this.tr.get(r)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(r);return e.restore(),a.width===0&&s.length||(this.tr.set(r,{er:a,rr:this.Ge}),this.Qe[this.Ge]=r,this.Ke++,this.Ge++),a}}class bw{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,n){this.hr=e,this.k=s,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class yp{constructor(e,s,n){this.ur=e,this.ar=new bi(50),this.cr=s,this.F=n,this.j=-1,this.Wt=new bw(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const n=e.mr(s);if(n==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,n),this.Wt}}class jw extends yt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:i,et:r,gr:a}=this.zt;return s>=i-r-7&&s<=i+r+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const r=Math.round(this.zt.st*i);r<0||r>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),Ts(e,this.zt.Nt),np(e,r,0,s.width))}}class Uc{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new jw,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class Cw extends Uc{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class kw extends yt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const i=this.zt;if(i===null)return;const r=Math.max(1,Math.floor(s)),a=r%2/2,o=Math.round(i.Xe.x*s)+a,c=i.Xe.y*n;e.fillStyle=i.Tr,e.beginPath();const u=Math.max(2,1.5*i.Pr)*s;e.arc(o,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(o,c,i.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=i.Dr,e.beginPath(),e.arc(o,c,i.ht*s+r/2,0,2*Math.PI,!1),e.stroke()}}const Ew=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Mh(t,e,s,n){return function(i,r){if(i==="transparent")return i;const a=wi(i),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${r*o})`}(t,s+(n-s)*e)}function Ph(t,e){const s=t%2600/2600;let n;for(const c of Ew)if(s>=c.Vr&&s<=c.Or){n=c;break}os(n!==void 0,"Last price animation internal logic error");const i=(s-n.Vr)/(n.Or-n.Vr);return{Rr:Mh(e,i,n.Ir,n.zr),Dr:Mh(e,i,n.Lr,n.Er),ht:(r=i,a=n.Br,o=n.Ar,a+(o-a)*r)};var r,a,o}class _w{constructor(e){this.Wt=new kw,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),n=this.jr.Ct();if(s===null||n===null)return;const i=this.jr.Zr(!0);if(i.Xr||!s.Kr(i.ee))return;const r={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,n.Vt)},a=i.V,o=this.jr.W().lineWidth,c=Ph(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:r})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Ph(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Jn(t,e){return hp(Math.min(Math.max(t,12),30)*e)}function ji(t,e){switch(t){case"arrowDown":case"arrowUp":return Jn(e,1);case"circle":return Jn(e,.8);case"square":return Jn(e,.7)}}function xp(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Jn(t,1))}function Lh(t){return Math.max(Jn(t,.1),3)}function Th(t,e,s){return e?t:s?Math.ceil(t/2):0}function wp(t,e,s,n,i){const r=ji("square",s),a=(r-1)/2,o=t-a,c=e-a;return n>=o&&n<=o+r&&i>=c&&i<=c+r}function Rh(t,e,s,n){const i=(ji("arrowUp",n)-1)/2*s.Jr,r=(hp(n/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st-i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st+i),e.lineTo(s.nt-r,s.st+i),e.lineTo(s.nt-r,s.st)):(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st+i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st-i),e.lineTo(s.nt-r,s.st-i),e.lineTo(s.nt-r,s.st)),e.fill()}function Mw(t,e,s,n,i,r){return wp(e,s,n,i,r)}class Pw extends yt{constructor(){super(...arguments),this.zt=null,this.ar=new bi,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=mn(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const i=this.zt.it[n];if(Tw(i,e,s))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n},i,r){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),Lw(o,e,s,n)}}}}function Lw(t,e,s,n){e.fillStyle=t.V,t.Kt!==void 0&&function(i,r,a,o,c,u){i.save(),i.scale(c,u),i.fillText(r,a,o),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,n),function(i,r,a){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void Rh(!1,r,a,i.Ks);case"arrowUp":return void Rh(!0,r,a,i.Ks);case"circle":return void function(o,c,u){const h=(ji("circle",u)-1)/2;o.beginPath(),o.arc(c.nt,c.st,h*c.Jr,0,2*Math.PI,!1),o.fill()}(r,a,i.Ks);case"square":return void function(o,c,u){const h=ji("square",u),d=(h-1)*c.Jr/2,f=c.nt-d,v=c.st-d;o.fillRect(f,v,h*c.Jr,h*c.Jr)}(r,a,i.Ks)}i.nh}}(t,e,function(i,r,a){const o=Math.max(1,Math.floor(r))%2/2;return{nt:Math.round(i.nt*r)+o,st:i.st*a,Jr:r}}(t,s,n))}function Tw(t,e,s){return!(t.Kt===void 0||!function(n,i,r,a,o,c){const u=a/2;return o>=n&&o<=n+r&&c>=i-u&&c<=i+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(n,i,r){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return Mw(0,n.nt,n.st,n.Ks,i,r);case"circle":return function(a,o,c,u,h){const d=2+ji("circle",c)/2,f=a-u,v=o-h;return Math.sqrt(f*f+v*v)<=d}(n.nt,n.st,n.Ks,i,r);case"square":return wp(n.nt,n.st,n.Ks,i,r)}}(t,e,s)}function Rw(t,e,s,n,i,r,a,o,c){const u=bt(s)?s:s.Se,h=bt(s)?s:s.Me,d=bt(s)?s:s.xe,f=bt(e.size)?Math.max(e.size,0):1,v=xp(o.le())*f,y=v/2;switch(t.Ks=v,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+y+r+.6*i));case"aboveBar":return t.st=a.Rt(h,c)-y-n.sh,t.Kt!==void 0&&(t.Kt.st=t.st-y-.6*i,n.sh+=1.2*i),void(n.sh+=v+r);case"belowBar":return t.st=a.Rt(d,c)+y+n.eh,t.Kt!==void 0&&(t.Kt.st=t.st+y+r+.6*i,n.eh+=1.2*i),void(n.eh+=v+r)}e.position}class zw{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new Pw,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=Lh(e),n=1.5*xp(e)+2*s,i=this.fh();this.ah={above:Th(n,i.aboveBar,i.inBar),below:Th(n,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const r=s.Xs();if(r===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=Lh(s.le()),u={sh:c,eh:c};this.zt.tt=vp(this.zt.it,r,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=n[h];d.time!==o&&(u.sh=c,u.eh=c,o=d.time);const f=this.zt.it[h];f.nt=s.It(d.time),d.text!==void 0&&d.text.length>0&&(f.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const v=this.jr.ph(d.time);v!==null&&Rw(f,d,v,u,i.fontSize,c,e,s,a.Vt)}this.ft=!1}}class $w extends Uc{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(s.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class Iw extends kl{constructor(e){super(),this.jt=e}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.jt;if(!i.yt())return;const r=i.W(),a=r.lastValueVisible,o=i.bh()!=="",c=r.seriesLastValueMode===0,u=i.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(u,a,o,c),s.yt=s.Kt.length>0);const h=i.mh(u.V),d=jl(h);n.t=d.t,n.ki=u.ki,s.Ot=i.$t().Bt(u.ki/i.Dt().At()),e.Ot=h,e.V=d.i,s.V=d.i}gh(e,s,n,i){let r="";const a=this.jt.bh();return n&&a.length!==0&&(r+=`${a} `),s&&i&&(r+=this.jt.Dt().Mh()?e.xh:e.Sh),r.trim()}wh(e,s,n){return s?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function zh(t,e,s,n){const i=Number.isFinite(e),r=Number.isFinite(s);return i&&r?t(e,s):i||r?i?e:s:n}class He{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new He(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new He(zh(Math.min,this.Ph(),e.Ph(),-1/0),zh(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!bt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let n=this.yh-s,i=this.kh-s;n*=e,i*=e,this.yh=s+n,this.kh=s+i}Oh(e){bt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new He(e.minValue,e.maxValue)}}class sl{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new sl(He.Ah(e.priceRange),e.margins)}}class Dw extends Uc{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class Fw extends kl{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.Nh.W(),r=i.axisLabelVisible,a=i.title!=="",o=this.jr;if(!r||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=i.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const u=jl(i.axisLabelColor||i.color);n.t=u.t;const h=i.axisLabelTextColor||u.i;e.V=h,s.V=h,n.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class Ow{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Dw(e,this),this.ur=new Fw(e,this),this.Hh=new yp(this.ur,e,e.$t())}$h(e){gt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const n=e.Ct();return n===null?null:s.Rt(this.cn.price,n.Vt)}}class Vw extends Bc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Bw={Bar:(t,e,s,n)=>{var i;const r=e.upColor,a=e.downColor,o=R(t(s,n)),c=Ys(o.Vt[0])<=Ys(o.Vt[3]);return{ce:(i=o.V)!==null&&i!==void 0?i:c?r:a}},Candlestick:(t,e,s,n)=>{var i,r,a;const o=e.upColor,c=e.downColor,u=e.borderUpColor,h=e.borderDownColor,d=e.wickUpColor,f=e.wickDownColor,v=R(t(s,n)),y=Ys(v.Vt[0])<=Ys(v.Vt[3]);return{ce:(i=v.V)!==null&&i!==void 0?i:y?o:c,Ne:(r=v.Ot)!==null&&r!==void 0?r:y?u:h,Ee:(a=v.Xh)!==null&&a!==void 0?a:y?d:f}},Custom:(t,e,s,n)=>{var i;return{ce:(i=R(t(s,n)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,s,n)=>{var i,r,a,o;const c=R(t(s,n));return{ce:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,lt:(r=c.lt)!==null&&r!==void 0?r:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,n)=>{var i,r,a,o,c,u;const h=R(t(s,n));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=h.Re)!==null&&i!==void 0?i:e.topLineColor,De:(r=h.De)!==null&&r!==void 0?r:e.bottomLineColor,ke:(a=h.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=h.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=h.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=h.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,n)=>{var i,r;const a=R(t(s,n));return{ce:(i=a.V)!==null&&i!==void 0?i:e.color,lt:(r=a.V)!==null&&r!==void 0?r:e.color}},Histogram:(t,e,s,n)=>{var i;return{ce:(i=R(t(s,n)).V)!==null&&i!==void 0?i:e.color}}};class Aw{constructor(e){this.Kh=(s,n)=>n!==void 0?n.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=Bw[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var $h;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})($h||($h={}));const Ht=30;class Ww{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const n=this.hl(e,s);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,s,n){if(this.Ni())return null;let i=null;for(const r of n)i=rr(i,this._l(e,s,r));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const n=this.ul(e);if(n===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return zi(this.tl,e,(s,n)=>s.ee<n)}vl(e){return pp(this.tl,e,(s,n)=>s.ee>n)}pl(e,s,n){let i=null;for(let r=e;r<s;r++){const a=this.tl[r].Vt[n];Number.isNaN(a)||(i===null?i={ml:a,bl:a}:(a<i.ml&&(i.ml=a),a>i.bl&&(i.bl=a)))}return i}_l(e,s,n){if(this.Ni())return null;let i=null;const r=R(this.el()),a=R(this.An()),o=Math.max(e,r),c=Math.min(s,a),u=Math.ceil(o/Ht)*Ht,h=Math.max(u,Math.floor(c/Ht)*Ht);{const f=this.fl(o),v=this.vl(Math.min(c,u,s));i=rr(i,this.pl(f,v,n))}let d=this.il.get(n);d===void 0&&(d=new Map,this.il.set(n,d));for(let f=Math.max(u+1,o);f<h;f+=Ht){const v=Math.floor(f/Ht);let y=d.get(v);if(y===void 0){const g=this.fl(v*Ht),S=this.vl((v+1)*Ht-1);y=this.pl(g,S,n),d.set(v,y)}i=rr(i,y)}{const f=this.fl(h),v=this.vl(c);i=rr(i,this.pl(f,v,n))}return i}}function rr(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class Uw{constructor(e){this.wl=e}X(e,s,n){this.wl.draw(e)}gl(e,s,n){var i,r;(r=(i=this.wl).drawBackground)===null||r===void 0||r.call(i,e)}}class da{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const n=new Uw(s);return this.tr={Ml:s,xl:n},n}Sl(){var e,s,n;return(n=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:"normal"}}function Np(t){var e,s,n,i,r;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(n=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||n===void 0||n,hi:(r=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||r===void 0||r}}class Hw{constructor(e,s){this.Wt=new ap,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Np(this.kl))),this.Wt}}class Kw extends kl{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,n){const i=Np(this.kl);n.t=i.t,e.V=i.V;const r=2/12*this.Li.P();n.wi=r,n.gi=r,n.ki=i.ki,n.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class Gw{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,n,i;const r=(n=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===r)return this.Cl.xl;const a=r.map(o=>new da(o));return this.Cl={Ml:r,xl:a},a}Qi(){var e,s,n,i;const r=(n=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===r)return this.Tl.xl;const a=this.jr.$t().St(),o=r.map(c=>new Hw(c,a));return this.Tl={Ml:r,xl:o},o}Rn(){var e,s,n,i;const r=(n=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===r)return this.Pl.xl;const a=this.jr.Dt(),o=r.map(c=>new Kw(c,a));return this.Pl={Ml:r,xl:o},o}Bl(){var e,s,n,i;const r=(n=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===r)return this.Rl.xl;const a=r.map(o=>new da(o));return this.Rl={Ml:r,xl:a},a}Al(){var e,s,n,i;const r=(n=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===r)return this.Dl.xl;const a=r.map(o=>new da(o));return this.Dl={Ml:r,xl:a},a}Il(e,s){var n,i,r;return(r=(i=(n=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(n,e,s))!==null&&r!==void 0?r:null}wr(e,s){var n,i,r;return(r=(i=(n=this.Vl).hitTest)===null||i===void 0?void 0:i.call(n,e,s))!==null&&r!==void 0?r:null}}function fa(t,e,s,n){t.forEach(i=>{e(i).forEach(r=>{r.Sl()===s&&n.push(r)})})}function ma(t){return t.Pn()}function Xw(t){return t.Bl()}function Qw(t){return t.Al()}class Hc extends Vw{constructor(e,s,n,i,r){super(e),this.zt=new Ww,this.jh=new $w(this),this.zl=[],this.Ll=new Cw(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=n;const a=new Iw(this);this.rn=[a],this.Hh=new yp(a,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new _w(this)),this.Ul(),this.ql(r)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;const i=this.$t().St().Xs(),r=this.Ct();if(i===null||r===null)return s;let a,o;if(e){const d=this.zt.sl();if(d===null)return s;a=d,o=d.ee}else{const d=this.zt.ll(i.ui(),-1);if(d===null||(a=this.zt.Gh(d.ee),a===null))return s;o=d.ee}const c=a.Vt[3],u=this.Us().$s(o,{Vt:a}),h=n.Rt(c,r.Vt);return{Xr:!1,_t:c,Kt:n.Fi(c,r.Vt),xh:n.Yl(c),Sh:n.Zl(c,r.Vt),V:u.ce,ki:h,ee:o}}Us(){return this.Nl!==null||(this.Nl=new Aw(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),gt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new Ow(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];fa(this.Hl,ma,"top",s);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),s.unshift(n)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(n=>n.qh());return e.push(...s),fa(this.Hl,ma,"normal",e),e}ua(){return this.ca(ma,"bottom")}da(e){return this.ca(Xw,e)}fa(e){return this.ca(Qw,e)}va(e,s){return this.Hl.map(n=>n.wr(e,s)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const i of this.zl)n.push(i.Zh());return this.Hl.forEach(i=>{n.push(...i.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,s);return i===null?null:i.Bh()});return sl.Ah(n)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return R(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new Gw(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof ha)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof ha)return e=>this.wn.je(e)}_a(){return!El(this.Dt().Pa())}pa(e,s){if(!Ni(e)||!Ni(s)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,s,n);let r=i!==null?new He(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new He(o,o);r=r!==null?r.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const v=new He(c.priceRange.minValue,c.priceRange.maxValue);r=r!==null?r.ts(v):v}var u,h,d,f;c!=null&&c.margins&&(u=a,h=c.margins,a={above:Math.max((d=u==null?void 0:u.above)!==null&&d!==void 0?d:0,h.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,h.below)})}),new sl(r,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new sw(this.cn.priceFormat.precision);break;case"percent":this.wa=new op(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new _l(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=R(this.zt.el());this.Wl=this.Fl.map((n,i)=>{const r=R(e.Va(n.time,!0)),a=r<s?1:-1;return{time:R(this.zt.ll(r,a)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:i,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new zw(this,this.$t()),this.$l){case"Bar":this.wn=new hw(this,this.$t());break;case"Candlestick":this.wn=new vw(this,this.$t());break;case"Line":this.wn=new Nw(this,this.$t());break;case"Custom":this.wn=new ha(this,this.$t(),Ie(e));break;case"Area":this.wn=new cw(this,this.$t());break;case"Baseline":this.wn=new mw(this,this.$t());break;case"Histogram":this.wn=new ww(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const n=[];return fa(this.Hl,e,s,n),n}}class qw{constructor(e){this.cn=e}Oa(e,s,n){let i=e;if(this.cn.mode===0)return i;const r=n.vn(),a=r.Ct();if(a===null)return i;const o=r.Rt(e,a),c=n.Ba().filter(h=>h instanceof Hc).reduce((h,d)=>{if(n.vr(d)||!d.yt())return h;const f=d.Dt(),v=d.In();if(f.Ni()||!v.Kr(s))return h;const y=v.Gh(s);if(y===null)return h;const g=Ys(d.Ct());return h.concat([f.Rt(y.Vt[3],g.Vt)])},[]);if(c.length===0)return i;c.sort((h,d)=>Math.abs(h-o)-Math.abs(d-o));const u=c[0];return i=r.pn(u,a),i}}class Yw extends yt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=Math.max(1,Math.floor(n));e.lineWidth=r,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=R(this.zt);if(a.Aa){e.strokeStyle=a.Ia,Ts(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*n);e.moveTo(c,-r),e.lineTo(c,s.height+r)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,Ts(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*i);e.moveTo(-r,c),e.lineTo(s.width+r,c)}e.stroke()}})}}class Jw{constructor(e){this.Wt=new Yw,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class Zw{constructor(e){this.wn=new Jw(e)}qh(){return this.wn}}const pa={$a:4,Ua:1e-4};function Js(t,e){const s=100*(t-e)/e;return e<0?-s:s}function e1(t,e){const s=Js(t.Ph(),e),n=Js(t.Rh(),e);return new He(s,n)}function Zn(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function t1(t,e){const s=Zn(t.Ph(),e),n=Zn(t.Rh(),e);return new He(s,n)}function nl(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ua)+e.$a;return t<0?-n:n}function ei(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.$a)-e.Ua;return t<0?-n:n}function $n(t,e){if(t===null)return null;const s=nl(t.Ph(),e),n=nl(t.Rh(),e);return new He(s,n)}function lr(t,e){if(t===null)return null;const s=ei(t.Ph(),e),n=ei(t.Rh(),e);return new He(s,n)}function va(t){if(t===null)return pa;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return pa;const s=Math.ceil(Math.abs(Math.log10(e))),n=pa.$a+s;return{$a:n,Ua:1/Math.pow(10,n)}}class ga{constructor(e,s){if(this.qa=e,this.Ya=s,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,n){const i=this.qa===0?0:1/this.qa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const d=ir(r,i,1e-14)&&r>i+1e-14,f=ir(r,n*o,1e-14),v=ir(r,1,1e-14);if(!(d&&f&&v))break;r/=o,o=this.Ya[++a%this.Ya.length]}if(r<=i+1e-14&&(r=i),r=Math.max(1,r),this.Za.length>0&&(c=r,u=1,h=1e-14,Math.abs(c-u)<h))for(a=0,o=this.Za[0];ir(r,n*o,1e-14)&&r>i+1e-14;)r/=o,o=this.Za[++a%this.Za.length];var c,u,h;return r}}class Ih{constructor(e,s,n,i){this.Ka=[],this.Li=e,this.qa=s,this.Ga=n,this.Ja=i}Xa(e,s){if(e<s)throw new Error("high < low");const n=this.Li.At(),i=(e-s)*this.Qa()/n,r=new ga(this.qa,[2,2.5,2]),a=new ga(this.qa,[2,2,2.5]),o=new ga(this.qa,[2.5,2,2]),c=[];return c.push(r.Xa(e,s,i),a.Xa(e,s,i),o.Xa(e,s,i)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const n=e.At(),i=this.Ga(n-1,s),r=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=n-1-a,u=Math.max(i,r),h=Math.min(i,r);if(u===h)return void(this.Ka=[]);let d=this.Xa(u,h),f=u%d;f+=f<0?d:0;const v=u>=h?1:-1;let y=null,g=0;for(let S=u-f;S>h;S-=d){const p=this.Ja(S,s,!0);y!==null&&Math.abs(p-y)<this.Qa()||p<o||p>c||(g<this.Ka.length?(this.Ka[g].Ea=p,this.Ka[g].so=e.eo(S)):this.Ka.push({Ea:p,so:e.eo(S)}),g++,y=p,e.ro()&&(d=this.Xa(S*v,h)))}this.Ka.length=g}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function Sp(t){return t.slice().sort((e,s)=>R(e.Xi())-R(s.Xi()))}var Dh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Dh||(Dh={}));const Fh=new op,Oh=new _l(100,1);class s1{constructor(e,s,n,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new pe,this.vo=new pe,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Oh,this.xo=va(null),this.So=e,this.cn=s,this.ko=n,this.yo=i,this.Co=new Ih(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(gt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Ie(e.scaleMargins.top),n=Ie(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(r,a){if(r===null)return!1;const o=ei(r.Ph(),a),c=ei(r.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(n=lr(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(n=$n(this.Ih,this.xo),n!==null&&this.Ao(n));const i=s.Cr!==this.cn.mode;i&&(s.Cr===2||this.Mh())&&this.Ra(),i&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const n=this.Ih;(s||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=Js(e,s):this.Oo()&&(e=Zn(e,s)),this.Po(e,s)}te(e,s,n){this.Wo();const i=this.Fo(),r=R(this.Lh()),a=r.Ph(),o=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,v=this.Ho();for(let y=d;y<f;y++){const g=e[y],S=g._t;if(isNaN(S))continue;let p=S;v!==null&&(p=v(g._t,s));const m=i+h*(p-a),x=u?m:this.ho-1-m;g.st=x}}be(e,s,n){this.Wo();const i=this.Fo(),r=R(this.Lh()),a=r.Ph(),o=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,v=this.Ho();for(let y=d;y<f;y++){const g=e[y];let S=g.ge,p=g.Me,m=g.xe,x=g.Se;v!==null&&(S=v(g.ge,s),p=v(g.Me,s),m=v(g.xe,s),x=v(g.Se,s));let N=i+h*(S-a),k=u?N:this.ho-1-N;g.pe=k,N=i+h*(p-a),k=u?N:this.ho-1-N,g.de=k,N=i+h*(m-a),k=u?N:this.ho-1-N,g.fe=k,N=i+h*(x-a),k=u?N:this.ho-1-N,g.me=k}}pn(e,s){const n=this.To(e,s);return this.$o(n,s)}$o(e,s){let n=e;return this.Mh()?n=function(i,r){return r<0&&(i=-i),i/100*r+r}(n,s):this.Oo()&&(n=function(i,r){return i-=100,r<0&&(i=-i),i/100*r+r}(n,s)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const n=this.po[s];n.Xi()===null&&n.Ki(s+1),e.push(n)}return e=Sp(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const n=s.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=R(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=R(this.ao).Th();s=Math.max(s,.1),n.Vh(s),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=R(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=R(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const i=n*s,r=R(this.ao).Th();r.Oh(i),this.Ao(r,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(Js(e,s));case 3:return this.ba().format(Zn(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,R(this.e_()).ba())}Zl(e,s){return e=Js(e,s),this.s_(e,Fh)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=Oh,this.Mh()?(this.wa=Fh,s=100):this.Oo()?(this.wa=new _l(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new Ih(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?nl(e,this.xo):e;const n=R(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(i)}To(e,s){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),i=R(this.Lh()),r=i.Ph()+i.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?ei(r,this.xo):r}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const n=this.r_();let i=0,r=0;for(const c of n){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const h=c.Il(e.Os(),e.ui());let d=h&&h.Lh();if(d!==null){switch(this.cn.mode){case 1:d=$n(d,this.xo);break;case 2:d=e1(d,u.Vt);break;case 3:d=t1(d,u.Vt)}if(s=s===null?d:s.ts(R(d)),h!==null){const f=h.Eh();f!==null&&(i=Math.max(i,f.above),r=Math.max(r,f.below))}}}if(i===this.co&&r===this.do||(this.co=i,this.do=r,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=lr(s,this.xo)),s=new He(s.Ph()-u,s.Rh()+u),this.ro()&&(s=$n(s,this.xo))}if(this.ro()){const c=lr(s,this.xo),u=va(c);if(a=u,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const h=this.ao!==null?lr(this.ao,this.xo):null;this.xo=u,s=$n(c,u),h!==null&&(this.ao=$n(h,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new He(-.5,.5)),this.xo=va(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?Js:this.Oo()?Zn:this.ro()?e=>nl(e,this.xo):null}a_(e,s,n){return s===void 0?(n===void 0&&(n=this.ba()),n.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class n1{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new pe,this.yl=e,this.$i=s,this.d_=new Zw(this);const n=s.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const n of s){const i=R(n[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Ie(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const n=s.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,n){const i=n!==void 0?n:this.C_().y_+1;this.T_(e,s,i)}Zo(e){const s=this.po.indexOf(e);os(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const n=R(e.Dt()).Pa();if(this.o_.has(n)){const r=Ie(this.o_.get(n)),a=r.indexOf(e);a!==-1&&(r.splice(a,1),r.length===0&&this.o_.delete(n))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=Sp(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,n=0;for(let i=0;i<e.length;i++){const r=e[i].Xi();r!==null&&(r<s&&(s=r),r>n&&(n=r))}return{H_:s,y_:n}}T_(e,s,n){let i=this.w_(s);if(i===null&&(i=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!El(s)){const r=this.o_.get(s)||[];r.push(e),this.o_.set(s,r)}i.qo(e),e.Gi(i),e.Ki(n),this.P_(i),this.mo=null}m_(e,s,n){s.Cr!==n.Cr&&this.L_(e)}v_(e,s){const n=Object.assign({visible:!0,autoScale:!0},Lt(s)),i=new s1(e,n,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class i1{constructor(e,s,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=n}Y_(e){const s=e.time,n=this.q_.cacheKey(s),i=this.tr.get(n);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Ie(a)),this.Je++,this.Ke--}const r=this.U_(e);return this.tr.set(n,{Z_:r,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,r}}class ti{constructor(e,s){os(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Vh(t,e){return t===null||e===null?t===e:t.Ch(e)}class r1{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let n=s;n<e.length;++n){const i=e[n];let r=this.J_.get(i.timeWeight);r===void 0&&(r=[],this.J_.set(i.timeWeight,r)),r.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,s){const n=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((n,i)=>{e<=n[0].index?s.push(i):n.splice(zi(n,e,r=>r.index<e),1/0)});for(const n of s)this.J_.delete(n)}ru(e){let s=[];for(const n of Array.from(this.J_.keys()).sort((i,r)=>r-i)){if(!this.J_.get(n))continue;const i=s;s=[];const r=i.length;let a=0;const o=Ie(this.J_.get(n)),c=o.length;let u=1/0,h=-1/0;for(let d=0;d<c;d++){const f=o[d],v=f.index;for(;a<r;){const y=i[a],g=y.index;if(!(g<v)){u=g;break}a++,s.push(y),h=g,u=1/0}if(u-v>=e&&v-h>=e)s.push(f),h=v;else if(this.Q_)return i}for(;a<r;a++)s.push(i[a])}return s}}class ln{constructor(e){this.hu=e}lu(){return this.hu===null?null:new ti(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ln(null)}}function l1(t,e){return t.weight>e.weight?t:e}class a1{constructor(e,s,n,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new r1,this.du=new Map,this.fu=ln.ou(),this.vu=!0,this.pu=new pe,this.mu=new pe,this.bu=new pe,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=n,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){gt(this.yo,e),this.Cu(),this.ku()}$h(e,s){var n;gt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,n;return(n=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&n!==void 0?n:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const n=zi(this.uu,this.q_.key(e),(i,r)=>this.q_.key(i.time)<r);return this.q_.key(e)<this.q_.key(this.uu[n].time)?s?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),n=Math.round(e.to),i=R(this.Bu()),r=R(this.Au());return{from:R(this.Ui(Math.max(i,s))),to:R(this.Ui(Math.min(r,n)))}}Iu(e){return{from:R(this.Va(e.from,!0)),to:R(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const i=this.Su*e/n;this.Su=i}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const i=n-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Ni(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const n=this.Eu(),i=s===void 0?0:s.from,r=s===void 0?e.length:s.to;for(let a=i;a<r;a++){const o=e[a].ot,c=n+this.xu-o,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(s/e),i=R(this.Xs()),r=Math.max(i.Os(),i.Os()-n),a=Math.max(i.ui(),i.ui()-n),o=this.cu.su(e,s),c=this.Bu()+n,u=this.Au()-n,h=this.$u(),d=this.cn.fixLeftEdge||h,f=this.cn.fixRightEdge||h;let v=0;for(const y of o){if(!(r<=y.index&&y.index<=a))continue;let g;v<this.Mu.length?(g=this.Mu[v],g.coord=this.It(y.index),g.label=this.Uu(y),g.weight=y.weight):(g={needAlignCoordinate:!1,coord:this.It(y.index),label:this.Uu(y),weight:y.weight},this.Mu.push(g)),this.Su>s/2&&!h?g.needAlignCoordinate=!1:g.needAlignCoordinate=d&&y.index<=c||f&&y.index>=u,v++}return this.Mu.length=v,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const n=this.Fu(e),i=this.le(),r=i+s*(i/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=_o(this.__-e,0,this.__),n=_o(this.__-R(this.wo),0,this.__);s!==0&&n!==0&&this.Gn(this.wu.le*s/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=R(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,i=performance.now();this.$i.Zn({Qu:r=>(r-i)/s>=1,tc:r=>{const a=(r-i)/s;return a>=1?e:n+(e-n)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new ti(e,s+this.cn.rightOffset))}lc(e){const s=new ti(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),n=this.Eu()+this.xu-s;return Math.round(1e6*n)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ln.ou());const e=this.Eu(),s=this.__/this.Su,n=this.xu+e,i=new ti(n-s+1,n);this._c(new ln(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new i1(n=>this.fc(n),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,Vh(s.lu(),this.fu.lu())||this.pu.m(),Vh(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const n=s.Os()-e;if(n<0){const i=this.xu-n-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class o1{X(e,s,n){e.useMediaCoordinateSpace(i=>this.K(i,s,n))}gl(e,s,n){e.useMediaCoordinateSpace(i=>this.vc(i,s,n))}vc(e,s,n){}}class c1 extends o1{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:n}=e;let i=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>n.width?a.Zu=n.width/o:a.Zu=1,i+=a.gc*a.Zu}let r=0;switch(this.zt.Mc){case"top":r=0;break;case"center":r=Math.max((n.height-i)/2,0);break;case"bottom":r=Math.max(n.height-i,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=n.width/2;break;case"right":s.textAlign="right",o=n.width-1-a.gc/2}s.translate(o,r),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),r+=a.gc*a.Zu}}wc(e,s){const n=this.kc(e.font);let i=n.get(s);return i===void 0&&(i=e.measureText(s).width,n.set(s,i)),i}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class u1{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new c1(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:mn(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class h1 extends Bc{constructor(e,s){super(),this.cn=s,this.wn=new u1(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Bh,Ah,Wh,Uh,Hh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Bh||(Bh={}));class d1{constructor(e,s,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new pe,this.Rc=new pe,this.Dc=null,this.Vc=e,this.cn=s,this.q_=n,this.Oc=new Ux(this),this.yl=new a1(this,s.timeScale,this.cn.localization,n),this.vt=new tw(this,s.crosshair),this.Bc=new qw(s.crosshair),this.Ac=new h1(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(je.es())}Uh(){this.Nc(je.ss())}oa(){this.Nc(new je(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){gt(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const n=this.Uc(e);n!==null&&(n.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const n=s.w_(e);if(n!==null)return{Ht:s,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new n1(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const n=e===void 0?this.yc.length-1:e,i=je.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Nc(i),s}V_(e,s,n){e.V_(s,n)}O_(e,s,n){e.O_(s,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,n){s.Vo()||e.A_(s,n)}I_(e,s,n){s.Vo()||(e.I_(s,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const n=this.St();if(n.Ni()||s===0)return;const i=n.Hi();e=Math.max(1,Math.min(e,i)),n.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,n,i,r){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const u=i.vn(),h=u.Ct();h!==null&&(a=u.pn(s,h)),a=this.Bc.Oa(a,o,i),this.vt.kn(o,a,i),this.oa(),r||this.Rc.m(this.vt.xt(),{x:e,y:s},n)}ad(e,s,n){const i=n.vn(),r=i.Ct(),a=i.Rt(e,R(r)),o=this.yl.Va(s,!0),c=this.yl.It(R(o));this.ld(c,a,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),n=this.vt.Sn();this.ld(s,n,null,e)}this.vt.Vn()}_d(e,s,n){const i=this.yl.mn(0);s!==void 0&&n!==void 0&&this.yl.bt(s,n);const r=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&i!==null&&r!==null){const c=o.Kr(a),u=this.q_.key(i)>this.q_.key(r),h=e!==null&&e>a&&!u,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(n!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!f){const v=e-a;this.yl.Jn(this.yl.Hu()-v)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(n=>n.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,n){const i=this.yc[0],r=this.fd(s,e,i,n);return this.Cc.push(r),this.Cc.length===1?this.Kl():this.Uh(),r}vd(e){const s=this.dr(e),n=this.Cc.indexOf(e);os(n!==-1,"Series not found"),this.Cc.splice(n,1),R(s).Zo(e),e.S&&e.S()}Xl(e,s){const n=R(this.dr(e));n.Zo(e);const i=this.Uc(s);if(i===null){const r=e.Xi();n.qo(e,s,r)}else{const r=i.Ht===n?e.Xi():void 0;i.Ht.qo(e,s,r)}}hc(){const e=je.ss();e.$n(),this.Nc(e)}pd(e){const s=je.ss();s.Yn(e),this.Nc(s)}Kn(){const e=je.ss();e.Kn(),this.Nc(e)}Gn(e){const s=je.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=je.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=je.ss();s.Zn(e),this.Nc(s)}Un(){const e=je.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,n=this.zc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==s)this.Dc={Ps:n,Rs:s,wd:new Map};else{const r=this.Dc.wd.get(e);if(r!==void 0)return r}const i=function(r,a,o){const[c,u,h,d]=wi(r),[f,v,y,g]=wi(a),S=[tt(c+o*(f-c)),tt(u+o*(v-u)),tt(h+o*(y-h)),ip(d+o*(g-d))];return`rgba(${S[0]}, ${S[1]}, ${S[2]}, ${S[3]})`}(n,s,e/100);return this.Dc.wd.set(e,i),i}Gc(e,s){const n=new je(s);if(e!==null){const i=this.yc.indexOf(e);n.Nn(i,{Fn:s})}return n}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,n,i){const r=new Hc(this,e,s,n,i),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(r,a),El(a)||r.$h(e),r}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function Mo(t){return!bt(t)&&!Ri(t)}function bp(t){return bt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Ah||(Ah={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Wh||(Wh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Uh||(Uh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Hh||(Hh={}));const Kh=t=>t.getUTCFullYear();function f1(t,e,s){return e.replace(/yyyy/g,(n=>Tt(Kh(n),4))(t)).replace(/yy/g,(n=>Tt(Kh(n)%100,2))(t)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,s)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,s)).replace(/MM/g,(n=>Tt((i=>i.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>Tt((i=>i.getUTCDate())(n),2))(t))}class jp{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return f1(e,this.gd,this.Md)}}class m1{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Tt(e.getUTCHours(),2)).replace("%m",Tt(e.getUTCMinutes(),2)).replace("%s",Tt(e.getUTCSeconds(),2))}}const p1={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class v1{constructor(e={}){const s=Object.assign(Object.assign({},p1),e);this.Td=new jp(s.Sd,s.Cd),this.Pd=new m1(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function ar(t){return 60*t*60*1e3}function ya(t){return 60*t*1e3}const or=[{Dd:(Gh=1,1e3*Gh),Vd:10},{Dd:ya(1),Vd:20},{Dd:ya(5),Vd:21},{Dd:ya(30),Vd:22},{Dd:ar(1),Vd:30},{Dd:ar(3),Vd:31},{Dd:ar(6),Vd:32},{Dd:ar(12),Vd:33}];var Gh;function Xh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=or.length-1;s>=0;--s)if(Math.floor(e.getTime()/or[s].Dd)!==Math.floor(t.getTime()/or[s].Dd))return or[s].Vd;return 0}function xa(t){let e=t;if(Ri(t)&&(e=Kc(t)),!Mo(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function Qh(t){if(!bp(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Kc(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function qh(t){Ri(t.time)&&(t.time=Kc(t.time))}class Yh{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(qh)}(e):qh(e)}createConverterToInternalObj(e){return R(function(s){return s.length===0?null:Mo(s[0].time)||Ri(s[0].time)?xa:Qh}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return bp(s=e)?Qh(s):Mo(s)?xa(s):xa(Kc(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new v1({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new jp(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const n=function(r,a,o){switch(r){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const r=i.tickMarkFormatter(e.originalTime,n,s.locale);if(r!==null)return r}return function(r,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=r.Bd===void 0?new Date(1e3*r.Od):new Date(Date.UTC(r.Bd.year,r.Bd.month-1,r.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(l1,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,i=0){if(n.length===0)return;let r=i===0?null:n[i-1].time.Od,a=r!==null?new Date(1e3*r):null,o=0;for(let c=i;c<n.length;++c){const u=n[c],h=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=Xh(h,a)),o+=u.time.Od-(r||u.time.Od),r=u.time.Od,a=h}if(i===0&&n.length>1){const c=Math.ceil(o/(n.length-1)),u=new Date(1e3*(n[0].time.Od-c));n[0].timeWeight=Xh(new Date(1e3*n[0].time.Od),u)}})(e,s)}static Id(e){return gt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const pn=typeof window<"u";function Jh(){return!!pn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function wa(){return!!pn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Po(t){return t+t%2}function Na(t,e){return t.zd-e.zd}function Sa(t,e,s){const n=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),s)}class g1{constructor(e,s,n,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=n,this.rs=i}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let n=0;const i=Sa(this.Ld,this.Ed,this.Ud),r=Na(this.Ld,this.Ed),a=[i],o=[r];if(n+=r,this.Nd!==null){const u=Sa(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(i)){const h=Na(this.Ed,this.Nd);if(a.push(u),o.push(h),n+=h,this.Fd!==null){const d=Sa(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(i)){const f=Na(this.Nd,this.Fd);a.push(d),o.push(f),n+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=o[u]/n*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.qd))}tc(e){const s=R(this.Wd),n=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-R(this.Wd).ot;return Math.min(s,this.jd)}}class y1{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return rp(wi(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Rs(t,e){const s=R(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=Mx(s,{options:{allowResizeObserver:!1},transform:(i,r)=>({width:Math.max(i.width,r.width),height:Math.max(i.height,r.height)})});return n.resizeCanvasElement(e),n}function zs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Lo(t,e,s,n){t.gl&&t.gl(e,s,n)}function _r(t,e,s,n){t.X(e,s,n)}function To(t,e,s,n){const i=t(s,n);for(const r of i){const a=r.gt();a!==null&&e(a)}}function x1(t){pn&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Gc{constructor(e,s,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!wa(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const r=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(wt(i),this.cf);a<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}}else{const r=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(wt(i),this.af);a<5&&!this.bf&&this.Uf(r,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=ba(e.changedTouches,R(this.Of));if(s===null||(this.Vf=cr(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(wt(s),R(this.pf)),{nv:i,sv:r,Nf:a}=n;if(this.mf||!(a<5)){if(!this.mf){const o=.5*i,c=r>=o&&!this.cn.ev(),u=o>r&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),Fs(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(wt(e),R(this.vf)),{Nf:n}=s;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,s){const n=Math.abs(s.nt-e.nt),i=Math.abs(s.st-e.st);return{nv:n,sv:i,Nf:n+i}}ov(e){let s=ba(e.changedTouches,R(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=cr(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,s);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(wt(s),this.cf);i<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&Fs(e));this._f===0&&Fs(e),e.touches.length===0&&this.ff&&(this.ff=!1,Fs(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),Jh()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(wt(e),this.af);n<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=cr(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=wt(s),this.yf&&(this.yf(),this.yf=null);{const r=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",r),n.removeEventListener("touchend",a)},n.addEventListener("touchmove",r,{passive:!1}),n.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,s);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=wt(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;Jh()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=wt(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),r=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",r)},s.addEventListener("mousemove",i),s.addEventListener("mouseup",r)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=wt(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}wa()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),x1(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=Zh(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),Fs(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=Zh(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!wa()}vv(e){const s=ba(e.touches,R(this.Of));if(s===null)return;const n=this.Ef(e,s);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:cr(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const n=s||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Fs(e)}}}}function Zh(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function Fs(t){t.cancelable&&t.preventDefault()}function wt(t){return{nt:t.pageX,st:t.pageY}}function cr(t){return t.timeStamp||performance.now()}function ba(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function ur(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function w1(t,e,s){for(const n of t){const i=n.gt();if(i!==null&&i.wr){const r=i.wr(e,s);if(r!==null)return{Bv:n,Iv:r}}}return null}function ja(t,e){return s=>{var n,i,r,a;return((i=(n=s.Dt())===null||n===void 0?void 0:n.Pa())!==null&&i!==void 0?i:"")!==e?[]:(a=(r=s.da)===null||r===void 0?void 0:r.call(s,t))!==null&&a!==void 0?a:[]}}function ed(t,e,s,n){if(!t.length)return;let i=0;const r=s/2,a=t[0].At(n,!0);let o=e===1?r-(t[0].Vi()-a/2):t[0].Vi()-a/2-r;o=Math.max(0,o);for(let c=1;c<t.length;c++){const u=t[c],h=t[c-1],d=h.At(n,!1),f=u.Vi(),v=h.Vi();if(e===1?f>v-d:f<v+d){const y=v-d*e;u.Oi(y);const g=y-e*d/2;if((e===1?g<0:g>s)&&o>0){const S=e===1?-1-g:g-s,p=Math.min(S,o);for(let m=i;m<t.length;m++)t[m].Oi(t[m].Vi()+e*p);o-=p}}else i=c,o=e===1?v-d-f:f-(v+d)}}class td{constructor(e,s,n,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new bi(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=n,this.qv=i==="left",this.Yv=ja("normal",i),this.Zv=ja("top",i),this.Xv=ja("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Rs(this.Kv,ne({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=Rs(this.Kv,ne({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Gc(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),zs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),zs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),n=R(this.Gv.canvasElement.getContext("2d"));n.save();const i=this.Li.Ha();n.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(n,i[0].so),this.Fv.xi(n,i[i.length-1].so)));const r=this.up();for(let u=r.length;u--;){const h=this.Fv.xi(n,r[u].Kt());h>e&&(e=h)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const u=this.Li.pn(1,a),h=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(u,h))+.11111111111111,a)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(u,h))-.11111111111111,a)))}var o;n.restore();const c=e||34;return Po(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&js(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return R(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,R(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=Ls(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const s=Ls(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,s.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp(),i=this.Li;s.O_(n,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,s.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(n=>{for(let i=0;i<n.length;++i){const r=n[i].Rn(this.tn.fp(),s);for(let a=0;a<r.length;a++)e.push(r[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,r=this.tn.fp().$t(),a=r.q(),o=r.bd();a===o?Cl(e,0,0,n,i,a):lp(e,0,0,n,i,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*n));let r;r=this.qv?s.width-i:0,e.fillRect(r,0,i,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),n=this.Li.W(),i=this.ap(),r=this.qv?this.Ev.width-i.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=n.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(i.T*o);a.beginPath();for(const f of s)a.rect(Math.floor(r*o),Math.round(f.Ea*c)-h,d,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=n.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(r-i.A):Math.round(r+i.T+i.A),u=s.map(h=>this.Fv.Mi(a,h.so));for(let h=s.length;h--;){const d=s[h];a.fillText(d.so,c,d.Ea+u[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),n=this.tn.fp(),i=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(a=>{n.vr(a)&&s.push(a)});const r=this.Li;s.forEach(a=>{a.Rn(n,r).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,s){if(this.Ev===null)return;const n=this.Ev.height/2,i=e.filter(a=>a.ki()<=n),r=e.filter(a=>a.ki()>n);i.sort((a,o)=>o.ki()-a.ki()),r.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}ed(i,1,this.Ev.height,s),ed(r,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),n=this.ap(),i=this.qv?"right":"left";s.forEach(r=>{r.Ai()&&r.gt(R(this.Li)).X(e,n,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),n=[],i=this.tn.fp(),r=s.Zc().Rn(i,this.Li);r.length&&n.push(r);const a=this.ap(),o=this.qv?"right":"left";n.forEach(c=>{c.forEach(u=>{u.gt(R(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return mn(this.ko.fontSize,this.ko.fontFamily)}}function N1(t,e){var s,n;return(n=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function hr(t,e){var s,n;return(n=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function S1(t,e){var s,n;return(n=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function b1(t,e){var s,n;return(n=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}class Xc{constructor(e,s){this.Ev=ne({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new pe,this.Op=new pe,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=Rs(n,ne({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Rs(n,ne({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Gc(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),zs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),zs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return R(this.Np)}qp(e){var s,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Xc.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new y1(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(R(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(R(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,n=e.localY;this.Gp(s,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const n=e.localX,i=e.localY;this.Gp(n,i,e);const r=this.wr(n,i);this.Qd.Qp((s=r==null?void 0:r.Lv)!==null&&s!==void 0?s:null),this.$i().jc(r&&{Hc:r.Hc,Iv:r.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const n=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=R(this.Lp),r=i.x+(s-this.Ip.x),a=i.y+(n-this.Ip.y);this.Gp(r,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const n=this.Np;return n===null?null:function(i,r,a){const o=i.Uo(),c=function(u,h,d){var f,v;let y,g;for(const m of u){const x=(v=(f=m.va)===null||f===void 0?void 0:f.call(m,h,d))!==null&&v!==void 0?v:[];for(const N of x)S=N.zOrder,(!(p=y==null?void 0:y.zOrder)||S==="top"&&p!=="top"||S==="normal"&&p==="bottom")&&(y=N,g=m)}var S,p;return y&&g?{zv:y,Hc:g}:null}(o,r,a);if((c==null?void 0:c.zv.zOrder)==="top")return ur(c);for(const u of o){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return ur(c);const h=w1(u.Pn(i),r,a);if(h!==null)return{Hc:u,Bv:h.Bv,Iv:h.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return ur(c)}return c!=null&&c.zv?ur(c):null}(n,e,s)}_m(e,s){R(s==="left"?this.Cp:this.Tp).cp(ne({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){js(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=R(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const n=s.Dt();n!==null&&e.P_(n),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=Ls(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(n,N1),this.vm(n),this.pm(n),this.fm(n,hr),this.fm(n,S1)))}this.Jv.applySuggestedBitmapSize();const s=Ls(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.bm(s),this.fm(s,b1))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const n=s.localX,i=s.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:i},s)}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,r=this.$i(),a=r.q(),o=r.bd();a===o?Cl(e,0,0,n,i,o):lp(e,0,0,n,i,a,o)}vm(e){const s=R(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,hr,Lo,s),this.Mm(e,hr,_r,s)}bm(e){this.Mm(e,hr,_r,this.$i().Zc())}fm(e,s){const n=R(this.Np).Uo();for(const i of n)this.Mm(e,s,Lo,i);for(const i of n)this.Mm(e,s,_r,i)}Mm(e,s,n,i){const r=R(this.Np),a=r.$t().Wc(),o=a!==null&&a.Hc===i,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;To(s,u=>n(u,e,o,c),i,r)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,n=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();s&&this.Cp===null&&(this.Cp=new td(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new td(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,n){this.$i().ld(this.Sm(e),this.km(s),n,R(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,n){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,n);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),n=this.fp();if(s.z_(n,n.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const i=performance.now(),r=s.St();this.Ep.Vr(r.Hu(),i),this.Ep.Qu(i)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)R(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),n=s.St();if(n.Ni())return;const i=this.Qd.W(),r=i.handleScroll,a=i.kineticScroll;if((!r.pressedMouseMove||e.Dv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=n.le();this.Ep=new g1(.2/u,7/u,.997,15/u),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),c))}}class sd{constructor(e,s,n,i,r){this.ft=!0,this.Ev=ne({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=s,this.Tm=i,this.Pm=r,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Rs(this.Kv,ne({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),zs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){js(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Ls(this.Gv);s!==null&&s.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Oc.W().C*n),a=Math.floor(this.Oc.W().C*i),o=this.qv?s.width-r:0;e.fillRect(o,0,r,a)}mp({context:e,bitmapSize:s}){Cl(e,0,0,s.width,s.height,this.Pm())}}function Qc(t){return e=>{var s,n;return(n=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&n!==void 0?n:[]}}const j1=Qc("normal"),C1=Qc("top"),k1=Qc("bottom");class E1{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=ne({width:0,height:0}),this.Om=new pe,this.Fv=new bi(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Rs(this.Im,ne({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=Rs(this.Im,ne({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Gc(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),zs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),zs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,n){js(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(ne({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(ne({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=Ls(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(n,k1)}),this.wp(n),this.$m(n,j1)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Ls(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,C1))}$m(e,s){const n=this.Qd.$t().wt();for(const i of n)To(s,r=>Lo(r,e,!1,void 0),i,void 0);for(const i of n)To(s,r=>_r(r,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:s}){Cl(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,s.width,i)}}wp(e){const s=this.Qd.$t().St(),n=s.Ha();if(!n||n.length===0)return;const i=this.q_.maxTickMarkWeight(n),r=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:u})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);o.beginPath();const f=Math.round(r.T*u);for(let v=n.length;v--;){const y=Math.round(n[v].coord*c);o.rect(y-d,0,h,f)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=r.C+r.T+r.L+r.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const u of n)if(u.weight<i){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const u of n)if(u.weight>=i){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}})}Ym(e,s,n){const i=this.Fv.xi(e,n),r=i/2,a=Math.floor(s-r)+.5;return a<0?s+=Math.abs(0-a):a+i>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+i))),s}Um(e,s){const n=this.jm();for(const i of e)for(const r of i.Qi())r.gt().X(s,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return mn(this.j(),this.cn.fontFamily)}Zm(){return mn(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new bi,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const n=this.j();e.P=n,e.R=s,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},i=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,r=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new sd("left",s,n,i,r),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new sd("right",s,n,i,r),this.Am.appendChild(this.Dm.lp()))}}const _1=!!pn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!pn&&(!((Ca=navigator==null?void 0:navigator.userAgentData)===null||Ca===void 0)&&Ca.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Ca;class M1{constructor(e,s,n){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new pe,this.Op=new pe,this.Rc=new pe,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ka(this.cn)&&this.hb(!0),this.$i=new d1(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new E1(this,this.q_),this.sb.appendChild(this.ab.lp());const r=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(r||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],R(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,n=!1){if(this.ho===s&&this.__===e)return;const i=function(o){const c=Math.floor(o.width),u=Math.floor(o.height);return ne({width:c-c%2,height:u-u%2})}(ne({width:e,height:s}));this.ho=i.height,this.__=i.width;const r=this.ho+"px",a=this.__+"px";R(this.Xd).style.height=r,R(this.Xd).style.width=a,this.sb.style.height=r,this.sb.style.width=a,n?this.mb(je.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=je.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=ka(this.cn);this.$i.$h(e);const n=ka(this.cn);n!==s&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=R(s.getContext("2d"));return this.gb(n),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:R(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Ie(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,n=0;const i=this.Xm[0],r=(o,c)=>{let u=0;for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],f=R(o==="left"?d.wm():d.gm()),v=f.xp();e!==null&&f.Sp(e,c,u),u+=v.height}};this.xb()&&(r("left",0),s+=R(i.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],u=c.xp();e!==null&&c.Sp(e,s,n),n+=u.height}s+=i.xp().width,this.Sb()&&(r("right",s),s+=R(i.gm()).xp().width);const a=(o,c,u)=>{R(o==="left"?this.ab.Lm():this.ab.Em()).Sp(R(e),c,u)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,n),c=R(i.wm()).xp().width),this.ab.Sp(e,c,n),c+=o.width,this.Sb()&&a("right",c,n)}n+=o.height}return ne({width:s,height:n})}Pb(){let e=0,s=0,n=0;for(const y of this.Xm)this.xb()&&(s=Math.max(s,R(y.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,R(y.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=y.M_();s=Po(s),n=Po(n);const i=this.__,r=this.ho,a=Math.max(i-s-n,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const h=0+c,d=r<h?0:r-h,f=d/e;let v=0;for(let y=0;y<this.Xm.length;++y){const g=this.Xm[y];g.qp(this.$i.qc()[y]);let S=0,p=0;p=y===this.Xm.length-1?d-v:Math.round(g.M_()*f),S=Math.max(p,2),v+=S,g.cp(ne({width:a,height:S})),this.xb()&&g._m(s,"left"),this.Sb()&&g._m(n,"right"),g.fp()&&this.$i.Kc(g.fp(),S)}this.ab.Fm(ne({width:o?a:0,height:c}),o?s:0,o?n:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return _1?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),n=s*e.deltaX/100,i=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(i)*Math.min(1,Math.abs(i)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,r)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,s){var n;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(r=>{r.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const n of e.Qn())this.ns(n,s)}Vb(e){const s=this.$i.qc();for(let n=0;n<s.length;n++)e.Hn(n).Wn&&s[n].N_()}ns(e,s){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(s)||n.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,s);for(const i of n.Qn())if(i.qn===5&&!i.Vt.Qu(s)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,n=this.Xm.length;for(let i=s;i<n;i++){const r=Ie(this.Xm.pop());this.sb.removeChild(r.lp()),r.lm().p(this),r.am().p(this),r.S()}for(let i=n;i<s;i++){const r=new Xc(this,e[i]);r.lm().l(this.Bb.bind(this),this),r.am().l(this.Ab.bind(this),this),this.Xm.push(r),this.sb.insertBefore(r.lp(),this.ab.lp())}for(let i=0;i<s;i++){const r=e[i],a=this.Xm[i];a.fp()!==r?a.qp(r):a.Up()}this.cb(),this.Pb()}Ib(e,s,n){var i;const r=new Map;e!==null&&this.$i.wt().forEach(h=>{const d=h.In().ll(e);d!==null&&r.set(h,d)});let a;if(e!==null){const h=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;h!==void 0&&(a=h)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Hc?o.Hc:void 0,u=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:r,Fb:u,Wb:n??void 0}}Bb(e,s,n){this.Vp.m(()=>this.Ib(e,s,n))}Ab(e,s,n){this.Op.m(()=>this.Ib(e,s,n))}lb(e,s,n){this.Rc.m(()=>this.Ib(e,s,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(n=>n.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ka(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function P1(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Cp(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}function nd(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.color!==void 0&&(r.V=s.color),r}function L1(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.lineColor!==void 0&&(r.lt=s.lineColor),s.topColor!==void 0&&(r.Ps=s.topColor),s.bottomColor!==void 0&&(r.Rs=s.bottomColor),r}function T1(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.topLineColor!==void 0&&(r.Re=s.topLineColor),s.bottomLineColor!==void 0&&(r.De=s.bottomLineColor),s.topFillColor1!==void 0&&(r.ke=s.topFillColor1),s.topFillColor2!==void 0&&(r.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(r.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(r.Te=s.bottomFillColor2),r}function R1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),i}function z1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),s.borderColor!==void 0&&(i.Ot=s.borderColor),s.wickColor!==void 0&&(i.Xh=s.wickColor),i}function $1(t,e,s,n,i){const r=Ie(i)(s),a=Math.max(...r),o=Math.min(...r),c=r[r.length-1],u=[c,a,o,c],h=s,{time:d,color:f}=h;return{ee:e,ot:t,Vt:u,zb:n,$e:Cp(h,["time","color"]),V:f}}function dr(t){return t.Vt!==void 0}function id(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function vs(t){return(e,s,n,i,r,a)=>function(o,c){return c?c(o):(u=o).open===void 0&&u.value===void 0;var u}(n,a)?id({ot:e,ee:s,zb:i},n):id(t(e,s,n,i,r),n)}function rd(t){return{Candlestick:vs(z1),Bar:vs(R1),Area:vs(L1),Baseline:vs(T1),Histogram:vs(nd),Line:vs(nd),Custom:vs($1)}[t]}function ld(t){return{ee:0,Hb:new Map,la:t}}function ad(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function od(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Ie(e)}class I1{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let n=this.qb.size!==0,i=!1;const r=this.Yb.get(e);if(r!==void 0)if(this.Yb.size===1)n=!1,i=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(i=!0);let a=[];if(s.length!==0){const c=s.map(v=>v.time),u=this.q_.createConverterToInternalObj(s),h=rd(e.Qh()),d=e.Ca(),f=e.Ta();a=s.map((v,y)=>{const g=u(v.time),S=this.q_.key(g);let p=this.qb.get(S);p===void 0&&(p=ld(g),this.qb.set(S,p),i=!0);const m=h(g,p.ee,v,c[y],d,f);return p.Hb.set(e,m),m})}n&&this.Gb(),this.Jb(e,a);let o=-1;if(i){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:od(u.Hb)})}),c.sort((u,h)=>this.q_.key(u.time)-this.q_.key(h.time)),o=this.Qb(c)}return this.tw(e,o,function(c,u,h){const d=ad(c,h),f=ad(u,h);if(d!==void 0&&f!==void 0)return{ta:d.Ub>=f.Ub&&d.$b>=f.$b}}(this.Yb.get(e),r,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const n=s;(function(g){g.zb===void 0&&(g.zb=g.time)})(n),this.q_.preprocessData(s);const i=this.q_.createConverterToInternalObj([s])(s.time),r=this.Zb.get(e);if(r!==void 0&&this.q_.key(i)<this.q_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${i}`);let a=this.qb.get(this.q_.key(i));const o=a===void 0;a===void 0&&(a=ld(i),this.qb.set(this.q_.key(i),a));const c=rd(e.Qh()),u=e.Ca(),h=e.Ta(),d=c(i,a.ee,s,n.zb,u,h);a.Hb.set(e,d),this.nw(e,d);const f={ta:dr(d)};if(!o)return this.tw(e,-1,f);const v={timeWeight:0,time:a.la,pointData:a,originalTime:od(a.Hb)},y=zi(this.Xb,this.q_.key(v.time),(g,S)=>this.q_.key(g.time)<S);this.Xb.splice(y,0,v);for(let g=y;g<this.Xb.length;++g)Ea(this.Xb[g].pointData,g);return this.q_.fillWeightsForPoints(this.Xb,y),this.tw(e,y,f)}nw(e,s){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.q_.key(s.ot)>this.q_.key(i.ot)?dr(s)&&n.push(s):dr(s)?n[n.length-1]=s:n.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(dr)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const i=this.Xb[n],r=e[n];if(this.q_.key(i.time)!==this.q_.key(r.time)){s=n;break}r.timeWeight=i.timeWeight,Ea(r.pointData,n)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)Ea(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,n){const i={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((r,a)=>{i.ew.set(a,{$e:r,rw:a===e?n:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:n}),i.St.hw=this.Xb,i.St.lw=s;else{const r=this.Yb.get(e);i.ew.set(e,{$e:r||[],rw:n})}return i}}function Ea(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function qc(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function cd(t){const e=qc(t);return t.V!==void 0&&(e.color=t.V),e}function D1(t){const e=qc(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function F1(t){const e=qc(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function kp(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function O1(t){const e=kp(t);return t.V!==void 0&&(e.color=t.V),e}function V1(t){const e=kp(t),{V:s,Ot:n,Xh:i}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function Ro(t){return{Area:D1,Line:cd,Baseline:F1,Histogram:cd,Bar:O1,Candlestick:V1,Custom:B1}[t]}function B1(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const A1={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},W1={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},U1={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Oc,attributionLogo:!0},_a={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},H1={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},K1={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Oc,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function ud(){return{width:0,height:0,autoSize:!1,layout:U1,crosshair:A1,grid:W1,overlayPriceScales:Object.assign({},_a),leftPriceScale:Object.assign(Object.assign({},_a),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},_a),{visible:!0}),timeScale:H1,watermark:K1,localization:{locale:pn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class G1{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return El(this.ow)?this.aw.Mb(this.ow):0}Li(){return R(this.aw.$t().Uc(this.ow)).Dt}}function hd(t,e,s){const n=Cp(t,["time","originalTime"]),i=Object.assign({time:e},n);return s!==void 0&&(i.originalTime=s),i}const X1={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Q1{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class q1{constructor(e,s,n,i,r){this.uw=new pe,this.Es=e,this.cw=s,this.dw=n,this.q_=r,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new ln(new ti(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const i=n.ll(s.Os(),1),r=n.ll(s.ui(),-1),a=R(n.el()),o=R(n.An());if(i!==null&&r!==null&&i.ee>r.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:i===null||i.ee===a?e.from-a:i.ee-a,barsAfter:r===null||r.ee===o?o-e.to:o-r.ee};return i!==null&&r!==null&&(c.from=i.zb,c.to=r.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const n=this.Es.In().ll(e,s);return n===null?null:Ro(this.seriesType())(n)}data(){const e=Ro(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(n=>hd(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>hd(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Lt(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=gt(Lt(X1),e),n=this.Es.ea(s);return new Q1(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class Y1{constructor(e,s,n){this.ww=new pe,this.mu=new pe,this.Om=new pe,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(s);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){os(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(s,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const s=this.$i.St(),n=s.Nu(e),i=s.Ui(n);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Lt(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function J1(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(s);if(Math.abs(i-s)<1e-8)return n;s*=10}return n}(e.minMove))}function dd(t){return function(e){if(nr(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;nr(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),nr(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const s=e.handleScroll;nr(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class Z1{constructor(e,s,n){this.Sw=new Map,this.kw=new Map,this.yw=new pe,this.Cw=new pe,this.Tw=new pe,this.Pw=new I1(s);const i=n===void 0?Lt(ud()):gt(Lt(ud()),dd(n));this.q_=s,this.aw=new M1(e,i,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const r=this.aw.$t();this.Dw=new Y1(r,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,n){this.autoSizeActive()||this.aw._b(e,s,n)}addCustomSeries(e,s){const n=Ys(e),i=Object.assign(Object.assign({},tp),n.defaultOptions());return this.Vw("Custom",i,s,n)}addAreaSeries(e){return this.Vw("Area",Ix,e)}addBaselineSeries(e){return this.Vw("Baseline",Dx,e)}addBarSeries(e){return this.Vw("Bar",zx,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",Rx,e)}addHistogramSeries(e){return this.Vw("Histogram",Fx,e)}addLineSeries(e){return this.Vw("Line",$x,e)}removeSeries(e){const s=Ie(this.Sw.get(e)),n=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(n),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new G1(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(dd(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,n){const i=this.Sw.get(n);if(i===void 0)return;const r=this.aw.$t().dr(i);r!==null&&this.aw.$t().ad(e,s,r)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,n={},i){J1(n.priceFormat);const r=gt(Lt(sp),Lt(s),n),a=this.aw.$t().dd(e,r,i),o=new q1(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,i)=>i.J(n.$e,n.rw)),s.Wu()}Bw(e){return Ie(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((i,r)=>{const a=r.Qh(),o=Ro(a)(i);if(a!=="Custom")os(P1(o));else{const c=r.Ta();os(!c||c(o)===!1)}s.set(this.Bw(r),o)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function eN(t,e,s){let n;if(Ri(t)){const r=document.getElementById(t);os(r!==null,`Cannot find element in DOM with id=${t}`),n=r}else n=t;const i=new Z1(n,e,s);return e.setOptions(i.options()),i}function Ma(t,e){return eN(t,new Yh,Yh.Id(e))}Object.assign(Object.assign({},sp),tp);const tN=[{label:"5m",interval:"5m",period:"5d"},{label:"15m",interval:"15m",period:"1mo"},{label:"1D",interval:"1d",period:"6mo"}];function sN({isOpen:t,onClose:e,stock:s,API_BASE_URL:n}){var N,k;const[i,r]=w.useState({interval:"5m",period:"5d"}),[a,o]=w.useState({loading:!1,error:""}),[c,u]=w.useState({sma:!1,ema:!1,rsi:!1}),h=w.useRef(null),d=w.useRef(null),f=w.useRef(null),v=w.useRef({chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null});w.useEffect(()=>(t?document.body.style.overflow="hidden":(document.body.style.overflow="",r({interval:"5m",period:"5d"})),()=>{document.body.style.overflow=""}),[t]),w.useEffect(()=>{if(!t||!s)return;const E=S();E&&p();const b=setInterval(()=>{E&&p()},6e4);return()=>clearInterval(b)},[t,s,i]),w.useEffect(()=>{if(!t)return;const E=()=>g();return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[t]),w.useEffect(()=>()=>y(),[]);const y=()=>{v.current.chart&&v.current.chart.remove(),v.current.volumeChart&&v.current.volumeChart.remove(),v.current.rsiChart&&v.current.rsiChart.remove(),v.current={chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}},g=()=>{const{chart:E,volumeChart:b,rsiChart:C}=v.current,M=h.current,j=d.current,L=f.current;E&&M&&E.applyOptions({width:M.clientWidth,height:M.clientHeight}),b&&j&&b.applyOptions({width:j.clientWidth,height:j.clientHeight}),C&&L&&C.applyOptions({width:L.clientWidth,height:L.clientHeight})},S=()=>{if(v.current.chart&&v.current.volumeChart)return g(),!0;const E=h.current;if(!E)return!1;const b=d.current,C=f.current;return v.current.chart=Ma(E,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Yn.Normal}}),v.current.candleSeries=v.current.chart.addCandlestickSeries({upColor:"#00d09c",downColor:"#ff4d4d",wickUpColor:"#00d09c",wickDownColor:"#ff4d4d",borderVisible:!1}),v.current.smaSeries=v.current.chart.addLineSeries({color:"#f5c542",lineWidth:2,priceLineVisible:!1}),v.current.emaSeries=v.current.chart.addLineSeries({color:"#4f9cf7",lineWidth:2,priceLineVisible:!1}),b&&(v.current.volumeChart=Ma(b,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!1,visible:!1},crosshair:{mode:Yn.Normal}}),v.current.volumeSeries=v.current.volumeChart.addHistogramSeries({priceFormat:{type:"volume"},color:"#26a69a",priceScaleId:""}),v.current.chart.timeScale().subscribeVisibleLogicalRangeChange(M=>{M&&v.current.volumeChart&&v.current.volumeChart.timeScale().setVisibleLogicalRange(M),M&&v.current.rsiChart&&v.current.rsiChart.timeScale().setVisibleLogicalRange(M)})),C&&(v.current.rsiChart=Ma(C,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Yn.Normal}}),v.current.rsiSeries=v.current.rsiChart.addLineSeries({color:"#9b74ff",lineWidth:2,priceLineVisible:!1}),v.current.rsiChart.priceScale("right").applyOptions({minValue:0,maxValue:100}),v.current.rsiSeries.createPriceLine({price:70,color:"#4f9cf7",lineWidth:1,lineStyle:tl.Dashed}),v.current.rsiSeries.createPriceLine({price:30,color:"#ff4d4d",lineWidth:1,lineStyle:tl.Dashed})),g(),!0},p=async()=>{if(s){o({loading:!0,error:""});try{const E=`${n}/fyers/market/candles?symbol=${encodeURIComponent(s.symbol)}&interval=${i.interval}&period=${i.period}`,b=await Q(E);if(!b.fyers_connected){o({loading:!1,error:"Connect Fyers to view charts"});return}if(b.error){o({loading:!1,error:b.error});return}m(b),o({loading:!1,error:""})}catch(E){o({loading:!1,error:E.message||"Failed to load chart"})}}},m=E=>{var W,H,$,P;if(!E)return;const{candleSeries:b,volumeSeries:C,smaSeries:M,emaSeries:j,rsiSeries:L,chart:T,rsiChart:V}=v.current;b&&b.setData(E.candles||[]),C&&C.setData(E.volume||[]);const F=((W=E.indicators)==null?void 0:W.rsi14)||((H=E.indicators)==null?void 0:H.rsi)||[];M&&M.setData(c.sma?(($=E.indicators)==null?void 0:$.sma20)||[]:[]),j&&j.setData(c.ema?((P=E.indicators)==null?void 0:P.ema20)||[]:[]),L&&L.setData(c.rsi?F:[]),T&&T.timeScale().fitContent(),V&&V.timeScale().fitContent()},x=E=>{u(b=>{const C={...b,[E]:!b[E]};return setTimeout(p,0),C})};return!t||!s?null:l.jsx("div",{className:"stock-modal-overlay show",children:l.jsxs("div",{className:"stock-modal-content chart-mode",children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:s.symbol}),l.jsxs("span",{className:"stock-price",children:["",(N=s.lastPrice)==null?void 0:N.toFixed(2)]}),l.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(k=s.pChange)==null?void 0:k.toFixed(2),"%"]})]}),l.jsxs("div",{className:"chart-controls",children:[l.jsxs("div",{className:"chart-toggles",children:[l.jsx("button",{className:`chart-toggle ${c.sma?"active":""}`,onClick:()=>x("sma"),children:"SMA 20"}),l.jsx("button",{className:`chart-toggle ${c.ema?"active":""}`,onClick:()=>x("ema"),children:"EMA 20"}),l.jsx("button",{className:`chart-toggle ${c.rsi?"active":""}`,onClick:()=>x("rsi"),children:"RSI"})]}),l.jsx("div",{className:"chart-ranges",children:tN.map(E=>l.jsx("button",{className:`range-btn ${i.label===E.label?"active":""}`,onClick:()=>r(E),children:E.label},E.label))})]})]}),l.jsxs("div",{className:"chart-container-wrapper",children:[a.loading&&l.jsx("div",{className:"chart-loading",children:"Loading Chart..."}),a.error&&l.jsx("div",{className:"chart-error",children:a.error}),l.jsx("div",{className:"main-chart",ref:h}),l.jsx("div",{className:"volume-chart",ref:d}),l.jsx("div",{className:"rsi-chart",ref:f})]})]})})}function nN({isOpen:t,onClose:e,stock:s,walletBalance:n,onTrade:i,isSubmitting:r}){var y;const[a,o]=w.useState({quantity:1,price:"",orderType:"market",broker:"virtual"});if(w.useEffect(()=>{s&&o(g=>({...g,price:s.lastPrice?s.lastPrice.toFixed(2):"",quantity:s.quantity||1}))},[s]),!t||!s)return null;const c=parseFloat(a.price)||0,u=parseInt(a.quantity)||0,h=c*u,d=s.displayName||s.symbol,f=s.lastPrice&&s.lastPrice>0,v=g=>{i(g,a)};return l.jsx("div",{className:"stock-modal-overlay show",style:{zIndex:1e4},children:l.jsxs("div",{className:"stock-modal-content trade-modal",children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:d}),s.displayName&&s.displayName!==s.symbol&&l.jsx("span",{className:"modal-subtitle",children:s.symbol}),l.jsxs("div",{className:"stock-price-info",children:[l.jsx("span",{className:"stock-price",children:f?`${s.lastPrice.toFixed(2)}`:" --"}),f&&l.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(y=s.pChange)==null?void 0:y.toFixed(2),"%"]})]})]}),!f&&l.jsx("div",{className:"trade-warning",children:"Market closed  enter price manually or wait for market hours"}),l.jsxs("div",{className:"trade-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Broker"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{className:`toggle-btn ${a.broker==="virtual"?"active":""}`,onClick:()=>o({...a,broker:"virtual"}),children:"Virtual"}),l.jsx("button",{className:`toggle-btn ${a.broker==="fyers"?"active":""}`,onClick:()=>o({...a,broker:"fyers"}),children:"Fyers Live"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Order Type"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{className:`toggle-btn ${a.orderType==="market"?"active":""}`,onClick:()=>o({...a,orderType:"market"}),children:"Market"}),l.jsx("button",{className:`toggle-btn ${a.orderType==="limit"?"active":""}`,onClick:()=>o({...a,orderType:"limit"}),children:"Limit"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Quantity"}),l.jsx("input",{type:"number",min:"1",value:a.quantity,onChange:g=>o({...a,quantity:g.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Price"}),l.jsx("input",{type:"number",step:"0.05",value:a.price,onChange:g=>o({...a,price:g.target.value}),disabled:a.orderType==="market"&&f,placeholder:f?"":"Enter price"})]})]}),l.jsxs("div",{className:"trade-summary",children:[l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:"Total Value"}),l.jsxs("span",{children:["",h.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.broker==="virtual"&&l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:"Available Balance"}),l.jsxs("span",{children:["",n==null?void 0:n.toLocaleString("en-IN")]})]})]}),l.jsxs("div",{className:"trade-actions",children:[l.jsx("button",{className:"trade-btn buy-btn",onClick:()=>v("BUY"),disabled:r,children:r?"Processing...":"BUY"}),l.jsx("button",{className:"trade-btn sell-btn",onClick:()=>v("SELL"),disabled:r,children:r?"Processing...":"SELL"})]})]})]})})}function iN({placeholder:t="Search stocks...",onSelect:e,fetchSuggestions:s,minChars:n=1,debounceMs:i=300,maxResults:r=8}){const[a,o]=w.useState(""),[c,u]=w.useState([]),[h,d]=w.useState(!1),[f,v]=w.useState(!1),[y,g]=w.useState(-1),S=w.useRef(null),p=w.useRef(null),m=w.useRef(null),x=w.useCallback(async M=>{if(M.length<n){u([]),d(!1);return}v(!0);try{const j=await s(M);u(j.slice(0,r)),d(!0),g(-1)}catch(j){console.error("Search failed:",j),u([])}finally{v(!1)}},[s,n,r]),N=M=>{const j=M.target.value;o(j),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{x(j)},i)},k=M=>{if(h)switch(M.key){case"ArrowDown":M.preventDefault(),g(j=>j<c.length-1?j+1:j);break;case"ArrowUp":M.preventDefault(),g(j=>j>0?j-1:-1);break;case"Enter":M.preventDefault(),y>=0&&c[y]&&E(c[y]);break;case"Escape":M.preventDefault(),d(!1),g(-1);break}},E=M=>{o(""),d(!1),g(-1),u([]),e(M)};w.useEffect(()=>{const M=j=>{p.current&&!p.current.contains(j.target)&&!S.current.contains(j.target)&&(d(!1),g(-1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]),w.useEffect(()=>{if(y>=0&&p.current){const M=p.current.children[y];M&&M.scrollIntoView({block:"nearest",behavior:"smooth"})}},[y]);const b=(M,j)=>{if(!j.trim())return M;const L=new RegExp(`(${j})`,"gi");return M.split(L).map((V,F)=>L.test(V)?l.jsx("mark",{className:"highlight",children:V},F):V)},C=M=>{const j=M.symbol||M.identifier||M.tradingSymbol||"";if(/CE|PE/.test(j)){let L=j.match(/^([A-Z]+)(\d{2})([A-Z]{3})(\d{2})(\d+)(CE|PE)$/);if(L||(L=j.match(/^([A-Z]+)\s+(\d{2})\s+([A-Z]{3})\s+(\d{2})\s+(\d+)\s+(CE|PE)$/)),!L&&M.display)return{displayName:M.display,underlying:M.underlying||j.split(/\d/)[0],typeLabel:/CE/.test(j)?"Options CALL":"Options PUT",isOption:!0};if(L){const[,T,V,F,W,H,$]=L,P=`20${W}`;return{displayName:`${T} ${V} ${F} ${P} ${$} ${H}`,underlying:T,typeLabel:$==="CE"?"Options CALL":"Options PUT",isOption:!0}}}return M.display?{displayName:M.display,underlying:null,typeLabel:null,isOption:!1}:{displayName:j,underlying:null,typeLabel:null,isOption:!1}};return l.jsxs("div",{className:"search-autocomplete",children:[l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx("input",{ref:S,type:"text",className:"search-input",placeholder:t,value:a,onChange:N,onKeyDown:k,onFocus:()=>a.length>=n&&d(!0),autoComplete:"off","aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":h,"aria-activedescendant":y>=0?`suggestion-${y}`:void 0}),f&&l.jsx("div",{className:"search-spinner"})]}),h&&l.jsx("div",{ref:p,id:"search-suggestions",className:"search-dropdown",role:"listbox",children:c.length===0?l.jsx("div",{className:"no-results",children:"No results found"}):c.map((M,j)=>{var T;const L=C(M);return l.jsxs("div",{id:`suggestion-${j}`,className:`suggestion-item ${y===j?"selected":""}`,role:"option","aria-selected":y===j,onClick:()=>E(M),onMouseEnter:()=>g(j),children:[l.jsxs("div",{className:"suggestion-main",children:[l.jsx("div",{className:"suggestion-symbol",children:b(L.displayName,a)}),L.isOption&&l.jsxs("div",{className:"suggestion-meta",children:[l.jsx("span",{className:"suggestion-underlying",children:L.underlying}),l.jsxs("span",{className:"suggestion-type-label",children:["(",L.typeLabel,")"]})]}),!L.isOption&&M.lastPrice>0&&l.jsxs("div",{className:`suggestion-price ${M.pChange>=0?"positive":"negative"}`,children:["",(T=M.lastPrice)==null?void 0:T.toFixed(2)]}),!L.isOption&&M.lastPrice===0&&l.jsx("div",{className:"suggestion-price",style:{opacity:.5,fontSize:"0.75rem"},children:"Price on selection"})]}),M.pChange!==0&&l.jsxs("div",{className:`suggestion-change ${M.pChange>=0?"positive":"negative"}`,children:[M.pChange>=0?"":""," ",Math.abs(M.pChange||0).toFixed(2),"%"]})]},`${M.symbol}-${j}`)})})]})}const rN=rl.memo(({stock:t,onSelectStock:e,onOpenChart:s,onRemoveStock:n,activeWatchlist:i,searchQuery:r,isLast:a,lastStockElementRef:o})=>l.jsxs("div",{ref:a?o:null,className:"stock-card",onClick:()=>e(t),children:[l.jsxs("div",{className:"stock-card-header",children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:t.symbol}),l.jsxs("span",{className:`stock-price ${t.pChange>=0?"positive":"negative"}`,children:["",Math.abs(t.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{className:"stock-actions",children:[l.jsx("button",{className:"chart-btn",onClick:c=>{c.stopPropagation(),e(t),s()},children:""}),i&&!r.trim()&&l.jsx("button",{className:"remove-btn",onClick:c=>{c.stopPropagation(),n(t.symbol)},children:""})]})]}),l.jsx("div",{className:"stock-card-body",children:l.jsxs("div",{className:`change-pill ${t.pChange>=0?"positive":"negative"}`,children:[t.pChange>=0?"":""," ",Math.abs(t.pChange||0).toFixed(2),"%"]})})]}));function lN({stocks:t,loading:e,onSelectStock:s,onOpenChart:n,searchQuery:i,setSearchQuery:r,watchlists:a,activeWatchlist:o,setActiveWatchlist:c,onCreateWatchlist:u,onDeleteWatchlist:h,onRemoveStock:d,onShowAddStock:f,hasMore:v,onLoadMore:y,onSearch:g}){const S=w.useRef(),p=w.useCallback(m=>{e||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(x=>{x[0].isIntersecting&&v&&y()}),m&&S.current.observe(m))},[e,v,y]);return l.jsxs("div",{className:"virtual-trading-container",children:[l.jsxs("div",{className:"market-header",children:[l.jsx(iN,{placeholder:"Search stocks (e.g. RELIANCE, NIFTY 25JAN...)",onSelect:s,fetchSuggestions:g,minChars:1,debounceMs:300,maxResults:15}),l.jsxs("div",{className:"watchlist-tabs",children:[a.map(m=>l.jsxs("div",{className:`watchlist-tab ${(o==null?void 0:o.id)===m.id?"active":""}`,onClick:()=>c(m),children:[l.jsx("span",{className:"watchlist-name",children:m.name}),(o==null?void 0:o.id)===m.id&&!m.is_default&&l.jsx("button",{className:"delete-watchlist-btn",onClick:x=>{x.stopPropagation(),h(m.id)},title:"Delete Watchlist",children:""})]},m.id)),a.length<15&&l.jsx("button",{className:"new-watchlist-btn",onClick:u,children:"+"})]}),o&&l.jsx("div",{className:"watchlist-actions",children:l.jsx("button",{className:"add-stock-btn",onClick:f,children:"+ Add Stock"})})]}),l.jsx("div",{className:"stocks-grid",children:e?l.jsxs("div",{className:"empty-state",style:{opacity:.7},children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Loading stocks..."})]}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No stocks yet"}),l.jsx("div",{className:"empty-state-text",children:'Click "+ Add Stock" to add stocks to this watchlist'})]}):t.map((m,x)=>l.jsx(rN,{stock:m,onSelectStock:s,onOpenChart:n,onRemoveStock:d,activeWatchlist:o,searchQuery:i,isLast:x===t.length-1,lastStockElementRef:p},m.symbol))})]})}function aN({portfolio:t,loading:e,onSelectHolding:s}){const n=t.reduce((a,o)=>a+o.quantity*(o.ltp||o.average_price),0),i=t.reduce((a,o)=>a+o.quantity*o.average_price,0),r=n-i;return l.jsxs("div",{className:"portfolio-container",children:[l.jsxs("div",{className:"portfolio-summary",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Current Value"}),l.jsxs("span",{className:"value",children:["",n.toLocaleString()]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Invested"}),l.jsxs("span",{className:"value",children:["",i.toLocaleString()]})]}),l.jsxs("div",{className:`summary-card ${r>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Total P&L"}),l.jsxs("span",{className:"value",children:[r>=0?"+":"-","",Math.abs(r).toLocaleString()]})]})]}),l.jsx("div",{className:"portfolio-list",children:e?l.jsx("div",{className:"loading-state",children:"Loading portfolio..."}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"Your portfolio is empty"}),l.jsx("p",{children:"Start trading to build your portfolio"})]}):l.jsxs("table",{className:"portfolio-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Avg. Price"}),l.jsx("th",{className:"text-right",children:"LTP"}),l.jsx("th",{className:"text-right",children:"Cur. Value"}),l.jsx("th",{className:"text-right",children:"P&L"})]})}),l.jsx("tbody",{children:t.map((a,o)=>{var d;const c=a.quantity*(a.ltp||a.average_price),u=c-a.quantity*a.average_price,h=u/(a.quantity*a.average_price)*100;return l.jsxs("tr",{onClick:()=>s(a),className:"clickable-row",children:[l.jsx("td",{className:"font-medium",children:a.symbol}),l.jsx("td",{className:"text-right",children:a.quantity}),l.jsxs("td",{className:"text-right",children:["",a.average_price.toFixed(2)]}),l.jsxs("td",{className:"text-right",children:["",((d=a.ltp)==null?void 0:d.toFixed(2))||"-"]}),l.jsxs("td",{className:"text-right",children:["",c.toLocaleString()]}),l.jsxs("td",{className:`text-right ${u>=0?"positive":"negative"}`,children:[l.jsxs("div",{children:[u>=0?"+":"-","",Math.abs(u).toLocaleString()]}),l.jsxs("div",{className:"sub-text",children:["(",h>=0?"+":"-",Math.abs(h).toFixed(2),"%)"]})]})]},o)})})]})})]})}function oN({orders:t,loading:e}){return e?l.jsx("div",{className:"loading-state",children:"Loading orders..."}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"No orders yet"}),l.jsx("p",{children:"Your trade history will appear here"})]}):l.jsx("div",{className:"orders-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Type"}),l.jsx("th",{children:"Side"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Price"}),l.jsx("th",{className:"text-right",children:"Status"})]})}),l.jsx("tbody",{children:t.map((s,n)=>{var i;return l.jsxs("tr",{children:[l.jsx("td",{children:new Date(s.created_at).toLocaleString("en-IN")}),l.jsx("td",{className:"font-medium",children:s.symbol}),l.jsx("td",{children:s.order_type||"MARKET"}),l.jsx("td",{children:l.jsx("span",{className:`badge ${s.side==="BUY"?"bg-green":"bg-red"}`,children:s.side})}),l.jsx("td",{className:"text-right",children:s.quantity}),l.jsxs("td",{className:"text-right",children:["",(i=s.price)==null?void 0:i.toFixed(2)]}),l.jsxs("td",{className:"text-right status-cell",children:[l.jsx("span",{className:"status-dot success"})," Executed"]})]},s.id||n)})})]})})}const ce=window.location.origin,zo=({initialTab:t="trade"})=>{const e=()=>{switch(t){case"trade":return"stocks";case"portfolio":return"portfolio";case"orders":return"orders";case"fno":return"fno";case"wallet":return"wallet";default:return"stocks"}},[s,n]=w.useState(e()),{showLoading:i,hideLoading:r}=Ym(),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,d]=w.useState([]),[f,v]=w.useState([]),[y,g]=w.useState(1e5),[S,p]=w.useState([]),[m,x]=w.useState({stocks:!1,portfolio:!1,trade:!1,wallet:!1,fyers:!1,watchlists:!1}),[N,k]=w.useState(1),[E,b]=w.useState(!1),[C,M]=w.useState({message:"",type:"",show:!1}),[j,L]=w.useState("balance"),[T,V]=w.useState(null),[F,W]=w.useState(!1),[H,$]=w.useState([]),[P,B]=w.useState(null),[A,Y]=w.useState([]),[Z,ct]=w.useState(!1),[Te,Bt]=w.useState([]),[Ee,et]=w.useState(""),[jn,ms]=w.useState(!1),[At,Oe]=w.useState(!1),{lastUpdate:Ke}=bn("trading-stocks",()=>_p(),1e4);Ti(Ke),w.useEffect(()=>{Yc(),Tl(),Rl(),Q(`${ce}/fyers/status`).then(_=>ms(_.connected)).catch(()=>{})},[]),w.useEffect(()=>{s==="orders"&&Jc()},[s]);const _p=async()=>{if(!P)return;const _=A.map(U=>U.symbol)||[],I=h.map(U=>U.symbol)||[],D=[...new Set([..._,...I])];if(D.length!==0)try{const U=D.slice(0,50).join(","),K=await ze(`${ce}/fyers/market/quotes?symbols=${encodeURIComponent(U)}`);if((K==null?void 0:K.fyers_connected)!==void 0&&ms(K.fyers_connected),K!=null&&K.quotes&&K.fyers_connected){const oe=A.map(ee=>{const ge=K.quotes[ee.symbol];return ge?{...ee,lastPrice:ge.lastPrice,pChange:ge.pChange,change:ge.change,high:ge.high,low:ge.low,volume:ge.volume}:ee});if(oe.some((ee,ge)=>{var ps,$i;return ee.lastPrice!==((ps=A[ge])==null?void 0:ps.lastPrice)||ee.pChange!==(($i=A[ge])==null?void 0:$i.pChange)})&&(Y(oe),h.length>0)){const ee=h.map(ge=>{const ps=K.quotes[ge.symbol];return ps?{...ge,ltp:ps.lastPrice}:ge});d(ee)}}}catch(U){console.error("Failed to refresh watchlist stocks",U)}},ve=(_,I="info")=>{M({message:_,type:I,show:!0}),setTimeout(()=>M({message:"",type:"",show:!1}),3e3)},Ll=async _=>{if(!_||_.length===0)return _;try{const I=_.map(U=>U.symbol).slice(0,50).join(","),D=await ze(`${ce}/fyers/market/quotes?symbols=${encodeURIComponent(I)}`);if(D!=null&&D.quotes&&D.fyers_connected)return _.map(U=>{const K=D.quotes[U.symbol];return K?{...U,ltp:K.lastPrice}:U})}catch(I){console.error("Failed to enrich portfolio prices via Fyers",I)}return _},Yc=async()=>{x(_=>({..._,portfolio:!0}));try{const _=await Q(`${ce}/portfolio/summary`);g(_.wallet_balance||1e5);const I=await Ll(_.holdings||[]);d(I)}catch(_){console.error("Failed to load portfolio",_);try{const I=await Q(`${ce}/portfolio`),D=await Ll(I.holdings||[]);d(D)}catch{ve("Failed to load portfolio","error")}}finally{x(_=>({..._,portfolio:!1}))}},Jc=async()=>{x(_=>({..._,orders:!0}));try{const _=await Q(`${ce}/portfolio/orders?limit=20`);v(_.orders||[])}catch(_){console.error("Failed to load orders",_)}finally{x(_=>({..._,orders:!1}))}},Tl=async()=>{try{const _=await Q(`${ce}/fyers/status`);if(ms(_.connected),_.connected&&At){x(D=>({...D,fyers:!0}));const I=await Q(`${ce}/fyers/holdings`);p(I.holdings||[]),x(D=>({...D,fyers:!1}))}}catch(_){console.error("Failed to fetch Fyers data",_),x(I=>({...I,fyers:!1}))}},Rl=async(_=null)=>{x(I=>({...I,watchlists:!0}));try{const D=(await Q(`${ce}/watchlist`)).watchlists||[];if($(D),D.length===0){B(null),Y([]);return}if(_){const U=D.find(K=>K.id===_);if(U){B(U),Cn(U.id);return}}if(P&&D.some(U=>U.id===P.id))return;B(D[0]),Cn(D[0].id)}catch(I){console.error("Failed to load watchlists",I),ve("Failed to load watchlists","error")}finally{x(I=>({...I,watchlists:!1}))}},Cn=async _=>{x(I=>({...I,stocks:!0}));try{const D=(await Q(`${ce}/watchlist/${_}/stocks`)).stocks||[];let U=D;if(D.length>0)try{const K=D.map(re=>re.symbol).slice(0,50).join(","),oe=await ze(`${ce}/fyers/market/quotes?symbols=${encodeURIComponent(K)}`);(oe==null?void 0:oe.fyers_connected)!==void 0&&ms(oe.fyers_connected),oe!=null&&oe.quotes&&oe.fyers_connected&&(U=D.map(re=>{const ee=oe.quotes[re.symbol];return ee?{...re,lastPrice:ee.lastPrice,pChange:ee.pChange,change:ee.change,high:ee.high,low:ee.low,volume:ee.volume}:re})),oe&&!oe.fyers_connected&&ve("Connect Fyers for live market prices","info")}catch(K){console.error("Failed to fetch initial prices",K)}Y(U)}catch(I){console.error("Failed to load watchlist stocks",I),ve("Failed to load stocks","error")}finally{x(I=>({...I,stocks:!1}))}},Mp=async()=>{if(H.length>=15){ve("Maximum 15 watchlists allowed","error");return}if(m.watchlists)return;x(I=>({...I,watchlists:!0}));const _=`Watchlist ${H.length+1}`;try{const I=await Q(`${ce}/watchlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:_,position:H.length})});ve(`Created ${_}`,"success"),await Rl(I.id)}catch{ve("Failed to create watchlist","error")}finally{x(I=>({...I,watchlists:!1}))}},Pp=async _=>{const I=H.find(D=>D.id===_);if(I!=null&&I.is_default){ve("Cannot delete the default watchlist","error");return}if(!m.watchlists){x(D=>({...D,watchlists:!0}));try{await Q(`${ce}/watchlist/${_}`,{method:"DELETE"}),ve("Watchlist deleted","success"),(P==null?void 0:P.id)===_&&B(null),await Rl()}catch{ve("Failed to delete","error")}finally{x(D=>({...D,watchlists:!1}))}}},Lp=async _=>{if(P)try{await Q(`${ce}/watchlist/${P.id}/stocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:_})}),ve(`Added ${_}`,"success"),await Cn(P.id)}catch{ve("Failed to add stock","error")}},Tp=async _=>{if(P)try{await Q(`${ce}/watchlist/${P.id}/stocks/${encodeURIComponent(_)}`,{method:"DELETE"}),ve(`Removed ${_}`,"success"),await Cn(P.id)}catch{ve("Failed to remove stock","error")}},Rp=async()=>{try{const _=await Q(`${ce}/fyers/market/all-stocks`);Bt(_.stocks||[]),_.fyers_connected||console.log("[VirtualTrading] Fyers not connected - showing stocks without live prices")}catch(_){console.error("Failed to load stocks for search",_)}},zp=async()=>{if(m.stocks||!E)return;const _=N+1,I=Ee.toUpperCase();x(D=>({...D,stocks:!0}));try{const D=await ze(`${ce}/nse_data/fno/search?query=${encodeURIComponent(I)}&page=${_}&limit=20`);if(D.results){const U=D.results.map(K=>({...K,symbol:K.identifier,lastPrice:K.ltp,pChange:K.pChange,isFno:!0}));u(K=>[...K,...U]),k(_),b(U.length===20&&D.total>_*20)}}catch(D){console.error("Load more failed",D)}finally{x(D=>({...D,stocks:!1}))}};w.useEffect(()=>{Z&&Te.length===0&&Rp()},[Z]),w.useEffect(()=>{if(!Z)return;if(!Ee.trim()){u(Te.slice(0,50));return}return $p(Ee)},[Ee,Te,Z]);const $p=_=>{const I=_.toUpperCase(),D=Te.filter(oe=>oe.symbol.includes(I)).slice(0,20),K=setTimeout(async()=>{x(ee=>({...ee,stocks:!0})),k(1),b(!1);let oe=[];if(/\d/.test(I)||/CE|PE|CALL|PUT/i.test(I)||/NIFTY|BANK/i.test(I))try{const ee=await ze(`${ce}/nse_data/fno/search?query=${encodeURIComponent(I)}&page=1&limit=20`);ee.results&&(b(ee.results.length===20&&ee.total>20),oe=ee.results.map(ge=>({...ge,symbol:ge.identifier,lastPrice:ge.ltp,pChange:ge.pChange,isFno:!0})))}catch(ee){console.error("F&O Search failed",ee)}const re=oe.length>0?[...oe,...D]:D;u(re),x(ee=>({...ee,stocks:!1}))},300);return()=>clearTimeout(K)},Ip=async _=>{const I=_.toUpperCase();try{const D=await ze(`${ce}/nse_data/fno/search?query=${encodeURIComponent(I)}&page=1&limit=20`);if(D.results&&D.results.length>0){const U=D.results.map(re=>({...re,symbol:re.identifier,display:re.display||re.identifier,lastPrice:re.ltp||0,pChange:re.pChange||0,strike:re.strike,expiry:re.expiry,type:re.type,isFno:!0})),K=new Set;return U.filter(re=>K.has(re.symbol)?!1:(K.add(re.symbol),!0)).slice(0,15)}}catch(D){console.error("Autocomplete search failed",D)}return[]},Dp=async(_,I)=>{if(T){if(!I.quantity||I.quantity<=0)return ve("Enter valid quantity","error");if(!I.price||parseFloat(I.price)<=0)return ve("Enter valid price","error");x(D=>({...D,trade:!0})),i(`Executing ${_} order...`);try{if(I.broker==="fyers"){const D={symbol:`NSE:${T.symbol}-EQ`,qty:parseInt(I.quantity),type:I.orderType==="market"?2:1,side:_==="BUY"?1:-1,productType:"CNC",limitPrice:I.orderType==="limit"?parseFloat(I.price):0,stopPrice:0,validity:"DAY",offlineOrder:!1};T.isFno&&(D.symbol=T.symbol||T.identifier,D.productType="MARGIN");const U=await Q(`${ce}/fyers/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});U&&U.s==="ok"?ve(`Live ${_} Order Placed: ${U.id}`,"success"):ve(`Fyers Error: ${(U==null?void 0:U.message)||"Order failed"}`,"error")}else{const D={symbol:T.symbol,quantity:parseInt(I.quantity),price:parseFloat(I.price),side:_,order_type:I.orderType.toUpperCase(),limit_price:I.orderType==="limit"?parseFloat(I.price):null},U=await Q(`${ce}/portfolio/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});U.wallet_balance!==void 0&&g(U.wallet_balance);const K=await Ll(U.holdings||[]);d(K),ve(`${_} ${I.quantity} ${T.symbol} Success`,"success")}setTimeout(()=>V(null),500)}catch(D){ve(D.message||"Trade failed","error")}finally{x(D=>({...D,trade:!1})),r()}}},Zc=async _=>{if(V(_),!_.lastPrice||_.lastPrice===0)try{const I=_.identifier||_.symbol,D=await ze(`${ce}/fyers/market/quotes?symbols=${encodeURIComponent(I)}`);if(D!=null&&D.quotes&&D.fyers_connected){const U=D.quotes[I];U&&V(K=>K&&K.symbol===_.symbol?{...K,lastPrice:U.lastPrice,pChange:U.pChange,change:U.change}:K)}}catch{}},Fp=w.useCallback(_=>{B(_),Cn(_.id)},[]);return l.jsxs("div",{className:"virtual-trading",children:[C.show&&l.jsx("div",{className:`virtual-toast ${C.type}`,children:C.message}),l.jsx("div",{className:"section-tabs",style:{marginBottom:"1rem",display:"flex",gap:"8px",borderBottom:"1px solid #444c56",paddingBottom:"8px",overflowX:"auto"},children:["stocks","portfolio","orders","fno","wallet"].map(_=>l.jsx("button",{className:`virtual-tab ${s===_?"active":""}`,onClick:()=>n(_),children:_==="stocks"?"Trade":_==="fno"?"Option Chain":_.charAt(0).toUpperCase()+_.slice(1)},_))}),s==="stocks"&&l.jsxs("div",{className:"virtual-stocks-container",children:[l.jsx(bx,{}),!jn&&!m.stocks&&A.length>0&&l.jsx("div",{style:{padding:"8px 12px",background:"#2d1f00",border:"1px solid #5c4a1e",borderRadius:"6px",color:"#ffb347",fontSize:"0.8rem",marginBottom:"8px"},children:"Fyers not connected  prices may be unavailable"}),l.jsx(lN,{stocks:A,loading:m.stocks&&A.length===0,searchQuery:"",setSearchQuery:()=>{},watchlists:H,activeWatchlist:P,setActiveWatchlist:Fp,onCreateWatchlist:Mp,onDeleteWatchlist:Pp,onRemoveStock:Tp,onShowAddStock:()=>{et(""),ct(!0)},onSelectStock:Zc,onOpenChart:()=>W(!0),onSearch:Ip,hasMore:!1})]}),s==="portfolio"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:"Portfolio"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[l.jsx("button",{className:`virtual-tab mini ${At?"":"active"}`,onClick:()=>Oe(!1),children:"Virtual"}),jn&&l.jsx("button",{className:`virtual-tab mini ${At?"active":""}`,onClick:()=>{Oe(!0),Tl()},children:"Fyers Real"})]})]}),l.jsx("button",{className:"ghost-btn",onClick:()=>At?Tl():Yc(),children:"Refresh"})]}),l.jsx(aN,{portfolio:At?S.map(_=>({symbol:_.symbol,quantity:_.quantity,average_price:_.costPrice,ltp:_.lp})):h,loading:m.portfolio||m.fyers,onSelectHolding:_=>{const I={symbol:_.symbol,lastPrice:_.ltp||_.average_price,pChange:0,quantity:_.quantity};V(I)}})]}),s==="orders"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsx("h2",{children:"Order History"}),l.jsx("button",{className:"ghost-btn",onClick:Jc,children:"Refresh"})]}),l.jsx(oN,{orders:f,loading:m.orders})]}),s==="fno"&&l.jsx(jx,{symbol:"NIFTY",onClose:()=>n("stocks"),onSelectToken:_=>{var re;const I=_.expiry?_.expiry.replace(/^(\d{4})-(\d{2})-(\d{2})$/,(ee,ge,ps,$i)=>{const Op=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${parseInt($i)} ${Op[parseInt(ps)-1]}`}):"",D=`${_.symbol} ${_.strike} ${_.type}${I?` (${I})`:""}`,K={NIFTY:75,BANKNIFTY:15,FINNIFTY:25,MIDCPNIFTY:50}[_.symbol]||1,oe={symbol:_.identifier||`NSE:${_.symbol}${(re=_.expiry)==null?void 0:re.replace(/-/g,"")}${_.strike}${_.type}`,displayName:D,lastPrice:_.ltp||0,pChange:_.pChange||0,quantity:K,isFno:!0};Zc(oe)}}),s==="wallet"&&l.jsxs("div",{className:"wallet-container",style:{height:"100%",display:"flex",flexDirection:"column"},children:[l.jsx("div",{className:"wallet-nav",style:{display:"flex",gap:"1rem",padding:"0.5rem 0",marginBottom:"1rem"},children:["balance","funds","transactions"].map(_=>l.jsx("button",{className:`secondary-btn ${j===_?"active-sub":""}`,style:{borderColor:j===_?"#00d09c":"#444c56"},onClick:()=>L(_),children:_.charAt(0).toUpperCase()+_.slice(1)},_))}),l.jsx(Cx,{subSection:j,onNavigate:_=>{_&&_.includes("funds")?L("funds"):_&&_.includes("transactions")?L("transactions"):L("balance")}})]}),l.jsx(nN,{isOpen:!!T&&!Z&&!F,onClose:()=>V(null),stock:T,walletBalance:y,onTrade:Dp,isSubmitting:m.trade}),F&&T&&l.jsx(sN,{isOpen:F,onClose:()=>W(!1),stock:T,API_BASE_URL:ce}),Z&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>{ct(!1),et(""),u([])},children:l.jsxs("div",{className:"stock-trade-shell",onClick:_=>_.stopPropagation(),style:{maxWidth:"800px",width:"90%",height:"80vh",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("h3",{children:["Add Stock to ",P==null?void 0:P.name]}),l.jsx("button",{className:"icon-button",onClick:()=>{ct(!1),et(""),u([])},children:""})]}),l.jsxs("div",{className:"stock-trade-content",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1},children:[l.jsx("div",{className:"search-row",children:l.jsx("input",{type:"text",placeholder:"Search NSE stocks...",value:Ee,onChange:_=>et(_.target.value),className:"search-input",autoFocus:!0})}),l.jsxs("div",{className:"add-stock-list",style:{overflowY:"auto",flex:1,paddingRight:"4px"},children:[c.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):c.map((_,I)=>{const D=A.some(U=>U.symbol.toUpperCase()===(_.identifier||_.symbol).toUpperCase());return l.jsxs("div",{className:`add-stock-item ${D?"disabled":""}`,onClick:()=>!D&&Lp(_.symbol),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:_.display||_.symbol}),l.jsxs("span",{className:"stock-price",children:["",Number(_.lastPrice||0).toFixed(2)]})]}),D?l.jsx("span",{className:"added-badge",children:" Added"}):l.jsx("button",{className:"add-btn-small",children:"+ Add"})]},_.identifier||_.symbol||I)}),E&&l.jsx("button",{className:"load-more-btn",onClick:zp,children:m.stocks?"Loading":"Load More"})]})]})]})})]})},Pa=window.location.origin,cN=({initialTab:t="trade"})=>{const[e,s]=w.useState({connected:!1,loading:!0,error:null}),[n,i]=w.useState(!1);w.useEffect(()=>{r()},[]);const r=async()=>{try{const c=await Q(`${Pa}/fyers/status`);s({connected:c.connected,loading:!1,error:null,connectedAt:c.connected_at,expiresAt:c.expires_at})}catch(c){console.error("Failed to check Fyers status:",c),s({connected:!1,loading:!1,error:c.message||"Failed to check Fyers status"})}},a=async()=>{i(!0);try{const c=await Q(`${Pa}/fyers/auth-url`);c.url?window.location.href=c.url:alert("Failed to get Fyers auth URL")}catch(c){console.error("Failed to get Fyers auth URL:",c),alert("Error: "+(c.message||"Failed to connect to Fyers"))}finally{i(!1)}},o=async()=>{if(confirm("Are you sure you want to disconnect Fyers?"))try{await Q(`${Pa}/fyers/disconnect`,{method:"DELETE"}),s({connected:!1,loading:!1,error:null})}catch(c){console.error("Failed to disconnect Fyers:",c),alert("Error: "+(c.message||"Failed to disconnect Fyers"))}};return e.loading?l.jsx("div",{className:"real-trading-container",children:l.jsxs("div",{className:"real-trading-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Checking broker connection..."})]})}):e.connected?l.jsxs("div",{className:"real-trading-container",children:[l.jsxs("div",{className:"broker-status-banner connected",children:[l.jsxs("div",{className:"broker-status-info",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsxs("span",{className:"status-text",children:[l.jsx("strong",{children:"Fyers Connected"}),l.jsx("span",{className:"status-detail",children:"Live trading enabled"})]})]}),l.jsx("button",{className:"disconnect-btn",onClick:o,children:"Disconnect"})]}),l.jsx(zo,{initialTab:t})]}):l.jsx("div",{className:"real-trading-container",children:l.jsxs("div",{className:"real-trading-connect-prompt",children:[l.jsx("div",{className:"connect-icon",children:""}),l.jsx("h2",{children:"Connect Your Broker"}),l.jsx("p",{className:"connect-description",children:"Connect your Fyers account to start real trading. Your credentials are securely handled through Fyers' official OAuth flow."}),l.jsxs("div",{className:"broker-options",children:[l.jsxs("div",{className:"broker-card fyers",children:[l.jsxs("div",{className:"broker-header",children:[l.jsx("span",{className:"broker-logo",children:""}),l.jsx("span",{className:"broker-name",children:"Fyers"})]}),l.jsx("p",{className:"broker-desc",children:"India's trusted stockbroker with low brokerage and advanced trading platform"}),l.jsx("button",{className:"connect-btn primary",onClick:a,disabled:n,children:n?"Connecting...":"Connect Fyers"})]}),l.jsxs("div",{className:"broker-card coming-soon",children:[l.jsxs("div",{className:"broker-header",children:[l.jsx("span",{className:"broker-logo",children:""}),l.jsx("span",{className:"broker-name",children:"More Brokers"})]}),l.jsx("p",{className:"broker-desc",children:"Support for Zerodha, Angel One, and more coming soon"}),l.jsx("button",{className:"connect-btn disabled",disabled:!0,children:"Coming Soon"})]})]}),e.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("span",{className:"error-icon",children:""}),e.error]})]})})},uN=window.location.origin;function hN({subSection:t}){var y,g,S,p,m,x,N,k,E;const[e,s]=w.useState([]),[n,i]=w.useState(null),[r,a]=w.useState(null),[o,c]=w.useState(!0);w.useEffect(()=>{u()},[t]);const u=async()=>{c(!0);try{let b="";switch(t){case"gainers":b="/nse_data/top-gainers";break;case"losers":b="/nse_data/top-losers";break;case"bulk":b="/nse_data/bulk-deals";break;case"weekly":b="/nse_data/weekly-gainers?days=5";break;case"fii-dii":b="/nse_data/fii-dii-activity";break;default:b="/nse_data/top-gainers"}const C=await Q(`${uN}${b}`);t==="weekly"?i(C):t==="bulk"?s(C.bulk_deals||[]):t==="fii-dii"?a(C):s(C.top_gainers||C.top_losers||[])}catch(b){console.error("Failed to load market data:",b)}finally{c(!1)}},h=b=>{if(!b&&b!==0)return"N/A";const C=Number(b);return isNaN(C)?"N/A":`${(C/100).toFixed(0)} Cr`},d=()=>{switch(t){case"gainers":return"Top Gainers";case"losers":return"Top Losers";case"bulk":return"Bulk Deals";case"weekly":return"Weekly Movers";case"fii-dii":return"FII/DII Activity";default:return"Market Data"}},f=()=>{switch(t){case"gainers":return"";case"losers":return"";case"bulk":return"";case"weekly":return"";case"fii-dii":return"";default:return""}};if(t==="fii-dii")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading FII/DII data..."}):r?l.jsxs("div",{className:"fii-dii-container",children:[r.date&&l.jsxs("div",{className:"fii-dii-date-header",children:["Data as of: ",l.jsx("strong",{children:r.date})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((y=r.fii)==null?void 0:y.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((g=r.fii)==null?void 0:g.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((S=r.fii)==null?void 0:S.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((p=r.fii)==null?void 0:p.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((m=r.dii)==null?void 0:m.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((x=r.dii)==null?void 0:x.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((N=r.dii)==null?void 0:N.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((k=r.dii)==null?void 0:k.netValue)})]})]})]})]})]}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No FII/DII Data"}),l.jsx("div",{className:"empty-state-text",children:"FII/DII activity data is not available at this time."})]})]});if(t==="weekly")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading weekly data..."}):(E=n==null?void 0:n.weeklyData)!=null&&E.length?l.jsx("div",{className:"weekly-container",children:n.weeklyData.map(b=>l.jsxs("div",{className:"weekly-column",children:[l.jsxs("div",{className:"weekly-header",children:[l.jsx("div",{children:b.dayName}),l.jsx("span",{className:"muted",children:b.date})]}),l.jsxs("div",{className:"weekly-block",children:[l.jsx("div",{className:"section-label positive",children:"Top Gainers"}),(b.topGainers||[]).slice(0,5).map(C=>{var M;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:C.symbol}),l.jsxs("span",{className:"text-right positive",children:[(M=C.pChange)==null?void 0:M.toFixed(2),"%"]})]},`g-${C.symbol}`)}),l.jsx("div",{className:"section-label negative",children:"Top Losers"}),(b.topLosers||[]).slice(0,5).map(C=>{var M;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:C.symbol}),l.jsxs("span",{className:"text-right negative",children:[(M=C.pChange)==null?void 0:M.toFixed(2),"%"]})]},`l-${C.symbol}`)})]})]},b.dayName+b.date))}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Weekly Data"}),l.jsx("div",{className:"empty-state-text",children:"Weekly movers data is not available."})]})]});if(t==="bulk")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading bulk deals..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Bulk Deals"}),l.jsx("div",{className:"empty-state-text",children:"Bulk deals data is not available."})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Client"}),l.jsx("th",{className:"text-right",children:"Quantity"}),l.jsx("th",{className:"text-right",children:"Price"})]})}),l.jsx("tbody",{children:e.map((b,C)=>l.jsxs("tr",{children:[l.jsx("td",{className:"order-symbol",children:b.symbol||b.BD_SYMBOL||"N/A"}),l.jsx("td",{children:b.clientName||b.client_name||b.BD_CLIENT_NAME||"N/A"}),l.jsx("td",{className:"text-right",children:(b.quantity||b.quantityTraded||b.BD_QTY_TRD||0).toLocaleString()}),l.jsxs("td",{className:"text-right",children:["",Number(b.tradePrice||b.price||b.BD_TP_WATP||0).toFixed(2)]})]},`${b.symbol}-${C}`))})]})})]});const v=t==="gainers";return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading market data..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:f()}),l.jsx("div",{className:"empty-state-title",children:"No Data Available"}),l.jsx("div",{className:"empty-state-text",children:"Market data is not available at this time."})]}):l.jsx("div",{className:"market-grid",children:e.map((b,C)=>l.jsxs("div",{className:"market-card-item",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("span",{className:"market-symbol",children:b.symbol}),l.jsxs("span",{className:`market-change-badge ${v?"positive":"negative"}`,children:[v?"+":"",Number(b.pChange||0).toFixed(2),"%"]})]}),l.jsxs("div",{className:"market-card-body",children:[l.jsxs("div",{className:"market-price-main",children:["",Number(b.lastPrice||0).toLocaleString()]}),l.jsxs("div",{className:"market-stats",children:[l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Open"}),l.jsxs("span",{children:["",Number(b.open||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"High"}),l.jsxs("span",{children:["",Number(b.dayHigh||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Low"}),l.jsxs("span",{children:["",Number(b.dayLow||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Prev Close"}),l.jsxs("span",{children:["",Number(b.previousClose||0).toLocaleString()]})]})]})]})]},b.symbol||C))})]})}const $o={HDFCBANK:12.96,RELIANCE:9.87,ICICIBANK:7.68,INFY:6.12,ITC:4.48,TCS:4.02,LT:3.89,BHARTIARTL:3.71,AXISBANK:3.01,SBIN:2.91,KOTAKBANK:2.62,BAJFINANCE:2.29,HINDUNILVR:2.25,MARUTI:1.68,ASIANPAINT:1.63,SUNPHARMA:1.6,TITAN:1.59,HCLTECH:1.54,NTPC:1.49,BAJAJFINSV:1.48,POWERGRID:1.44,"M&M":1.43,TATAMOTORS:1.38,ULTRACEMCO:1.36,ONGC:1.28,TECHM:1.15,NESTLEIND:1.14,TATASTEEL:1.09,WIPRO:1.05,ADANIENT:1.02,JSWSTEEL:.98,COALINDIA:.95,INDUSINDBK:.94,ADANIPORTS:.92,GRASIM:.88,HINDALCO:.85,BPCL:.82,DRREDDY:.78,BRITANNIA:.75,DIVISLAB:.72,CIPLA:.68,APOLLOHOSP:.65,HEROMOTOCO:.62,EICHERMOT:.58,TATACONSUM:.55,SBILIFE:.52,HDFCLIFE:.48,"BAJAJ-AUTO":.45,UPL:.42,LTIM:.38},Ep=24500;function dN(t,e,s,n=Ep){const i=$o[t]||0;if(!i||!s||s===0)return 0;const r=e/s*i*(n/100);return Math.round(r*100)/100}const fd={LONG_BUILDUP:{signal:"LONG_BUILDUP",label:"Long Buildup",emoji:"",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",description:"Fresh Buying - Trust this move"},SHORT_COVERING:{signal:"SHORT_COVERING",label:"Short Covering",emoji:"",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.15)",description:"Sellers Exiting - Weak move, be careful"},SHORT_BUILDUP:{signal:"SHORT_BUILDUP",label:"Short Buildup",emoji:"",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",description:"Fresh Selling - Trust the fall"},LONG_UNWINDING:{signal:"LONG_UNWINDING",label:"Long Unwinding",emoji:"",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",description:"Profit Booking - Just a dip"}};function fN(t,e){const s=t>0,n=e>0;return s&&n?"LONG_BUILDUP":s&&!n?"SHORT_COVERING":!s&&n?"SHORT_BUILDUP":"LONG_UNWINDING"}function mN(t,e=Ep){if(!t||!Array.isArray(t))return{movers:[],draggers:[],totalPositive:0,totalNegative:0};const n=[...t.filter(c=>$o[c.symbol]).map(c=>{const u=(c.lastPrice||c.ltp||0)-(c.previousClose||c.prevClose||0),h=dN(c.symbol,u,c.previousClose||c.prevClose||0,e),d=c.oiChange||0,f=c.oiChangePct||0;return{symbol:c.symbol,ltp:c.lastPrice||c.ltp||0,prevClose:c.previousClose||c.prevClose||0,priceChange:u,priceChangePct:c.pChange||u/(c.previousClose||1)*100,weight:$o[c.symbol]||0,contributionPoints:h,oiChange:d,oiChangePct:f,oiSignal:fN(u,d),dayHigh:c.dayHigh||0,dayLow:c.dayLow||0}})].sort((c,u)=>Math.abs(u.contributionPoints)-Math.abs(c.contributionPoints)),i=n.filter(c=>c.contributionPoints>0),r=n.filter(c=>c.contributionPoints<0),a=i.reduce((c,u)=>c+u.contributionPoints,0),o=r.reduce((c,u)=>c+u.contributionPoints,0);return{movers:i.slice(0,10),draggers:r.slice(0,10),totalPositive:Math.round(a*100)/100,totalNegative:Math.round(o*100)/100,netContribution:Math.round((a+o)*100)/100}}function pN(t){if(!t||t.length===0)return{strength:"neutral",message:"No data available",color:"text-gray-400 bg-gray-500/20",longBuildupCount:0,shortCoveringCount:0};const e=t.slice(0,3),s=e.filter(o=>o.oiSignal==="LONG_BUILDUP").length,n=e.filter(o=>o.oiSignal==="SHORT_COVERING").length;let i,r,a;return s>=2?(i="strong",r="Strong Trend - Fresh buying in top movers",a="strength-strong"):n>=2?(i="weak",r="Weak Rally - Mostly short covering",a="strength-weak"):(i="neutral",r="Mixed Signals - Watch carefully",a="strength-neutral"),{strength:i,message:r,color:a,longBuildupCount:s,shortCoveringCount:n}}function md({stock:t,rank:e,type:s}){const n=fd[t.oiSignal]||fd.LONG_BUILDUP,i=s==="mover";return l.jsxs("div",{className:`contributor-card ${i?"contributor-mover":"contributor-dragger"}`,children:[l.jsxs("div",{className:"contributor-left",children:[l.jsx("span",{className:`contributor-rank ${i?"rank-positive":"rank-negative"}`,children:e}),l.jsxs("div",{className:"contributor-info",children:[l.jsx("div",{className:"contributor-symbol",children:t.symbol}),l.jsxs("div",{className:"contributor-price",children:["",Number(t.ltp).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),l.jsxs("div",{className:"oi-signal-badge",style:{backgroundColor:n.bgColor,color:n.color,borderColor:n.color+"40"},title:n.description,children:[l.jsx("span",{className:"oi-signal-emoji",children:n.emoji}),l.jsx("span",{className:"oi-signal-label",children:n.label}),t.oiChangePct!==0&&l.jsxs("span",{className:"oi-signal-pct",children:["(",t.oiChangePct>0?"+":"",t.oiChangePct.toFixed(1),"%)"]})]}),l.jsxs("div",{className:"contributor-right",children:[l.jsxs("div",{className:`contribution-points ${i?"points-positive":"points-negative"}`,children:[t.contributionPoints>0?"+":"",t.contributionPoints.toFixed(1)," pts"]}),l.jsxs("div",{className:"contribution-pct",children:[t.priceChangePct>0?"+":"",Number(t.priceChangePct).toFixed(2),"%"]})]})]})}function vN({movers:t}){const e=pN(t),s=()=>{switch(e.strength){case"strong":return"";case"weak":return"";default:return""}};return l.jsxs("div",{className:`market-strength-indicator ${e.color}`,children:[l.jsxs("div",{className:"strength-message",children:[l.jsx("span",{className:"strength-icon",children:s()}),l.jsx("span",{className:"strength-text",children:e.message})]}),l.jsxs("div",{className:"strength-details",children:["Top 3: ",e.longBuildupCount," Long Buildup, ",e.shortCoveringCount," Short Covering"]})]})}const La=window.location.origin;function gN(){const[t,e]=w.useState([]),[s,n]=w.useState(24500),[i,r]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=bn("nifty-contributors",()=>f(),5e3),h=Ti(u);w.useEffect(()=>{d()},[]);const d=async()=>{r(!0),o(null);try{const[y,g]=await Promise.all([Q(`${La}/nse_data/nifty-contributors`),Q(`${La}/nse_data/indices`).catch(()=>null)]);if(y!=null&&y.stocks&&e(y.stocks),g!=null&&g.indices){const S=g.indices.find(p=>p.index==="NIFTY 50"||p.indexSymbol==="NIFTY 50");(S!=null&&S.last||S!=null&&S.lastPrice)&&n(S.last||S.lastPrice)}}catch(y){console.error("Failed to load Nifty contributors:",y),o(y.message||"Failed to load data")}finally{r(!1),c.current=!1}},f=async()=>{const y=await ze(`${La}/nse_data/nifty-contributors`);y!=null&&y.stocks&&e(y.stocks)},v=w.useMemo(()=>mN(t,s),[t,s]);return i&&c.current?l.jsxs("div",{className:"nifty-contributors-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading Nifty contributors..."})]}):a&&t.length===0?l.jsxs("div",{className:"nifty-contributors-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:a}),l.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]}):l.jsxs("div",{className:"nifty-contributors",children:[l.jsxs("div",{className:"contributors-header",children:[l.jsxs("div",{className:"contributors-title-section",children:[l.jsxs("h2",{className:"contributors-title",children:[l.jsx("span",{className:"contributors-icon",children:""}),"Nifty Index Contributors"]}),l.jsx("p",{className:"contributors-subtitle",children:"Who's lifting vs dragging the index - Sorted by Points, not %"})]}),l.jsxs("div",{className:"contributors-header-right",children:[l.jsx(vN,{movers:v.movers}),l.jsx("button",{onClick:d,disabled:i,className:"refresh-btn",children:i?"Loading...":"Refresh"})]})]}),l.jsxs("div",{className:"contribution-summary",children:[l.jsxs("div",{className:"summary-item summary-positive",children:[l.jsx("span",{className:"summary-label",children:"Total Positive"}),l.jsxs("span",{className:"summary-value",children:["+",v.totalPositive.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-net",children:[l.jsx("span",{className:"summary-label",children:"Net Contribution"}),l.jsxs("span",{className:`summary-value ${v.netContribution>=0?"positive":"negative"}`,children:[v.netContribution>=0?"+":"",v.netContribution.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-negative",children:[l.jsx("span",{className:"summary-label",children:"Total Negative"}),l.jsxs("span",{className:"summary-value",children:[v.totalNegative.toFixed(1)," pts"]})]})]}),l.jsxs("div",{className:"contributors-grid",children:[l.jsxs("div",{className:"contributors-column movers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title movers-title",children:[l.jsx("span",{children:""})," Index Movers"]}),l.jsxs("span",{className:"column-total positive",children:["+",v.totalPositive.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:v.movers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No positive contributors"})}):v.movers.map((y,g)=>l.jsx(md,{stock:y,rank:g+1,type:"mover"},y.symbol))})]}),l.jsxs("div",{className:"contributors-column draggers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title draggers-title",children:[l.jsx("span",{children:""})," Index Draggers"]}),l.jsxs("span",{className:"column-total negative",children:[v.totalNegative.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:v.draggers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No negative contributors"})}):v.draggers.map((y,g)=>l.jsx(md,{stock:y,rank:g+1,type:"dragger"},y.symbol))})]})]}),l.jsxs("div",{className:"oi-legend",children:[l.jsx("div",{className:"legend-title",children:"OI Signal Guide:"}),l.jsxs("div",{className:"legend-items",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh buying - trust the move"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Covering"}),l.jsx("span",{className:"legend-desc",children:"Weak move - be careful"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh selling - trust the fall"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Unwinding"}),l.jsx("span",{className:"legend-desc",children:"Profit booking - just a dip"})]})]})]}),u&&l.jsx("div",{className:"contributors-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const fr=window.location.origin,yN=({data:t})=>{const e=[...t].reverse();if(!e.length)return null;const s=e.flatMap(d=>[d.fii_net_value,d.dii_net_value].filter(f=>f!==null)),i=(Math.max(...s.map(d=>Math.abs(d)))||1e3)*1.1,r=220,a={top:20,bottom:30},o=r-a.top-a.bottom,c=a.top+o/2,u=d=>{const f=d/i*(o/2);return c-f},h=d=>Math.abs(d/100).toFixed(0)+"Cr";return l.jsxs("div",{className:"fii-dii-chart-container",children:[l.jsx("h3",{className:"history-title",children:"Institutional Flow Trend"}),l.jsxs("div",{className:"chart-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color fii"})," FII"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color dii"})," DII"]})]}),l.jsx("div",{className:"fii-dii-chart-scroll",children:l.jsxs("svg",{viewBox:`0 0 ${e.length*60} ${r}`,preserveAspectRatio:"xMidYMid meet",className:"fii-dii-svg-content",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"gradGreen",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--accent-green)",stopOpacity:"0.8"}),l.jsx("stop",{offset:"100%",stopColor:"var(--accent-green)",stopOpacity:"0.4"})]}),l.jsxs("linearGradient",{id:"gradRed",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--accent-red)",stopOpacity:"0.8"}),l.jsx("stop",{offset:"100%",stopColor:"var(--accent-red)",stopOpacity:"0.4"})]})]}),l.jsx("line",{x1:"0",y1:c,x2:"100%",y2:c,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),l.jsxs("text",{x:"5",y:a.top+10,fontSize:"10",fill:"var(--text-secondary)",children:["+",h(i)]}),l.jsxs("text",{x:"5",y:r-a.bottom-5,fontSize:"10",fill:"var(--text-secondary)",children:["-",h(i)]}),e.map((d,f)=>{const y=f*60+30,g=12,S=4,p=d.fii_net_value||0,m=d.dii_net_value||0,x=u(p),N=u(m),k=Math.abs(x-c),E=Math.abs(N-c),b=p>=0?x:c,C=m>=0?N:c,M=new Date(d.trade_date),j=`${M.getDate()} ${M.toLocaleString("default",{month:"short"}).slice(0,3)}`;return l.jsxs("g",{children:[l.jsx("text",{x:y,y:r-5,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",children:j}),l.jsx("title",{children:`${j}
FII: ${h(p*100)}
DII: ${h(m*100)}`}),l.jsx("rect",{x:y-g-S/2,y:b,width:g,height:k||1,fill:p>=0?"url(#gradGreen)":"url(#gradRed)",rx:"2"}),l.jsx("rect",{x:y+S/2,y:C,width:g,height:E||1,fill:m>=0?"var(--accent-green)":"var(--accent-red)",opacity:"0.5",rx:"2",stroke:m>=0?"var(--accent-green)":"var(--accent-red)",strokeWidth:"0.5"})]},f)})]})})]})};function xN(){const[t,e]=w.useState(null),[s,n]=w.useState([]),[i,r]=w.useState([]),[a,o]=w.useState(!0),[c,u]=w.useState(null),h=w.useRef(!0),[d,f]=w.useState(0),[v,y]=w.useState(0),g=10,{lastUpdate:S}=bn("fii-dii",()=>k(),6e4),p=Ti(S);w.useEffect(()=>{m()},[]),w.useEffect(()=>{(async()=>{const W=await ze(`${fr}/nse_data/fii-dii-history?limit=30&offset=0`);W!=null&&W.records&&r(W.records)})()},[]);const m=async F=>{var H;const W=F!==void 0?F:d;o(!0),u(null);try{const $=W*g,[P,B]=await Promise.allSettled([Q(`${fr}/nse_data/fii-dii-activity`),Q(`${fr}/nse_data/fii-dii-history?limit=${g}&offset=${$}`)]);if(P.status==="fulfilled"&&e(P.value),B.status==="fulfilled"){const A=B.value;n((A==null?void 0:A.records)||[]),y((A==null?void 0:A.total)||0)}else console.error("Failed to load history:",B.reason);P.status==="rejected"&&B.status==="rejected"&&u(((H=P.reason)==null?void 0:H.message)||"Failed to load data")}catch($){console.error("Failed to load FII/DII data:",$),u($.message||"Failed to load data")}finally{o(!1),h.current=!1}},x=F=>{f(F),m(F)},N=Math.ceil(v/g)||1,k=async()=>{const F=await ze(`${fr}/nse_data/fii-dii-activity`);F&&e(F)},E=F=>{if(F==null)return"";const W=F/100;return`${Math.abs(W).toFixed(2)} Cr`},b=F=>{if(F==null)return"";const W=F/100;return`${W>=0?"+":""}${W.toFixed(2)} Cr`},C=F=>F==null?"neutral":F>=0?"bullish":"bearish",j=(()=>{if(!s.length)return{fiiTotal:0,diiTotal:0,days:0};let F=0,W=0,H=0;return s.forEach($=>{$.fii_net_value!==null&&(F+=$.fii_net_value,H++),$.dii_net_value!==null&&(W+=$.dii_net_value)}),{fiiTotal:F,diiTotal:W,days:H}})();if(a&&h.current)return l.jsxs("div",{className:"fii-dii-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading FII/DII activity..."})]});if(c&&!t)return l.jsxs("div",{className:"fii-dii-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:c}),l.jsx("button",{onClick:m,className:"retry-btn",children:"Retry"})]});const L=t==null?void 0:t.fii,T=t==null?void 0:t.dii,V=t==null?void 0:t.date;return l.jsxs("div",{className:"fii-dii-activity",children:[l.jsxs("div",{className:"fii-dii-header",children:[l.jsxs("div",{className:"fii-dii-title-section",children:[l.jsxs("h2",{className:"fii-dii-title",children:[l.jsx("span",{className:"fii-dii-icon",children:""}),"FII / DII Activity"]}),l.jsxs("p",{className:"fii-dii-subtitle",children:["Foreign & Domestic Institutional Investor flows",V&&l.jsxs("span",{className:"trade-date",children:["  ",V]})]})]}),l.jsx("button",{onClick:m,disabled:a,className:"refresh-btn",children:a?"Loading...":"Refresh"})]}),l.jsxs("div",{className:"fii-dii-cards",children:[l.jsxs("div",{className:`institutional-card fii-card ${C(L==null?void 0:L.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"FII (Foreign)"})]}),l.jsx("div",{className:`net-badge ${C(L==null?void 0:L.netValue)}`,children:(L==null?void 0:L.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${C(L==null?void 0:L.netValue)}`,children:b(L==null?void 0:L.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:E(L==null?void 0:L.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:E(L==null?void 0:L.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card dii-card ${C(T==null?void 0:T.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"DII (Domestic)"})]}),l.jsx("div",{className:`net-badge ${C(T==null?void 0:T.netValue)}`,children:(T==null?void 0:T.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${C(T==null?void 0:T.netValue)}`,children:b(T==null?void 0:T.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:E(T==null?void 0:T.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:E(T==null?void 0:T.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card combined-card ${C(((L==null?void 0:L.netValue)||0)+((T==null?void 0:T.netValue)||0))}`,children:[l.jsx("div",{className:"card-header",children:l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"Combined Flow"})]})}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${C(((L==null?void 0:L.netValue)||0)+((T==null?void 0:T.netValue)||0))}`,children:b(((L==null?void 0:L.netValue)||0)+((T==null?void 0:T.netValue)||0))})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"FII Net"}),l.jsx("span",{className:`detail-value ${C(L==null?void 0:L.netValue)}`,children:b(L==null?void 0:L.netValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"DII Net"}),l.jsx("span",{className:`detail-value ${C(T==null?void 0:T.netValue)}`,children:b(T==null?void 0:T.netValue)})]})]})]})]}),s.length>0&&l.jsxs("div",{className:"fii-dii-history",children:[l.jsxs("h3",{className:"history-title",children:["History (",v," Trading Days)"]}),l.jsxs("div",{className:"history-summary",children:[l.jsxs("div",{className:`summary-card ${C(j.fiiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"FII Cumulative"}),l.jsx("div",{className:`summary-value ${C(j.fiiTotal)}`,children:b(j.fiiTotal)})]}),l.jsxs("div",{className:`summary-card ${C(j.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"DII Cumulative"}),l.jsx("div",{className:`summary-value ${C(j.diiTotal)}`,children:b(j.diiTotal)})]}),l.jsxs("div",{className:`summary-card ${C(j.fiiTotal+j.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"Total Institutional"}),l.jsx("div",{className:`summary-value ${C(j.fiiTotal+j.diiTotal)}`,children:b(j.fiiTotal+j.diiTotal)})]})]}),l.jsx("div",{className:"history-table-container",children:l.jsxs("table",{className:"history-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{className:"text-right",children:"FII Net"}),l.jsx("th",{className:"text-right",children:"DII Net"}),l.jsx("th",{className:"text-right",children:"Total"})]})}),l.jsx("tbody",{children:s.map((F,W)=>{const H=(F.fii_net_value||0)+(F.dii_net_value||0);return l.jsxs("tr",{children:[l.jsx("td",{className:"date-cell",children:F.trade_date?new Date(F.trade_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""}),l.jsx("td",{className:`text-right ${C(F.fii_net_value)}`,children:b(F.fii_net_value)}),l.jsx("td",{className:`text-right ${C(F.dii_net_value)}`,children:b(F.dii_net_value)}),l.jsx("td",{className:`text-right ${C(H)}`,children:b(H)})]},F.trade_date||W)})})]})}),N>1&&l.jsxs("div",{className:"pagination-controls",children:[l.jsx("button",{className:"pagination-btn",onClick:()=>x(d-1),disabled:d===0,children:"<"}),Array.from({length:N},(F,W)=>{const H=W===0||W===N-1||Math.abs(W-d)<=2;return!H&&(W===1||W===N-2)?l.jsx("span",{className:"pagination-ellipsis",children:"..."},W):H?l.jsx("button",{className:`pagination-num ${W===d?"active":""}`,onClick:()=>x(W),children:W+1},W):null}),l.jsx("button",{className:"pagination-btn",onClick:()=>x(d+1),disabled:d>=N-1,children:">"})]}),l.jsx(yN,{data:i})]}),l.jsxs("div",{className:"fii-dii-insight",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("div",{className:"insight-title",children:"Market Insight"}),l.jsx("div",{className:"insight-text",children:(()=>{const F=(L==null?void 0:L.netValue)||0,W=(T==null?void 0:T.netValue)||0;return F>0&&W>0?"Both FII & DII are buying - Strong bullish sentiment with institutional support.":F<0&&W<0?"Both FII & DII are selling - Bearish sentiment, institutions are risk-off.":F<0&&W>0?"FII selling, DII buying - DIIs absorbing FII selling pressure. Watch for support levels.":F>0&&W<0?"FII buying, DII selling - Foreign interest increasing. DIIs may be booking profits.":"Mixed institutional activity. Monitor for clearer directional signals."})()})]})]}),S&&l.jsx("div",{className:"fii-dii-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",p]})})]})}const In=window.location.origin;function wN({onNavigate:t}){const[e,s]=w.useState([]),[n,i]=w.useState([]),[r,a]=w.useState(!0),[o,c]=w.useState(""),[u,h]=w.useState(!1),[d,f]=w.useState(""),{lastUpdate:v}=bn("watchlist-prices",()=>S(),5e3);Ti(v),w.useEffect(()=>{y(),g()},[]);const y=async()=>{const N=localStorage.getItem("watchlist");N&&s(JSON.parse(N))},g=async()=>{a(!0);try{const N=await Q(`${In}/fyers/market/all-stocks`);if(i(N.stocks||[]),!N.fyers_connected||N.stocks&&N.stocks.length===0){console.log("[Watchlist] Fyers not connected, falling back to NSE"),f("nse");const k=await Q(`${In}/nse_data/all-stocks`);i(k.stocks||[])}else f("fyers")}catch(N){console.error("Failed to load stocks:",N);try{f("nse");const k=await Q(`${In}/nse_data/all-stocks`);i(k.stocks||[])}catch(k){console.error("NSE fallback also failed:",k)}}finally{a(!1)}},S=async()=>{var b;const N=localStorage.getItem("watchlist");if(!N)return;const k=JSON.parse(N);if(k.length===0)return;const E=k.map(C=>C.symbol).filter(Boolean);if(E.length!==0)try{const C=E.slice(0,50).join(","),M=await ze(`${In}/fyers/market/quotes?symbols=${encodeURIComponent(C)}`);if(M!=null&&M.quotes&&M.fyers_connected){f("fyers");const j=k.map(T=>{const V=M.quotes[T.symbol];return V?{...T,lastPrice:V.lastPrice,pChange:V.pChange,change:V.change,dayHigh:V.high,dayLow:V.low,volume:V.volume}:T});s(j);const L=n.map(T=>{const V=M.quotes[T.symbol];return V?{...T,...V}:T});i(L)}else{f("nse");const j=await ze(`${In}/nse_data/all-stocks`);if(((b=j==null?void 0:j.stocks)==null?void 0:b.length)>0){i(j.stocks);const L=k.map(T=>j.stocks.find(F=>F.symbol===T.symbol)||T);s(L)}}}catch(C){console.error("Failed to refresh watchlist prices",C)}},p=N=>{if(!e.find(E=>E.symbol===N.symbol)){const E=[...e,N];s(E),localStorage.setItem("watchlist",JSON.stringify(E))}h(!1),c("")},m=N=>{const k=e.filter(E=>E.symbol!==N);s(k),localStorage.setItem("watchlist",JSON.stringify(k))},x=n.filter(N=>{var k,E;return((k=N.symbol)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))||((E=N.identifier)==null?void 0:E.toLowerCase().includes(o.toLowerCase()))});return l.jsxs("div",{className:"watchlist-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Watchlist"}),d&&l.jsx("span",{style:{fontSize:"0.75rem",color:d==="fyers"?"#00d09c":"#ffa657",marginLeft:"0.5rem",padding:"0.125rem 0.5rem",borderRadius:"0.25rem",background:"rgba(255,255,255,0.1)"},children:d==="fyers"?" Fyers Live":" NSE Data"})]}),l.jsxs("div",{className:"section-actions",children:[l.jsx("button",{onClick:()=>h(!0),children:"+ Add Stock"}),l.jsx("button",{onClick:g,disabled:r,children:r?"Loading...":"Refresh"})]})]}),e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Stocks in Watchlist"}),l.jsx("div",{className:"empty-state-text",children:"Add stocks to your watchlist to track them easily."}),l.jsx("button",{className:"primary-btn",onClick:()=>h(!0),children:"Add Your First Stock"})]}):l.jsx("div",{className:"watchlist-grid",children:e.map(N=>{const k=n.find(C=>C.symbol===N.symbol),E=(k==null?void 0:k.lastPrice)||N.lastPrice||0,b=(k==null?void 0:k.pChange)||N.pChange||0;return l.jsxs("div",{className:"watchlist-item",children:[l.jsxs("div",{className:"watchlist-info",children:[l.jsx("span",{className:"watchlist-symbol",children:N.symbol}),l.jsx("span",{className:"watchlist-name",children:N.identifier||"Equity"})]}),l.jsxs("div",{className:"watchlist-price-info",children:[l.jsx("div",{className:"watchlist-price",children:E>0?`${Number(E).toLocaleString()}`:"N/A"}),l.jsx("div",{className:`watchlist-change ${b>=0?"positive":"negative"}`,children:E>0?`${b>=0?"+":""}${Number(b).toFixed(2)}%`:"-"})]}),l.jsxs("div",{className:"watchlist-actions",children:[l.jsx("button",{className:"watchlist-action-btn",onClick:()=>t("trading.trade"),title:"Trade",children:""}),l.jsx("button",{className:"watchlist-action-btn remove",onClick:()=>m(N.symbol),title:"Remove",children:""})]})]},N.symbol)})}),u&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>h(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:"Add to Watchlist"}),l.jsx("p",{className:"muted",children:"Search and add stocks to your watchlist"})]}),l.jsx("button",{className:"icon-button",onClick:()=>h(!1),children:""})]}),l.jsx("input",{type:"text",className:"search-input",placeholder:"Search stocks by symbol or name...",value:o,onChange:N=>c(N.target.value),autoFocus:!0}),l.jsx("div",{className:"stock-list",style:{maxHeight:"400px"},children:r?l.jsx("div",{className:"loading",children:"Loading stocks..."}):x.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):x.slice(0,20).map(N=>{const k=e.find(E=>E.symbol===N.symbol);return l.jsxs("div",{className:`stock-item ${k?"selected":""}`,onClick:()=>!k&&p(N),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:N.symbol}),l.jsx("span",{className:"stock-price",children:N.identifier||"Equity"})]}),l.jsx("div",{className:"stock-change",children:k?l.jsx("span",{className:"muted",children:"Added "}):N.lastPrice?l.jsxs("span",{className:N.pChange>=0?"positive":"negative",children:["",Number(N.lastPrice).toLocaleString()]}):l.jsx("span",{className:"muted",children:"-"})})]},N.symbol)})})]})})]})}const NN=window.location.origin;function SN({subSection:t}){const e=Sn(),{theme:s,setTheme:n}=Xm(),i=localStorage.getItem("user_email")||"User",r=localStorage.getItem("user_name")||i.split("@")[0],[a,o]=w.useState(r),[c,u]=w.useState(localStorage.getItem("profile_pic")||""),[h,d]=w.useState(!1),[f,v]=w.useState(!1),[y,g]=w.useState(!1),S=w.useRef(null);rl.useEffect(()=>{p()},[t]);const p=async()=>{try{const C=await Q(`${NN}/fyers/status`);v(C.connected)}catch(C){console.error("Error checking Fyers status:",C)}},m=async()=>{g(!0);try{const M=await(await fetch("/fyers/auth-url",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();M.url&&(window.location.href=M.url)}catch(C){console.error("Error getting Fyers auth URL:",C),alert("Failed to connect to Fyers. Please try again later.")}finally{g(!1)}},x=async()=>{if(confirm("Are you sure you want to disconnect your Fyers account?"))try{await fetch("/fyers/disconnect",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),v(!1)}catch(C){console.error("Error disconnecting Fyers:",C)}},N=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),e("/login")},k=()=>{d(!1),alert("Wallet reset feature coming soon!")},E=C=>{var j;const M=(j=C.target.files)==null?void 0:j[0];if(M){const L=new FileReader;L.onloadend=()=>{const T=L.result;u(T),localStorage.setItem("profile_pic",T)},L.readAsDataURL(M)}},b=()=>{localStorage.setItem("user_name",a),alert("Display name saved!")};return t==="preferences"?l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Preferences"})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Display Settings"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Theme"}),l.jsx("span",{className:"settings-item-desc",children:"Choose your preferred theme"})]}),l.jsxs("select",{className:"settings-select",value:s,onChange:C=>{n(C.target.value)},children:[l.jsx("option",{value:"dark",children:"Dark Mode"}),l.jsx("option",{value:"light",children:"Light Mode"}),l.jsx("option",{value:"glass",children:"Glass Mode"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Currency Format"}),l.jsx("span",{className:"settings-item-desc",children:"Display currency format"})]}),l.jsx("select",{className:"settings-select",defaultValue:"inr",children:l.jsx("option",{value:"inr",children:" INR (Indian Rupee)"})})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Chart Default Interval"}),l.jsx("span",{className:"settings-item-desc",children:"Default time interval for charts"})]}),l.jsxs("select",{className:"settings-select",defaultValue:"1d",children:[l.jsx("option",{value:"1m",children:"1 Minute"}),l.jsx("option",{value:"5m",children:"5 Minutes"}),l.jsx("option",{value:"15m",children:"15 Minutes"}),l.jsx("option",{value:"1h",children:"1 Hour"}),l.jsx("option",{value:"1d",children:"1 Day"})]})]})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Notifications"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Trade Notifications"}),l.jsx("span",{className:"settings-item-desc",children:"Get notified when trades are executed"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Price Alerts"}),l.jsx("span",{className:"settings-item-desc",children:"Receive alerts when stocks hit target prices"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]})]})]})]}):l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Profile"})]})}),l.jsx("div",{className:"settings-card",children:l.jsxs("div",{className:"profile-header",children:[l.jsxs("div",{className:"profile-avatar clickable",onClick:()=>{var C;return(C=S.current)==null?void 0:C.click()},title:"Click to change profile picture",style:c?{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[!c&&a.charAt(0).toUpperCase(),l.jsx("div",{className:"avatar-overlay",children:""})]}),l.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:E,style:{display:"none"}}),l.jsxs("div",{className:"profile-info",children:[l.jsx("h3",{children:a}),l.jsx("span",{className:"profile-email",children:i}),l.jsx("span",{className:"profile-badge",children:"Paper Trading Account"})]})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Personal Information"}),l.jsx("div",{className:"settings-list",children:l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Display Name"}),l.jsx("span",{className:"settings-item-desc",children:"This name will be shown in the app"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsx("input",{type:"text",className:"settings-input",value:a,onChange:C=>o(C.target.value),placeholder:"Enter your name"}),l.jsx("button",{className:"settings-action-link primary",onClick:b,children:"Save"})]})]})})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Broker Connections"}),l.jsx("p",{className:"settings-desc",children:"Connect your real broker accounts to view holdings and place real trades."}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Fyers"}),l.jsx("span",{className:"settings-item-desc",children:"Trade with your Fyers account"})]})]})}),f?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("span",{className:"badge-connected",children:"Connected"}),l.jsx("button",{className:"settings-action-link danger",onClick:x,children:"Disconnect"})]}):l.jsx("button",{className:"settings-action-link primary",onClick:m,disabled:y,children:y?"Connecting...":"Connect"})]}),l.jsx("div",{className:"settings-item disabled",children:l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Zerodha"}),l.jsx("span",{className:"settings-item-desc",children:"Coming Soon"})]})]})})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Information"}),l.jsxs("div",{className:"settings-list",children:[l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Email"}),l.jsx("span",{className:"settings-item-value",children:i})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Account Type"}),l.jsx("span",{className:"settings-item-value",children:"Market Sandbox (Demo)"})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Starting Balance"}),l.jsx("span",{className:"settings-item-value",children:"1,00,000"})]})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Actions"}),l.jsxs("div",{className:"settings-actions",children:[l.jsxs("button",{className:"settings-action-btn warning",onClick:()=>d(!0),children:[l.jsx("span",{children:""}),"Reset Wallet"]}),l.jsxs("button",{className:"settings-action-btn danger",onClick:N,children:[l.jsx("span",{children:""}),"Logout"]})]})]}),h&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>d(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:C=>C.stopPropagation(),style:{maxWidth:"400px"},children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsx("div",{children:l.jsx("h3",{children:"Reset Wallet?"})}),l.jsx("button",{className:"icon-button",onClick:()=>d(!1),children:""})]}),l.jsx("p",{style:{marginBottom:"1.5rem"},children:"This will reset your wallet balance to 1,00,000 and clear all your holdings and order history. This action cannot be undone."}),l.jsxs("div",{className:"stock-trade-actions",style:{gridTemplateColumns:"1fr 1fr"},children:[l.jsx("button",{className:"chart-btn",onClick:()=>d(!1),children:"Cancel"}),l.jsx("button",{className:"sell-btn",onClick:k,children:"Reset Wallet"})]})]})})]})}function bN(){return l.jsxs("div",{className:"product-section",style:{maxWidth:"900px",margin:"0 auto"},children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Platform Guide"})]}),l.jsx("p",{className:"section-subtitle",children:"Quick reference for all trading tools and features"})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Virtual Trading"}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Paper Trading"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"What it does:"})," Simulated trading with virtual money (1,00,000 starting balance).",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Testing strategies without risking real capital.",l.jsx("br",{}),l.jsx("strong",{children:"Features:"})," Buy/Sell stocks, track P&L, view portfolio performance."]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Watchlist"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"What it does:"})," Track stocks you're interested in.",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Monitoring potential trades before entry."]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Real Trading"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"Broker Integration:"})," Connect your Zerodha or Fyers account for live trading.",l.jsx("br",{}),l.jsx("strong",{children:"Features:"})," Real portfolio sync, live order placement, P&L tracking.",l.jsx("br",{}),l.jsx("strong",{children:"Setup:"})," Authenticate through broker OAuth flow from settings."]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Market Data"}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("h4",{style:{color:"var(--info)",marginBottom:"0.5rem"},children:"Top Gainers / Losers"}),l.jsx("p",{style:{opacity:.9,lineHeight:1.6},children:"Real-time list of best and worst performing stocks in NIFTY 50."})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("h4",{style:{color:"var(--info)",marginBottom:"0.5rem"},children:"FII/DII Activity"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"FII (Foreign):"})," Net buying/selling by foreign institutions.",l.jsx("br",{}),l.jsx("strong",{children:"DII (Domestic):"})," Net buying/selling by mutual funds, insurance companies.",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Understanding institutional money flow direction."]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem",background:"var(--card-bg-hover)"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Quick Tips"}),l.jsxs("ul",{style:{opacity:.9,lineHeight:1.8,paddingLeft:"1.5rem"},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Green badge"})," = Bullish / Positive / Strong signal"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Red badge"})," = Bearish / Negative / Weak signal"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Blue badge"})," = Neutral / Informational"]}),l.jsx("li",{children:"Data auto-refreshes every 30-60 seconds"}),l.jsx("li",{children:"Market hours: 9:15 AM - 3:30 PM IST"}),l.jsx("li",{children:"Best results during market hours when live data flows"})]})]})]})}function jN(){const{isPaused:t,isOnline:e,togglePause:s,activeCount:n}=Sx(),[i,r]=w.useState(vh()),[a,o]=w.useState(yh());w.useEffect(()=>{const u=setInterval(()=>{r(vh()),o(yh())},1e3);return()=>clearInterval(u)},[]);const c=Ps();return e?l.jsxs("div",{className:"refresh-control",children:[l.jsxs("div",{className:"market-status",children:[l.jsxs("span",{className:`market-status-indicator ${c?"open":"closed"}`,children:[l.jsx("span",{className:"status-dot"}),i]}),l.jsxs("span",{className:"market-countdown",children:[a.event==="close"?"Closes":"Opens"," in ",a.countdown]})]}),c?l.jsxs("button",{className:`refresh-toggle-btn ${t?"paused":"active"}`,onClick:s,title:t?"Resume auto-refresh":"Pause auto-refresh",children:[t?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M3 2l10 6-10 6V2z"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M2 2h4v12H2V2zm8 0h4v12h-4V2z"})}),l.jsx("span",{className:"refresh-toggle-text",children:t?"Paused":`Live (${n})`})]}):l.jsx("span",{className:"refresh-status-text",children:"Auto-refresh paused (market closed)"})]}):l.jsx("div",{className:"refresh-control",children:l.jsxs("div",{className:"offline-indicator",children:[l.jsx("span",{className:"offline-dot"}),l.jsx("span",{children:"Offline"})]})})}function CN(){const t=Sn();Xm(),localStorage.getItem("access_token");const e=localStorage.getItem("user_email")||"User",s=localStorage.getItem("user_name")||e.split("@")[0],[n,i]=w.useState("dashboard"),[r,a]=w.useState(!1),[o,c]=w.useState(!1),[u,h]=w.useState("");w.useEffect(()=>{fetch("/static/version.json?t="+Date.now()).then(C=>C.json()).then(C=>h(`v${C.version}`)).catch(()=>h("v1.0.0"));const m=new URLSearchParams(window.location.search),x=m.get("s"),N=m.get("auth_code")||m.get("code"),k=m.get("id"),E=m.get("fyers_connected"),b=m.get("fyers_error");E==="true"?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):b?(alert("Fyers connection failed: "+b),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):x==="ok"&&N&&d(x,N,k)},[]);const d=async(m,x,N)=>{try{const k=await fetch(`/fyers/callback?s=${m}&code=${x}&id=${N}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),E=await k.json();k.ok?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):alert("Failed to connect Fyers: "+E.detail)}catch(k){console.error("Error handling Fyers callback:",k)}},f=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),t("/login")},v=m=>{i(m),c(!1)},[y,g]=n.split("."),S=()=>{switch(y){case"dashboard":return l.jsx(xh,{onNavigate:v});case"trading":return g==="portfolio"||g==="orders"?l.jsx(zo,{initialTab:g==="orders"?"orders":"portfolio"}):l.jsx(zo,{initialTab:"trade"});case"real-trading":return l.jsx(cN,{initialTab:"trade"});case"market":return g==="nifty-contributors"?l.jsx(gN,{}):g==="fii-dii"?l.jsx(xN,{}):l.jsx(hN,{subSection:g||"gainers"});case"watchlist":return l.jsx(wN,{onNavigate:v});case"settings":return l.jsx(SN,{subSection:g||"profile"});case"documentation":return l.jsx(bN,{});default:return l.jsx(xh,{onNavigate:v})}},p=()=>{const m={dashboard:"Dashboard",trading:"Market Sandbox","real-trading":"Market Connect",market:"Market Data","market.gainers":"Top Gainers","market.losers":"Top Losers","market.nifty-contributors":"Nifty Contributors","market.fii-dii":"FII / DII Activity","market.weekly":"Weekly Movers","market.bulk":"Bulk Deals",watchlist:"Watchlist",settings:"Settings","settings.profile":"Profile","settings.preferences":"Preferences",documentation:"Platform Guide"};return m[n]||m[y]||"Dashboard"};return l.jsxs(Gy,{children:[l.jsx(Xy,{}),l.jsxs("div",{className:"app-layout",children:[o&&l.jsx("div",{className:"mobile-overlay",onClick:()=>c(!1)}),l.jsx(gx,{activeSection:n,onSectionChange:v,collapsed:r,onToggleCollapse:()=>a(!r),mobileOpen:o,onMobileClose:()=>c(!1)}),l.jsxs("main",{className:`main-content ${r?"sidebar-collapsed":""}`,children:[l.jsxs("header",{className:"main-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsxs("button",{className:"mobile-menu-btn",onClick:()=>c(!o),"aria-label":"Toggle menu",children:[l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"})]}),l.jsx("h1",{className:"page-title",children:p()}),u&&l.jsx("span",{className:"version-badge",children:u})]}),l.jsxs("div",{className:"header-right",children:[l.jsx(jN,{}),l.jsx("span",{className:"user-email",children:s}),l.jsx("button",{className:"logout-btn",onClick:f,children:"Logout"})]})]}),l.jsx("div",{className:"content-area",children:S()})]})]})]})}function kN(){const t=Sn(),[e,s]=w.useState(""),[n,i]=w.useState(""),[r,a]=w.useState(""),[o,c]=w.useState({message:"",type:""}),[u,h]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/");const g=localStorage.getItem("GOOGLE_CLIENT_ID");g&&a(g);const S=()=>{const p=localStorage.getItem("GOOGLE_CLIENT_ID");p&&window.google&&(window.google.accounts.id.initialize({client_id:p,callback:d}),window.google.accounts.id.renderButton(document.getElementById("google-signin"),{theme:"outline",size:"large",width:280}))};if(window.google)S();else{const p=setInterval(()=>{window.google&&(clearInterval(p),S())},200);return()=>clearInterval(p)}},[t]);const d=async g=>{if(!(g!=null&&g.credential)){c({message:"Google sign-in failed",type:"error"});return}h(!0),c({message:"Signing in with Google...",type:"info"});try{const S=await el("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:g.credential})});f(S)}catch(S){c({message:S.message,type:"error"})}finally{h(!1)}},f=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):c({message:"Unexpected response from server",type:"error"})},v=async g=>{g.preventDefault(),h(!0),c({message:"Logging in...",type:"info"});try{const S=new URLSearchParams;S.append("username",e),S.append("password",n);const p=await el("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:S.toString()});f(p)}catch(S){c({message:S.message,type:"error"})}finally{h(!1)}},y=()=>{r&&(localStorage.setItem("GOOGLE_CLIENT_ID",r),c({message:"Saved Google Client ID. Reloading...",type:"info"}),setTimeout(()=>window.location.reload(),500))};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Welcome Back"}),l.jsx("p",{className:"muted",children:"Sign in to access your dashboard"})]}),l.jsxs("form",{onSubmit:v,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:g=>s(g.target.value),placeholder:"you@example.com",required:!0,disabled:u})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:n,onChange:g=>i(g.target.value),placeholder:"",required:!0,disabled:u})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:u,children:u?"Signing in...":"Sign In"})]}),l.jsx("div",{className:"auth-divider",children:l.jsx("span",{children:"or continue with"})}),l.jsxs("div",{className:"google-section",children:[l.jsx("div",{id:"google-signin",className:"google-placeholder",children:!localStorage.getItem("GOOGLE_CLIENT_ID")&&l.jsx("span",{className:"muted",children:"Set Google Client ID below to enable"})}),l.jsxs("div",{className:"google-config",children:[l.jsx("input",{type:"text",value:r,onChange:g=>a(g.target.value),placeholder:"Google Client ID (optional)"}),l.jsx("button",{type:"button",className:"ghost-btn",onClick:y,children:"Save"})]})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Don't have an account?"}),l.jsx(bl,{to:"/signup",children:"Create one"})]}),o.message&&l.jsx("div",{className:`auth-message ${o.type}`,children:o.message})]})})}function EN(){const t=Sn(),[e,s]=w.useState(""),[n,i]=w.useState(""),[r,a]=w.useState(""),[o,c]=w.useState(""),[u,h]=w.useState({message:"",type:""}),[d,f]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/")},[t]);const v=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):h({message:"Unexpected response from server",type:"error"})},y=async g=>{if(g.preventDefault(),r!==o){h({message:"Passwords do not match",type:"error"});return}if(r.length<6){h({message:"Password must be at least 6 characters",type:"error"});return}f(!0),h({message:"Creating account...",type:"info"});try{const S=await el("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r,display_name:e||n.split("@")[0]})});v(S)}catch(S){h({message:S.message,type:"error"})}finally{f(!1)}};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Create Account"}),l.jsx("p",{className:"muted",children:"Join Stock Servs to start trading"})]}),l.jsxs("form",{onSubmit:y,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"displayName",children:"Display Name"}),l.jsx("input",{id:"displayName",type:"text",value:e,onChange:g=>s(g.target.value),placeholder:"John Doe",disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:n,onChange:g=>i(g.target.value),placeholder:"you@example.com",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:r,onChange:g=>a(g.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:g=>c(g.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:d,children:d?"Creating Account...":"Create Account"})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Already have an account?"}),l.jsx(bl,{to:"/login",children:"Sign in"})]}),u.message&&l.jsx("div",{className:`auth-message ${u.type}`,children:u.message})]})})}const Pl=document.createElement("script");Pl.src="https://accounts.google.com/gsi/client";Pl.async=!0;Pl.defer=!0;document.head.appendChild(Pl);function _N({children:t}){return!!localStorage.getItem("access_token")?t:l.jsx($c,{to:"/login",replace:!0})}function pd({children:t}){return!!localStorage.getItem("access_token")?l.jsx($c,{to:"/",replace:!0}):t}Ta.createRoot(document.getElementById("root")).render(l.jsx(rl.StrictMode,{children:l.jsx(Wy,{children:l.jsx(Uy,{children:l.jsx(Ry,{children:l.jsxs(cy,{children:[l.jsx(Bn,{path:"/",element:l.jsx(_N,{children:l.jsx(CN,{})})}),l.jsx(Bn,{path:"/login",element:l.jsx(pd,{children:l.jsx(kN,{})})}),l.jsx(Bn,{path:"/signup",element:l.jsx(pd,{children:l.jsx(EN,{})})}),l.jsx(Bn,{path:"*",element:l.jsx($c,{to:"/",replace:!0})})]})})})})}));
