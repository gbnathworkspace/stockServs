(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();function Qp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ed={exports:{}},Qr={},Ld={exports:{}},A={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=Symbol.for("react.element"),Jp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),iv=Symbol.for("react.suspense"),nv=Symbol.for("react.memo"),rv=Symbol.for("react.lazy"),cu=Symbol.iterator;function lv(t){return t===null||typeof t!="object"?null:(t=cu&&t[cu]||t["@@iterator"],typeof t=="function"?t:null)}var Md={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pd=Object.assign,Td={};function oi(t,e,s){this.props=t,this.context=e,this.refs=Td,this.updater=s||Md}oi.prototype.isReactComponent={};oi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rd(){}Rd.prototype=oi.prototype;function zo(t,e,s){this.props=t,this.context=e,this.refs=Td,this.updater=s||Md}var $o=zo.prototype=new Rd;$o.constructor=zo;Pd($o,oi.prototype);$o.isPureReactComponent=!0;var uu=Array.isArray,zd=Object.prototype.hasOwnProperty,Io={current:null},$d={key:!0,ref:!0,__self:!0,__source:!0};function Id(t,e,s){var i,n={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)zd.call(e,i)&&!$d.hasOwnProperty(i)&&(n[i]=e[i]);var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:yn,type:t,key:r,ref:a,props:n,_owner:Io.current}}function av(t,e){return{$$typeof:yn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Do(t){return typeof t=="object"&&t!==null&&t.$$typeof===yn}function ov(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var hu=/\/+/g;function Pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ov(""+t.key):e.toString(36)}function rr(t,e,s,i,n){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yn:case Jp:a=!0}}if(a)return a=t,n=n(a),t=i===""?"."+Pl(a,0):i,uu(n)?(s="",t!=null&&(s=t.replace(hu,"$&/")+"/"),rr(n,e,s,"",function(u){return u})):n!=null&&(Do(n)&&(n=av(n,s+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(hu,"$&/")+"/")+t)),e.push(n)),1;if(a=0,i=i===""?".":i+":",uu(t))for(var o=0;o<t.length;o++){r=t[o];var c=i+Pl(r,o);a+=rr(r,e,s,c,n)}else if(c=lv(t),typeof c=="function")for(t=c.call(t),o=0;!(r=t.next()).done;)r=r.value,c=i+Pl(r,o++),a+=rr(r,e,s,c,n);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _n(t,e,s){if(t==null)return t;var i=[],n=0;return rr(t,i,"","",function(r){return e.call(s,r,n++)}),i}function cv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},lr={transition:null},uv={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:lr,ReactCurrentOwner:Io};function Dd(){throw Error("act(...) is not supported in production builds of React.")}A.Children={map:_n,forEach:function(t,e,s){_n(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return _n(t,function(){e++}),e},toArray:function(t){return _n(t,function(e){return e})||[]},only:function(t){if(!Do(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};A.Component=oi;A.Fragment=Yp;A.Profiler=Zp;A.PureComponent=zo;A.StrictMode=qp;A.Suspense=iv;A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uv;A.act=Dd;A.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Pd({},t.props),n=t.key,r=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Io.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)zd.call(e,c)&&!$d.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:yn,type:t.type,key:n,ref:r,props:i,_owner:a}};A.createContext=function(t){return t={$$typeof:tv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ev,_context:t},t.Consumer=t};A.createElement=Id;A.createFactory=function(t){var e=Id.bind(null,t);return e.type=t,e};A.createRef=function(){return{current:null}};A.forwardRef=function(t){return{$$typeof:sv,render:t}};A.isValidElement=Do;A.lazy=function(t){return{$$typeof:rv,_payload:{_status:-1,_result:t},_init:cv}};A.memo=function(t,e){return{$$typeof:nv,type:t,compare:e===void 0?null:e}};A.startTransition=function(t){var e=lr.transition;lr.transition={};try{t()}finally{lr.transition=e}};A.unstable_act=Dd;A.useCallback=function(t,e){return Te.current.useCallback(t,e)};A.useContext=function(t){return Te.current.useContext(t)};A.useDebugValue=function(){};A.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};A.useEffect=function(t,e){return Te.current.useEffect(t,e)};A.useId=function(){return Te.current.useId()};A.useImperativeHandle=function(t,e,s){return Te.current.useImperativeHandle(t,e,s)};A.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};A.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};A.useMemo=function(t,e){return Te.current.useMemo(t,e)};A.useReducer=function(t,e,s){return Te.current.useReducer(t,e,s)};A.useRef=function(t){return Te.current.useRef(t)};A.useState=function(t){return Te.current.useState(t)};A.useSyncExternalStore=function(t,e,s){return Te.current.useSyncExternalStore(t,e,s)};A.useTransition=function(){return Te.current.useTransition()};A.version="18.3.1";Ld.exports=A;var w=Ld.exports;const La=Qp(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv=w,dv=Symbol.for("react.element"),fv=Symbol.for("react.fragment"),mv=Object.prototype.hasOwnProperty,pv=hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vv={key:!0,ref:!0,__self:!0,__source:!0};function Fd(t,e,s){var i,n={},r=null,a=null;s!==void 0&&(r=""+s),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)mv.call(e,i)&&!vv.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:dv,type:t,key:r,ref:a,props:n,_owner:pv.current}}Qr.Fragment=fv;Qr.jsx=Fd;Qr.jsxs=Fd;Ed.exports=Qr;var l=Ed.exports,Ma={},Od={exports:{}},Ue={},Vd={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,D){var F=E.length;E.push(D);e:for(;0<F;){var H=F-1>>>1,Q=E[H];if(0<n(Q,D))E[H]=D,E[F]=Q,F=H;else break e}}function s(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var D=E[0],F=E.pop();if(F!==D){E[0]=F;e:for(var H=0,Q=E.length,ut=Q>>>1;H<ut;){var Ee=2*(H+1)-1,_s=E[Ee],xe=Ee+1,Es=E[xe];if(0>n(_s,F))xe<Q&&0>n(Es,_s)?(E[H]=Es,E[xe]=F,H=xe):(E[H]=_s,E[Ee]=F,H=Ee);else if(xe<Q&&0>n(Es,F))E[H]=Es,E[xe]=F,H=xe;else break e}}return D}function n(E,D){var F=E.sortIndex-D.sortIndex;return F!==0?F:E.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,m=3,x=!1,y=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(E){for(var D=s(u);D!==null;){if(D.callback===null)i(u);else if(D.startTime<=E)i(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=s(u)}}function N(E){if(g=!1,p(E),!y)if(s(c)!==null)y=!0,V(S);else{var D=s(u);D!==null&&L(N,D.startTime-E)}}function S(E,D){y=!1,g&&(g=!1,v(C),C=-1),x=!0;var F=m;try{for(p(D),d=s(c);d!==null&&(!(d.expirationTime>D)||E&&!G());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var Q=H(d.expirationTime<=D);D=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===s(c)&&i(c),p(D)}else i(c);d=s(c)}if(d!==null)var ut=!0;else{var Ee=s(u);Ee!==null&&L(N,Ee.startTime-D),ut=!1}return ut}finally{d=null,m=F,x=!1}}var _=!1,k=null,C=-1,z=5,I=-1;function G(){return!(t.unstable_now()-I<z)}function ne(){if(k!==null){var E=t.unstable_now();I=E;var D=!0;try{D=k(!0,E)}finally{D?de():(_=!1,k=null)}}else _=!1}var de;if(typeof f=="function")de=function(){f(ne)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,te=R.port2;R.port1.onmessage=ne,de=function(){te.postMessage(null)}}else de=function(){j(ne,0)};function V(E){k=E,_||(_=!0,de())}function L(E,D){C=j(function(){E(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,V(S))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(E){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var F=m;m=D;try{return E()}finally{m=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,D){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=m;m=E;try{return D()}finally{m=F}},t.unstable_scheduleCallback=function(E,D,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,E){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=F+Q,E={id:h++,callback:D,priorityLevel:E,startTime:F,expirationTime:Q,sortIndex:-1},F>H?(E.sortIndex=F,e(u,E),s(c)===null&&E===s(u)&&(g?(v(C),C=-1):g=!0,L(N,F-H))):(E.sortIndex=Q,e(c,E),y||x||(y=!0,V(S))),E},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(E){var D=m;return function(){var F=m;m=D;try{return E.apply(this,arguments)}finally{m=F}}}})(Bd);Vd.exports=Bd;var gv=Vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=w,We=gv;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ad=new Set,Xi={};function ks(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Xi[t]=e,t=0;t<e.length;t++)Ad.add(e[t])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=Object.prototype.hasOwnProperty,xv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,du={},fu={};function wv(t){return Pa.call(fu,t)?!0:Pa.call(du,t)?!1:xv.test(t)?fu[t]=!0:(du[t]=!0,!1)}function Nv(t,e,s,i){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jv(t,e,s,i){if(e===null||typeof e>"u"||Nv(t,e,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,s,i,n,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fo=/[\-:]([a-z])/g;function Oo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fo,Oo);Se[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fo,Oo);Se[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fo,Oo);Se[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vo(t,e,s,i){var n=Se.hasOwnProperty(e)?Se[e]:null;(n!==null?n.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jv(e,s,n,i)&&(s=null),i||n===null?wv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(e=n.attributeName,i=n.attributeNamespace,s===null?t.removeAttribute(e):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,i?t.setAttributeNS(i,e,s):t.setAttribute(e,s))))}var Rt=yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,En=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Bo=Symbol.for("react.strict_mode"),Ta=Symbol.for("react.profiler"),Wd=Symbol.for("react.provider"),Ud=Symbol.for("react.context"),Ao=Symbol.for("react.forward_ref"),Ra=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),Wo=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Hd=Symbol.for("react.offscreen"),mu=Symbol.iterator;function xi(t){return t===null||typeof t!="object"?null:(t=mu&&t[mu]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,Tl;function Li(t){if(Tl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Tl=e&&e[1]||""}return`
`+Tl+t}var Rl=!1;function zl(t,e){if(!t||Rl)return"";Rl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),r=i.stack.split(`
`),a=n.length-1,o=r.length-1;1<=a&&0<=o&&n[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==r[o]){var c=`
`+n[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Rl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Li(t):""}function Sv(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function $a(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ts:return"Portal";case Ta:return"Profiler";case Bo:return"StrictMode";case Ra:return"Suspense";case za:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ud:return(t.displayName||"Context")+".Consumer";case Wd:return(t._context.displayName||"Context")+".Provider";case Ao:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wo:return e=t.displayName||null,e!==null?e:$a(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return $a(t(e))}catch{}}return null}function bv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $a(e);case 8:return e===Bo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kv(t){var e=Kd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ln(t){t._valueTracker||(t._valueTracker=kv(t))}function Gd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),i="";return t&&(i=Kd(t)?t.checked?"true":"false":t.value),t=i,t!==s?(e.setValue(t),!0):!1}function wr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ia(t,e){var s=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function pu(t,e){var s=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;s=Zt(e.value!=null?e.value:s),t._wrapperState={initialChecked:i,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xd(t,e){e=e.checked,e!=null&&Vo(t,"checked",e,!1)}function Da(t,e){Xd(t,e);var s=Zt(e.value),i=e.type;if(s!=null)i==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fa(t,e.type,s):e.hasOwnProperty("defaultValue")&&Fa(t,e.type,Zt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Fa(t,e,s){(e!=="number"||wr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Mi=Array.isArray;function Ks(t,e,s,i){if(t=t.options,e){e={};for(var n=0;n<s.length;n++)e["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=e.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&i&&(t[s].defaultSelected=!0)}else{for(s=""+Zt(s),e=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,i&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Oa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(P(92));if(Mi(s)){if(1<s.length)throw Error(P(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Zt(s)}}function Qd(t,e){var s=Zt(e.value),i=Zt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),i!=null&&(t.defaultValue=""+i)}function yu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mn,Yd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,i,n){MSApp.execUnsafeLocalFunction(function(){return t(e,s,i,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mn=Mn||document.createElement("div"),Mn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cv=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(t){Cv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zi[e]=zi[t]})});function qd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||zi.hasOwnProperty(t)&&zi[t]?(""+e).trim():e+"px"}function Zd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var i=s.indexOf("--")===0,n=qd(s,e[s],i);s==="float"&&(s="cssFloat"),i?t.setProperty(s,n):t[s]=n}}var _v=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ba(t,e){if(e){if(_v[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Aa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wa=null;function Uo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ua=null,Gs=null,Xs=null;function xu(t){if(t=Nn(t)){if(typeof Ua!="function")throw Error(P(280));var e=t.stateNode;e&&(e=el(e),Ua(t.stateNode,t.type,e))}}function ef(t){Gs?Xs?Xs.push(t):Xs=[t]:Gs=t}function tf(){if(Gs){var t=Gs,e=Xs;if(Xs=Gs=null,xu(t),e)for(t=0;t<e.length;t++)xu(e[t])}}function sf(t,e){return t(e)}function nf(){}var $l=!1;function rf(t,e,s){if($l)return t(e,s);$l=!0;try{return sf(t,e,s)}finally{$l=!1,(Gs!==null||Xs!==null)&&(nf(),tf())}}function Ji(t,e){var s=t.stateNode;if(s===null)return null;var i=el(s);if(i===null)return null;s=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(P(231,e,typeof s));return s}var Ha=!1;if(Et)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){Ha=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{Ha=!1}function Ev(t,e,s,i,n,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(h){this.onError(h)}}var $i=!1,Nr=null,jr=!1,Ka=null,Lv={onError:function(t){$i=!0,Nr=t}};function Mv(t,e,s,i,n,r,a,o,c){$i=!1,Nr=null,Ev.apply(Lv,arguments)}function Pv(t,e,s,i,n,r,a,o,c){if(Mv.apply(this,arguments),$i){if($i){var u=Nr;$i=!1,Nr=null}else throw Error(P(198));jr||(jr=!0,Ka=u)}}function Cs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function lf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wu(t){if(Cs(t)!==t)throw Error(P(188))}function Tv(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(P(188));return e!==t?null:t}for(var s=t,i=e;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(i=n.return,i!==null){s=i;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return wu(n),t;if(r===i)return wu(n),e;r=r.sibling}throw Error(P(188))}if(s.return!==i.return)s=n,i=r;else{for(var a=!1,o=n.child;o;){if(o===s){a=!0,s=n,i=r;break}if(o===i){a=!0,i=n,s=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===s){a=!0,s=r,i=n;break}if(o===i){a=!0,i=r,s=n;break}o=o.sibling}if(!a)throw Error(P(189))}}if(s.alternate!==i)throw Error(P(190))}if(s.tag!==3)throw Error(P(188));return s.stateNode.current===s?t:e}function af(t){return t=Tv(t),t!==null?of(t):null}function of(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=of(t);if(e!==null)return e;t=t.sibling}return null}var cf=We.unstable_scheduleCallback,Nu=We.unstable_cancelCallback,Rv=We.unstable_shouldYield,zv=We.unstable_requestPaint,ue=We.unstable_now,$v=We.unstable_getCurrentPriorityLevel,Ho=We.unstable_ImmediatePriority,uf=We.unstable_UserBlockingPriority,Sr=We.unstable_NormalPriority,Iv=We.unstable_LowPriority,hf=We.unstable_IdlePriority,Jr=null,gt=null;function Dv(t){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Jr,t,void 0,(t.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:Vv,Fv=Math.log,Ov=Math.LN2;function Vv(t){return t>>>=0,t===0?32:31-(Fv(t)/Ov|0)|0}var Pn=64,Tn=4194304;function Pi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function br(t,e){var s=t.pendingLanes;if(s===0)return 0;var i=0,n=t.suspendedLanes,r=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~n;o!==0?i=Pi(o):(r&=a,r!==0&&(i=Pi(r)))}else a=s&~n,a!==0?i=Pi(a):r!==0&&(i=Pi(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&n)&&(n=i&-i,r=e&-e,n>=r||n===16&&(r&4194240)!==0))return e;if(i&4&&(i|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)s=31-rt(e),n=1<<s,i|=t[s],e&=~n;return i}function Bv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Av(t,e){for(var s=t.suspendedLanes,i=t.pingedLanes,n=t.expirationTimes,r=t.pendingLanes;0<r;){var a=31-rt(r),o=1<<a,c=n[a];c===-1?(!(o&s)||o&i)&&(n[a]=Bv(o,e)):c<=e&&(t.expiredLanes|=o),r&=~o}}function Ga(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function df(){var t=Pn;return Pn<<=1,!(Pn&4194240)&&(Pn=64),t}function Il(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function xn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rt(e),t[e]=s}function Wv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-rt(s),r=1<<n;e[n]=0,i[n]=-1,t[n]=-1,s&=~r}}function Ko(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var i=31-rt(s),n=1<<i;n&e|t[i]&e&&(t[i]|=e),s&=~n}}var X=0;function ff(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mf,Go,pf,vf,gf,Xa=!1,Rn=[],Ut=null,Ht=null,Kt=null,Yi=new Map,qi=new Map,Vt=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(e.pointerId)}}function Ni(t,e,s,i,n,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:s,eventSystemFlags:i,nativeEvent:r,targetContainers:[n]},e!==null&&(e=Nn(e),e!==null&&Go(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function Hv(t,e,s,i,n){switch(e){case"focusin":return Ut=Ni(Ut,t,e,s,i,n),!0;case"dragenter":return Ht=Ni(Ht,t,e,s,i,n),!0;case"mouseover":return Kt=Ni(Kt,t,e,s,i,n),!0;case"pointerover":var r=n.pointerId;return Yi.set(r,Ni(Yi.get(r)||null,t,e,s,i,n)),!0;case"gotpointercapture":return r=n.pointerId,qi.set(r,Ni(qi.get(r)||null,t,e,s,i,n)),!0}return!1}function yf(t){var e=cs(t.target);if(e!==null){var s=Cs(e);if(s!==null){if(e=s.tag,e===13){if(e=lf(s),e!==null){t.blockedOn=e,gf(t.priority,function(){pf(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ar(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Qa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var i=new s.constructor(s.type,s);Wa=i,s.target.dispatchEvent(i),Wa=null}else return e=Nn(s),e!==null&&Go(e),t.blockedOn=s,!1;e.shift()}return!0}function Su(t,e,s){ar(t)&&s.delete(e)}function Kv(){Xa=!1,Ut!==null&&ar(Ut)&&(Ut=null),Ht!==null&&ar(Ht)&&(Ht=null),Kt!==null&&ar(Kt)&&(Kt=null),Yi.forEach(Su),qi.forEach(Su)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,Xa||(Xa=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,Kv)))}function Zi(t){function e(n){return ji(n,t)}if(0<Rn.length){ji(Rn[0],t);for(var s=1;s<Rn.length;s++){var i=Rn[s];i.blockedOn===t&&(i.blockedOn=null)}}for(Ut!==null&&ji(Ut,t),Ht!==null&&ji(Ht,t),Kt!==null&&ji(Kt,t),Yi.forEach(e),qi.forEach(e),s=0;s<Vt.length;s++)i=Vt[s],i.blockedOn===t&&(i.blockedOn=null);for(;0<Vt.length&&(s=Vt[0],s.blockedOn===null);)yf(s),s.blockedOn===null&&Vt.shift()}var Qs=Rt.ReactCurrentBatchConfig,kr=!0;function Gv(t,e,s,i){var n=X,r=Qs.transition;Qs.transition=null;try{X=1,Xo(t,e,s,i)}finally{X=n,Qs.transition=r}}function Xv(t,e,s,i){var n=X,r=Qs.transition;Qs.transition=null;try{X=4,Xo(t,e,s,i)}finally{X=n,Qs.transition=r}}function Xo(t,e,s,i){if(kr){var n=Qa(t,e,s,i);if(n===null)Kl(t,e,i,Cr,s),ju(t,i);else if(Hv(n,t,e,s,i))i.stopPropagation();else if(ju(t,i),e&4&&-1<Uv.indexOf(t)){for(;n!==null;){var r=Nn(n);if(r!==null&&mf(r),r=Qa(t,e,s,i),r===null&&Kl(t,e,i,Cr,s),r===n)break;n=r}n!==null&&i.stopPropagation()}else Kl(t,e,i,null,s)}}var Cr=null;function Qa(t,e,s,i){if(Cr=null,t=Uo(i),t=cs(t),t!==null)if(e=Cs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=lf(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cr=t,null}function xf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($v()){case Ho:return 1;case uf:return 4;case Sr:case Iv:return 16;case hf:return 536870912;default:return 16}default:return 16}}var At=null,Qo=null,or=null;function wf(){if(or)return or;var t,e=Qo,s=e.length,i,n="value"in At?At.value:At.textContent,r=n.length;for(t=0;t<s&&e[t]===n[t];t++);var a=s-t;for(i=1;i<=a&&e[s-i]===n[r-i];i++);return or=n.slice(t,1<i?1-i:void 0)}function cr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zn(){return!0}function bu(){return!1}function He(t){function e(s,i,n,r,a){this._reactName=s,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?zn:bu,this.isPropagationStopped=bu,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=He(ci),wn=ae({},ci,{view:0,detail:0}),Qv=He(wn),Dl,Fl,Si,Yr=ae({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(Dl=t.screenX-Si.screenX,Fl=t.screenY-Si.screenY):Fl=Dl=0,Si=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Fl}}),ku=He(Yr),Jv=ae({},Yr,{dataTransfer:0}),Yv=He(Jv),qv=ae({},wn,{relatedTarget:0}),Ol=He(qv),Zv=ae({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),eg=He(Zv),tg=ae({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sg=He(tg),ig=ae({},ci,{data:0}),Cu=He(ig),ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ag(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lg[t])?!!e[t]:!1}function Yo(){return ag}var og=ae({},wn,{key:function(t){if(t.key){var e=ng[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yo,charCode:function(t){return t.type==="keypress"?cr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cg=He(og),ug=ae({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=He(ug),hg=ae({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yo}),dg=He(hg),fg=ae({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),mg=He(fg),pg=ae({},Yr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vg=He(pg),gg=[9,13,27,32],qo=Et&&"CompositionEvent"in window,Ii=null;Et&&"documentMode"in document&&(Ii=document.documentMode);var yg=Et&&"TextEvent"in window&&!Ii,Nf=Et&&(!qo||Ii&&8<Ii&&11>=Ii),Eu=" ",Lu=!1;function jf(t,e){switch(t){case"keyup":return gg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function xg(t,e){switch(t){case"compositionend":return Sf(e);case"keypress":return e.which!==32?null:(Lu=!0,Eu);case"textInput":return t=e.data,t===Eu&&Lu?null:t;default:return null}}function wg(t,e){if(zs)return t==="compositionend"||!qo&&jf(t,e)?(t=wf(),or=Qo=At=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nf&&e.locale!=="ko"?null:e.data;default:return null}}var Ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ng[t.type]:e==="textarea"}function bf(t,e,s,i){ef(i),e=_r(e,"onChange"),0<e.length&&(s=new Jo("onChange","change",null,s,i),t.push({event:s,listeners:e}))}var Di=null,en=null;function jg(t){$f(t,0)}function qr(t){var e=Ds(t);if(Gd(e))return t}function Sg(t,e){if(t==="change")return e}var kf=!1;if(Et){var Vl;if(Et){var Bl="oninput"in document;if(!Bl){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Bl=typeof Pu.oninput=="function"}Vl=Bl}else Vl=!1;kf=Vl&&(!document.documentMode||9<document.documentMode)}function Tu(){Di&&(Di.detachEvent("onpropertychange",Cf),en=Di=null)}function Cf(t){if(t.propertyName==="value"&&qr(en)){var e=[];bf(e,en,t,Uo(t)),rf(jg,e)}}function bg(t,e,s){t==="focusin"?(Tu(),Di=e,en=s,Di.attachEvent("onpropertychange",Cf)):t==="focusout"&&Tu()}function kg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qr(en)}function Cg(t,e){if(t==="click")return qr(e)}function _g(t,e){if(t==="input"||t==="change")return qr(e)}function Eg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:Eg;function tn(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),i=Object.keys(e);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var n=s[i];if(!Pa.call(e,n)||!at(t[n],e[n]))return!1}return!0}function Ru(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zu(t,e){var s=Ru(t);t=0;for(var i;s;){if(s.nodeType===3){if(i=t+s.textContent.length,t<=e&&i>=e)return{node:s,offset:e-t};t=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ru(s)}}function _f(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_f(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ef(){for(var t=window,e=wr();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=wr(t.document)}return e}function Zo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lg(t){var e=Ef(),s=t.focusedElem,i=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&_f(s.ownerDocument.documentElement,s)){if(i!==null&&Zo(s)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,r=Math.min(i.start,n);i=i.end===void 0?r:Math.min(i.end,n),!t.extend&&r>i&&(n=i,i=r,r=n),n=zu(s,r);var a=zu(s,i);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mg=Et&&"documentMode"in document&&11>=document.documentMode,$s=null,Ja=null,Fi=null,Ya=!1;function $u(t,e,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ya||$s==null||$s!==wr(i)||(i=$s,"selectionStart"in i&&Zo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fi&&tn(Fi,i)||(Fi=i,i=_r(Ja,"onSelect"),0<i.length&&(e=new Jo("onSelect","select",null,e,s),t.push({event:e,listeners:i}),e.target=$s)))}function $n(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Is={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionend:$n("Transition","TransitionEnd")},Al={},Lf={};Et&&(Lf=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function Zr(t){if(Al[t])return Al[t];if(!Is[t])return t;var e=Is[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Lf)return Al[t]=e[s];return t}var Mf=Zr("animationend"),Pf=Zr("animationiteration"),Tf=Zr("animationstart"),Rf=Zr("transitionend"),zf=new Map,Iu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){zf.set(t,e),ks(e,[t])}for(var Wl=0;Wl<Iu.length;Wl++){var Ul=Iu[Wl],Pg=Ul.toLowerCase(),Tg=Ul[0].toUpperCase()+Ul.slice(1);ss(Pg,"on"+Tg)}ss(Mf,"onAnimationEnd");ss(Pf,"onAnimationIteration");ss(Tf,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(Rf,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Du(t,e,s){var i=t.type||"unknown-event";t.currentTarget=s,Pv(i,e,void 0,t),t.currentTarget=null}function $f(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var i=t[s],n=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&n.isPropagationStopped())break e;Du(n,o,u),r=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&n.isPropagationStopped())break e;Du(n,o,u),r=c}}}if(jr)throw t=Ka,jr=!1,Ka=null,t}function q(t,e){var s=e[so];s===void 0&&(s=e[so]=new Set);var i=t+"__bubble";s.has(i)||(If(e,t,2,!1),s.add(i))}function Hl(t,e,s){var i=0;e&&(i|=4),If(s,t,i,e)}var In="_reactListening"+Math.random().toString(36).slice(2);function sn(t){if(!t[In]){t[In]=!0,Ad.forEach(function(s){s!=="selectionchange"&&(Rg.has(s)||Hl(s,!1,t),Hl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[In]||(e[In]=!0,Hl("selectionchange",!1,e))}}function If(t,e,s,i){switch(xf(e)){case 1:var n=Gv;break;case 4:n=Xv;break;default:n=Xo}s=n.bind(null,e,s,t),n=void 0,!Ha||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),i?n!==void 0?t.addEventListener(e,s,{capture:!0,passive:n}):t.addEventListener(e,s,!0):n!==void 0?t.addEventListener(e,s,{passive:n}):t.addEventListener(e,s,!1)}function Kl(t,e,s,i,n){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=cs(o),a===null)return;if(c=a.tag,c===5||c===6){i=r=a;continue e}o=o.parentNode}}i=i.return}rf(function(){var u=r,h=Uo(s),d=[];e:{var m=zf.get(t);if(m!==void 0){var x=Jo,y=t;switch(t){case"keypress":if(cr(s)===0)break e;case"keydown":case"keyup":x=cg;break;case"focusin":y="focus",x=Ol;break;case"focusout":y="blur",x=Ol;break;case"beforeblur":case"afterblur":x=Ol;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=dg;break;case Mf:case Pf:case Tf:x=eg;break;case Rf:x=mg;break;case"scroll":x=Qv;break;case"wheel":x=vg;break;case"copy":case"cut":case"paste":x=sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=_u}var g=(e&4)!==0,j=!g&&t==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var f=u,p;f!==null;){p=f;var N=p.stateNode;if(p.tag===5&&N!==null&&(p=N,v!==null&&(N=Ji(f,v),N!=null&&g.push(nn(f,N,p)))),j)break;f=f.return}0<g.length&&(m=new x(m,y,null,s,h),d.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&s!==Wa&&(y=s.relatedTarget||s.fromElement)&&(cs(y)||y[Lt]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(y=s.relatedTarget||s.toElement,x=u,y=y?cs(y):null,y!==null&&(j=Cs(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(g=ku,N="onMouseLeave",v="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(g=_u,N="onPointerLeave",v="onPointerEnter",f="pointer"),j=x==null?m:Ds(x),p=y==null?m:Ds(y),m=new g(N,f+"leave",x,s,h),m.target=j,m.relatedTarget=p,N=null,cs(h)===u&&(g=new g(v,f+"enter",y,s,h),g.target=p,g.relatedTarget=j,N=g),j=N,x&&y)t:{for(g=x,v=y,f=0,p=g;p;p=Ms(p))f++;for(p=0,N=v;N;N=Ms(N))p++;for(;0<f-p;)g=Ms(g),f--;for(;0<p-f;)v=Ms(v),p--;for(;f--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ms(g),v=Ms(v)}g=null}else g=null;x!==null&&Fu(d,m,x,g,!1),y!==null&&j!==null&&Fu(d,j,y,g,!0)}}e:{if(m=u?Ds(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var S=Sg;else if(Mu(m))if(kf)S=_g;else{S=kg;var _=bg}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=Cg);if(S&&(S=S(t,u))){bf(d,S,s,h);break e}_&&_(t,m,u),t==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&Fa(m,"number",m.value)}switch(_=u?Ds(u):window,t){case"focusin":(Mu(_)||_.contentEditable==="true")&&($s=_,Ja=u,Fi=null);break;case"focusout":Fi=Ja=$s=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,$u(d,s,h);break;case"selectionchange":if(Mg)break;case"keydown":case"keyup":$u(d,s,h)}var k;if(qo)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zs?jf(t,s)&&(C="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(Nf&&s.locale!=="ko"&&(zs||C!=="onCompositionStart"?C==="onCompositionEnd"&&zs&&(k=wf()):(At=h,Qo="value"in At?At.value:At.textContent,zs=!0)),_=_r(u,C),0<_.length&&(C=new Cu(C,t,null,s,h),d.push({event:C,listeners:_}),k?C.data=k:(k=Sf(s),k!==null&&(C.data=k)))),(k=yg?xg(t,s):wg(t,s))&&(u=_r(u,"onBeforeInput"),0<u.length&&(h=new Cu("onBeforeInput","beforeinput",null,s,h),d.push({event:h,listeners:u}),h.data=k))}$f(d,e)})}function nn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function _r(t,e){for(var s=e+"Capture",i=[];t!==null;){var n=t,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=Ji(t,s),r!=null&&i.unshift(nn(t,r,n)),r=Ji(t,e),r!=null&&i.push(nn(t,r,n))),t=t.return}return i}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fu(t,e,s,i,n){for(var r=e._reactName,a=[];s!==null&&s!==i;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,n?(c=Ji(s,r),c!=null&&a.unshift(nn(s,c,o))):n||(c=Ji(s,r),c!=null&&a.push(nn(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var zg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function Ou(t){return(typeof t=="string"?t:""+t).replace(zg,`
`).replace($g,"")}function Dn(t,e,s){if(e=Ou(e),Ou(t)!==e&&s)throw Error(P(425))}function Er(){}var qa=null,Za=null;function eo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var to=typeof setTimeout=="function"?setTimeout:void 0,Ig=typeof clearTimeout=="function"?clearTimeout:void 0,Vu=typeof Promise=="function"?Promise:void 0,Dg=typeof queueMicrotask=="function"?queueMicrotask:typeof Vu<"u"?function(t){return Vu.resolve(null).then(t).catch(Fg)}:to;function Fg(t){setTimeout(function(){throw t})}function Gl(t,e){var s=e,i=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(i===0){t.removeChild(n),Zi(e);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=n}while(s);Zi(e)}function Gt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),pt="__reactFiber$"+ui,rn="__reactProps$"+ui,Lt="__reactContainer$"+ui,so="__reactEvents$"+ui,Og="__reactListeners$"+ui,Vg="__reactHandles$"+ui;function cs(t){var e=t[pt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Lt]||s[pt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Bu(t);t!==null;){if(s=t[pt])return s;t=Bu(t)}return e}t=s,s=t.parentNode}return null}function Nn(t){return t=t[pt]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function el(t){return t[rn]||null}var io=[],Fs=-1;function is(t){return{current:t}}function ee(t){0>Fs||(t.current=io[Fs],io[Fs]=null,Fs--)}function J(t,e){Fs++,io[Fs]=t.current,t.current=e}var es={},_e=is(es),Ie=is(!1),ps=es;function ei(t,e){var s=t.type.contextTypes;if(!s)return es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in s)n[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function De(t){return t=t.childContextTypes,t!=null}function Lr(){ee(Ie),ee(_e)}function Au(t,e,s){if(_e.current!==es)throw Error(P(168));J(_e,e),J(Ie,s)}function Df(t,e,s){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(P(108,bv(t)||"Unknown",n));return ae({},s,i)}function Mr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,ps=_e.current,J(_e,t),J(Ie,Ie.current),!0}function Wu(t,e,s){var i=t.stateNode;if(!i)throw Error(P(169));s?(t=Df(t,e,ps),i.__reactInternalMemoizedMergedChildContext=t,ee(Ie),ee(_e),J(_e,t)):ee(Ie),J(Ie,s)}var Nt=null,tl=!1,Xl=!1;function Ff(t){Nt===null?Nt=[t]:Nt.push(t)}function Bg(t){tl=!0,Ff(t)}function ns(){if(!Xl&&Nt!==null){Xl=!0;var t=0,e=X;try{var s=Nt;for(X=1;t<s.length;t++){var i=s[t];do i=i(!0);while(i!==null)}Nt=null,tl=!1}catch(n){throw Nt!==null&&(Nt=Nt.slice(t+1)),cf(Ho,ns),n}finally{X=e,Xl=!1}}return null}var Os=[],Vs=0,Pr=null,Tr=0,Xe=[],Qe=0,vs=null,jt=1,St="";function as(t,e){Os[Vs++]=Tr,Os[Vs++]=Pr,Pr=t,Tr=e}function Of(t,e,s){Xe[Qe++]=jt,Xe[Qe++]=St,Xe[Qe++]=vs,vs=t;var i=jt;t=St;var n=32-rt(i)-1;i&=~(1<<n),s+=1;var r=32-rt(e)+n;if(30<r){var a=n-n%5;r=(i&(1<<a)-1).toString(32),i>>=a,n-=a,jt=1<<32-rt(e)+n|s<<n|i,St=r+t}else jt=1<<r|s<<n|i,St=t}function ec(t){t.return!==null&&(as(t,1),Of(t,1,0))}function tc(t){for(;t===Pr;)Pr=Os[--Vs],Os[Vs]=null,Tr=Os[--Vs],Os[Vs]=null;for(;t===vs;)vs=Xe[--Qe],Xe[Qe]=null,St=Xe[--Qe],Xe[Qe]=null,jt=Xe[--Qe],Xe[Qe]=null}var Ae=null,Be=null,se=!1,nt=null;function Vf(t,e){var s=Je(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Uu(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ae=t,Be=Gt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ae=t,Be=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=vs!==null?{id:jt,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Je(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ae=t,Be=null,!0):!1;default:return!1}}function no(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ro(t){if(se){var e=Be;if(e){var s=e;if(!Uu(t,e)){if(no(t))throw Error(P(418));e=Gt(s.nextSibling);var i=Ae;e&&Uu(t,e)?Vf(i,s):(t.flags=t.flags&-4097|2,se=!1,Ae=t)}}else{if(no(t))throw Error(P(418));t.flags=t.flags&-4097|2,se=!1,Ae=t}}}function Hu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ae=t}function Fn(t){if(t!==Ae)return!1;if(!se)return Hu(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eo(t.type,t.memoizedProps)),e&&(e=Be)){if(no(t))throw Bf(),Error(P(418));for(;e;)Vf(t,e),e=Gt(e.nextSibling)}if(Hu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Be=Gt(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Be=null}}else Be=Ae?Gt(t.stateNode.nextSibling):null;return!0}function Bf(){for(var t=Be;t;)t=Gt(t.nextSibling)}function ti(){Be=Ae=null,se=!1}function sc(t){nt===null?nt=[t]:nt.push(t)}var Ag=Rt.ReactCurrentBatchConfig;function bi(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(P(309));var i=s.stateNode}if(!i)throw Error(P(147,t));var n=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=n.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof t!="string")throw Error(P(284));if(!s._owner)throw Error(P(290,t))}return t}function On(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ku(t){var e=t._init;return e(t._payload)}function Af(t){function e(v,f){if(t){var p=v.deletions;p===null?(v.deletions=[f],v.flags|=16):p.push(f)}}function s(v,f){if(!t)return null;for(;f!==null;)e(v,f),f=f.sibling;return null}function i(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function n(v,f){return v=Yt(v,f),v.index=0,v.sibling=null,v}function r(v,f,p){return v.index=p,t?(p=v.alternate,p!==null?(p=p.index,p<f?(v.flags|=2,f):p):(v.flags|=2,f)):(v.flags|=1048576,f)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,f,p,N){return f===null||f.tag!==6?(f=ta(p,v.mode,N),f.return=v,f):(f=n(f,p),f.return=v,f)}function c(v,f,p,N){var S=p.type;return S===Rs?h(v,f,p.props.children,N,p.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ft&&Ku(S)===f.type)?(N=n(f,p.props),N.ref=bi(v,f,p),N.return=v,N):(N=vr(p.type,p.key,p.props,null,v.mode,N),N.ref=bi(v,f,p),N.return=v,N)}function u(v,f,p,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=sa(p,v.mode,N),f.return=v,f):(f=n(f,p.children||[]),f.return=v,f)}function h(v,f,p,N,S){return f===null||f.tag!==7?(f=fs(p,v.mode,N,S),f.return=v,f):(f=n(f,p),f.return=v,f)}function d(v,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ta(""+f,v.mode,p),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case En:return p=vr(f.type,f.key,f.props,null,v.mode,p),p.ref=bi(v,null,f),p.return=v,p;case Ts:return f=sa(f,v.mode,p),f.return=v,f;case Ft:var N=f._init;return d(v,N(f._payload),p)}if(Mi(f)||xi(f))return f=fs(f,v.mode,p,null),f.return=v,f;On(v,f)}return null}function m(v,f,p,N){var S=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:o(v,f,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case En:return p.key===S?c(v,f,p,N):null;case Ts:return p.key===S?u(v,f,p,N):null;case Ft:return S=p._init,m(v,f,S(p._payload),N)}if(Mi(p)||xi(p))return S!==null?null:h(v,f,p,N,null);On(v,p)}return null}function x(v,f,p,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(p)||null,o(f,v,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case En:return v=v.get(N.key===null?p:N.key)||null,c(f,v,N,S);case Ts:return v=v.get(N.key===null?p:N.key)||null,u(f,v,N,S);case Ft:var _=N._init;return x(v,f,p,_(N._payload),S)}if(Mi(N)||xi(N))return v=v.get(p)||null,h(f,v,N,S,null);On(f,N)}return null}function y(v,f,p,N){for(var S=null,_=null,k=f,C=f=0,z=null;k!==null&&C<p.length;C++){k.index>C?(z=k,k=null):z=k.sibling;var I=m(v,k,p[C],N);if(I===null){k===null&&(k=z);break}t&&k&&I.alternate===null&&e(v,k),f=r(I,f,C),_===null?S=I:_.sibling=I,_=I,k=z}if(C===p.length)return s(v,k),se&&as(v,C),S;if(k===null){for(;C<p.length;C++)k=d(v,p[C],N),k!==null&&(f=r(k,f,C),_===null?S=k:_.sibling=k,_=k);return se&&as(v,C),S}for(k=i(v,k);C<p.length;C++)z=x(k,v,C,p[C],N),z!==null&&(t&&z.alternate!==null&&k.delete(z.key===null?C:z.key),f=r(z,f,C),_===null?S=z:_.sibling=z,_=z);return t&&k.forEach(function(G){return e(v,G)}),se&&as(v,C),S}function g(v,f,p,N){var S=xi(p);if(typeof S!="function")throw Error(P(150));if(p=S.call(p),p==null)throw Error(P(151));for(var _=S=null,k=f,C=f=0,z=null,I=p.next();k!==null&&!I.done;C++,I=p.next()){k.index>C?(z=k,k=null):z=k.sibling;var G=m(v,k,I.value,N);if(G===null){k===null&&(k=z);break}t&&k&&G.alternate===null&&e(v,k),f=r(G,f,C),_===null?S=G:_.sibling=G,_=G,k=z}if(I.done)return s(v,k),se&&as(v,C),S;if(k===null){for(;!I.done;C++,I=p.next())I=d(v,I.value,N),I!==null&&(f=r(I,f,C),_===null?S=I:_.sibling=I,_=I);return se&&as(v,C),S}for(k=i(v,k);!I.done;C++,I=p.next())I=x(k,v,C,I.value,N),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?C:I.key),f=r(I,f,C),_===null?S=I:_.sibling=I,_=I);return t&&k.forEach(function(ne){return e(v,ne)}),se&&as(v,C),S}function j(v,f,p,N){if(typeof p=="object"&&p!==null&&p.type===Rs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case En:e:{for(var S=p.key,_=f;_!==null;){if(_.key===S){if(S=p.type,S===Rs){if(_.tag===7){s(v,_.sibling),f=n(_,p.props.children),f.return=v,v=f;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ft&&Ku(S)===_.type){s(v,_.sibling),f=n(_,p.props),f.ref=bi(v,_,p),f.return=v,v=f;break e}s(v,_);break}else e(v,_);_=_.sibling}p.type===Rs?(f=fs(p.props.children,v.mode,N,p.key),f.return=v,v=f):(N=vr(p.type,p.key,p.props,null,v.mode,N),N.ref=bi(v,f,p),N.return=v,v=N)}return a(v);case Ts:e:{for(_=p.key;f!==null;){if(f.key===_)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){s(v,f.sibling),f=n(f,p.children||[]),f.return=v,v=f;break e}else{s(v,f);break}else e(v,f);f=f.sibling}f=sa(p,v.mode,N),f.return=v,v=f}return a(v);case Ft:return _=p._init,j(v,f,_(p._payload),N)}if(Mi(p))return y(v,f,p,N);if(xi(p))return g(v,f,p,N);On(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(s(v,f.sibling),f=n(f,p),f.return=v,v=f):(s(v,f),f=ta(p,v.mode,N),f.return=v,v=f),a(v)):s(v,f)}return j}var si=Af(!0),Wf=Af(!1),Rr=is(null),zr=null,Bs=null,ic=null;function nc(){ic=Bs=zr=null}function rc(t){var e=Rr.current;ee(Rr),t._currentValue=e}function lo(t,e,s){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===s)break;t=t.return}}function Js(t,e){zr=t,ic=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(zr===null)throw Error(P(308));Bs=t,zr.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var us=null;function lc(t){us===null?us=[t]:us.push(t)}function Uf(t,e,s,i){var n=e.interleaved;return n===null?(s.next=s,lc(e)):(s.next=n.next,n.next=s),e.interleaved=s,Mt(t,i)}function Mt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ot=!1;function ac(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ct(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xt(t,e,s){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,K&2){var n=i.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),i.pending=e,Mt(t,s)}return n=i.interleaved,n===null?(e.next=e,lc(i)):(e.next=n.next,n.next=e),i.interleaved=e,Mt(t,s)}function ur(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Ko(t,s)}}function Gu(t,e){var s=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};r===null?n=r=a:r=r.next=a,s=s.next}while(s!==null);r===null?n=r=e:r=r.next=e}else n=r=e;s={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function $r(t,e,s,i){var n=t.updateQueue;Ot=!1;var r=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=n.baseState;a=0,h=u=c=null,o=r;do{var m=o.lane,x=o.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,g=o;switch(m=e,x=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(x,d,m);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(x,d,m):y,m==null)break e;d=ae({},d,m);break e;case 2:Ot=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=n.effects,m===null?n.effects=[o]:m.push(o))}else x={eventTime:x,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=x,c=d):h=h.next=x,a|=m;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;m=o,o=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else r===null&&(n.shared.lanes=0);ys|=a,t.lanes=a,t.memoizedState=d}}function Xu(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],n=i.callback;if(n!==null){if(i.callback=null,i=s,typeof n!="function")throw Error(P(191,n));n.call(i)}}}var jn={},yt=is(jn),ln=is(jn),an=is(jn);function hs(t){if(t===jn)throw Error(P(174));return t}function oc(t,e){switch(J(an,e),J(ln,t),J(yt,jn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Va(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Va(e,t)}ee(yt),J(yt,e)}function ii(){ee(yt),ee(ln),ee(an)}function Kf(t){hs(an.current);var e=hs(yt.current),s=Va(e,t.type);e!==s&&(J(ln,t),J(yt,s))}function cc(t){ln.current===t&&(ee(yt),ee(ln))}var re=is(0);function Ir(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ql=[];function uc(){for(var t=0;t<Ql.length;t++)Ql[t]._workInProgressVersionPrimary=null;Ql.length=0}var hr=Rt.ReactCurrentDispatcher,Jl=Rt.ReactCurrentBatchConfig,gs=0,le=null,me=null,ge=null,Dr=!1,Oi=!1,on=0,Wg=0;function be(){throw Error(P(321))}function hc(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!at(t[s],e[s]))return!1;return!0}function dc(t,e,s,i,n,r){if(gs=r,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hr.current=t===null||t.memoizedState===null?Gg:Xg,t=s(i,n),Oi){r=0;do{if(Oi=!1,on=0,25<=r)throw Error(P(301));r+=1,ge=me=null,e.updateQueue=null,hr.current=Qg,t=s(i,n)}while(Oi)}if(hr.current=Fr,e=me!==null&&me.next!==null,gs=0,ge=me=le=null,Dr=!1,e)throw Error(P(300));return t}function fc(){var t=on!==0;return on=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?le.memoizedState=ge=t:ge=ge.next=t,ge}function Ze(){if(me===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=ge===null?le.memoizedState:ge.next;if(e!==null)ge=e,me=t;else{if(t===null)throw Error(P(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ge===null?le.memoizedState=ge=t:ge=ge.next=t}return ge}function cn(t,e){return typeof e=="function"?e(t):e}function Yl(t){var e=Ze(),s=e.queue;if(s===null)throw Error(P(311));s.lastRenderedReducer=t;var i=me,n=i.baseQueue,r=s.pending;if(r!==null){if(n!==null){var a=n.next;n.next=r.next,r.next=a}i.baseQueue=n=r,s.pending=null}if(n!==null){r=n.next,i=i.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((gs&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=i):c=c.next=d,le.lanes|=h,ys|=h}u=u.next}while(u!==null&&u!==r);c===null?a=i:c.next=o,at(i,e.memoizedState)||($e=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,s.lastRenderedState=i}if(t=s.interleaved,t!==null){n=t;do r=n.lane,le.lanes|=r,ys|=r,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function ql(t){var e=Ze(),s=e.queue;if(s===null)throw Error(P(311));s.lastRenderedReducer=t;var i=s.dispatch,n=s.pending,r=e.memoizedState;if(n!==null){s.pending=null;var a=n=n.next;do r=t(r,a.action),a=a.next;while(a!==n);at(r,e.memoizedState)||($e=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),s.lastRenderedState=r}return[r,i]}function Gf(){}function Xf(t,e){var s=le,i=Ze(),n=e(),r=!at(i.memoizedState,n);if(r&&(i.memoizedState=n,$e=!0),i=i.queue,mc(Yf.bind(null,s,i,t),[t]),i.getSnapshot!==e||r||ge!==null&&ge.memoizedState.tag&1){if(s.flags|=2048,un(9,Jf.bind(null,s,i,n,e),void 0,null),ye===null)throw Error(P(349));gs&30||Qf(s,e,n)}return n}function Qf(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Jf(t,e,s,i){e.value=s,e.getSnapshot=i,qf(e)&&Zf(t)}function Yf(t,e,s){return s(function(){qf(e)&&Zf(t)})}function qf(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!at(t,s)}catch{return!0}}function Zf(t){var e=Mt(t,1);e!==null&&lt(e,t,1,-1)}function Qu(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:t},e.queue=t,t=t.dispatch=Kg.bind(null,le,t),[e.memoizedState,t]}function un(t,e,s,i){return t={tag:t,create:e,destroy:s,deps:i,next:null},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(i=s.next,s.next=t,t.next=i,e.lastEffect=t)),t}function em(){return Ze().memoizedState}function dr(t,e,s,i){var n=mt();le.flags|=t,n.memoizedState=un(1|e,s,void 0,i===void 0?null:i)}function sl(t,e,s,i){var n=Ze();i=i===void 0?null:i;var r=void 0;if(me!==null){var a=me.memoizedState;if(r=a.destroy,i!==null&&hc(i,a.deps)){n.memoizedState=un(e,s,r,i);return}}le.flags|=t,n.memoizedState=un(1|e,s,r,i)}function Ju(t,e){return dr(8390656,8,t,e)}function mc(t,e){return sl(2048,8,t,e)}function tm(t,e){return sl(4,2,t,e)}function sm(t,e){return sl(4,4,t,e)}function im(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nm(t,e,s){return s=s!=null?s.concat([t]):null,sl(4,4,im.bind(null,e,t),s)}function pc(){}function rm(t,e){var s=Ze();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&hc(e,i[1])?i[0]:(s.memoizedState=[t,e],t)}function lm(t,e){var s=Ze();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&hc(e,i[1])?i[0]:(t=t(),s.memoizedState=[t,e],t)}function am(t,e,s){return gs&21?(at(s,e)||(s=df(),le.lanes|=s,ys|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=s)}function Ug(t,e){var s=X;X=s!==0&&4>s?s:4,t(!0);var i=Jl.transition;Jl.transition={};try{t(!1),e()}finally{X=s,Jl.transition=i}}function om(){return Ze().memoizedState}function Hg(t,e,s){var i=Jt(t);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},cm(t))um(e,s);else if(s=Uf(t,e,s,i),s!==null){var n=Me();lt(s,t,i,n),hm(s,e,i)}}function Kg(t,e,s){var i=Jt(t),n={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(cm(t))um(e,n);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,s);if(n.hasEagerState=!0,n.eagerState=o,at(o,a)){var c=e.interleaved;c===null?(n.next=n,lc(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}s=Uf(t,e,n,i),s!==null&&(n=Me(),lt(s,t,i,n),hm(s,e,i))}}function cm(t){var e=t.alternate;return t===le||e!==null&&e===le}function um(t,e){Oi=Dr=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function hm(t,e,s){if(s&4194240){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Ko(t,s)}}var Fr={readContext:qe,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},Gg={readContext:qe,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:Ju,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,dr(4194308,4,im.bind(null,e,t),s)},useLayoutEffect:function(t,e){return dr(4194308,4,t,e)},useInsertionEffect:function(t,e){return dr(4,2,t,e)},useMemo:function(t,e){var s=mt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var i=mt();return e=s!==void 0?s(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Hg.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:Qu,useDebugValue:pc,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=Qu(!1),e=t[0];return t=Ug.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var i=le,n=mt();if(se){if(s===void 0)throw Error(P(407));s=s()}else{if(s=e(),ye===null)throw Error(P(349));gs&30||Qf(i,e,s)}n.memoizedState=s;var r={value:s,getSnapshot:e};return n.queue=r,Ju(Yf.bind(null,i,r,t),[t]),i.flags|=2048,un(9,Jf.bind(null,i,r,s,e),void 0,null),s},useId:function(){var t=mt(),e=ye.identifierPrefix;if(se){var s=St,i=jt;s=(i&~(1<<32-rt(i)-1)).toString(32)+s,e=":"+e+"R"+s,s=on++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Wg++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xg={readContext:qe,useCallback:rm,useContext:qe,useEffect:mc,useImperativeHandle:nm,useInsertionEffect:tm,useLayoutEffect:sm,useMemo:lm,useReducer:Yl,useRef:em,useState:function(){return Yl(cn)},useDebugValue:pc,useDeferredValue:function(t){var e=Ze();return am(e,me.memoizedState,t)},useTransition:function(){var t=Yl(cn)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:om,unstable_isNewReconciler:!1},Qg={readContext:qe,useCallback:rm,useContext:qe,useEffect:mc,useImperativeHandle:nm,useInsertionEffect:tm,useLayoutEffect:sm,useMemo:lm,useReducer:ql,useRef:em,useState:function(){return ql(cn)},useDebugValue:pc,useDeferredValue:function(t){var e=Ze();return me===null?e.memoizedState=t:am(e,me.memoizedState,t)},useTransition:function(){var t=ql(cn)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:om,unstable_isNewReconciler:!1};function st(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function ao(t,e,s,i){e=t.memoizedState,s=s(i,e),s=s==null?e:ae({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var il={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var i=Me(),n=Jt(t),r=Ct(i,n);r.payload=e,s!=null&&(r.callback=s),e=Xt(t,r,n),e!==null&&(lt(e,t,n,i),ur(e,t,n))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var i=Me(),n=Jt(t),r=Ct(i,n);r.tag=1,r.payload=e,s!=null&&(r.callback=s),e=Xt(t,r,n),e!==null&&(lt(e,t,n,i),ur(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Me(),i=Jt(t),n=Ct(s,i);n.tag=2,e!=null&&(n.callback=e),e=Xt(t,n,i),e!==null&&(lt(e,t,i,s),ur(e,t,i))}};function Yu(t,e,s,i,n,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!tn(s,i)||!tn(n,r):!0}function dm(t,e,s){var i=!1,n=es,r=e.contextType;return typeof r=="object"&&r!==null?r=qe(r):(n=De(e)?ps:_e.current,i=e.contextTypes,r=(i=i!=null)?ei(t,n):es),e=new e(s,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=il,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),e}function qu(t,e,s,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,i),e.state!==t&&il.enqueueReplaceState(e,e.state,null)}function oo(t,e,s,i){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},ac(t);var r=e.contextType;typeof r=="object"&&r!==null?n.context=qe(r):(r=De(e)?ps:_e.current,n.context=ei(t,r)),n.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(ao(t,e,r,s),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&il.enqueueReplaceState(n,n.state,null),$r(t,s,n,i),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var s="",i=e;do s+=Sv(i),i=i.return;while(i);var n=s}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:n,digest:null}}function Zl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function co(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Jg=typeof WeakMap=="function"?WeakMap:Map;function fm(t,e,s){s=Ct(-1,s),s.tag=3,s.payload={element:null};var i=e.value;return s.callback=function(){Vr||(Vr=!0,wo=i),co(t,e)},s}function mm(t,e,s){s=Ct(-1,s),s.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var n=e.value;s.payload=function(){return i(n)},s.callback=function(){co(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(s.callback=function(){co(t,e),typeof i!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Zu(t,e,s){var i=t.pingCache;if(i===null){i=t.pingCache=new Jg;var n=new Set;i.set(e,n)}else n=i.get(e),n===void 0&&(n=new Set,i.set(e,n));n.has(s)||(n.add(s),t=uy.bind(null,t,e,s),e.then(t,t))}function eh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function th(t,e,s,i,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Ct(-1,1),e.tag=2,Xt(s,e,1))),s.lanes|=1),t)}var Yg=Rt.ReactCurrentOwner,$e=!1;function Le(t,e,s,i){e.child=t===null?Wf(e,null,s,i):si(e,t.child,s,i)}function sh(t,e,s,i,n){s=s.render;var r=e.ref;return Js(e,n),i=dc(t,e,s,i,r,n),s=fc(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Pt(t,e,n)):(se&&s&&ec(e),e.flags|=1,Le(t,e,i,n),e.child)}function ih(t,e,s,i,n){if(t===null){var r=s.type;return typeof r=="function"&&!Sc(r)&&r.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=r,pm(t,e,r,i,n)):(t=vr(s.type,null,i,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&n)){var a=r.memoizedProps;if(s=s.compare,s=s!==null?s:tn,s(a,i)&&t.ref===e.ref)return Pt(t,e,n)}return e.flags|=1,t=Yt(r,i),t.ref=e.ref,t.return=e,e.child=t}function pm(t,e,s,i,n){if(t!==null){var r=t.memoizedProps;if(tn(r,i)&&t.ref===e.ref)if($e=!1,e.pendingProps=i=r,(t.lanes&n)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Pt(t,e,n)}return uo(t,e,s,i,n)}function vm(t,e,s){var i=e.pendingProps,n=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Ws,Ve),Ve|=s;else{if(!(s&1073741824))return t=r!==null?r.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Ws,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:s,J(Ws,Ve),Ve|=i}else r!==null?(i=r.baseLanes|s,e.memoizedState=null):i=s,J(Ws,Ve),Ve|=i;return Le(t,e,n,s),e.child}function gm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function uo(t,e,s,i,n){var r=De(s)?ps:_e.current;return r=ei(e,r),Js(e,n),s=dc(t,e,s,i,r,n),i=fc(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Pt(t,e,n)):(se&&i&&ec(e),e.flags|=1,Le(t,e,s,n),e.child)}function nh(t,e,s,i,n){if(De(s)){var r=!0;Mr(e)}else r=!1;if(Js(e,n),e.stateNode===null)fr(t,e),dm(e,s,i),oo(e,s,i,n),i=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=De(s)?ps:_e.current,u=ei(e,u));var h=s.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&qu(e,a,i,u),Ot=!1;var m=e.memoizedState;a.state=m,$r(e,i,a,n),c=e.memoizedState,o!==i||m!==c||Ie.current||Ot?(typeof h=="function"&&(ao(e,s,h,i),c=e.memoizedState),(o=Ot||Yu(e,s,o,i,m,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Hf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:st(e.type,o),a.props=u,d=e.pendingProps,m=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=qe(c):(c=De(s)?ps:_e.current,c=ei(e,c));var x=s.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||m!==c)&&qu(e,a,i,c),Ot=!1,m=e.memoizedState,a.state=m,$r(e,i,a,n);var y=e.memoizedState;o!==d||m!==y||Ie.current||Ot?(typeof x=="function"&&(ao(e,s,x,i),y=e.memoizedState),(u=Ot||Yu(e,s,u,i,m,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return ho(t,e,s,i,r,n)}function ho(t,e,s,i,n,r){gm(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return n&&Wu(e,s,!1),Pt(t,e,r);i=e.stateNode,Yg.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=si(e,t.child,null,r),e.child=si(e,null,o,r)):Le(t,e,o,r),e.memoizedState=i.state,n&&Wu(e,s,!0),e.child}function ym(t){var e=t.stateNode;e.pendingContext?Au(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Au(t,e.context,!1),oc(t,e.containerInfo)}function rh(t,e,s,i,n){return ti(),sc(n),e.flags|=256,Le(t,e,s,i),e.child}var fo={dehydrated:null,treeContext:null,retryLane:0};function mo(t){return{baseLanes:t,cachePool:null,transitions:null}}function xm(t,e,s){var i=e.pendingProps,n=re.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),J(re,n&1),t===null)return ro(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=ll(a,i,0,null),t=fs(t,i,s,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=mo(s),e.memoizedState=fo,t):vc(e,a));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return qg(t,e,a,i,o,n,s);if(r){r=i.fallback,a=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==n?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Yt(n,c),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?r=Yt(o,r):(r=fs(r,a,s,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=t.child.memoizedState,a=a===null?mo(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=t.childLanes&~s,e.memoizedState=fo,i}return r=t.child,t=r.sibling,i=Yt(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=s),i.return=e,i.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=i,e.memoizedState=null,i}function vc(t,e){return e=ll({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vn(t,e,s,i){return i!==null&&sc(i),si(e,t.child,null,s),t=vc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qg(t,e,s,i,n,r,a){if(s)return e.flags&256?(e.flags&=-257,i=Zl(Error(P(422))),Vn(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,n=e.mode,i=ll({mode:"visible",children:i.children},n,0,null),r=fs(r,n,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&si(e,t.child,null,a),e.child.memoizedState=mo(a),e.memoizedState=fo,r);if(!(e.mode&1))return Vn(t,e,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(P(419)),i=Zl(r,i,void 0),Vn(t,e,a,i)}if(o=(a&t.childLanes)!==0,$e||o){if(i=ye,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,Mt(t,n),lt(i,t,n,-1))}return jc(),i=Zl(Error(P(421))),Vn(t,e,a,i)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=hy.bind(null,t),n._reactRetry=e,null):(t=r.treeContext,Be=Gt(n.nextSibling),Ae=e,se=!0,nt=null,t!==null&&(Xe[Qe++]=jt,Xe[Qe++]=St,Xe[Qe++]=vs,jt=t.id,St=t.overflow,vs=e),e=vc(e,i.children),e.flags|=4096,e)}function lh(t,e,s){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),lo(t.return,e,s)}function ea(t,e,s,i,n){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:n}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=s,r.tailMode=n)}function wm(t,e,s){var i=e.pendingProps,n=i.revealOrder,r=i.tail;if(Le(t,e,i.children,s),i=re.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lh(t,s,e);else if(t.tag===19)lh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(J(re,i),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(s=e.child,n=null;s!==null;)t=s.alternate,t!==null&&Ir(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=e.child,e.child=null):(n=s.sibling,s.sibling=null),ea(e,!1,n,s,r);break;case"backwards":for(s=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Ir(t)===null){e.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}ea(e,!0,s,null,r);break;case"together":ea(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,s=Yt(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Yt(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Zg(t,e,s){switch(e.tag){case 3:ym(e),ti();break;case 5:Kf(e);break;case 1:De(e.type)&&Mr(e);break;case 4:oc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,n=e.memoizedProps.value;J(Rr,i._currentValue),i._currentValue=n;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(J(re,re.current&1),e.flags|=128,null):s&e.child.childLanes?xm(t,e,s):(J(re,re.current&1),t=Pt(t,e,s),t!==null?t.sibling:null);J(re,re.current&1);break;case 19:if(i=(s&e.childLanes)!==0,t.flags&128){if(i)return wm(t,e,s);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),J(re,re.current),i)break;return null;case 22:case 23:return e.lanes=0,vm(t,e,s)}return Pt(t,e,s)}var Nm,po,jm,Sm;Nm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};po=function(){};jm=function(t,e,s,i){var n=t.memoizedProps;if(n!==i){t=e.stateNode,hs(yt.current);var r=null;switch(s){case"input":n=Ia(t,n),i=Ia(t,i),r=[];break;case"select":n=ae({},n,{value:void 0}),i=ae({},i,{value:void 0}),r=[];break;case"textarea":n=Oa(t,n),i=Oa(t,i),r=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Er)}Ba(s,i);var a;s=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xi.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(o=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(r||(r=[]),r.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&q("scroll",t),r||o===c||(r=[])):(r=r||[]).push(u,c))}s&&(r=r||[]).push("style",s);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Sm=function(t,e,s,i){s!==i&&(e.flags|=4)};function ki(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,i=0;if(e)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=i,t.childLanes=s,e}function ey(t,e,s){var i=e.pendingProps;switch(tc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return De(e.type)&&Lr(),ke(e),null;case 3:return i=e.stateNode,ii(),ee(Ie),ee(_e),uc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fn(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nt!==null&&(So(nt),nt=null))),po(t,e),ke(e),null;case 5:cc(e);var n=hs(an.current);if(s=e.type,t!==null&&e.stateNode!=null)jm(t,e,s,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(P(166));return ke(e),null}if(t=hs(yt.current),Fn(e)){i=e.stateNode,s=e.type;var r=e.memoizedProps;switch(i[pt]=e,i[rn]=r,t=(e.mode&1)!==0,s){case"dialog":q("cancel",i),q("close",i);break;case"iframe":case"object":case"embed":q("load",i);break;case"video":case"audio":for(n=0;n<Ti.length;n++)q(Ti[n],i);break;case"source":q("error",i);break;case"img":case"image":case"link":q("error",i),q("load",i);break;case"details":q("toggle",i);break;case"input":pu(i,r),q("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},q("invalid",i);break;case"textarea":gu(i,r),q("invalid",i)}Ba(s,r),n=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&Dn(i.textContent,o,t),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Dn(i.textContent,o,t),n=["children",""+o]):Xi.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&q("scroll",i)}switch(s){case"input":Ln(i),vu(i,r,!0);break;case"textarea":Ln(i),yu(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Er)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(s,{is:i.is}):(t=a.createElement(s),s==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,s),t[pt]=e,t[rn]=i,Nm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Aa(s,i),s){case"dialog":q("cancel",t),q("close",t),n=i;break;case"iframe":case"object":case"embed":q("load",t),n=i;break;case"video":case"audio":for(n=0;n<Ti.length;n++)q(Ti[n],t);n=i;break;case"source":q("error",t),n=i;break;case"img":case"image":case"link":q("error",t),q("load",t),n=i;break;case"details":q("toggle",t),n=i;break;case"input":pu(t,i),n=Ia(t,i),q("invalid",t);break;case"option":n=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},n=ae({},i,{value:void 0}),q("invalid",t);break;case"textarea":gu(t,i),n=Oa(t,i),q("invalid",t);break;default:n=i}Ba(s,n),o=n;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?Zd(t,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yd(t,c)):r==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Qi(t,c):typeof c=="number"&&Qi(t,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Xi.hasOwnProperty(r)?c!=null&&r==="onScroll"&&q("scroll",t):c!=null&&Vo(t,r,c,a))}switch(s){case"input":Ln(t),vu(t,i,!1);break;case"textarea":Ln(t),yu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Zt(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?Ks(t,!!i.multiple,r,!1):i.defaultValue!=null&&Ks(t,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Er)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)Sm(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(P(166));if(s=hs(an.current),hs(yt.current),Fn(e)){if(i=e.stateNode,s=e.memoizedProps,i[pt]=e,(r=i.nodeValue!==s)&&(t=Ae,t!==null))switch(t.tag){case 3:Dn(i.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dn(i.nodeValue,s,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[pt]=e,e.stateNode=i}return ke(e),null;case 13:if(ee(re),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&Be!==null&&e.mode&1&&!(e.flags&128))Bf(),ti(),e.flags|=98560,r=!1;else if(r=Fn(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(P(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[pt]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),r=!1}else nt!==null&&(So(nt),nt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?pe===0&&(pe=3):jc())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return ii(),po(t,e),t===null&&sn(e.stateNode.containerInfo),ke(e),null;case 10:return rc(e.type._context),ke(e),null;case 17:return De(e.type)&&Lr(),ke(e),null;case 19:if(ee(re),r=e.memoizedState,r===null)return ke(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)ki(r,!1);else{if(pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ir(t),a!==null){for(e.flags|=128,ki(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=s,s=e.child;s!==null;)r=s,t=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,t=a.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return J(re,re.current&1|2),e.child}t=t.sibling}r.tail!==null&&ue()>ri&&(e.flags|=128,i=!0,ki(r,!1),e.lanes=4194304)}else{if(!i)if(t=Ir(a),t!==null){if(e.flags|=128,i=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),ki(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!se)return ke(e),null}else 2*ue()-r.renderingStartTime>ri&&s!==1073741824&&(e.flags|=128,i=!0,ki(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(s=r.last,s!==null?s.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ue(),e.sibling=null,s=re.current,J(re,i?s&1|2:s&1),e):(ke(e),null);case 22:case 23:return Nc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ve&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function ty(t,e){switch(tc(e),e.tag){case 1:return De(e.type)&&Lr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),ee(Ie),ee(_e),uc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cc(e),null;case 13:if(ee(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ee(re),null;case 4:return ii(),null;case 10:return rc(e.type._context),null;case 22:case 23:return Nc(),null;case 24:return null;default:return null}}var Bn=!1,Ce=!1,sy=typeof WeakSet=="function"?WeakSet:Set,$=null;function As(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){oe(t,e,i)}else s.current=null}function vo(t,e,s){try{s()}catch(i){oe(t,e,i)}}var ah=!1;function iy(t,e){if(qa=kr,t=Ef(),Zo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var n=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=t,m=null;t:for(;;){for(var x;d!==s||n!==0&&d.nodeType!==3||(o=a+n),d!==r||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(x=d.firstChild)!==null;)m=d,d=x;for(;;){if(d===t)break t;if(m===s&&++u===n&&(o=a),m===r&&++h===i&&(c=a),(x=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=x}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Za={focusedElem:t,selectionRange:s},kr=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,j=y.memoizedState,v=e.stateNode,f=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:st(e.type,g),j);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(N){oe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=ah,ah=!1,y}function Vi(t,e,s){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,r!==void 0&&vo(e,s,r)}n=n.next}while(n!==i)}}function nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var i=s.create;s.destroy=i()}s=s.next}while(s!==e)}}function go(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function bm(t){var e=t.alternate;e!==null&&(t.alternate=null,bm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[rn],delete e[so],delete e[Og],delete e[Vg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function km(t){return t.tag===5||t.tag===3||t.tag===4}function oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||km(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yo(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Er));else if(i!==4&&(t=t.child,t!==null))for(yo(t,e,s),t=t.sibling;t!==null;)yo(t,e,s),t=t.sibling}function xo(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(xo(t,e,s),t=t.sibling;t!==null;)xo(t,e,s),t=t.sibling}var we=null,it=!1;function $t(t,e,s){for(s=s.child;s!==null;)Cm(t,e,s),s=s.sibling}function Cm(t,e,s){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Jr,s)}catch{}switch(s.tag){case 5:Ce||As(s,e);case 6:var i=we,n=it;we=null,$t(t,e,s),we=i,it=n,we!==null&&(it?(t=we,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):we.removeChild(s.stateNode));break;case 18:we!==null&&(it?(t=we,s=s.stateNode,t.nodeType===8?Gl(t.parentNode,s):t.nodeType===1&&Gl(t,s),Zi(t)):Gl(we,s.stateNode));break;case 4:i=we,n=it,we=s.stateNode.containerInfo,it=!0,$t(t,e,s),we=i,it=n;break;case 0:case 11:case 14:case 15:if(!Ce&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var r=n,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&vo(s,e,a),n=n.next}while(n!==i)}$t(t,e,s);break;case 1:if(!Ce&&(As(s,e),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(o){oe(s,e,o)}$t(t,e,s);break;case 21:$t(t,e,s);break;case 22:s.mode&1?(Ce=(i=Ce)||s.memoizedState!==null,$t(t,e,s),Ce=i):$t(t,e,s);break;default:$t(t,e,s)}}function ch(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new sy),e.forEach(function(i){var n=dy.bind(null,t,i);s.has(i)||(s.add(i),i.then(n,n))})}}function tt(t,e){var s=e.deletions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];try{var r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:we=o.stateNode,it=!1;break e;case 3:we=o.stateNode.containerInfo,it=!0;break e;case 4:we=o.stateNode.containerInfo,it=!0;break e}o=o.return}if(we===null)throw Error(P(160));Cm(r,a,n),we=null,it=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){oe(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_m(e,t),e=e.sibling}function _m(t,e){var s=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tt(e,t),dt(t),i&4){try{Vi(3,t,t.return),nl(3,t)}catch(g){oe(t,t.return,g)}try{Vi(5,t,t.return)}catch(g){oe(t,t.return,g)}}break;case 1:tt(e,t),dt(t),i&512&&s!==null&&As(s,s.return);break;case 5:if(tt(e,t),dt(t),i&512&&s!==null&&As(s,s.return),t.flags&32){var n=t.stateNode;try{Qi(n,"")}catch(g){oe(t,t.return,g)}}if(i&4&&(n=t.stateNode,n!=null)){var r=t.memoizedProps,a=s!==null?s.memoizedProps:r,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&Xd(n,r),Aa(o,a);var u=Aa(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?Zd(n,d):h==="dangerouslySetInnerHTML"?Yd(n,d):h==="children"?Qi(n,d):Vo(n,h,d,u)}switch(o){case"input":Da(n,r);break;case"textarea":Qd(n,r);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var x=r.value;x!=null?Ks(n,!!r.multiple,x,!1):m!==!!r.multiple&&(r.defaultValue!=null?Ks(n,!!r.multiple,r.defaultValue,!0):Ks(n,!!r.multiple,r.multiple?[]:"",!1))}n[rn]=r}catch(g){oe(t,t.return,g)}}break;case 6:if(tt(e,t),dt(t),i&4){if(t.stateNode===null)throw Error(P(162));n=t.stateNode,r=t.memoizedProps;try{n.nodeValue=r}catch(g){oe(t,t.return,g)}}break;case 3:if(tt(e,t),dt(t),i&4&&s!==null&&s.memoizedState.isDehydrated)try{Zi(e.containerInfo)}catch(g){oe(t,t.return,g)}break;case 4:tt(e,t),dt(t);break;case 13:tt(e,t),dt(t),n=t.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(xc=ue())),i&4&&ch(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||h,tt(e,t),Ce=u):tt(e,t),dt(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(m=$,x=m.child,m.tag){case 0:case 11:case 14:case 15:Vi(4,m,m.return);break;case 1:As(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){i=m,s=m.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){oe(i,s,g)}}break;case 5:As(m,m.return);break;case 22:if(m.memoizedState!==null){hh(d);continue}}x!==null?(x.return=m,$=x):hh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{n=d.stateNode,u?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=qd("display",a))}catch(g){oe(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){oe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tt(e,t),dt(t),i&4&&ch(t);break;case 21:break;default:tt(e,t),dt(t)}}function dt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(km(s)){var i=s;break e}s=s.return}throw Error(P(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Qi(n,""),i.flags&=-33);var r=oh(t);xo(t,r,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=oh(t);yo(t,o,a);break;default:throw Error(P(161))}}catch(c){oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ny(t,e,s){$=t,Em(t)}function Em(t,e,s){for(var i=(t.mode&1)!==0;$!==null;){var n=$,r=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||Bn;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Ce;o=Bn;var u=Ce;if(Bn=a,(Ce=c)&&!u)for($=n;$!==null;)a=$,c=a.child,a.tag===22&&a.memoizedState!==null?dh(n):c!==null?(c.return=a,$=c):dh(n);for(;r!==null;)$=r,Em(r),r=r.sibling;$=n,Bn=o,Ce=u}uh(t)}else n.subtreeFlags&8772&&r!==null?(r.return=n,$=r):uh(t)}}function uh(t){for(;$!==null;){var e=$;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||nl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ce)if(s===null)i.componentDidMount();else{var n=e.elementType===e.type?s.memoizedProps:st(e.type,s.memoizedProps);i.componentDidUpdate(n,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Xu(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Xu(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Zi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Ce||e.flags&512&&go(e)}catch(m){oe(e,e.return,m)}}if(e===t){$=null;break}if(s=e.sibling,s!==null){s.return=e.return,$=s;break}$=e.return}}function hh(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$=s;break}$=e.return}}function dh(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{nl(4,e)}catch(c){oe(e,s,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var n=e.return;try{i.componentDidMount()}catch(c){oe(e,n,c)}}var r=e.return;try{go(e)}catch(c){oe(e,r,c)}break;case 5:var a=e.return;try{go(e)}catch(c){oe(e,a,c)}}}catch(c){oe(e,e.return,c)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var ry=Math.ceil,Or=Rt.ReactCurrentDispatcher,gc=Rt.ReactCurrentOwner,Ye=Rt.ReactCurrentBatchConfig,K=0,ye=null,fe=null,je=0,Ve=0,Ws=is(0),pe=0,hn=null,ys=0,rl=0,yc=0,Bi=null,ze=null,xc=0,ri=1/0,wt=null,Vr=!1,wo=null,Qt=null,An=!1,Wt=null,Br=0,Ai=0,No=null,mr=-1,pr=0;function Me(){return K&6?ue():mr!==-1?mr:mr=ue()}function Jt(t){return t.mode&1?K&2&&je!==0?je&-je:Ag.transition!==null?(pr===0&&(pr=df()),pr):(t=X,t!==0||(t=window.event,t=t===void 0?16:xf(t.type)),t):1}function lt(t,e,s,i){if(50<Ai)throw Ai=0,No=null,Error(P(185));xn(t,s,i),(!(K&2)||t!==ye)&&(t===ye&&(!(K&2)&&(rl|=s),pe===4&&Bt(t,je)),Fe(t,i),s===1&&K===0&&!(e.mode&1)&&(ri=ue()+500,tl&&ns()))}function Fe(t,e){var s=t.callbackNode;Av(t,e);var i=br(t,t===ye?je:0);if(i===0)s!==null&&Nu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(s!=null&&Nu(s),e===1)t.tag===0?Bg(fh.bind(null,t)):Ff(fh.bind(null,t)),Dg(function(){!(K&6)&&ns()}),s=null;else{switch(ff(i)){case 1:s=Ho;break;case 4:s=uf;break;case 16:s=Sr;break;case 536870912:s=hf;break;default:s=Sr}s=Im(s,Lm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Lm(t,e){if(mr=-1,pr=0,K&6)throw Error(P(327));var s=t.callbackNode;if(Ys()&&t.callbackNode!==s)return null;var i=br(t,t===ye?je:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ar(t,i);else{e=i;var n=K;K|=2;var r=Pm();(ye!==t||je!==e)&&(wt=null,ri=ue()+500,ds(t,e));do try{oy();break}catch(o){Mm(t,o)}while(!0);nc(),Or.current=r,K=n,fe!==null?e=0:(ye=null,je=0,e=pe)}if(e!==0){if(e===2&&(n=Ga(t),n!==0&&(i=n,e=jo(t,n))),e===1)throw s=hn,ds(t,0),Bt(t,i),Fe(t,ue()),s;if(e===6)Bt(t,i);else{if(n=t.current.alternate,!(i&30)&&!ly(n)&&(e=Ar(t,i),e===2&&(r=Ga(t),r!==0&&(i=r,e=jo(t,r))),e===1))throw s=hn,ds(t,0),Bt(t,i),Fe(t,ue()),s;switch(t.finishedWork=n,t.finishedLanes=i,e){case 0:case 1:throw Error(P(345));case 2:os(t,ze,wt);break;case 3:if(Bt(t,i),(i&130023424)===i&&(e=xc+500-ue(),10<e)){if(br(t,0)!==0)break;if(n=t.suspendedLanes,(n&i)!==i){Me(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=to(os.bind(null,t,ze,wt),e);break}os(t,ze,wt);break;case 4:if(Bt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,n=-1;0<i;){var a=31-rt(i);r=1<<a,a=e[a],a>n&&(n=a),i&=~r}if(i=n,i=ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ry(i/1960))-i,10<i){t.timeoutHandle=to(os.bind(null,t,ze,wt),i);break}os(t,ze,wt);break;case 5:os(t,ze,wt);break;default:throw Error(P(329))}}}return Fe(t,ue()),t.callbackNode===s?Lm.bind(null,t):null}function jo(t,e){var s=Bi;return t.current.memoizedState.isDehydrated&&(ds(t,e).flags|=256),t=Ar(t,e),t!==2&&(e=ze,ze=s,e!==null&&So(e)),t}function So(t){ze===null?ze=t:ze.push.apply(ze,t)}function ly(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var n=s[i],r=n.getSnapshot;n=n.value;try{if(!at(r(),n))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bt(t,e){for(e&=~yc,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-rt(e),i=1<<s;t[s]=-1,e&=~i}}function fh(t){if(K&6)throw Error(P(327));Ys();var e=br(t,0);if(!(e&1))return Fe(t,ue()),null;var s=Ar(t,e);if(t.tag!==0&&s===2){var i=Ga(t);i!==0&&(e=i,s=jo(t,i))}if(s===1)throw s=hn,ds(t,0),Bt(t,e),Fe(t,ue()),s;if(s===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,ze,wt),Fe(t,ue()),null}function wc(t,e){var s=K;K|=1;try{return t(e)}finally{K=s,K===0&&(ri=ue()+500,tl&&ns())}}function xs(t){Wt!==null&&Wt.tag===0&&!(K&6)&&Ys();var e=K;K|=1;var s=Ye.transition,i=X;try{if(Ye.transition=null,X=1,t)return t()}finally{X=i,Ye.transition=s,K=e,!(K&6)&&ns()}}function Nc(){Ve=Ws.current,ee(Ws)}function ds(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Ig(s)),fe!==null)for(s=fe.return;s!==null;){var i=s;switch(tc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lr();break;case 3:ii(),ee(Ie),ee(_e),uc();break;case 5:cc(i);break;case 4:ii();break;case 13:ee(re);break;case 19:ee(re);break;case 10:rc(i.type._context);break;case 22:case 23:Nc()}s=s.return}if(ye=t,fe=t=Yt(t.current,null),je=Ve=e,pe=0,hn=null,yc=rl=ys=0,ze=Bi=null,us!==null){for(e=0;e<us.length;e++)if(s=us[e],i=s.interleaved,i!==null){s.interleaved=null;var n=i.next,r=s.pending;if(r!==null){var a=r.next;r.next=n,i.next=a}s.pending=i}us=null}return t}function Mm(t,e){do{var s=fe;try{if(nc(),hr.current=Fr,Dr){for(var i=le.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Dr=!1}if(gs=0,ge=me=le=null,Oi=!1,on=0,gc.current=null,s===null||s.return===null){pe=1,hn=e,fe=null;break}e:{var r=t,a=s.return,o=s,c=e;if(e=je,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=eh(a);if(x!==null){x.flags&=-257,th(x,a,o,r,e),x.mode&1&&Zu(r,u,e),e=x,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){Zu(r,u,e),jc();break e}c=Error(P(426))}}else if(se&&o.mode&1){var j=eh(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),th(j,a,o,r,e),sc(ni(c,o));break e}}r=c=ni(c,o),pe!==4&&(pe=2),Bi===null?Bi=[r]:Bi.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=fm(r,c,e);Gu(r,v);break e;case 1:o=c;var f=r.type,p=r.stateNode;if(!(r.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qt===null||!Qt.has(p)))){r.flags|=65536,e&=-e,r.lanes|=e;var N=mm(r,o,e);Gu(r,N);break e}}r=r.return}while(r!==null)}Rm(s)}catch(S){e=S,fe===s&&s!==null&&(fe=s=s.return);continue}break}while(!0)}function Pm(){var t=Or.current;return Or.current=Fr,t===null?Fr:t}function jc(){(pe===0||pe===3||pe===2)&&(pe=4),ye===null||!(ys&268435455)&&!(rl&268435455)||Bt(ye,je)}function Ar(t,e){var s=K;K|=2;var i=Pm();(ye!==t||je!==e)&&(wt=null,ds(t,e));do try{ay();break}catch(n){Mm(t,n)}while(!0);if(nc(),K=s,Or.current=i,fe!==null)throw Error(P(261));return ye=null,je=0,pe}function ay(){for(;fe!==null;)Tm(fe)}function oy(){for(;fe!==null&&!Rv();)Tm(fe)}function Tm(t){var e=$m(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?Rm(t):fe=e,gc.current=null}function Rm(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=ty(s,e),s!==null){s.flags&=32767,fe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pe=6,fe=null;return}}else if(s=ey(s,e,Ve),s!==null){fe=s;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);pe===0&&(pe=5)}function os(t,e,s){var i=X,n=Ye.transition;try{Ye.transition=null,X=1,cy(t,e,s,i)}finally{Ye.transition=n,X=i}return null}function cy(t,e,s,i){do Ys();while(Wt!==null);if(K&6)throw Error(P(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var r=s.lanes|s.childLanes;if(Wv(t,r),t===ye&&(fe=ye=null,je=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||An||(An=!0,Im(Sr,function(){return Ys(),null})),r=(s.flags&15990)!==0,s.subtreeFlags&15990||r){r=Ye.transition,Ye.transition=null;var a=X;X=1;var o=K;K|=4,gc.current=null,iy(t,s),_m(s,t),Lg(Za),kr=!!qa,Za=qa=null,t.current=s,ny(s),zv(),K=o,X=a,Ye.transition=r}else t.current=s;if(An&&(An=!1,Wt=t,Br=n),r=t.pendingLanes,r===0&&(Qt=null),Dv(s.stateNode),Fe(t,ue()),e!==null)for(i=t.onRecoverableError,s=0;s<e.length;s++)n=e[s],i(n.value,{componentStack:n.stack,digest:n.digest});if(Vr)throw Vr=!1,t=wo,wo=null,t;return Br&1&&t.tag!==0&&Ys(),r=t.pendingLanes,r&1?t===No?Ai++:(Ai=0,No=t):Ai=0,ns(),null}function Ys(){if(Wt!==null){var t=ff(Br),e=Ye.transition,s=X;try{if(Ye.transition=null,X=16>t?16:t,Wt===null)var i=!1;else{if(t=Wt,Wt=null,Br=0,K&6)throw Error(P(331));var n=K;for(K|=4,$=t.current;$!==null;){var r=$,a=r.child;if($.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:Vi(8,h,r)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var m=h.sibling,x=h.return;if(bm(h),h===u){$=null;break}if(m!==null){m.return=x,$=m;break}$=x}}}var y=r.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var j=g.sibling;g.sibling=null,g=j}while(g!==null)}}$=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,$=a;else e:for(;$!==null;){if(r=$,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Vi(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,$=v;break e}$=r.return}}var f=t.current;for($=f;$!==null;){a=$;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,$=p;else e:for(a=f;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:nl(9,o)}}catch(S){oe(o,o.return,S)}if(o===a){$=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,$=N;break e}$=o.return}}if(K=n,ns(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Jr,t)}catch{}i=!0}return i}finally{X=s,Ye.transition=e}}return!1}function mh(t,e,s){e=ni(s,e),e=fm(t,e,1),t=Xt(t,e,1),e=Me(),t!==null&&(xn(t,1,e),Fe(t,e))}function oe(t,e,s){if(t.tag===3)mh(t,t,s);else for(;e!==null;){if(e.tag===3){mh(e,t,s);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qt===null||!Qt.has(i))){t=ni(s,t),t=mm(e,t,1),e=Xt(e,t,1),t=Me(),e!==null&&(xn(e,1,t),Fe(e,t));break}}e=e.return}}function uy(t,e,s){var i=t.pingCache;i!==null&&i.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&s,ye===t&&(je&s)===s&&(pe===4||pe===3&&(je&130023424)===je&&500>ue()-xc?ds(t,0):yc|=s),Fe(t,e)}function zm(t,e){e===0&&(t.mode&1?(e=Tn,Tn<<=1,!(Tn&130023424)&&(Tn=4194304)):e=1);var s=Me();t=Mt(t,e),t!==null&&(xn(t,e,s),Fe(t,s))}function hy(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),zm(t,s)}function dy(t,e){var s=0;switch(t.tag){case 13:var i=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(P(314))}i!==null&&i.delete(e),zm(t,s)}var $m;$m=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ie.current)$e=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return $e=!1,Zg(t,e,s);$e=!!(t.flags&131072)}else $e=!1,se&&e.flags&1048576&&Of(e,Tr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;fr(t,e),t=e.pendingProps;var n=ei(e,_e.current);Js(e,s),n=dc(null,e,i,t,n,s);var r=fc();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(i)?(r=!0,Mr(e)):r=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,ac(e),n.updater=il,e.stateNode=n,n._reactInternals=e,oo(e,i,t,s),e=ho(null,e,i,!0,r,s)):(e.tag=0,se&&r&&ec(e),Le(null,e,n,s),e=e.child),e;case 16:i=e.elementType;e:{switch(fr(t,e),t=e.pendingProps,n=i._init,i=n(i._payload),e.type=i,n=e.tag=my(i),t=st(i,t),n){case 0:e=uo(null,e,i,t,s);break e;case 1:e=nh(null,e,i,t,s);break e;case 11:e=sh(null,e,i,t,s);break e;case 14:e=ih(null,e,i,st(i.type,t),s);break e}throw Error(P(306,i,""))}return e;case 0:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),uo(t,e,i,n,s);case 1:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),nh(t,e,i,n,s);case 3:e:{if(ym(e),t===null)throw Error(P(387));i=e.pendingProps,r=e.memoizedState,n=r.element,Hf(t,e),$r(e,i,null,s);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){n=ni(Error(P(423)),e),e=rh(t,e,i,s,n);break e}else if(i!==n){n=ni(Error(P(424)),e),e=rh(t,e,i,s,n);break e}else for(Be=Gt(e.stateNode.containerInfo.firstChild),Ae=e,se=!0,nt=null,s=Wf(e,null,i,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ti(),i===n){e=Pt(t,e,s);break e}Le(t,e,i,s)}e=e.child}return e;case 5:return Kf(e),t===null&&ro(e),i=e.type,n=e.pendingProps,r=t!==null?t.memoizedProps:null,a=n.children,eo(i,n)?a=null:r!==null&&eo(i,r)&&(e.flags|=32),gm(t,e),Le(t,e,a,s),e.child;case 6:return t===null&&ro(e),null;case 13:return xm(t,e,s);case 4:return oc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=si(e,null,i,s):Le(t,e,i,s),e.child;case 11:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),sh(t,e,i,n,s);case 7:return Le(t,e,e.pendingProps,s),e.child;case 8:return Le(t,e,e.pendingProps.children,s),e.child;case 12:return Le(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(i=e.type._context,n=e.pendingProps,r=e.memoizedProps,a=n.value,J(Rr,i._currentValue),i._currentValue=a,r!==null)if(at(r.value,a)){if(r.children===n.children&&!Ie.current){e=Pt(t,e,s);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=Ct(-1,s&-s),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=s,c=r.alternate,c!==null&&(c.lanes|=s),lo(r.return,s,e),o.lanes|=s;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),lo(a,s,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Le(t,e,n.children,s),e=e.child}return e;case 9:return n=e.type,i=e.pendingProps.children,Js(e,s),n=qe(n),i=i(n),e.flags|=1,Le(t,e,i,s),e.child;case 14:return i=e.type,n=st(i,e.pendingProps),n=st(i.type,n),ih(t,e,i,n,s);case 15:return pm(t,e,e.type,e.pendingProps,s);case 17:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),fr(t,e),e.tag=1,De(i)?(t=!0,Mr(e)):t=!1,Js(e,s),dm(e,i,n),oo(e,i,n,s),ho(null,e,i,!0,t,s);case 19:return wm(t,e,s);case 22:return vm(t,e,s)}throw Error(P(156,e.tag))};function Im(t,e){return cf(t,e)}function fy(t,e,s,i){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,s,i){return new fy(t,e,s,i)}function Sc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function my(t){if(typeof t=="function")return Sc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ao)return 11;if(t===Wo)return 14}return 2}function Yt(t,e){var s=t.alternate;return s===null?(s=Je(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function vr(t,e,s,i,n,r){var a=2;if(i=t,typeof t=="function")Sc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Rs:return fs(s.children,n,r,e);case Bo:a=8,n|=8;break;case Ta:return t=Je(12,s,e,n|2),t.elementType=Ta,t.lanes=r,t;case Ra:return t=Je(13,s,e,n),t.elementType=Ra,t.lanes=r,t;case za:return t=Je(19,s,e,n),t.elementType=za,t.lanes=r,t;case Hd:return ll(s,n,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wd:a=10;break e;case Ud:a=9;break e;case Ao:a=11;break e;case Wo:a=14;break e;case Ft:a=16,i=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Je(a,s,e,n),e.elementType=t,e.type=i,e.lanes=r,e}function fs(t,e,s,i){return t=Je(7,t,i,e),t.lanes=s,t}function ll(t,e,s,i){return t=Je(22,t,i,e),t.elementType=Hd,t.lanes=s,t.stateNode={isHidden:!1},t}function ta(t,e,s){return t=Je(6,t,null,e),t.lanes=s,t}function sa(t,e,s){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function py(t,e,s,i,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function bc(t,e,s,i,n,r,a,o,c){return t=new py(t,e,s,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Je(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(r),t}function vy(t,e,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:i==null?null:""+i,children:t,containerInfo:e,implementation:s}}function Dm(t){if(!t)return es;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var s=t.type;if(De(s))return Df(t,s,e)}return e}function Fm(t,e,s,i,n,r,a,o,c){return t=bc(s,i,!0,t,n,r,a,o,c),t.context=Dm(null),s=t.current,i=Me(),n=Jt(s),r=Ct(i,n),r.callback=e??null,Xt(s,r,n),t.current.lanes=n,xn(t,n,i),Fe(t,i),t}function al(t,e,s,i){var n=e.current,r=Me(),a=Jt(n);return s=Dm(s),e.context===null?e.context=s:e.pendingContext=s,e=Ct(r,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xt(n,e,a),t!==null&&(lt(t,n,a,r),ur(t,n,a)),a}function Wr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ph(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function kc(t,e){ph(t,e),(t=t.alternate)&&ph(t,e)}function gy(){return null}var Om=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cc(t){this._internalRoot=t}ol.prototype.render=Cc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));al(t,e,null,null)};ol.prototype.unmount=Cc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){al(null,t,null,null)}),e[Lt]=null}};function ol(t){this._internalRoot=t}ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=vf();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Vt.length&&e!==0&&e<Vt[s].priority;s++);Vt.splice(s,0,t),s===0&&yf(t)}};function _c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vh(){}function yy(t,e,s,i,n){if(n){if(typeof i=="function"){var r=i;i=function(){var u=Wr(a);r.call(u)}}var a=Fm(e,i,t,0,null,!1,!1,"",vh);return t._reactRootContainer=a,t[Lt]=a.current,sn(t.nodeType===8?t.parentNode:t),xs(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var u=Wr(c);o.call(u)}}var c=bc(t,0,!1,null,null,!1,!1,"",vh);return t._reactRootContainer=c,t[Lt]=c.current,sn(t.nodeType===8?t.parentNode:t),xs(function(){al(e,c,s,i)}),c}function ul(t,e,s,i,n){var r=s._reactRootContainer;if(r){var a=r;if(typeof n=="function"){var o=n;n=function(){var c=Wr(a);o.call(c)}}al(e,a,t,n)}else a=yy(s,e,t,n,i);return Wr(a)}mf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Pi(e.pendingLanes);s!==0&&(Ko(e,s|1),Fe(e,ue()),!(K&6)&&(ri=ue()+500,ns()))}break;case 13:xs(function(){var i=Mt(t,1);if(i!==null){var n=Me();lt(i,t,1,n)}}),kc(t,1)}};Go=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var s=Me();lt(e,t,134217728,s)}kc(t,134217728)}};pf=function(t){if(t.tag===13){var e=Jt(t),s=Mt(t,e);if(s!==null){var i=Me();lt(s,t,e,i)}kc(t,e)}};vf=function(){return X};gf=function(t,e){var s=X;try{return X=t,e()}finally{X=s}};Ua=function(t,e,s){switch(e){case"input":if(Da(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var i=s[e];if(i!==t&&i.form===t.form){var n=el(i);if(!n)throw Error(P(90));Gd(i),Da(i,n)}}}break;case"textarea":Qd(t,s);break;case"select":e=s.value,e!=null&&Ks(t,!!s.multiple,e,!1)}};sf=wc;nf=xs;var xy={usingClientEntryPoint:!1,Events:[Nn,Ds,el,ef,tf,wc]},Ci={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wy={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=af(t),t===null?null:t.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wn.isDisabled&&Wn.supportsFiber)try{Jr=Wn.inject(wy),gt=Wn}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xy;Ue.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(e))throw Error(P(200));return vy(t,e,null,s)};Ue.createRoot=function(t,e){if(!_c(t))throw Error(P(299));var s=!1,i="",n=Om;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=bc(t,1,!1,null,null,s,!1,i,n),t[Lt]=e.current,sn(t.nodeType===8?t.parentNode:t),new Cc(e)};Ue.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=af(e),t=t===null?null:t.stateNode,t};Ue.flushSync=function(t){return xs(t)};Ue.hydrate=function(t,e,s){if(!cl(e))throw Error(P(200));return ul(null,t,e,!0,s)};Ue.hydrateRoot=function(t,e,s){if(!_c(t))throw Error(P(405));var i=s!=null&&s.hydratedSources||null,n=!1,r="",a=Om;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Fm(e,null,t,1,s??null,n,!1,r,a),t[Lt]=e.current,sn(t),i)for(t=0;t<i.length;t++)s=i[t],n=s._getVersion,n=n(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,n]:e.mutableSourceEagerHydrationData.push(s,n);return new ol(e)};Ue.render=function(t,e,s){if(!cl(e))throw Error(P(200));return ul(null,t,e,!1,s)};Ue.unmountComponentAtNode=function(t){if(!cl(t))throw Error(P(40));return t._reactRootContainer?(xs(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ue.unstable_batchedUpdates=wc;Ue.unstable_renderSubtreeIntoContainer=function(t,e,s,i){if(!cl(s))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return ul(t,e,s,!1,i)};Ue.version="18.3.1-next-f1338f8080-20240426";function Vm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vm)}catch(t){console.error(t)}}Vm(),Od.exports=Ue;var Ny=Od.exports,gh=Ny;Ma.createRoot=gh.createRoot,Ma.hydrateRoot=gh.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yh="popstate";function jy(t={}){function e(i,n){let{pathname:r,search:a,hash:o}=i.location;return bo("",{pathname:r,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(i,n){return typeof n=="string"?n:dn(n)}return by(e,s,null,t)}function ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function et(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sy(){return Math.random().toString(36).substring(2,10)}function xh(t,e){return{usr:t.state,key:t.key,idx:e}}function bo(t,e,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hi(e):e,state:s,key:e&&e.key||i||Sy()}}function dn({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function hi(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function by(t,e,s,i={}){let{window:n=document.defaultView,v5Compat:r=!1}=i,a=n.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let j=h(),v=j==null?null:j-u;u=j,c&&c({action:o,location:g.location,delta:v})}function m(j,v){o="PUSH";let f=bo(g.location,j,v);u=h()+1;let p=xh(f,u),N=g.createHref(f);try{a.pushState(p,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(N)}r&&c&&c({action:o,location:g.location,delta:1})}function x(j,v){o="REPLACE";let f=bo(g.location,j,v);u=h();let p=xh(f,u),N=g.createHref(f);a.replaceState(p,"",N),r&&c&&c({action:o,location:g.location,delta:0})}function y(j){return ky(j)}let g={get action(){return o},get location(){return t(n,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(yh,d),c=j,()=>{n.removeEventListener(yh,d),c=null}},createHref(j){return e(n,j)},createURL:y,encodeLocation(j){let v=y(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:x,go(j){return a.go(j)}};return g}function ky(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ie(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:dn(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Bm(t,e,s="/"){return Cy(t,e,s,!1)}function Cy(t,e,s,i){let n=typeof e=="string"?hi(e):e,r=Tt(n.pathname||"/",s);if(r==null)return null;let a=Am(t);_y(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=Fy(r);o=Iy(a[c],u,i)}return o}function Am(t,e=[],s=[],i="",n=!1){let r=(a,o,c=n,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&c)return;ie(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=_t([i,h.relativePath]),m=s.concat(h);a.children&&a.children.length>0&&(ie(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Am(a.children,e,m,d,c)),!(a.path==null&&!a.index)&&e.push({path:d,score:zy(d,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))r(a,o);else for(let u of Wm(a.path))r(a,o,!0,u)}),e}function Wm(t){let e=t.split("/");if(e.length===0)return[];let[s,...i]=e,n=s.endsWith("?"),r=s.replace(/\?$/,"");if(i.length===0)return n?[r,""]:[r];let a=Wm(i.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),n&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function _y(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:$y(e.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var Ey=/^:[\w-]+$/,Ly=3,My=2,Py=1,Ty=10,Ry=-2,wh=t=>t==="*";function zy(t,e){let s=t.split("/"),i=s.length;return s.some(wh)&&(i+=Ry),e&&(i+=My),s.filter(n=>!wh(n)).reduce((n,r)=>n+(Ey.test(r)?Ly:r===""?Py:Ty),i)}function $y(t,e){return t.length===e.length&&t.slice(0,-1).every((i,n)=>i===e[n])?t[t.length-1]-e[e.length-1]:0}function Iy(t,e,s=!1){let{routesMeta:i}=t,n={},r="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],u=o===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=Ur({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!d&&u&&s&&!i[i.length-1].route.index&&(d=Ur({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(n,d.params),a.push({params:n,pathname:_t([r,d.pathname]),pathnameBase:Ay(_t([r,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(r=_t([r,d.pathnameBase]))}return a}function Ur(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=Dy(t.path,t.caseSensitive,t.end),n=e.match(s);if(!n)return null;let r=n[0],a=r.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((u,{paramName:h,isOptional:d},m)=>{if(h==="*"){let y=o[m]||"";a=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[m];return d&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:t}}function Dy(t,e=!1,s=!0){et(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function Fy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return et(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var Um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oy=t=>Um.test(t);function Vy(t,e="/"){let{pathname:s,search:i="",hash:n=""}=typeof t=="string"?hi(t):t,r;if(s)if(Oy(s))r=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),et(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${s}`)}s.startsWith("/")?r=Nh(s.substring(1),"/"):r=Nh(s,e)}else r=e;return{pathname:r,search:Wy(i),hash:Uy(n)}}function Nh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function ia(t,e,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function By(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Ec(t){let e=By(t);return e.map((s,i)=>i===e.length-1?s.pathname:s.pathnameBase)}function Lc(t,e,s,i=!1){let n;typeof t=="string"?n=hi(t):(n={...t},ie(!n.pathname||!n.pathname.includes("?"),ia("?","pathname","search",n)),ie(!n.pathname||!n.pathname.includes("#"),ia("#","pathname","hash",n)),ie(!n.search||!n.search.includes("#"),ia("#","search","hash",n)));let r=t===""||n.pathname==="",a=r?"/":n.pathname,o;if(a==null)o=s;else{let d=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),d-=1;n.pathname=m.join("/")}o=d>=0?e[d]:"/"}let c=Vy(n,o),u=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var _t=t=>t.join("/").replace(/\/\/+/g,"/"),Ay=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Hy=class{constructor(t,e,s,i=!1){this.status=t,this.statusText=e||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Ky(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Gy(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Km(t,e){let s=t;if(typeof s!="string"||!Um.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,n=!1;if(Hm)try{let r=new URL(window.location.href),a=s.startsWith("//")?new URL(r.protocol+s):new URL(s),o=Tt(a.pathname,e);a.origin===r.origin&&o!=null?s=o+a.search+a.hash:n=!0}catch{et(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:n,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Gm=["POST","PUT","PATCH","DELETE"];new Set(Gm);var Xy=["GET",...Gm];new Set(Xy);var di=w.createContext(null);di.displayName="DataRouter";var hl=w.createContext(null);hl.displayName="DataRouterState";var Qy=w.createContext(!1),Xm=w.createContext({isTransitioning:!1});Xm.displayName="ViewTransition";var Jy=w.createContext(new Map);Jy.displayName="Fetchers";var Yy=w.createContext(null);Yy.displayName="Await";var Ke=w.createContext(null);Ke.displayName="Navigation";var Sn=w.createContext(null);Sn.displayName="Location";var xt=w.createContext({outlet:null,matches:[],isDataRoute:!1});xt.displayName="Route";var Mc=w.createContext(null);Mc.displayName="RouteError";var Qm="REACT_ROUTER_ERROR",qy="REDIRECT",Zy="ROUTE_ERROR_RESPONSE";function e0(t){if(t.startsWith(`${Qm}:${qy}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function t0(t){if(t.startsWith(`${Qm}:${Zy}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Hy(e.status,e.statusText,e.data)}catch{}}function s0(t,{relative:e}={}){ie(fi(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=w.useContext(Ke),{hash:n,pathname:r,search:a}=bn(t,{relative:e}),o=r;return s!=="/"&&(o=r==="/"?s:_t([s,r])),i.createHref({pathname:o,search:a,hash:n})}function fi(){return w.useContext(Sn)!=null}function rs(){return ie(fi(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Sn).location}var Jm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ym(t){w.useContext(Ke).static||w.useLayoutEffect(t)}function mi(){let{isDataRoute:t}=w.useContext(xt);return t?p0():i0()}function i0(){ie(fi(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(di),{basename:e,navigator:s}=w.useContext(Ke),{matches:i}=w.useContext(xt),{pathname:n}=rs(),r=JSON.stringify(Ec(i)),a=w.useRef(!1);return Ym(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(et(a.current,Jm),!a.current)return;if(typeof c=="number"){s.go(c);return}let h=Lc(c,JSON.parse(r),n,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:_t([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,r,n,t])}w.createContext(null);function bn(t,{relative:e}={}){let{matches:s}=w.useContext(xt),{pathname:i}=rs(),n=JSON.stringify(Ec(s));return w.useMemo(()=>Lc(t,JSON.parse(n),i,e==="path"),[t,n,i,e])}function n0(t,e){return qm(t,e)}function qm(t,e,s,i,n){var f;ie(fi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(Ke),{matches:a}=w.useContext(xt),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let p=d&&d.path||"";ep(u,!d||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let m=rs(),x;if(e){let p=typeof e=="string"?hi(e):e;ie(h==="/"||((f=p.pathname)==null?void 0:f.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${p.pathname}" was given in the \`location\` prop.`),x=p}else x=m;let y=x.pathname||"/",g=y;if(h!=="/"){let p=h.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(p.length).join("/")}let j=Bm(t,{pathname:g});et(d||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),et(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=c0(j&&j.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:_t([h,r.encodeLocation?r.encodeLocation(p.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?h:_t([h,r.encodeLocation?r.encodeLocation(p.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathnameBase])})),a,s,i,n);return e&&v?w.createElement(Sn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},v):v}function r0(){let t=m0(),e=Ky(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:r},"ErrorBoundary")," or"," ",w.createElement("code",{style:r},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:n},s):null,a)}var l0=w.createElement(r0,null),Zm=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=t0(t.digest);s&&(t=s)}let e=t!==void 0?w.createElement(xt.Provider,{value:this.props.routeContext},w.createElement(Mc.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?w.createElement(a0,{error:t},e):e}};Zm.contextType=Qy;var na=new WeakMap;function a0({children:t,error:e}){let{basename:s}=w.useContext(Ke);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=e0(e.digest);if(i){let n=na.get(e);if(n)throw n;let r=Km(i.location,s);if(Hm&&!na.get(e))if(r.isExternal||i.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:i.replace}));throw na.set(e,a),a}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return t}function o0({routeContext:t,match:e,children:s}){let i=w.useContext(di);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(xt.Provider,{value:t},s)}function c0(t,e=[],s=null,i=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,a=s==null?void 0:s.errors;if(a!=null){let h=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);ie(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let o=!1,c=-1;if(s)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:x}=s,y=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!x||x[d.route.id]===void 0);if(d.route.lazy||y){o=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let u=s&&i?(h,d)=>{var m,x;i(h,{location:s.location,params:((x=(m=s.matches)==null?void 0:m[0])==null?void 0:x.params)??{},unstable_pattern:Gy(s.matches),errorInfo:d})}:void 0;return r.reduceRight((h,d,m)=>{let x,y=!1,g=null,j=null;s&&(x=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||l0,o&&(c<0&&m===0?(ep("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,j=null):c===m&&(y=!0,j=d.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,m+1)),f=()=>{let p;return x?p=g:y?p=j:d.route.Component?p=w.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=h,w.createElement(o0,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:s!=null},children:p})};return s&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?w.createElement(Zm,{location:s.location,revalidation:s.revalidation,component:g,error:x,children:f(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):f()},null)}function Pc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u0(t){let e=w.useContext(di);return ie(e,Pc(t)),e}function h0(t){let e=w.useContext(hl);return ie(e,Pc(t)),e}function d0(t){let e=w.useContext(xt);return ie(e,Pc(t)),e}function Tc(t){let e=d0(t),s=e.matches[e.matches.length-1];return ie(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function f0(){return Tc("useRouteId")}function m0(){var i;let t=w.useContext(Mc),e=h0("useRouteError"),s=Tc("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[s]}function p0(){let{router:t}=u0("useNavigate"),e=Tc("useNavigate"),s=w.useRef(!1);return Ym(()=>{s.current=!0}),w.useCallback(async(n,r={})=>{et(s.current,Jm),s.current&&(typeof n=="number"?await t.navigate(n):await t.navigate(n,{fromRouteId:e,...r}))},[t,e])}var jh={};function ep(t,e,s){!e&&!jh[t]&&(jh[t]=!0,et(!1,s))}w.memo(v0);function v0({routes:t,future:e,state:s,onError:i}){return qm(t,void 0,s,i,e)}function Rc({to:t,replace:e,state:s,relative:i}){ie(fi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=w.useContext(Ke);et(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=w.useContext(xt),{pathname:a}=rs(),o=mi(),c=Lc(t,Ec(r),a,i==="path"),u=JSON.stringify(c);return w.useEffect(()=>{o(JSON.parse(u),{replace:e,state:s,relative:i})},[o,u,i,e,s]),null}function Ri(t){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function g0({basename:t="/",children:e=null,location:s,navigationType:i="POP",navigator:n,static:r=!1,unstable_useTransitions:a}){ie(!fi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:n,static:r,unstable_useTransitions:a,future:{}}),[o,n,r,a]);typeof s=="string"&&(s=hi(s));let{pathname:u="/",search:h="",hash:d="",state:m=null,key:x="default"}=s,y=w.useMemo(()=>{let g=Tt(u,o);return g==null?null:{location:{pathname:g,search:h,hash:d,state:m,key:x},navigationType:i}},[o,u,h,d,m,x,i]);return et(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(Ke.Provider,{value:c},w.createElement(Sn.Provider,{children:e,value:y}))}function y0({children:t,location:e}){return n0(ko(t),e)}function ko(t,e=[]){let s=[];return w.Children.forEach(t,(i,n)=>{if(!w.isValidElement(i))return;let r=[...e,n];if(i.type===w.Fragment){s.push.apply(s,ko(i.props.children,r));return}ie(i.type===Ri,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ko(i.props.children,r)),s.push(a)}),s}var gr="get",yr="application/x-www-form-urlencoded";function dl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function x0(t){return dl(t)&&t.tagName.toLowerCase()==="button"}function w0(t){return dl(t)&&t.tagName.toLowerCase()==="form"}function N0(t){return dl(t)&&t.tagName.toLowerCase()==="input"}function j0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S0(t,e){return t.button===0&&(!e||e==="_self")&&!j0(t)}var Un=null;function b0(){if(Un===null)try{new FormData(document.createElement("form"),0),Un=!1}catch{Un=!0}return Un}var k0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ra(t){return t!=null&&!k0.has(t)?(et(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yr}"`),null):t}function C0(t,e){let s,i,n,r,a;if(w0(t)){let o=t.getAttribute("action");i=o?Tt(o,e):null,s=t.getAttribute("method")||gr,n=ra(t.getAttribute("enctype"))||yr,r=new FormData(t)}else if(x0(t)||N0(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(i=c?Tt(c,e):null,s=t.getAttribute("formmethod")||o.getAttribute("method")||gr,n=ra(t.getAttribute("formenctype"))||ra(o.getAttribute("enctype"))||yr,r=new FormData(o,t),!b0()){let{name:u,type:h,value:d}=t;if(h==="image"){let m=u?`${u}.`:"";r.append(`${m}x`,"0"),r.append(`${m}y`,"0")}else u&&r.append(u,d)}}else{if(dl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=gr,i=null,n=yr,a=t}return r&&n==="text/plain"&&(a=r,r=void 0),{action:i,method:s.toLowerCase(),encType:n,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _0(t,e,s){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${s}`:e&&Tt(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function E0(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function L0(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function M0(t,e,s){let i=await Promise.all(t.map(async n=>{let r=e.routes[n.route.id];if(r){let a=await E0(r,s);return a.links?a.links():[]}return[]}));return z0(i.flat(1).filter(L0).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Sh(t,e,s,i,n,r){let a=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,o=(c,u)=>{var h;return s[u].pathname!==c.pathname||((h=s[u].route.path)==null?void 0:h.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return r==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):r==="data"?e.filter((c,u)=>{var d;let h=i.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((d=s[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function P0(t,e,{includeHydrateFallback:s}={}){return T0(t.map(i=>{let n=e.routes[i.route.id];if(!n)return[];let r=[n.module];return n.clientActionModule&&(r=r.concat(n.clientActionModule)),n.clientLoaderModule&&(r=r.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(r=r.concat(n.hydrateFallbackModule)),n.imports&&(r=r.concat(n.imports)),r}).flat(1))}function T0(t){return[...new Set(t)]}function R0(t){let e={},s=Object.keys(t).sort();for(let i of s)e[i]=t[i];return e}function z0(t,e){let s=new Set;return new Set(e),t.reduce((i,n)=>{let r=JSON.stringify(R0(n));return s.has(r)||(s.add(r),i.push({key:r,link:n})),i},[])}function tp(){let t=w.useContext(di);return zc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $0(){let t=w.useContext(hl);return zc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $c=w.createContext(void 0);$c.displayName="FrameworkContext";function sp(){let t=w.useContext($c);return zc(t,"You must render this element inside a <HydratedRouter> element"),t}function I0(t,e){let s=w.useContext($c),[i,n]=w.useState(!1),[r,a]=w.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,m=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=v=>{v.forEach(f=>{a(f.isIntersecting)})},j=new IntersectionObserver(g,{threshold:.5});return m.current&&j.observe(m.current),()=>{j.disconnect()}}},[t]),w.useEffect(()=>{if(i){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[i]);let x=()=>{n(!0)},y=()=>{n(!1),a(!1)};return s?t!=="intent"?[r,m,{}]:[r,m,{onFocus:_i(o,x),onBlur:_i(c,y),onMouseEnter:_i(u,x),onMouseLeave:_i(h,y),onTouchStart:_i(d,x)}]:[!1,m,{}]}function _i(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function D0({page:t,...e}){let{router:s}=tp(),i=w.useMemo(()=>Bm(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?w.createElement(O0,{page:t,matches:i,...e}):null}function F0(t){let{manifest:e,routeModules:s}=sp(),[i,n]=w.useState([]);return w.useEffect(()=>{let r=!1;return M0(t,e,s).then(a=>{r||n(a)}),()=>{r=!0}},[t,e,s]),i}function O0({page:t,matches:e,...s}){let i=rs(),{manifest:n,routeModules:r}=sp(),{basename:a}=tp(),{loaderData:o,matches:c}=$0(),u=w.useMemo(()=>Sh(t,e,c,n,i,"data"),[t,e,c,n,i]),h=w.useMemo(()=>Sh(t,e,c,n,i,"assets"),[t,e,c,n,i]),d=w.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let y=new Set,g=!1;if(e.forEach(v=>{var p;let f=n.routes[v.route.id];!f||!f.hasLoader||(!u.some(N=>N.route.id===v.route.id)&&v.route.id in o&&((p=r[v.route.id])!=null&&p.shouldRevalidate)||f.hasClientLoader?g=!0:y.add(v.route.id))}),y.size===0)return[];let j=_0(t,a,"data");return g&&y.size>0&&j.searchParams.set("_routes",e.filter(v=>y.has(v.route.id)).map(v=>v.route.id).join(",")),[j.pathname+j.search]},[a,o,i,n,u,e,t,r]),m=w.useMemo(()=>P0(h,n),[h,n]),x=F0(h);return w.createElement(w.Fragment,null,d.map(y=>w.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...s})),m.map(y=>w.createElement("link",{key:y,rel:"modulepreload",href:y,...s})),x.map(({key:y,link:g})=>w.createElement("link",{key:y,nonce:s.nonce,...g})))}function V0(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.11.0")}catch{}function A0({basename:t,children:e,unstable_useTransitions:s,window:i}){let n=w.useRef();n.current==null&&(n.current=jy({window:i,v5Compat:!0}));let r=n.current,[a,o]=w.useState({action:r.action,location:r.location}),c=w.useCallback(u=>{s===!1?o(u):w.startTransition(()=>o(u))},[s]);return w.useLayoutEffect(()=>r.listen(c),[r,c]),w.createElement(g0,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r,unstable_useTransitions:s})}var ip=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fl=w.forwardRef(function({onClick:e,discover:s="render",prefetch:i="none",relative:n,reloadDocument:r,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m,...x},y){let{basename:g,unstable_useTransitions:j}=w.useContext(Ke),v=typeof u=="string"&&ip.test(u),f=Km(u,g);u=f.to;let p=s0(u,{relative:n}),[N,S,_]=I0(i,x),k=K0(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:n,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:j});function C(I){e&&e(I),I.defaultPrevented||k(I)}let z=w.createElement("a",{...x,..._,href:f.absoluteURL||p,onClick:f.isExternal||r?e:C,ref:V0(y,S),target:c,"data-discover":!v&&s==="render"?"true":void 0});return N&&!v?w.createElement(w.Fragment,null,z,w.createElement(D0,{page:p})):z});fl.displayName="Link";var W0=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:i="",end:n=!1,style:r,to:a,viewTransition:o,children:c,...u},h){let d=bn(a,{relative:u.relative}),m=rs(),x=w.useContext(hl),{navigator:y,basename:g}=w.useContext(Ke),j=x!=null&&Y0(d)&&o===!0,v=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,f=m.pathname,p=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(f=f.toLowerCase(),p=p?p.toLowerCase():null,v=v.toLowerCase()),p&&g&&(p=Tt(p,g)||p);const N=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let S=f===v||!n&&f.startsWith(v)&&f.charAt(N)==="/",_=p!=null&&(p===v||!n&&p.startsWith(v)&&p.charAt(v.length)==="/"),k={isActive:S,isPending:_,isTransitioning:j},C=S?e:void 0,z;typeof i=="function"?z=i(k):z=[i,S?"active":null,_?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let I=typeof r=="function"?r(k):r;return w.createElement(fl,{...u,"aria-current":C,className:z,ref:h,style:I,to:a,viewTransition:o},typeof c=="function"?c(k):c)});W0.displayName="NavLink";var U0=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:i,replace:n,state:r,method:a=gr,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m,...x},y)=>{let{unstable_useTransitions:g}=w.useContext(Ke),j=Q0(),v=J0(o,{relative:u}),f=a.toLowerCase()==="get"?"get":"post",p=typeof o=="string"&&ip.test(o),N=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let _=S.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||a,C=()=>j(_||S.currentTarget,{fetcherKey:e,method:k,navigate:s,replace:n,state:r,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m});g&&s!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:y,method:f,action:v,onSubmit:i?c:N,...x,"data-discover":!p&&t==="render"?"true":void 0})});U0.displayName="Form";function H0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function np(t){let e=w.useContext(di);return ie(e,H0(t)),e}function K0(t,{target:e,replace:s,state:i,preventScrollReset:n,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=mi(),h=rs(),d=bn(t,{relative:r});return w.useCallback(m=>{if(S0(m,e)){m.preventDefault();let x=s!==void 0?s:dn(h)===dn(d),y=()=>u(t,{replace:x,state:i,preventScrollReset:n,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o});c?w.startTransition(()=>y()):y()}},[h,u,d,s,i,e,t,n,r,a,o,c])}var G0=0,X0=()=>`__${String(++G0)}__`;function Q0(){let{router:t}=np("useSubmit"),{basename:e}=w.useContext(Ke),s=f0(),i=t.fetch,n=t.navigate;return w.useCallback(async(r,a={})=>{let{action:o,method:c,encType:u,formData:h,body:d}=C0(r,e);if(a.navigate===!1){let m=a.fetcherKey||X0();await i(m,s,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await n(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,n,e,s])}function J0(t,{relative:e}={}){let{basename:s}=w.useContext(Ke),i=w.useContext(xt);ie(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),r={...bn(t||".",{relative:e})},a=rs();if(t==null){r.search=a.search;let o=new URLSearchParams(r.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();r.search=h?`?${h}`:""}}return(!t||t===".")&&n.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(r.pathname=r.pathname==="/"?s:_t([s,r.pathname])),dn(r)}function Y0(t,{relative:e}={}){let s=w.useContext(Xm);ie(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=np("useViewTransitionState"),n=bn(t,{relative:e});if(!s.isTransitioning)return!1;let r=Tt(s.currentLocation.pathname,i)||s.currentLocation.pathname,a=Tt(s.nextLocation.pathname,i)||s.nextLocation.pathname;return Ur(n.pathname,a)!=null||Ur(n.pathname,r)!=null}const rp=w.createContext(),It={DARK:"dark",LIGHT:"light",GLASS:"glass"};function q0({children:t}){const[e,s]=w.useState(()=>{const a=localStorage.getItem("theme");return Object.values(It).includes(a)?a:It.DARK}),i=async a=>{var o;if(Object.values(It).includes(a)){s(a),localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a);const c=localStorage.getItem("access_token");if(c)try{const d=((o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${c}`}})).json()).profile)==null?void 0:o.preferences)||{};await fetch("/profile/me",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({preferences:{...d,theme:a}})})}catch(u){console.error("Failed to sync theme to backend:",u)}}},n=async()=>{var o,c;const a=localStorage.getItem("access_token");if(a)try{const d=(c=(o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${a}`}})).json()).profile)==null?void 0:o.preferences)==null?void 0:c.theme;d&&Object.values(It).includes(d)&&d!==e&&(s(d),localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d))}catch(u){console.error("Failed to fetch user theme:",u)}};w.useEffect(()=>{n()},[]),w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),w.useEffect(()=>{const a=o=>{o.key==="theme"&&Object.values(It).includes(o.newValue)&&s(o.newValue)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const r={theme:e,setTheme:i,syncThemeWithBackend:n,isDark:e===It.DARK,isLight:e===It.LIGHT,isGlass:e===It.GLASS};return l.jsx(rp.Provider,{value:r,children:t})}function lp(){const t=w.useContext(rp);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const ap=w.createContext(null);function Z0({children:t}){const[e,s]=w.useState([]),i=w.useCallback((u,h="info",d=5e3)=>{const m=Date.now()+Math.random(),x={id:m,message:u,type:h,duration:d};return s(y=>[...y,x]),d>0&&setTimeout(()=>{s(y=>y.filter(g=>g.id!==m))},d),m},[]),n=w.useCallback(u=>{s(h=>h.filter(d=>d.id!==u))},[]),r=w.useCallback(u=>i(u,"error",6e3),[i]),a=w.useCallback(u=>i(u,"success",4e3),[i]),o=w.useCallback(u=>i(u,"info",4e3),[i]),c=w.useCallback(u=>i(u,"warning",5e3),[i]);return l.jsxs(ap.Provider,{value:{toasts:e,addToast:i,removeToast:n,showError:r,showSuccess:a,showInfo:o,showWarning:c},children:[t,l.jsx(ex,{toasts:e,removeToast:n})]})}function ex({toasts:t,removeToast:e}){return t.length===0?null:l.jsx("div",{className:"toast-container",children:t.map(s=>l.jsxs("div",{className:`toast toast-${s.type}`,children:[l.jsxs("div",{className:"toast-icon",children:[s.type==="error"&&"",s.type==="success"&&"",s.type==="warning"&&"",s.type==="info"&&""]}),l.jsx("div",{className:"toast-message",children:s.message}),l.jsx("button",{className:"toast-close",onClick:()=>e(s.id),children:""})]},s.id))})}function tx(){const t=w.useContext(ap);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const sx=[{id:"dashboard",label:"Dashboard",icon:"",subsections:[]},{id:"products",label:"TradeFinder Products",icon:"",subsections:[{id:"option-clock",label:"Option Clock",icon:""},{id:"option-apex",label:"Option Apex",icon:""},{id:"market-pulse",label:"Market Pulse",icon:""},{id:"insider-strategy",label:"Insider Strategy",icon:""},{id:"sector-scope",label:"Sector Scope",icon:""},{id:"swing-spectrum",label:"Swing Spectrum",icon:""}]},{id:"trading",label:"Virtual Trading",icon:"",subsections:[{id:"trade",label:"Trade Stocks"},{id:"portfolio",label:"My Portfolio"},{id:"orders",label:"Order History"}]},{id:"real-trading",label:"Real Trading",icon:"",subsections:[{id:"fyers",label:"Fyers",icon:""}]},{id:"market",label:"Market Data",icon:"",subsections:[{id:"gainers",label:"Top Gainers"},{id:"losers",label:"Top Losers"},{id:"nifty-contributors",label:"Nifty Contributors"},{id:"fii-dii",label:"FII/DII Activity"},{id:"weekly",label:"Weekly Movers"},{id:"bulk",label:"Bulk Deals"}]},{id:"wallet",label:"Wallet",icon:"",subsections:[{id:"balance",label:"Balance"},{id:"transactions",label:"Transactions"}]},{id:"watchlist",label:"Watchlist",icon:"",subsections:[]},{id:"settings",label:"Settings",icon:"",subsections:[{id:"profile",label:"Profile"},{id:"preferences",label:"Preferences"}]}];function ix({activeSection:t,onSectionChange:e,collapsed:s,onToggleCollapse:i,mobileOpen:n,onMobileClose:r}){const[a,o]=w.useState(["products"]),c=h=>{o(d=>d.includes(h)?[]:[h])},u=(h,d=null)=>{if(h.subsections.length>0&&!d)c(h.id);else{const m=d?`${h.id}.${d.id}`:h.id;e(m),n&&r&&r()}};return l.jsxs("aside",{className:`sidebar ${s?"collapsed":""} ${n?"mobile-open":""}`,children:[l.jsxs("div",{className:"sidebar-header",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"sidebar-brand",children:[l.jsx("span",{className:"brand-icon",children:""}),l.jsx("span",{className:"brand-text",children:"StockServs"})]}),l.jsx("p",{className:"sidebar-tagline",children:"Smart Trading Intelligence"})]}),l.jsx("button",{className:"sidebar-toggle",onClick:i,children:s?"":""})]}),l.jsx("nav",{className:"sidebar-nav",children:sx.map(h=>{const d=a.includes(h.id),m=t===h.id||t.startsWith(`${h.id}.`),x=h.subsections.length>0;return l.jsxs("div",{className:`nav-group ${m?"active":""}`,children:[l.jsxs("button",{className:`nav-item ${m&&!x?"active":""}`,onClick:()=>u(h),title:s?h.label:void 0,children:[l.jsx("span",{className:"nav-icon",children:h.icon}),!s&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"nav-label",children:h.label}),x&&l.jsx("span",{className:`nav-arrow ${d?"expanded":""}`,children:""})]})]}),!s&&x&&d&&l.jsx("div",{className:"nav-subsections",children:h.subsections.map(y=>l.jsx("button",{className:`nav-subitem ${t===`${h.id}.${y.id}`?"active":""}`,onClick:()=>u(h,y),children:y.label},y.id))})]},h.id)})}),l.jsx("div",{className:"sidebar-footer",children:!s&&l.jsxs("div",{className:"sidebar-footer-content",children:[l.jsx("span",{className:"footer-label",children:"Paper Trading Mode"}),l.jsx("span",{className:"footer-badge",children:"Demo"})]})})]})}const op=3e4,Hn=new Map,nx=async(t,e={},s=op)=>{const i=new AbortController,n=setTimeout(()=>i.abort(),s);try{return await fetch(t,{...e,signal:i.signal})}finally{clearTimeout(n)}},Hr=async(t,e={})=>{const s=await nx(t,e,e.timeout||op);if(!s.ok){let i=`Request failed (${s.status})`;try{i=(await s.json()).detail||i}catch{}const n=new Error(i);throw n.status=s.status,n}return s.json()},U=async(t,e={})=>{const s=localStorage.getItem("access_token");if(!s)throw new Error("Not authenticated");const i={...e.headers||{},Authorization:`Bearer ${s}`};return Hr(t,{...e,headers:i})},qt=async(t,e={},s=null)=>{if(Hn.has(t))return Hn.get(t);const i=(async()=>{var n,r;try{return await U(t,e)}catch(a){return!(a.name==="AbortError"||((n=a.message)==null?void 0:n.includes("aborted"))||((r=a.message)==null?void 0:r.includes("signal")))&&s&&typeof s=="function"&&s(a.message||"Request failed"),null}finally{Hn.delete(t)}})();return Hn.set(t,i),i};function Ic(){return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}))}function ws(){const t=Ic(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();if(e===0||e===6)return!1;const n=s*60+i,r=9*60+15,a=15*60+30;return n>=r&&n<=a}function bh(){return ws()?"Open":"Closed"}function rx(){if(ws())return 0;const t=Ic(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();let n=new Date(t);return e===6?n.setDate(n.getDate()+2):e===0?n.setDate(n.getDate()+1):s>=15&&(s>15||i>30)&&(n.setDate(n.getDate()+1),n.getDay()===6&&n.setDate(n.getDate()+2)),n.setHours(9,15,0,0),n.getTime()-t.getTime()}function lx(){if(!ws())return 0;const t=Ic(),e=new Date(t);return e.setHours(15,30,0,0),e.getTime()-t.getTime()}function kh(t){if(t<=0)return"Now";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),i=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}h ${s}m`:s>0?`${s}m ${i}s`:`${i}s`}function Ch(){if(ws()){const e=lx();return{event:"close",countdown:kh(e),ms:e}}else{const e=rx();return{event:"open",countdown:kh(e),ms:e}}}let Kn=null;class ax{constructor(){this.subscriptions=new Map,this.timers=new Map,this.inFlight=new Map,this.isPaused=!1,this.isTabVisible=!0,this.isOnline=typeof navigator<"u"?navigator.onLine:!0,this.listeners=new Set,typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isTabVisible=!document.hidden,this.handleStateChange()}),typeof window<"u"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.handleStateChange()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.handleStateChange()}))}handleStateChange(){this.shouldRefresh()?this.resumeAll():this.pauseAll(),this.notifyListeners()}shouldRefresh(){return!this.isPaused&&this.isTabVisible&&this.isOnline&&ws()}isMarketOpen(){return ws()}subscribe(e,s,i=1e3){return this.subscriptions.set(e,{callback:s,interval:i}),this.shouldRefresh()&&this.startTimer(e),this.notifyListeners(),e}unsubscribe(e){this.stopTimer(e),this.subscriptions.delete(e),this.notifyListeners()}startTimer(e){const s=this.subscriptions.get(e);if(!s)return;this.stopTimer(e);const i=setInterval(async()=>{if(!this.inFlight.get(e))if(this.shouldRefresh())try{this.inFlight.set(e,!0),await s.callback()}catch(n){console.error(`Error in auto-refresh callback for ${e}:`,n)}finally{this.inFlight.delete(e)}else this.stopTimer(e)},s.interval);this.timers.set(e,i)}stopTimer(e){const s=this.timers.get(e);s&&(clearInterval(s),this.timers.delete(e))}pauseAll(){this.timers.forEach((e,s)=>{clearInterval(e)}),this.timers.clear()}resumeAll(){this.shouldRefresh()&&this.subscriptions.forEach((e,s)=>{this.timers.has(s)||this.startTimer(s)})}togglePause(){this.isPaused=!this.isPaused,this.handleStateChange()}setPaused(e){this.isPaused!==e&&(this.isPaused=e,this.handleStateChange())}getPaused(){return this.isPaused}getOnline(){return this.isOnline}getActiveCount(){return this.timers.size}getTotalCount(){return this.subscriptions.size}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(s){console.error("Error in refresh manager listener:",s)}})}checkMarketHours(){this.handleStateChange()}}function cp(){return Kn||(Kn=new ax,setInterval(()=>{Kn.checkMarketHours()},3e4)),Kn}function pi(t,e,s=1e3,i=!0){const n=cp(),r=w.useRef(e),[a,o]=w.useState(Date.now());return w.useEffect(()=>{r.current=e},[e]),w.useEffect(()=>{if(!i)return;const c=()=>{r.current(),o(Date.now())};return n.subscribe(t,c,s),()=>{n.unsubscribe(t)}},[t,s,i]),{lastUpdate:a}}function ox(){const t=cp(),[e,s]=w.useState({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()});w.useEffect(()=>{const r=()=>{s({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()})};t.addListener(r);const a=setInterval(r,6e4);return()=>{t.removeListener(r),clearInterval(a)}},[]);const i=w.useCallback(()=>{t.togglePause()},[]),n=w.useCallback(r=>{t.setPaused(r)},[]);return{isPaused:e.isPaused,isOnline:e.isOnline,isMarketOpen:e.isMarketOpen,activeCount:e.activeCount,totalCount:e.totalCount,togglePause:i,setPaused:n}}function vi(t){const[e,s]=w.useState("");return w.useEffect(()=>{const i=()=>{const r=Math.floor((Date.now()-t)/1e3);if(r<2)s("Just now");else if(r<60)s(`${r}s ago`);else if(r<3600){const a=Math.floor(r/60);s(`${a}m ago`)}else{const a=Math.floor(r/3600);s(`${a}h ago`)}};i();const n=setInterval(i,1e3);return()=>clearInterval(n)},[t]),e}const Gn=window.location.origin;function _h({onNavigate:t}){var z,I,G,ne,de,R,te,V;const{showError:e}=tx(),[s,i]=w.useState(null),[n,r]=w.useState(!0),[a,o]=w.useState({gainers:[],losers:[]}),[c,u]=w.useState(null),h=w.useRef({message:"",time:0}),{lastUpdate:d}=pi("dashboard-market",()=>g(),1e4),m=vi(d);w.useEffect(()=>{v()},[]);const x=L=>{const E=Date.now();h.current.message===L&&E-h.current.time<3e4||(h.current={message:L,time:E},e(L))},y=async()=>{const L=await qt(`${Gn}/portfolio/summary`,{},E=>{x(`Error fetching portfolio: ${E}`)});L&&i(L)},g=async()=>{const[L,E]=await Promise.all([qt(`${Gn}/nse_data/top-gainers`,{},D=>{x(`Error fetching NSE data for Top Gainers: ${D}`)}),qt(`${Gn}/nse_data/top-losers`,{},D=>{x(`Error fetching NSE data for Top Losers: ${D}`)})]);o({gainers:(L==null?void 0:L.top_gainers)||[],losers:(E==null?void 0:E.top_losers)||[]})},j=async()=>{try{const L=await U(`${Gn}/nse_data/fii-dii-activity`).catch(()=>null);L&&u(L)}catch(L){console.error("Failed to load FII/DII data:",L)}},v=async()=>{r(!0);try{await Promise.all([y(),g(),j()])}catch(L){console.error("Failed to load dashboard data:",L)}finally{r(!1)}},f=L=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(L||0),p=L=>{if(!L&&L!==0)return"N/A";const E=Number(L);return isNaN(E)?"N/A":`${(E/100).toFixed(0)} Cr`},N=(s==null?void 0:s.wallet_balance)??1e5,S=(s==null?void 0:s.total_invested)??0,_=(s==null?void 0:s.current_value)??0,k=(s==null?void 0:s.total_pnl)??0,C=S>0?(k/S*100).toFixed(2):0;return l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Dashboard"})]}),l.jsx("button",{onClick:v,disabled:n,children:n?"Loading...":"Refresh"})]}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-value",children:f(N)}),l.jsx("div",{className:"stat-card-label",children:"Available Balance"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-value",children:f(S)}),l.jsx("div",{className:"stat-card-label",children:"Total Invested"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-value",children:f(_)}),l.jsx("div",{className:"stat-card-label",children:"Current Value"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsxs("div",{className:"stat-card-header",children:[l.jsx("div",{className:"stat-card-icon green",children:""}),l.jsxs("span",{className:`stat-card-change ${k>=0?"positive":"negative"}`,children:[k>=0?"+":"",C,"%"]})]}),l.jsxs("div",{className:`stat-card-value ${k>=0?"positive":"negative"}`,children:[k>=0?"+":"",f(k)]}),l.jsx("div",{className:"stat-card-label",children:"Total P&L"})]})]}),l.jsxs("div",{className:"dashboard-actions",children:[l.jsx("h3",{children:"Quick Actions"}),l.jsxs("div",{className:"quick-actions-grid",children:[l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.trade"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Trade Stocks"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"View Portfolio"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.gainers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Gainers"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.losers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Losers"})]})]})]}),c&&l.jsxs("div",{className:"fii-dii-container",children:[l.jsxs("h3",{children:[" FII/DII Activity ",c.date&&l.jsxs("span",{className:"fii-dii-date",children:["(",c.date,")"]})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:p((z=c.fii)==null?void 0:z.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:p((I=c.fii)==null?void 0:I.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((G=c.fii)==null?void 0:G.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:p((ne=c.fii)==null?void 0:ne.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:p((de=c.dii)==null?void 0:de.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:p((R=c.dii)==null?void 0:R.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((te=c.dii)==null?void 0:te.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:p((V=c.dii)==null?void 0:V.netValue)})]})]})]})]})]}),l.jsxs("div",{className:"last-updated",children:[l.jsxs("svg",{className:"last-updated-icon",fill:"currentColor",viewBox:"0 0 16 16",children:[l.jsx("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),l.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),l.jsxs("span",{className:"last-updated-text",children:["Market data updated ",m]})]}),l.jsxs("div",{className:"dashboard-market-grid",children:[l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Gainers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.gainers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[a.gainers.slice(0,5).map((L,E)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:L.symbol}),l.jsxs("span",{className:"market-price",children:["",Number(L.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change positive",children:["+",Number(L.pChange||0).toFixed(2),"%"]})]},L.symbol||E)),a.gainers.length===0&&l.jsx("div",{className:"loading",children:"No data available"})]})]}),l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Losers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.losers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[a.losers.slice(0,5).map((L,E)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:L.symbol}),l.jsxs("span",{className:"market-price",children:["",Number(L.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change negative",children:[Number(L.pChange||0).toFixed(2),"%"]})]},L.symbol||E)),a.losers.length===0&&l.jsx("div",{className:"loading",children:"No data available"})]})]})]})]})}function Z(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function ms(t,e){return t.width===e.width&&t.height===e.height}var cx=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){s._observers=s._observers.filter(function(n){return n!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function ux(t){return new cx(t)}var hx=function(){function t(e,s,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Z({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(r){return r},this._allowResizeObserver=(n=i==null?void 0:i.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Z({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Z(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;ms(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,i=Z(this._transformBitmapSize(e,this._canvasElementClientSize)),n=ms(this.bitmapSize,i)?null:i;s===null&&n===null||s!==null&&n!==null&&ms(s,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(s,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}fx().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=Eh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=ux(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var i=Eh(this._canvasElement);if(i!==null){var n=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:i.devicePixelRatio,r=this._canvasElement.getClientRects(),a=r[0]!==void 0?mx(r[0],n):Z({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var i=s.find(function(a){return a.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],r=Z({width:n.inlineSize,height:n.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function dx(t,e){return new hx(t,e.transform,e.options)}function Eh(t){return t.ownerDocument.defaultView}function fx(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function mx(t,e){return Z({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var px=function(){function t(e,s,i){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ns(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var n=t.canvasElement.getContext("2d",e);return n===null?null:new px(n,s,i)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const vx={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},gx={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},yx={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},xx={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},wx={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Nx={color:"#26a69a",base:0},up={color:"#2196f3"},hp={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Lh,Kr;function js(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function dp(t,e,s,i){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(s,e+n),t.lineTo(i,e+n),t.stroke()}function ts(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Pe(t){if(t===void 0)throw new Error("Value is undefined");return t}function M(t){if(t===null)throw new Error("Value is null");return t}function Us(t){return M(Pe(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Lh||(Lh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Kr||(Kr={}));const Mh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Ge(t){return t<0?0:t>255?255:Math.round(t)||0}function fp(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const jx=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Sx=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,bx=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,kx=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function fn(t){(t=t.toLowerCase())in Mh&&(t=Mh[t]);{const e=kx.exec(t)||bx.exec(t);if(e)return[Ge(parseInt(e[1],10)),Ge(parseInt(e[2],10)),Ge(parseInt(e[3],10)),fp(e.length<5?1:parseFloat(e[4]))]}{const e=Sx.exec(t);if(e)return[Ge(parseInt(e[1],16)),Ge(parseInt(e[2],16)),Ge(parseInt(e[3],16)),1]}{const e=jx.exec(t);if(e)return[Ge(17*parseInt(e[1],16)),Ge(17*parseInt(e[2],16)),Ge(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function mp(t){return .199*t[0]+.687*t[1]+.114*t[2]}function ml(t){const e=fn(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:mp(e)>160?"black":"white"}}class he{constructor(){this.h=[]}l(e,s,i){const n={o:e,_:s,u:i===!0};this.h.push(n)}v(e){const s=this.h.findIndex(i=>e===i.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,i){const n=[...this.h];this.h=this.h.filter(r=>!r.u),n.forEach(r=>r.o(e,s,i))}M(){return this.h.length>0}S(){this.h=[]}}function ot(t,...e){for(const s of e)for(const i in s)s[i]!==void 0&&Object.prototype.hasOwnProperty.call(s,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof s[i]!="object"||t[i]===void 0||Array.isArray(s[i])?t[i]=s[i]:ot(t[i],s[i]));return t}function vt(t){return typeof t=="number"&&isFinite(t)}function mn(t){return typeof t=="number"&&t%1==0}function kn(t){return typeof t=="string"}function Xn(t){return typeof t=="boolean"}function bt(t){const e=t;if(!e||typeof e!="object")return e;let s,i,n;for(i in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(n=e[i],s[i]=n&&typeof n=="object"?bt(n):n);return s}function Cx(t){return t!==null}function pn(t){return t===null?void 0:t}const Dc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function li(t,e,s){return e===void 0&&(e=Dc),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class _x{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),i=this.H();return e.P===s&&e.D===i||(e.P=s,e.D=i,e.R=li(s,i),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Fc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,i){this.Y.forEach(n=>{n.X(e,s,i)})}}class ct{X(e,s,i){e.useBitmapCoordinateSpace(n=>this.K(n,s,i))}}class Ex extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const n=this.G.tt,r=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let u=n.to-1;u>=n.from;--u){const h=r.it[u],d=Math.round(h.nt*s)+a,m=h.st*i,x=c*i+a;e.moveTo(d,m),e.arc(d,m,x,0,2*Math.PI)}e.fill()};r.et>0&&(e.fillStyle=r.rt,o(r.ht+r.et)),e.fillStyle=r.lt,o(r.ht)}}function Lx(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Mx={from:0,to:1};class Px{constructor(e,s){this.ut=new Fc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(Lx),this.ct=this.dt.map(i=>{const n=new Ex;return n.J(i),n}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),i=this.vt.xt(),n=this.F.St();s.forEach((r,a)=>{var o;const c=this.dt[a],u=r.kt(i);if(e||u===null||!r.yt())return void(c.tt=null);const h=M(r.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=r.Dt().Rt(u._t,h.Vt),c.rt=(o=u.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/r.Dt().At()),c.it[0].ot=i,c.it[0].nt=n.It(i),c.tt=Mx})}}class Tx extends ct{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const r=this.zt.Lt.yt,a=this.zt.Et.yt;if(!r&&!a)return;const o=Math.round(this.zt.nt*i),c=Math.round(this.zt.st*n);e.lineCap="butt",r&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*i),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,js(e,this.zt.Lt.Nt),function(u,h,d,m){u.beginPath();const x=u.lineWidth%2?.5:0;u.moveTo(h+x,d),u.lineTo(h+x,m),u.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*n),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,js(e,this.zt.Et.Nt),dp(e,c,0,s.width))}}class Rx{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new Tx(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=M(this.jt.Ht()),i=s.$t().W().crosshair,n=this.Ft;if(i.mode===2)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=e&&this.jt.Ut(s),n.Lt.yt=e&&this.jt.qt(),n.Et.et=i.horzLine.width,n.Et.Nt=i.horzLine.style,n.Et.V=i.horzLine.color,n.Lt.et=i.vertLine.width,n.Lt.Nt=i.vertLine.style,n.Lt.V=i.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Zt()}}function zx(t,e,s,i,n,r){t.fillRect(e+r,s,i-2*r,r),t.fillRect(e+r,s+n-r,i-2*r,r),t.fillRect(e,s,r,n),t.fillRect(e+i-r,s,r,n)}function pl(t,e,s,i,n,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,s,i,n),t.restore()}function Ph(t,e,s,i,n,r){t.beginPath(),t.roundRect?t.roundRect(e,s,i,n,r):(t.lineTo(e+i-r[1],s),r[1]!==0&&t.arcTo(e+i,s,e+i,s+r[1],r[1]),t.lineTo(e+i,s+n-r[2]),r[2]!==0&&t.arcTo(e+i,s+n,e+i-r[2],s+n,r[2]),t.lineTo(e+r[3],s+n),r[3]!==0&&t.arcTo(e,s+n,e,s+n-r[3],r[3]),t.lineTo(e,s+r[0]),r[0]!==0&&t.arcTo(e,s,e+r[0],s,r[0]))}function Th(t,e,s,i,n,r,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===r)return Ph(t,e,s,i,n,o),t.fillStyle=r,t.fill(),void t.restore();const u=a/2;var h;Ph(t,e+u,s+u,i-a,n-a,(h=-u,o.map(d=>d===0?d:d+h))),r!=="transparent"&&(t.fillStyle=r,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function pp(t,e,s,i,n,r,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,n);o.addColorStop(0,r),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,i,n),t.restore()}class Rh{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,i,n){if(!this.zt.yt||this.zt.Kt.length===0)return;const r=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const h=this.Gt(c,s,i,n),d=h.Jt;return h.Qt?Th(u,d.ti,d.ii,d.ni,d.si,a,d.ei,[d.ht,0,0,d.ht],a):Th(u,d.ri,d.ii,d.ni,d.si,a,d.ei,[0,d.ht,d.ht,0],a),this.zt.hi&&(u.fillStyle=r,u.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(h.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=r,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,i,n){var r;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:h}=e,d=this.zt.hi||!this.zt.mi?s.T:0,m=this.zt.bi?s.C:0,x=s.L+this.Xt.wi,y=s.B+this.Xt.gi,g=s.A,j=s.I,v=this.zt.Kt,f=s.P,p=i.Mi(a,v),N=Math.ceil(i.xi(a,v)),S=f+x+y,_=s.C+g+j+N+d,k=Math.max(1,Math.floor(h));let C=Math.round(S*h);C%2!=k%2&&(C+=1);const z=m>0?Math.max(1,Math.floor(m*u)):0,I=Math.round(_*u),G=Math.round(d*u),ne=(r=this.Xt.Si)!==null&&r!==void 0?r:this.Xt.ki,de=Math.round(ne*h)-Math.floor(.5*h),R=Math.floor(de+k/2-C/2),te=R+C,V=n==="right",L=V?c.width-m:m,E=V?o.width-z:z;let D,F,H;return V?(D=E-I,F=E-G,H=L-d-g-m):(D=E+I,F=E+G,H=L+d+g),{Qt:V,Jt:{ii:R,li:de,ci:te,ni:I,si:C,ht:2*u,ei:z,ti:D,ri:E,ai:F,oi:k,ui:o.width},di:{ii:R/h,ci:te/h,fi:H,pi:p}}}}class vl{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||Rh)(this.Ci,this.yi),this.Ri=new(e||Rh)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class $x extends vl{constructor(e,s,i){super(),this.jt=e,this.Li=s,this.Ei=i}zi(e,s,i){if(e.yt=!1,this.jt.W().mode===2)return;const n=this.jt.W().horzLine;if(!n.labelVisible)return;const r=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||r===null)return;const a=ml(n.labelBackgroundColor);i.t=a.t,e.V=a.i;const o=2/12*this.Li.P();i.wi=o,i.gi=o;const c=this.Ei(this.Li);i.ki=c.ki,e.Kt=this.Li.Fi(c._t,r),e.yt=!0}}const Ix=/[1-9]/g;class vp{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=e.useMediaCoordinateSpace(({context:m})=>(m.font=s.R,Math.round(s.Wi.xi(m,M(this.zt).Kt,Ix))));if(i<=0)return;const n=s.ji,r=i+2*n,a=r/2,o=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+r>o&&(c-=Math.abs(o-(u+r)),u=Math.floor(c-a)+.5);const h=u+r,d=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:m,horizontalPixelRatio:x,verticalPixelRatio:y})=>{const g=M(this.zt);m.fillStyle=g.t;const j=Math.round(u*x),v=Math.round(0*y),f=Math.round(h*x),p=Math.round(d*y),N=Math.round(2*x);if(m.beginPath(),m.moveTo(j,v),m.lineTo(j,p-N),m.arcTo(j,p,j+N,p,N),m.lineTo(f-N,p),m.arcTo(f,p,f,p-N,N),m.lineTo(f,v),m.fill(),g.hi){const S=Math.round(g.ki*x),_=v,k=Math.round((_+s.T)*y);m.fillStyle=g.V;const C=Math.max(1,Math.floor(x)),z=Math.floor(.5*x);m.fillRect(S-z,_,C,k-_)}}),e.useMediaCoordinateSpace(({context:m})=>{const x=M(this.zt),y=0+s.C+s.T+s.L+s.P/2;m.font=s.R,m.textAlign="left",m.textBaseline="middle",m.fillStyle=x.V;const g=s.Wi.Mi(m,"Apr0");m.translate(u+n,y+g),m.fillText(x.Kt,0,0)})}}class Dx{constructor(e,s,i){this.ft=!0,this.Wt=new vp,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const i=this.$i.St();if(i.Ni())return;e.Hi=i.Hi();const n=this.Ei();if(n===null)return;e.ki=n.ki;const r=i.Ui(this.vt.xt());e.Kt=i.qi(M(r)),e.yt=!0;const a=ml(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=i.W().ticksVisible}}class Oc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Wi;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Wi||(Wi={}));class Fx extends Oc{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new Px(e,this),this.fn=((n,r)=>a=>{const o=r(),c=n();if(a===M(this.tn).vn())return{_t:c,ki:o};{const u=M(a.Ct());return{_t:a.pn(o,u),ki:o}}})(()=>this.nn,()=>this.an);const i=((n,r)=>()=>{const a=this.$i.St().mn(n()),o=r();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new Dx(this,e,i),this.wn=new Rx(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,i){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const i=[];return this.tn===e&&i.push(this.Dn(this.rn,s,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,i){this.Bn(e,s,i)&&this.Vn()}Bn(e,s,i){const n=this.ln,r=this.an,a=this.nn,o=this.sn,c=this.tn,u=this.On(i);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=i;const h=u!==null?u.Ct():null;return u!==null&&h!==null?(this.nn=s,this.an=u.Rt(s,h)):(this.nn=NaN,this.an=NaN),n!==this.ln||r!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(i=>i.In().An()).filter(Cx),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,i){let n=e.get(s);return n===void 0&&(n=new $x(this,s,i),e.set(s,n)),n}}function gl(t){return t==="left"||t==="right"}class Ne{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const i=function(n,r){return n===void 0?r:{Fn:Math.max(n.Fn,r.Fn),Wn:n.Wn||r.Wn}}(this.zn.get(e),s);this.zn.set(e,i)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,i)=>{this.Nn(i,s)})}static ss(){return new Ne(2)}static es(){return new Ne(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const zh=".";function kt(t,e){if(!vt(t))return"n/a";if(!mn(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class yl{constructor(e,s){if(s||(s=1),vt(e)&&mn(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let i=Math.floor(e),n="";const r=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-i*s).toFixed(this._s);a>=s&&(a-=s,i+=1),n=zh+kt(+a.toFixed(this._s)*this.rs,r)}else i=Math.round(i*s)/s,r>0&&(n=zh+kt(0,r));return i.toFixed(0)+n}}class gp extends yl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Ox{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const i=Math.pow(10,this.us);return s=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}function yp(t,e,s,i,n,r,a){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[i.from];let d=r(t,h),m=h;if(i.to-i.from<2){const x=n/2;o.beginPath();const y={nt:h.nt-x,st:h.st},g={nt:h.nt+x,st:h.st};o.moveTo(y.nt*c,y.st*u),o.lineTo(g.nt*c,g.st*u),a(t,d,y,g)}else{const x=(g,j)=>{a(t,d,m,j),o.beginPath(),d=g,m=j};let y=m;o.beginPath(),o.moveTo(h.nt*c,h.st*u);for(let g=i.from+1;g<i.to;++g){y=e[g];const j=r(t,y);switch(s){case 0:o.lineTo(y.nt*c,y.st*u);break;case 1:o.lineTo(y.nt*c,e[g-1].st*u),j!==d&&(x(j,y),o.lineTo(y.nt*c,e[g-1].st*u)),o.lineTo(y.nt*c,y.st*u);break;case 2:{const[v,f]=Vx(e,g-1,g);o.bezierCurveTo(v.nt*c,v.st*u,f.nt*c,f.st*u,y.nt*c,y.st*u);break}}s!==1&&j!==d&&(x(j,y),o.moveTo(y.nt*c,y.st*u))}(m!==y||m===y&&s===1)&&a(t,d,m,y)}}const $h=6;function la(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Ih(t,e){return{nt:t.nt/e,st:t.st/e}}function Vx(t,e,s){const i=Math.max(0,e-1),n=Math.min(t.length-1,s+1);var r,a;return[(r=t[e],a=Ih(la(t[s],t[i]),$h),{nt:r.nt+a.nt,st:r.st+a.st}),la(t[s],Ih(la(t[n],t[e]),$h))]}function Bx(t,e,s,i,n){const{context:r,horizontalPixelRatio:a,verticalPixelRatio:o}=e;r.lineTo(n.nt*a,t*o),r.lineTo(i.nt*a,t*o),r.closePath(),r.fillStyle=s,r.fill()}class xp extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:i,tt:n,ds:r,et:a,Nt:o,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(n===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=a,js(h,o),h.lineWidth=1,yp(e,i,c,n,r,this.bs.bind(this),Bx.bind(null,u))}}function Co(t,e,s){return Math.min(Math.max(t,e),s)}function Qn(t,e,s){return e-t<=s}function wp(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Vc{ws(e,s){const i=this.gs,{Ms:n,xs:r,Ss:a,ks:o,ys:c,vs:u}=s;if(this.Cs===void 0||i===void 0||i.Ms!==n||i.xs!==r||i.Ss!==a||i.ks!==o||i.vs!==u||i.ys!==c){const h=e.context.createLinearGradient(0,0,0,c);if(h.addColorStop(0,n),u!=null){const d=Co(u*e.verticalPixelRatio/c,0,1);h.addColorStop(d,r),h.addColorStop(d,a)}h.addColorStop(1,o),this.Cs=h,this.gs=s}return this.Cs}}class Ax extends xp{constructor(){super(...arguments),this.Ts=new Vc}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function Wx(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class Np extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:i,ds:n,fs:r,et:a,Nt:o,Ds:c}=this.G;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,js(u,o),u.lineJoin="round";const h=this.Vs.bind(this);r!==void 0&&yp(e,s,r,i,n,h,Wx),c&&function(d,m,x,y,g){const{horizontalPixelRatio:j,verticalPixelRatio:v,context:f}=d;let p=null;const N=Math.max(1,Math.floor(j))%2/2,S=x*v+N;for(let _=y.to-1;_>=y.from;--_){const k=m[_];if(k){const C=g(d,k);C!==p&&(f.beginPath(),p!==null&&f.fill(),f.fillStyle=C,p=C);const z=Math.round(k.nt*j)+N,I=k.st*v;f.moveTo(z,I),f.arc(z,I,S,0,2*Math.PI)}}f.fill()}(e,s,c,i,h)}}class jp extends Np{Vs(e,s){return s.lt}}function Sp(t,e,s,i,n=0,r=e.length){let a=r-n;for(;0<a;){const o=a>>1,c=n+o;i(e[c],s)===t?(n=c+1,a-=o+1):a=o}return n}const Cn=Sp.bind(null,!0),bp=Sp.bind(null,!1);function Ux(t,e){return t.ot<e}function Hx(t,e){return e<t.ot}function kp(t,e,s){const i=e.Os(),n=e.ui(),r=Cn(t,i,Ux),a=bp(t,n,Hx);if(!s)return{from:r,to:a};let o=r,c=a;return r>0&&r<t.length&&t[r].ot>=i&&(o=r-1),a>0&&a<t.length&&t[a-1].ot<=n&&(c=a+1),{from:o,to:c}}class Bc{constructor(e,s,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=i}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const i=s.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Ct();n!==null&&(this.Ls=kp(this.zs,i,this.Fs),this.Gs(e,s,n.Vt),this.Js())}}class xl extends Bc{constructor(e,s){super(e,s,!0)}Gs(e,s,i){s.Qs(this.zs,pn(this.Ls)),e.te(this.zs,i,pn(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const i=s.Vt[3];return this.se(s.ee,i,e)})}}class Kx extends xl{constructor(e,s){super(e,s),this.js=new Fc,this.re=new Ax,this.he=new jp,this.js.Z([this.re,this.he])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class Gx extends ct{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let n=null;const r=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];n!==o.ce&&(e.fillStyle=o.ce,n=o.ce);const c=Math.floor(.5*this.oe),u=Math.round(o.nt*s),h=u-c,d=this.oe,m=h+d-1,x=Math.min(o.de,o.fe),y=Math.max(o.de,o.fe),g=Math.round(x*i)-c,j=Math.round(y*i)+c,v=Math.max(j-g,this.oe);e.fillRect(h,g,d,v);const f=Math.ceil(1.5*this.ae);if(r){if(this.zt.ve){const _=u-f;let k=Math.max(g,Math.round(o.pe*i)-c),C=k+d-1;C>g+v-1&&(C=g+v-1,k=C-d+1),e.fillRect(_,k,h-_,C-k+1)}const p=u+f;let N=Math.max(g,Math.round(o.me*i)-c),S=N+d-1;S>g+v-1&&(S=g+v-1,N=S-d+1),e.fillRect(m+1,N,p-m,S-N+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(i,n){return Math.floor(.3*i*n)}(M(this.zt).le,e)))}}class Cp extends Bc{constructor(e,s){super(e,s,!1)}Gs(e,s,i){s.Qs(this.zs,pn(this.Ls)),e.be(this.zs,i,pn(this.Ls))}we(e,s,i){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class Xx extends Cp{constructor(){super(...arguments),this.js=new Gx}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class Qx extends xp{constructor(){super(...arguments),this.Ts=new Vc}bs(e,s){const i=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:i.vs})}}class Jx extends Np{constructor(){super(...arguments),this.Pe=new Vc}Vs(e,s){const i=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:i.vs})}}class Yx extends xl{constructor(e,s){super(e,s),this.js=new Fc,this.Ve=new Qx,this.Oe=new Jx,this.js.Z([this.Ve,this.Oe])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),i=this.Es.Dt().Rt(s.baseValue.price,e.Vt),n=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:i,ps:!1,tt:this.Ls,ds:n}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:n})}}class qx extends ct{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(r,a){if(r>=2.5&&r<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),c=Math.floor(r*o*a),u=Math.floor(r*a),h=Math.min(c,u);return Math.max(Math.floor(a),h)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(e,i,this.zt.tt),this.zt._i&&this.Ie(e,i,this.zt.tt);const n=this.ze(s);(!this.zt._i||this.ae>2*n)&&this.Le(e,i,this.zt.tt)}Ae(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(r),Math.floor(this.zt.le*r));c=Math.max(Math.floor(r),Math.min(c,this.ae));const u=Math.floor(.5*c);let h=null;for(let d=i.from;d<i.to;d++){const m=s[d];m.Ee!==o&&(n.fillStyle=m.Ee,o=m.Ee);const x=Math.round(Math.min(m.pe,m.me)*a),y=Math.round(Math.max(m.pe,m.me)*a),g=Math.round(m.de*a),j=Math.round(m.fe*a);let v=Math.round(r*m.nt)-u;const f=v+c-1;h!==null&&(v=Math.max(h+1,v),v=Math.min(v,f));const p=f-v+1;n.fillRect(v,g,p,x-g),n.fillRect(v,y+1,p,j-y),h=f}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(e),s);return this.ae<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}Ie(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="";const c=this.ze(r);let u=null;for(let h=i.from;h<i.to;h++){const d=s[h];d.Ne!==o&&(n.fillStyle=d.Ne,o=d.Ne);let m=Math.round(d.nt*r)-Math.floor(.5*this.ae);const x=m+this.ae-1,y=Math.round(Math.min(d.pe,d.me)*a),g=Math.round(Math.max(d.pe,d.me)*a);if(u!==null&&(m=Math.max(u+1,m),m=Math.min(m,x)),this.zt.le*r>2*c)zx(n,m,y,x-m+1,g-y+1,c);else{const j=x-m+1;n.fillRect(m,y,j,g-y+1)}u=x}}Le(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:a}=e;let o="";const c=this.ze(r);for(let u=i.from;u<i.to;u++){const h=s[u];let d=Math.round(Math.min(h.pe,h.me)*a),m=Math.round(Math.max(h.pe,h.me)*a),x=Math.round(h.nt*r)-Math.floor(.5*this.ae),y=x+this.ae-1;if(h.ce!==o){const g=h.ce;n.fillStyle=g,o=g}this.zt._i&&(x+=c,d+=c,y-=c,m-=c),d>m||n.fillRect(x,d,y-x+1,m-d+1)}}}class Zx extends Cp{constructor(){super(...arguments),this.js=new qx}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class ew{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,i){this.Fe.draw(e,this.Li,s,i)}}class aa extends Bc{constructor(e,s,i){super(e,s,!1),this.wn=i,this.js=new ew(this.wn.renderer(),n=>{const r=e.Ct();return r===null?null:e.Dt().Rt(n,r.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,pn(this.Ls))}Js(){this.wn.update({bars:this.zs.map(tw),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function tw(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class sw extends ct{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const n=Math.max(1,Math.floor(i)),r=Math.round(this.zt.Ye*i)-Math.floor(n/2),a=r+n;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],u=this.Ue[o-this.zt.tt.from],h=Math.round(c.st*i);let d,m;e.fillStyle=c.ce,h<=r?(d=h,m=a):(d=r,m=h-Math.floor(n/2)+n),e.fillRect(u.Os,d,u.ui-u.Os+1,m-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.zt.it[r],o=Math.round(a.nt*e);let c,u;if(i%2){const h=(i-1)/2;c=o-h,u=o+h}else{const h=i/2;c=o-h,u=o+h-1}this.Ue[r-this.zt.tt.from]={Os:c,ui:u,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let r=this.zt.tt.from+1;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from],o=this.Ue[r-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let n=Math.ceil(this.zt.le*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;n=Math.min(o,n)}if(s>0&&n<4)for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const a=this.Ue[r-this.zt.tt.from];a.ui-a.Os+1>n&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class iw extends xl{constructor(){super(...arguments),this.js=new sw}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,M(this.Es.Ct()).Vt)};this.js.J(e)}}class nw extends xl{constructor(){super(...arguments),this.js=new jp}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const rw=/[2-9]/g;class vn{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,i){return this.sr(e,s,i).width}Mi(e,s,i){const n=this.sr(e,s,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}sr(e,s,i){const n=i||rw,r=String(s).replace(n,"0");if(this.tr.has(r))return Pe(this.tr.get(r)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(r);return e.restore(),a.width===0&&s.length||(this.tr.set(r,{er:a,rr:this.Ge}),this.Qe[this.Ge]=r,this.Ke++,this.Ge++),a}}class lw{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,i){this.hr=e,this.k=s,this.lr=i}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class _p{constructor(e,s,i){this.ur=e,this.ar=new vn(50),this.cr=s,this.F=i,this.j=-1,this.Wt=new lw(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const i=e.mr(s);if(i==="overlay")return null;const n=this.F.br();return n.P!==this.j&&(this.j=n.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),n,i),this.Wt}}class aw extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:n,et:r,gr:a}=this.zt;return s>=n-r-7&&s<=n+r+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null||this.zt.yt===!1)return;const r=Math.round(this.zt.st*n);r<0||r>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*i),js(e,this.zt.Nt),dp(e,r,0,s.width))}}class Ac{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new aw,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class ow extends Ac{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const n=this.Es.Ct();n!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(n.Vt,n.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class cw extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){const n=this.zt;if(n===null)return;const r=Math.max(1,Math.floor(s)),a=r%2/2,o=Math.round(n.Xe.x*s)+a,c=n.Xe.y*i;e.fillStyle=n.Tr,e.beginPath();const u=Math.max(2,1.5*n.Pr)*s;e.arc(o,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=n.Rr,e.beginPath(),e.arc(o,c,n.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=n.Dr,e.beginPath(),e.arc(o,c,n.ht*s+r/2,0,2*Math.PI,!1),e.stroke()}}const uw=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Dh(t,e,s,i){return function(n,r){if(n==="transparent")return n;const a=fn(n),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${r*o})`}(t,s+(i-s)*e)}function Fh(t,e){const s=t%2600/2600;let i;for(const c of uw)if(s>=c.Vr&&s<=c.Or){i=c;break}ts(i!==void 0,"Last price animation internal logic error");const n=(s-i.Vr)/(i.Or-i.Vr);return{Rr:Dh(e,n,i.Ir,i.zr),Dr:Dh(e,n,i.Lr,i.Er),ht:(r=n,a=i.Br,o=i.Ar,a+(o-a)*r)};var r,a,o}class hw{constructor(e){this.Wt=new cw,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),i=this.jr.Ct();if(s===null||i===null)return;const n=this.jr.Zr(!0);if(n.Xr||!s.Kr(n.ee))return;const r={x:e.It(n.ee),y:this.jr.Dt().Rt(n._t,i.Vt)},a=n.V,o=this.jr.W().lineWidth,c=Fh(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:r})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Fh(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ui(t,e){return wp(Math.min(Math.max(t,12),30)*e)}function gn(t,e){switch(t){case"arrowDown":case"arrowUp":return Ui(e,1);case"circle":return Ui(e,.8);case"square":return Ui(e,.7)}}function Ep(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Ui(t,1))}function Oh(t){return Math.max(Ui(t,.1),3)}function Vh(t,e,s){return e?t:s?Math.ceil(t/2):0}function Lp(t,e,s,i,n){const r=gn("square",s),a=(r-1)/2,o=t-a,c=e-a;return i>=o&&i<=o+r&&n>=c&&n<=c+r}function Bh(t,e,s,i){const n=(gn("arrowUp",i)-1)/2*s.Jr,r=(wp(i/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st-n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st+n),e.lineTo(s.nt-r,s.st+n),e.lineTo(s.nt-r,s.st)):(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st+n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st-n),e.lineTo(s.nt-r,s.st-n),e.lineTo(s.nt-r,s.st)),e.fill()}function dw(t,e,s,i,n,r){return Lp(e,s,i,n,r)}class fw extends ct{constructor(){super(...arguments),this.zt=null,this.ar=new vn,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=li(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const n=this.zt.it[i];if(pw(n,e,s))return{Mr:n.th,gr:n.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i},n,r){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),mw(o,e,s,i)}}}}function mw(t,e,s,i){e.fillStyle=t.V,t.Kt!==void 0&&function(n,r,a,o,c,u){n.save(),n.scale(c,u),n.fillText(r,a,o),n.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,i),function(n,r,a){if(n.Ks!==0){switch(n.nh){case"arrowDown":return void Bh(!1,r,a,n.Ks);case"arrowUp":return void Bh(!0,r,a,n.Ks);case"circle":return void function(o,c,u){const h=(gn("circle",u)-1)/2;o.beginPath(),o.arc(c.nt,c.st,h*c.Jr,0,2*Math.PI,!1),o.fill()}(r,a,n.Ks);case"square":return void function(o,c,u){const h=gn("square",u),d=(h-1)*c.Jr/2,m=c.nt-d,x=c.st-d;o.fillRect(m,x,h*c.Jr,h*c.Jr)}(r,a,n.Ks)}n.nh}}(t,e,function(n,r,a){const o=Math.max(1,Math.floor(r))%2/2;return{nt:Math.round(n.nt*r)+o,st:n.st*a,Jr:r}}(t,s,i))}function pw(t,e,s){return!(t.Kt===void 0||!function(i,n,r,a,o,c){const u=a/2;return o>=i&&o<=i+r&&c>=n-u&&c<=n+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(i,n,r){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return dw(0,i.nt,i.st,i.Ks,n,r);case"circle":return function(a,o,c,u,h){const d=2+gn("circle",c)/2,m=a-u,x=o-h;return Math.sqrt(m*m+x*x)<=d}(i.nt,i.st,i.Ks,n,r);case"square":return Lp(i.nt,i.st,i.Ks,n,r)}}(t,e,s)}function vw(t,e,s,i,n,r,a,o,c){const u=vt(s)?s:s.Se,h=vt(s)?s:s.Me,d=vt(s)?s:s.xe,m=vt(e.size)?Math.max(e.size,0):1,x=Ep(o.le())*m,y=x/2;switch(t.Ks=x,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+y+r+.6*n));case"aboveBar":return t.st=a.Rt(h,c)-y-i.sh,t.Kt!==void 0&&(t.Kt.st=t.st-y-.6*n,i.sh+=1.2*n),void(i.sh+=x+r);case"belowBar":return t.st=a.Rt(d,c)+y+i.eh,t.Kt!==void 0&&(t.Kt.st=t.st+y+r+.6*n,i.eh+=1.2*n),void(i.eh+=x+r)}e.position}class gw{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new fw,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=Oh(e),i=1.5*Ep(e)+2*s,n=this.fh();this.ah={above:Vh(i,n.aboveBar,n.inBar),below:Vh(i,n.belowBar,n.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const n=this.$i.W().layout;this.zt.tt=null;const r=s.Xs();if(r===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=Oh(s.le()),u={sh:c,eh:c};this.zt.tt=kp(this.zt.it,r,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=i[h];d.time!==o&&(u.sh=c,u.eh=c,o=d.time);const m=this.zt.it[h];m.nt=s.It(d.time),d.text!==void 0&&d.text.length>0&&(m.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const x=this.jr.ph(d.time);x!==null&&vw(m,d,x,u,n.fontSize,c,e,s,a.Vt)}this.ft=!1}}class yw extends Ac{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(s.priceLineSource===0);i.Xr||(e.yt=!0,e.st=i.ki,e.V=this.Es.mh(i.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class xw extends vl{constructor(e){super(),this.jt=e}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.jt;if(!n.yt())return;const r=n.W(),a=r.lastValueVisible,o=n.bh()!=="",c=r.seriesLastValueMode===0,u=n.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(u,a,o,c),s.yt=s.Kt.length>0);const h=n.mh(u.V),d=ml(h);i.t=d.t,i.ki=u.ki,s.Ot=n.$t().Bt(u.ki/n.Dt().At()),e.Ot=h,e.V=d.i,s.V=d.i}gh(e,s,i,n){let r="";const a=this.jt.bh();return i&&a.length!==0&&(r+=`${a} `),s&&n&&(r+=this.jt.Dt().Mh()?e.xh:e.Sh),r.trim()}wh(e,s,i){return s?i?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Ah(t,e,s,i){const n=Number.isFinite(e),r=Number.isFinite(s);return n&&r?t(e,s):n||r?n?e:s:i}class Oe{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Oe(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Oe(Ah(Math.min,this.Ph(),e.Ph(),-1/0),Ah(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!vt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let i=this.yh-s,n=this.kh-s;i*=e,n*=e,this.yh=s+i,this.kh=s+n}Oh(e){vt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Oe(e.minValue,e.maxValue)}}class Gr{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Gr(Oe.Ah(e.priceRange),e.margins)}}class ww extends Ac{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const i=this.Nh.Fh();i!==null&&(e.yt=!0,e.st=i,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class Nw extends vl{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.Nh.W(),r=n.axisLabelVisible,a=n.title!=="",o=this.jr;if(!r||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=n.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(n.price),e.yt=!0;const u=ml(n.axisLabelColor||n.color);i.t=u.t;const h=n.axisLabelTextColor||u.i;e.V=h,s.V=h,i.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class jw{constructor(e,s){this.jr=e,this.cn=s,this.jh=new ww(e,this),this.ur=new Nw(e,this),this.Hh=new _p(this.ur,e,e.$t())}$h(e){ot(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const i=e.Ct();return i===null?null:s.Rt(this.cn.price,i.Vt)}}class Sw extends Oc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const bw={Bar:(t,e,s,i)=>{var n;const r=e.upColor,a=e.downColor,o=M(t(s,i)),c=Us(o.Vt[0])<=Us(o.Vt[3]);return{ce:(n=o.V)!==null&&n!==void 0?n:c?r:a}},Candlestick:(t,e,s,i)=>{var n,r,a;const o=e.upColor,c=e.downColor,u=e.borderUpColor,h=e.borderDownColor,d=e.wickUpColor,m=e.wickDownColor,x=M(t(s,i)),y=Us(x.Vt[0])<=Us(x.Vt[3]);return{ce:(n=x.V)!==null&&n!==void 0?n:y?o:c,Ne:(r=x.Ot)!==null&&r!==void 0?r:y?u:h,Ee:(a=x.Xh)!==null&&a!==void 0?a:y?d:m}},Custom:(t,e,s,i)=>{var n;return{ce:(n=M(t(s,i)).V)!==null&&n!==void 0?n:e.color}},Area:(t,e,s,i)=>{var n,r,a,o;const c=M(t(s,i));return{ce:(n=c.lt)!==null&&n!==void 0?n:e.lineColor,lt:(r=c.lt)!==null&&r!==void 0?r:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,i)=>{var n,r,a,o,c,u;const h=M(t(s,i));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(n=h.Re)!==null&&n!==void 0?n:e.topLineColor,De:(r=h.De)!==null&&r!==void 0?r:e.bottomLineColor,ke:(a=h.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=h.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=h.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=h.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,i)=>{var n,r;const a=M(t(s,i));return{ce:(n=a.V)!==null&&n!==void 0?n:e.color,lt:(r=a.V)!==null&&r!==void 0?r:e.color}},Histogram:(t,e,s,i)=>{var n;return{ce:(n=M(t(s,i)).V)!==null&&n!==void 0?n:e.color}}};class kw{constructor(e){this.Kh=(s,i)=>i!==void 0?i.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=bw[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var Wh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Wh||(Wh={}));const Dt=30;class Cw{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const i=this.hl(e,s);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(e,s,i){if(this.Ni())return null;let n=null;for(const r of i)n=Jn(n,this._l(e,s,r));return n}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const i=this.ul(e);if(i===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return i}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return Cn(this.tl,e,(s,i)=>s.ee<i)}vl(e){return bp(this.tl,e,(s,i)=>s.ee>i)}pl(e,s,i){let n=null;for(let r=e;r<s;r++){const a=this.tl[r].Vt[i];Number.isNaN(a)||(n===null?n={ml:a,bl:a}:(a<n.ml&&(n.ml=a),a>n.bl&&(n.bl=a)))}return n}_l(e,s,i){if(this.Ni())return null;let n=null;const r=M(this.el()),a=M(this.An()),o=Math.max(e,r),c=Math.min(s,a),u=Math.ceil(o/Dt)*Dt,h=Math.max(u,Math.floor(c/Dt)*Dt);{const m=this.fl(o),x=this.vl(Math.min(c,u,s));n=Jn(n,this.pl(m,x,i))}let d=this.il.get(i);d===void 0&&(d=new Map,this.il.set(i,d));for(let m=Math.max(u+1,o);m<h;m+=Dt){const x=Math.floor(m/Dt);let y=d.get(x);if(y===void 0){const g=this.fl(x*Dt),j=this.vl((x+1)*Dt-1);y=this.pl(g,j,i),d.set(x,y)}n=Jn(n,y)}{const m=this.fl(h),x=this.vl(c);n=Jn(n,this.pl(m,x,i))}return n}}function Jn(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class _w{constructor(e){this.wl=e}X(e,s,i){this.wl.draw(e)}gl(e,s,i){var n,r;(r=(n=this.wl).drawBackground)===null||r===void 0||r.call(n,e)}}class oa{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const i=new _w(s);return this.tr={Ml:s,xl:i},i}Sl(){var e,s,i;return(i=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:"normal"}}function Mp(t){var e,s,i,n,r;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(i=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||i===void 0||i,hi:(r=(n=t.tickVisible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r}}class Ew{constructor(e,s){this.Wt=new vp,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Mp(this.kl))),this.Wt}}class Lw extends vl{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,i){const n=Mp(this.kl);i.t=n.t,e.V=n.V;const r=2/12*this.Li.P();i.wi=r,i.gi=r,i.ki=n.ki,i.Si=n.Si,e.Kt=n.Kt,e.yt=n.yt,e.hi=n.hi}}class Mw{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,i,n;const r=(i=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Cl)===null||n===void 0?void 0:n.Ml)===r)return this.Cl.xl;const a=r.map(o=>new oa(o));return this.Cl={Ml:r,xl:a},a}Qi(){var e,s,i,n;const r=(i=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Tl)===null||n===void 0?void 0:n.Ml)===r)return this.Tl.xl;const a=this.jr.$t().St(),o=r.map(c=>new Ew(c,a));return this.Tl={Ml:r,xl:o},o}Rn(){var e,s,i,n;const r=(i=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Pl)===null||n===void 0?void 0:n.Ml)===r)return this.Pl.xl;const a=this.jr.Dt(),o=r.map(c=>new Lw(c,a));return this.Pl={Ml:r,xl:o},o}Bl(){var e,s,i,n;const r=(i=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Rl)===null||n===void 0?void 0:n.Ml)===r)return this.Rl.xl;const a=r.map(o=>new oa(o));return this.Rl={Ml:r,xl:a},a}Al(){var e,s,i,n;const r=(i=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Dl)===null||n===void 0?void 0:n.Ml)===r)return this.Dl.xl;const a=r.map(o=>new oa(o));return this.Dl={Ml:r,xl:a},a}Il(e,s){var i,n,r;return(r=(n=(i=this.Vl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,e,s))!==null&&r!==void 0?r:null}wr(e,s){var i,n,r;return(r=(n=(i=this.Vl).hitTest)===null||n===void 0?void 0:n.call(i,e,s))!==null&&r!==void 0?r:null}}function ca(t,e,s,i){t.forEach(n=>{e(n).forEach(r=>{r.Sl()===s&&i.push(r)})})}function ua(t){return t.Pn()}function Pw(t){return t.Bl()}function Tw(t){return t.Al()}class Wc extends Sw{constructor(e,s,i,n,r){super(e),this.zt=new Cw,this.jh=new yw(this),this.zl=[],this.Ll=new ow(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=i;const a=new xw(this);this.rn=[a],this.Hh=new _p(a,this,e),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new hw(this)),this.Ul(),this.ql(r)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return s;const n=this.$t().St().Xs(),r=this.Ct();if(n===null||r===null)return s;let a,o;if(e){const d=this.zt.sl();if(d===null)return s;a=d,o=d.ee}else{const d=this.zt.ll(n.ui(),-1);if(d===null||(a=this.zt.Gh(d.ee),a===null))return s;o=d.ee}const c=a.Vt[3],u=this.Us().$s(o,{Vt:a}),h=i.Rt(c,r.Vt);return{Xr:!1,_t:c,Kt:i.Fi(c,r.Vt),xh:i.Yl(c),Sh:i.Zl(c,r.Vt),V:u.ce,ki:h,ee:o}}Us(){return this.Nl!==null||(this.Nl=new kw(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),ot(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new jw(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];ca(this.Hl,ua,"top",s);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),s.unshift(i)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(i=>i.qh());return e.push(...s),ca(this.Hl,ua,"normal",e),e}ua(){return this.ca(ua,"bottom")}da(e){return this.ca(Pw,e)}fa(e){return this.ca(Tw,e)}va(e,s){return this.Hl.map(i=>i.wr(e,s)).filter(i=>i!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const n of this.zl)i.push(n.Zh());return this.Hl.forEach(n=>{i.push(...n.Rn())}),i}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const n=this.pa(e,s);return n===null?null:n.Bh()});return Gr.Ah(i)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return M(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new Mw(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof aa)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof aa)return e=>this.wn.je(e)}_a(){return!gl(this.Dt().Pa())}pa(e,s){if(!mn(e)||!mn(s)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],n=this.zt.ol(e,s,i);let r=n!==null?new Oe(n.ml,n.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new Oe(o,o);r=r!==null?r.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const x=new Oe(c.priceRange.minValue,c.priceRange.maxValue);r=r!==null?r.ts(x):x}var u,h,d,m;c!=null&&c.margins&&(u=a,h=c.margins,a={above:Math.max((d=u==null?void 0:u.above)!==null&&d!==void 0?d:0,h.above),below:Math.max((m=u==null?void 0:u.below)!==null&&m!==void 0?m:0,h.below)})}),new Gr(r,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new Ox(this.cn.priceFormat.precision);break;case"percent":this.wa=new gp(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new yl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=M(this.zt.el());this.Wl=this.Fl.map((i,n)=>{const r=M(e.Va(i.time,!0)),a=r<s?1:-1;return{time:M(this.zt.ll(r,a)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:n,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(e){switch(this.dn=new gw(this,this.$t()),this.$l){case"Bar":this.wn=new Xx(this,this.$t());break;case"Candlestick":this.wn=new Zx(this,this.$t());break;case"Line":this.wn=new nw(this,this.$t());break;case"Custom":this.wn=new aa(this,this.$t(),Pe(e));break;case"Area":this.wn=new Kx(this,this.$t());break;case"Baseline":this.wn=new Yx(this,this.$t());break;case"Histogram":this.wn=new iw(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const i=[];return ca(this.Hl,e,s,i),i}}class Rw{constructor(e){this.cn=e}Oa(e,s,i){let n=e;if(this.cn.mode===0)return n;const r=i.vn(),a=r.Ct();if(a===null)return n;const o=r.Rt(e,a),c=i.Ba().filter(h=>h instanceof Wc).reduce((h,d)=>{if(i.vr(d)||!d.yt())return h;const m=d.Dt(),x=d.In();if(m.Ni()||!x.Kr(s))return h;const y=x.Gh(s);if(y===null)return h;const g=Us(d.Ct());return h.concat([m.Rt(y.Vt[3],g.Vt)])},[]);if(c.length===0)return n;c.sort((h,d)=>Math.abs(h-o)-Math.abs(d-o));const u=c[0];return n=r.pn(u,a),n}}class zw extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const r=Math.max(1,Math.floor(i));e.lineWidth=r,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=M(this.zt);if(a.Aa){e.strokeStyle=a.Ia,js(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*i);e.moveTo(c,-r),e.lineTo(c,s.height+r)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,js(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*n);e.moveTo(-r,c),e.lineTo(s.width+r,c)}e.stroke()}})}}class $w{constructor(e){this.Wt=new zw,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class Iw{constructor(e){this.wn=new $w(e)}qh(){return this.wn}}const ha={$a:4,Ua:1e-4};function Hs(t,e){const s=100*(t-e)/e;return e<0?-s:s}function Dw(t,e){const s=Hs(t.Ph(),e),i=Hs(t.Rh(),e);return new Oe(s,i)}function Hi(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function Fw(t,e){const s=Hi(t.Ph(),e),i=Hi(t.Rh(),e);return new Oe(s,i)}function Xr(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.log10(s+e.Ua)+e.$a;return t<0?-i:i}function Ki(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.pow(10,s-e.$a)-e.Ua;return t<0?-i:i}function Ei(t,e){if(t===null)return null;const s=Xr(t.Ph(),e),i=Xr(t.Rh(),e);return new Oe(s,i)}function Yn(t,e){if(t===null)return null;const s=Ki(t.Ph(),e),i=Ki(t.Rh(),e);return new Oe(s,i)}function da(t){if(t===null)return ha;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return ha;const s=Math.ceil(Math.abs(Math.log10(e))),i=ha.$a+s;return{$a:i,Ua:1/Math.pow(10,i)}}class fa{constructor(e,s){if(this.qa=e,this.Ya=s,function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,i){const n=this.qa===0?0:1/this.qa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const d=Qn(r,n,1e-14)&&r>n+1e-14,m=Qn(r,i*o,1e-14),x=Qn(r,1,1e-14);if(!(d&&m&&x))break;r/=o,o=this.Ya[++a%this.Ya.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.Za.length>0&&(c=r,u=1,h=1e-14,Math.abs(c-u)<h))for(a=0,o=this.Za[0];Qn(r,i*o,1e-14)&&r>n+1e-14;)r/=o,o=this.Za[++a%this.Za.length];var c,u,h;return r}}class Uh{constructor(e,s,i,n){this.Ka=[],this.Li=e,this.qa=s,this.Ga=i,this.Ja=n}Xa(e,s){if(e<s)throw new Error("high < low");const i=this.Li.At(),n=(e-s)*this.Qa()/i,r=new fa(this.qa,[2,2.5,2]),a=new fa(this.qa,[2,2,2.5]),o=new fa(this.qa,[2.5,2,2]),c=[];return c.push(r.Xa(e,s,n),a.Xa(e,s,n),o.Xa(e,s,n)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const i=e.At(),n=this.Ga(i-1,s),r=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=i-1-a,u=Math.max(n,r),h=Math.min(n,r);if(u===h)return void(this.Ka=[]);let d=this.Xa(u,h),m=u%d;m+=m<0?d:0;const x=u>=h?1:-1;let y=null,g=0;for(let j=u-m;j>h;j-=d){const v=this.Ja(j,s,!0);y!==null&&Math.abs(v-y)<this.Qa()||v<o||v>c||(g<this.Ka.length?(this.Ka[g].Ea=v,this.Ka[g].so=e.eo(j)):this.Ka.push({Ea:v,so:e.eo(j)}),g++,y=v,e.ro()&&(d=this.Xa(j*x,h)))}this.Ka.length=g}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function Pp(t){return t.slice().sort((e,s)=>M(e.Xi())-M(s.Xi()))}var Hh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Hh||(Hh={}));const Kh=new gp,Gh=new yl(100,1);class Ow{constructor(e,s,i,n){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new he,this.vo=new he,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Gh,this.xo=da(null),this.So=e,this.cn=s,this.ko=i,this.yo=n,this.Co=new Uh(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(ot(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Pe(e.scaleMargins.top),i=Pe(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(s+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let i=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(r,a){if(r===null)return!1;const o=Ki(r.Ph(),a),c=Ki(r.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(i=Yn(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(i=Ei(this.Ih,this.xo),i!==null&&this.Ao(i));const n=s.Cr!==this.cn.mode;n&&(s.Cr===2||this.Mh())&&this.Ra(),n&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const i=this.Ih;(s||i===null&&e!==null||i!==null&&!i.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=Hs(e,s):this.Oo()&&(e=Hi(e,s)),this.Po(e,s)}te(e,s,i){this.Wo();const n=this.Fo(),r=M(this.Lh()),a=r.Ph(),o=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=i===void 0?0:i.from,m=i===void 0?e.length:i.to,x=this.Ho();for(let y=d;y<m;y++){const g=e[y],j=g._t;if(isNaN(j))continue;let v=j;x!==null&&(v=x(g._t,s));const f=n+h*(v-a),p=u?f:this.ho-1-f;g.st=p}}be(e,s,i){this.Wo();const n=this.Fo(),r=M(this.Lh()),a=r.Ph(),o=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=i===void 0?0:i.from,m=i===void 0?e.length:i.to,x=this.Ho();for(let y=d;y<m;y++){const g=e[y];let j=g.ge,v=g.Me,f=g.xe,p=g.Se;x!==null&&(j=x(g.ge,s),v=x(g.Me,s),f=x(g.xe,s),p=x(g.Se,s));let N=n+h*(j-a),S=u?N:this.ho-1-N;g.pe=S,N=n+h*(v-a),S=u?N:this.ho-1-N,g.de=S,N=n+h*(f-a),S=u?N:this.ho-1-N,g.fe=S,N=n+h*(p-a),S=u?N:this.ho-1-N,g.me=S}}pn(e,s){const i=this.To(e,s);return this.$o(i,s)}$o(e,s){let i=e;return this.Mh()?i=function(n,r){return r<0&&(n=-n),n/100*r+r}(i,s):this.Oo()&&(i=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(i,s)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const i=this.po[s];i.Xi()===null&&i.Ki(s+1),e.push(i)}return e=Pp(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const i=s.Ct();i!==null&&(e===null||i.la<e.la)&&(e=i)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=M(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const i=M(this.ao).Th();s=Math.max(s,.1),i.Vh(s),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=M(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=M(this.Lh()).Dh()/(this.Eo()-1);let i=e-this.Mo;this.Bo()&&(i*=-1);const n=i*s,r=M(this.ao).Th();r.Oh(n),this.Ao(r,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(Hs(e,s));case 3:return this.ba().format(Hi(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,M(this.e_()).ba())}Zl(e,s){return e=Hs(e,s),this.s_(e,Kh)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=Gh,this.Mh()?(this.wa=Kh,s=100):this.Oo()?(this.wa=new yl(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new Uh(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Xr(e,this.xo):e;const i=M(this.Lh()),n=this.Fo()+(this.Eo()-1)*(e-i.Ph())/i.Dh();return this.jo(n)}To(e,s){if(this.Wo(),this.Ni())return 0;const i=this.jo(e),n=M(this.Lh()),r=n.Ph()+n.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?Ki(r,this.xo):r}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const i=this.r_();let n=0,r=0;for(const c of i){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const h=c.Il(e.Os(),e.ui());let d=h&&h.Lh();if(d!==null){switch(this.cn.mode){case 1:d=Ei(d,this.xo);break;case 2:d=Dw(d,u.Vt);break;case 3:d=Fw(d,u.Vt)}if(s=s===null?d:s.ts(M(d)),h!==null){const m=h.Eh();m!==null&&(n=Math.max(n,m.above),r=Math.max(r,m.below))}}}if(n===this.co&&r===this.do||(this.co=n,this.do=r,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=Yn(s,this.xo)),s=new Oe(s.Ph()-u,s.Rh()+u),this.ro()&&(s=Ei(s,this.xo))}if(this.ro()){const c=Yn(s,this.xo),u=da(c);if(a=u,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const h=this.ao!==null?Yn(this.ao,this.xo):null;this.xo=u,s=Ei(c,u),h!==null&&(this.ao=Ei(h,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Oe(-.5,.5)),this.xo=da(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?Hs:this.Oo()?Hi:this.ro()?e=>Xr(e,this.xo):null}a_(e,s,i){return s===void 0?(i===void 0&&(i=this.ba()),i.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class Vw{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new he,this.yl=e,this.$i=s,this.d_=new Iw(this);const i=s.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const i of s){const n=M(i[0].Dt());n.$h(e.overlayPriceScales),e.localization&&n.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Pe(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const i=s.Dt();i!==null&&i.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,i){const n=i!==void 0?i:this.C_().y_+1;this.T_(e,s,n)}Zo(e){const s=this.po.indexOf(e);ts(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const i=M(e.Dt()).Pa();if(this.o_.has(i)){const r=Pe(this.o_.get(i)),a=r.indexOf(e);a!==-1&&(r.splice(a,1),r.length===0&&this.o_.delete(i))}const n=e.Dt();n&&n.Ba().indexOf(e)>=0&&n.Zo(e),n!==null&&(n.Yo(),this.P_(n)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=Pp(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&e.h_(i)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,i=0;for(let n=0;n<e.length;n++){const r=e[n].Xi();r!==null&&(r<s&&(s=r),r>i&&(i=r))}return{H_:s,y_:i}}T_(e,s,i){let n=this.w_(s);if(n===null&&(n=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!gl(s)){const r=this.o_.get(s)||[];r.push(e),this.o_.set(s,r)}n.qo(e),e.Gi(n),e.Ki(i),this.P_(n),this.mo=null}m_(e,s,i){s.Cr!==i.Cr&&this.L_(e)}v_(e,s){const i=Object.assign({visible:!0,autoScale:!0},bt(s)),n=new Ow(e,i,this.$i.W().layout,this.$i.W().localization);return n.Lo(this.At()),n}}class Bw{constructor(e,s,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=i}Y_(e){const s=e.time,i=this.q_.cacheKey(s),n=this.tr.get(i);if(n!==void 0)return n.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Pe(a)),this.Je++,this.Ke--}const r=this.U_(e);return this.tr.set(i,{Z_:r,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,r}}class Gi{constructor(e,s){ts(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Xh(t,e){return t===null||e===null?t===e:t.Ch(e)}class Aw{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let i=s;i<e.length;++i){const n=e[i];let r=this.J_.get(n.timeWeight);r===void 0&&(r=[],this.J_.set(n.timeWeight,r)),r.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}su(e,s){const i=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((i,n)=>{e<=i[0].index?s.push(n):i.splice(Cn(i,e,r=>r.index<e),1/0)});for(const i of s)this.J_.delete(i)}ru(e){let s=[];for(const i of Array.from(this.J_.keys()).sort((n,r)=>r-n)){if(!this.J_.get(i))continue;const n=s;s=[];const r=n.length;let a=0;const o=Pe(this.J_.get(i)),c=o.length;let u=1/0,h=-1/0;for(let d=0;d<c;d++){const m=o[d],x=m.index;for(;a<r;){const y=n[a],g=y.index;if(!(g<x)){u=g;break}a++,s.push(y),h=g,u=1/0}if(u-x>=e&&x-h>=e)s.push(m),h=x;else if(this.Q_)return n}for(;a<r;a++)s.push(n[a])}return s}}class qs{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Gi(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new qs(null)}}function Ww(t,e){return t.weight>e.weight?t:e}class Uw{constructor(e,s,i,n){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new Aw,this.du=new Map,this.fu=qs.ou(),this.vu=!0,this.pu=new he,this.mu=new he,this.bu=new he,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=i,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=n,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){ot(this.yo,e),this.Cu(),this.ku()}$h(e,s){var i;ot(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((i=e.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,i;return(i=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&i!==void 0?i:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const i=Cn(this.uu,this.q_.key(e),(n,r)=>this.q_.key(n.time)<r);return this.q_.key(e)<this.q_.key(this.uu[i].time)?s?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),i=Math.round(e.to),n=M(this.Bu()),r=M(this.Au());return{from:M(this.Ui(Math.max(n,s))),to:M(this.Ui(Math.min(r,i)))}}Iu(e){return{from:M(this.Va(e.from,!0)),to:M(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),i=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.Su*e/i;this.Su=n}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const n=i-e;this.xu-=Math.round(n/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!mn(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const i=this.Eu(),n=s===void 0?0:s.from,r=s===void 0?e.length:s.to;for(let a=n;a<r;a++){const o=e[a].ot,c=i+this.xu-o,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(s/e),n=M(this.Xs()),r=Math.max(n.Os(),n.Os()-i),a=Math.max(n.ui(),n.ui()-i),o=this.cu.su(e,s),c=this.Bu()+i,u=this.Au()-i,h=this.$u(),d=this.cn.fixLeftEdge||h,m=this.cn.fixRightEdge||h;let x=0;for(const y of o){if(!(r<=y.index&&y.index<=a))continue;let g;x<this.Mu.length?(g=this.Mu[x],g.coord=this.It(y.index),g.label=this.Uu(y),g.weight=y.weight):(g={needAlignCoordinate:!1,coord:this.It(y.index),label:this.Uu(y),weight:y.weight},this.Mu.push(g)),this.Su>s/2&&!h?g.needAlignCoordinate=!1:g.needAlignCoordinate=d&&y.index<=c||m&&y.index>=u,x++}return this.Mu.length=x,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const i=this.Fu(e),n=this.le(),r=n+s*(n/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=Co(this.__-e,0,this.__),i=Co(this.__-M(this.wo),0,this.__);s!==0&&i!==0&&this.Gn(this.wu.le*s/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=M(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,n=performance.now();this.$i.Zn({Qu:r=>(r-n)/s>=1,tc:r=>{const a=(r-n)/s;return a>=1?e:i+(e-i)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new Gi(e,s+this.cn.rightOffset))}lc(e){const s=new Gi(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),i=this.Eu()+this.xu-s;return Math.round(1e6*i)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(qs.ou());const e=this.Eu(),s=this.__/this.Su,i=this.xu+e,n=new Gi(i-s+1,i);this._c(new qs(n))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new Bw(i=>this.fc(i),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,Xh(s.lu(),this.fu.lu())||this.pu.m(),Xh(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const i=s.Os()-e;if(i<0){const n=this.xu-i-1;this.Jn(n)}this.zu()}Pu(){this.Lu(),this.zu()}}class Hw{X(e,s,i){e.useMediaCoordinateSpace(n=>this.K(n,s,i))}gl(e,s,i){e.useMediaCoordinateSpace(n=>this.vc(n,s,i))}vc(e,s,i){}}class Kw extends Hw{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:i}=e;let n=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>i.width?a.Zu=i.width/o:a.Zu=1,n+=a.gc*a.Zu}let r=0;switch(this.zt.Mc){case"top":r=0;break;case"center":r=Math.max((i.height-n)/2,0);break;case"bottom":r=Math.max(i.height-n,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=i.width/2;break;case"right":s.textAlign="right",o=i.width-1-a.gc/2}s.translate(o,r),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),r+=a.gc*a.Zu}}wc(e,s){const i=this.kc(e.font);let n=i.get(s);return n===void 0&&(n=e.measureText(s).width,i.set(s,n)),n}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class Gw{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new Kw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:li(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Xw extends Oc{constructor(e,s){super(),this.cn=s,this.wn=new Gw(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Qh,Jh,Yh,qh,Zh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Qh||(Qh={}));class Qw{constructor(e,s,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new he,this.Rc=new he,this.Dc=null,this.Vc=e,this.cn=s,this.q_=i,this.Oc=new _x(this),this.yl=new Uw(this,s.timeScale,this.cn.localization,i),this.vt=new Fx(this,s.crosshair),this.Bc=new Rw(s.crosshair),this.Ac=new Xw(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Ne.es())}Uh(){this.Nc(Ne.ss())}oa(){this.Nc(new Ne(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){ot(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const i=this.Uc(e);i!==null&&(i.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const i=s.w_(e);if(i!==null)return{Ht:s,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new Vw(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const i=e===void 0?this.yc.length-1:e,n=Ne.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Nc(n),s}V_(e,s,i){e.V_(s,i)}O_(e,s,i){e.O_(s,i),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,i){s.Vo()||e.A_(s,i)}I_(e,s,i){s.Vo()||(e.I_(s,i),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const i=this.St();if(i.Ni()||s===0)return;const n=i.Hi();e=Math.max(1,Math.min(e,n)),i.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,i,n,r){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const u=n.vn(),h=u.Ct();h!==null&&(a=u.pn(s,h)),a=this.Bc.Oa(a,o,n),this.vt.kn(o,a,n),this.oa(),r||this.Rc.m(this.vt.xt(),{x:e,y:s},i)}ad(e,s,i){const n=i.vn(),r=n.Ct(),a=n.Rt(e,M(r)),o=this.yl.Va(s,!0),c=this.yl.It(M(o));this.ld(c,a,null,i,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),i=this.vt.Sn();this.ld(s,i,null,e)}this.vt.Vn()}_d(e,s,i){const n=this.yl.mn(0);s!==void 0&&i!==void 0&&this.yl.bt(s,i);const r=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&n!==null&&r!==null){const c=o.Kr(a),u=this.q_.key(n)>this.q_.key(r),h=e!==null&&e>a&&!u,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,m=c&&(i!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!m){const x=e-a;this.yl.Jn(this.yl.Hu()-x)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(i=>i.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,i){const n=this.yc[0],r=this.fd(s,e,n,i);return this.Cc.push(r),this.Cc.length===1?this.Kl():this.Uh(),r}vd(e){const s=this.dr(e),i=this.Cc.indexOf(e);ts(i!==-1,"Series not found"),this.Cc.splice(i,1),M(s).Zo(e),e.S&&e.S()}Xl(e,s){const i=M(this.dr(e));i.Zo(e);const n=this.Uc(s);if(n===null){const r=e.Xi();i.qo(e,s,r)}else{const r=n.Ht===i?e.Xi():void 0;n.Ht.qo(e,s,r)}}hc(){const e=Ne.ss();e.$n(),this.Nc(e)}pd(e){const s=Ne.ss();s.Yn(e),this.Nc(s)}Kn(){const e=Ne.ss();e.Kn(),this.Nc(e)}Gn(e){const s=Ne.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=Ne.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=Ne.ss();s.Zn(e),this.Nc(s)}Un(){const e=Ne.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,i=this.zc;if(s===i)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==s)this.Dc={Ps:i,Rs:s,wd:new Map};else{const r=this.Dc.wd.get(e);if(r!==void 0)return r}const n=function(r,a,o){const[c,u,h,d]=fn(r),[m,x,y,g]=fn(a),j=[Ge(c+o*(m-c)),Ge(u+o*(x-u)),Ge(h+o*(y-h)),fp(d+o*(g-d))];return`rgba(${j[0]}, ${j[1]}, ${j[2]}, ${j[3]})`}(i,s,e/100);return this.Dc.wd.set(e,n),n}Gc(e,s){const i=new Ne(s);if(e!==null){const n=this.yc.indexOf(e);i.Nn(n,{Fn:s})}return i}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,i,n){const r=new Wc(this,e,s,i,n),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return i.qo(r,a),gl(a)||r.$h(e),r}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function _o(t){return!vt(t)&&!kn(t)}function Tp(t){return vt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Jh||(Jh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Yh||(Yh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(qh||(qh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Zh||(Zh={}));const ed=t=>t.getUTCFullYear();function Jw(t,e,s){return e.replace(/yyyy/g,(i=>kt(ed(i),4))(t)).replace(/yy/g,(i=>kt(ed(i)%100,2))(t)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(t,s)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(t,s)).replace(/MM/g,(i=>kt((n=>n.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>kt((n=>n.getUTCDate())(i),2))(t))}class Rp{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return Jw(e,this.gd,this.Md)}}class Yw{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",kt(e.getUTCHours(),2)).replace("%m",kt(e.getUTCMinutes(),2)).replace("%s",kt(e.getUTCSeconds(),2))}}const qw={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class Zw{constructor(e={}){const s=Object.assign(Object.assign({},qw),e);this.Td=new Rp(s.Sd,s.Cd),this.Pd=new Yw(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function qn(t){return 60*t*60*1e3}function ma(t){return 60*t*1e3}const Zn=[{Dd:(td=1,1e3*td),Vd:10},{Dd:ma(1),Vd:20},{Dd:ma(5),Vd:21},{Dd:ma(30),Vd:22},{Dd:qn(1),Vd:30},{Dd:qn(3),Vd:31},{Dd:qn(6),Vd:32},{Dd:qn(12),Vd:33}];var td;function sd(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=Zn.length-1;s>=0;--s)if(Math.floor(e.getTime()/Zn[s].Dd)!==Math.floor(t.getTime()/Zn[s].Dd))return Zn[s].Vd;return 0}function pa(t){let e=t;if(kn(t)&&(e=Uc(t)),!_o(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function id(t){if(!Tp(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Uc(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function nd(t){kn(t.time)&&(t.time=Uc(t.time))}class rd{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(nd)}(e):nd(e)}createConverterToInternalObj(e){return M(function(s){return s.length===0?null:_o(s[0].time)||kn(s[0].time)?pa:id}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return Tp(s=e)?id(s):_o(s)?pa(s):pa(Uc(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new Zw({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Rp(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const i=function(r,a,o){switch(r){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(e.originalTime,i,s.locale);if(r!==null)return r}return function(r,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=r.Bd===void 0?new Date(1e3*r.Od):new Date(Date.UTC(r.Bd.year,r.Bd.month-1,r.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,i,s.locale)}maxTickMarkWeight(e){let s=e.reduce(Ww,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(i,n=0){if(i.length===0)return;let r=n===0?null:i[n-1].time.Od,a=r!==null?new Date(1e3*r):null,o=0;for(let c=n;c<i.length;++c){const u=i[c],h=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=sd(h,a)),o+=u.time.Od-(r||u.time.Od),r=u.time.Od,a=h}if(n===0&&i.length>1){const c=Math.ceil(o/(i.length-1)),u=new Date(1e3*(i[0].time.Od-c));i[0].timeWeight=sd(new Date(1e3*i[0].time.Od),u)}})(e,s)}static Id(e){return ot({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const ai=typeof window<"u";function ld(){return!!ai&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function va(){return!!ai&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Eo(t){return t+t%2}function ga(t,e){return t.zd-e.zd}function ya(t,e,s){const i=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(i)*Math.min(Math.abs(i),s)}class eN{constructor(e,s,i,n){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=i,this.rs=n}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let i=0;const n=ya(this.Ld,this.Ed,this.Ud),r=ga(this.Ld,this.Ed),a=[n],o=[r];if(i+=r,this.Nd!==null){const u=ya(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(n)){const h=ga(this.Ed,this.Nd);if(a.push(u),o.push(h),i+=h,this.Fd!==null){const d=ya(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(n)){const m=ga(this.Nd,this.Fd);a.push(d),o.push(m),i+=m}}}}let c=0;for(let u=0;u<a.length;++u)c+=o[u]/i*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.qd))}tc(e){const s=M(this.Wd),i=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-M(this.Wd).ot;return Math.min(s,this.jd)}}class tN{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return mp(fn(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Ss(t,e){const s=M(t.ownerDocument).createElement("canvas");t.appendChild(s);const i=dx(s,{options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return i.resizeCanvasElement(e),i}function bs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Lo(t,e,s,i){t.gl&&t.gl(e,s,i)}function xr(t,e,s,i){t.X(e,s,i)}function Mo(t,e,s,i){const n=t(s,i);for(const r of n){const a=r.gt();a!==null&&e(a)}}function sN(t){ai&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Hc{constructor(e,s,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!va(),this.Af=n=>{this.If(n)},this.zf=n=>{if(this.Lf(n)){const r=this.Ef(n);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(ft(n),this.cf);a<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}}else{const r=this.Ef(n);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(ft(n),this.af);a<5&&!this.bf&&this.Uf(r,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=xa(e.changedTouches,M(this.Of));if(s===null||(this.Vf=er(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(ft(s),M(this.pf)),{nv:n,sv:r,Nf:a}=i;if(this.mf||!(a<5)){if(!this.mf){const o=.5*n,c=r>=o&&!this.cn.ev(),u=o>r&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),Ps(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(ft(e),M(this.vf)),{Nf:i}=s;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const n=this.Ef(e);this.Uf(n,this.Hf.av)}}Ff(e,s){const i=Math.abs(s.nt-e.nt),n=Math.abs(s.st-e.st);return{nv:i,sv:n,Nf:i+n}}ov(e){let s=xa(e.changedTouches,M(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=er(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(e,s);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:n}=this.Ff(ft(s),this.cf);n<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&Ps(e));this._f===0&&Ps(e),e.touches.length===0&&this.ff&&(this.ff=!1,Ps(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),ld()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(ft(e),this.af);i<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=er(e);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=ft(s),this.yf&&(this.yf(),this.yf=null);{const r=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",a)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const n=this.Ef(e,s);this.Wf(n,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=ft(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;ld()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=ft(e),this.kf&&(this.kf(),this.kf=null);{const n=this.lv.bind(this),r=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",r)},s.addEventListener("mousemove",n),s.addEventListener("mouseup",r)}if(this.Df=!0,this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=ft(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}va()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),sN(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=ad(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),Ps(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=ad(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!va()}vv(e){const s=xa(e.touches,M(this.Of));if(s===null)return;const i=this.Ef(e,s);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:er(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const i=s||e,n=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:i.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Ps(e)}}}}function ad(t,e){const s=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(s*s+i*i)}function Ps(t){t.cancelable&&t.preventDefault()}function ft(t){return{nt:t.pageX,st:t.pageY}}function er(t){return t.timeStamp||performance.now()}function xa(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function tr(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function iN(t,e,s){for(const i of t){const n=i.gt();if(n!==null&&n.wr){const r=n.wr(e,s);if(r!==null)return{Bv:i,Iv:r}}}return null}function wa(t,e){return s=>{var i,n,r,a;return((n=(i=s.Dt())===null||i===void 0?void 0:i.Pa())!==null&&n!==void 0?n:"")!==e?[]:(a=(r=s.da)===null||r===void 0?void 0:r.call(s,t))!==null&&a!==void 0?a:[]}}function od(t,e,s,i){if(!t.length)return;let n=0;const r=s/2,a=t[0].At(i,!0);let o=e===1?r-(t[0].Vi()-a/2):t[0].Vi()-a/2-r;o=Math.max(0,o);for(let c=1;c<t.length;c++){const u=t[c],h=t[c-1],d=h.At(i,!1),m=u.Vi(),x=h.Vi();if(e===1?m>x-d:m<x+d){const y=x-d*e;u.Oi(y);const g=y-e*d/2;if((e===1?g<0:g>s)&&o>0){const j=e===1?-1-g:g-s,v=Math.min(j,o);for(let f=n;f<t.length;f++)t[f].Oi(t[f].Vi()+e*v);o-=v}}else n=c,o=e===1?x-d-m:m-(x+d)}}class cd{constructor(e,s,i,n){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new vn(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=i,this.qv=n==="left",this.Yv=wa("normal",n),this.Zv=wa("top",n),this.Xv=wa("bottom",n),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Ss(this.Kv,Z({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=Ss(this.Kv,Z({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Hc(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),bs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),bs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),i=M(this.Gv.canvasElement.getContext("2d"));i.save();const n=this.Li.Ha();i.font=this._p(),n.length>0&&(e=Math.max(this.Fv.xi(i,n[0].so),this.Fv.xi(i,n[n.length-1].so)));const r=this.up();for(let u=r.length;u--;){const h=this.Fv.xi(i,r[u].Kt());h>e&&(e=h)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const u=this.Li.pn(1,a),h=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(u,h))+.11111111111111,a)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(u,h))-.11111111111111,a)))}var o;i.restore();const c=e||34;return Eo(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return M(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,M(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,s.V_(i,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp(),n=this.Li;s.O_(i,n,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,i))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,s.B_(i,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const r=i[n].Rn(this.tn.fp(),s);for(let a=0;a<r.length;a++)e.push(r[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,r=this.tn.fp().$t(),a=r.q(),o=r.bd();a===o?pl(e,0,0,i,n,a):pp(e,0,0,i,n,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.ap().C*i));let r;r=this.qv?s.width-n:0,e.fillRect(r,0,n,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),i=this.Li.W(),n=this.ap(),r=this.qv?this.Ev.width-n.T:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=i.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(n.T*o);a.beginPath();for(const m of s)a.rect(Math.floor(r*o),Math.round(m.Ea*c)-h,d,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=i.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(r-n.A):Math.round(r+n.T+n.A),u=s.map(h=>this.Fv.Mi(a,h.so));for(let h=s.length;h--;){const d=s[h];a.fillText(d.so,c,d.Ea+u[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),i=this.tn.fp(),n=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(a=>{i.vr(a)&&s.push(a)});const r=this.Li;s.forEach(a=>{a.Rn(i,r).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,n)}yp(e,s){if(this.Ev===null)return;const i=this.Ev.height/2,n=e.filter(a=>a.ki()<=i),r=e.filter(a=>a.ki()>i);n.sort((a,o)=>o.ki()-a.ki()),r.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}od(n,1,this.Ev.height,s),od(r,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),i=this.ap(),n=this.qv?"right":"left";s.forEach(r=>{r.Ai()&&r.gt(M(this.Li)).X(e,i,this.Fv,n)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),i=[],n=this.tn.fp(),r=s.Zc().Rn(n,this.Li);r.length&&i.push(r);const a=this.ap(),o=this.qv?"right":"left";i.forEach(c=>{c.forEach(u=>{u.gt(M(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return li(this.ko.fontSize,this.ko.fontFamily)}}function nN(t,e){var s,i;return(i=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function sr(t,e){var s,i;return(i=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function rN(t,e){var s,i;return(i=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function lN(t,e){var s,i;return(i=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}class Kc{constructor(e,s){this.Ev=Z({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new he,this.Op=new he,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=Ss(i,Z({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=Ss(i,Z({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Hc(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),bs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),bs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return M(this.Np)}qp(e){var s,i;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Kc.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new tN(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(M(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(M(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,i=e.localY;this.Gp(s,i,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const i=e.localX,n=e.localY;this.Gp(i,n,e);const r=this.wr(i,n);this.Qd.Qp((s=r==null?void 0:r.Lv)!==null&&s!==void 0?s:null),this.$i().jc(r&&{Hc:r.Hc,Iv:r.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const i=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,i)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,i=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const n=M(this.Lp),r=n.x+(s-this.Ip.x),a=n.y+(i-this.Ip.y);this.Gp(r,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const i=this.Np;return i===null?null:function(n,r,a){const o=n.Uo(),c=function(u,h,d){var m,x;let y,g;for(const f of u){const p=(x=(m=f.va)===null||m===void 0?void 0:m.call(f,h,d))!==null&&x!==void 0?x:[];for(const N of p)j=N.zOrder,(!(v=y==null?void 0:y.zOrder)||j==="top"&&v!=="top"||j==="normal"&&v==="bottom")&&(y=N,g=f)}var j,v;return y&&g?{zv:y,Hc:g}:null}(o,r,a);if((c==null?void 0:c.zv.zOrder)==="top")return tr(c);for(const u of o){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return tr(c);const h=iN(u.Pn(n),r,a);if(h!==null)return{Hc:u,Bv:h.Bv,Iv:h.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return tr(c)}return c!=null&&c.zv?tr(c):null}(i,e,s)}_m(e,s){M(s==="left"?this.Cp:this.Tp).cp(Z({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=M(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const i=s.Dt();i!==null&&e.P_(i),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n)}),this.Np&&(this.fm(i,nN),this.vm(i),this.pm(i),this.fm(i,sr),this.fm(i,rN)))}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.bm(s),this.fm(s,lN))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const i=s.localX,n=s.localY;e.M()&&e.m(this.$i().St().Nu(i),{x:i,y:n},s)}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,r=this.$i(),a=r.q(),o=r.bd();a===o?pl(e,0,0,i,n,o):pp(e,0,0,i,n,a,o)}vm(e){const s=M(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,sr,Lo,s),this.Mm(e,sr,xr,s)}bm(e){this.Mm(e,sr,xr,this.$i().Zc())}fm(e,s){const i=M(this.Np).Uo();for(const n of i)this.Mm(e,s,Lo,n);for(const n of i)this.Mm(e,s,xr,n)}Mm(e,s,i,n){const r=M(this.Np),a=r.$t().Wc(),o=a!==null&&a.Hc===n,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;Mo(s,u=>i(u,e,o,c),n,r)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,i=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const n=e.$t().ud();s&&this.Cp===null&&(this.Cp=new cd(this,e.W(),n,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new cd(this,e.W(),n,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,i){this.$i().ld(this.Sm(e),this.km(s),i,M(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,i){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,i);const n=this.$i().Zc();this.Lp={x:n.Yt(),y:n.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),i=this.fp();if(s.z_(i,i.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const n=performance.now(),r=s.St();this.Ep.Vr(r.Hu(),n),this.Ep.Qu(n)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)M(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),i=s.St();if(i.Ni())return;const n=this.Qd.W(),r=n.handleScroll,a=n.kineticScroll;if((!r.pressedMouseMove||e.Dv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=i.le();this.Ep=new eN(.2/u,7/u,.997,15/u),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),c))}}class ud{constructor(e,s,i,n,r){this.ft=!0,this.Ev=Z({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=i.ud,this.cn=s,this.Tm=n,this.Pm=r,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Ss(this.Kv,Z({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),bs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){ms(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Ns(this.Gv);s!==null&&s.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Oc.W().C*i),a=Math.floor(this.Oc.W().C*n),o=this.qv?s.width-r:0;e.fillRect(o,0,r,a)}mp({context:e,bitmapSize:s}){pl(e,0,0,s.width,s.height,this.Pm())}}function Gc(t){return e=>{var s,i;return(i=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&i!==void 0?i:[]}}const aN=Gc("normal"),oN=Gc("top"),cN=Gc("bottom");class uN{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Z({width:0,height:0}),this.Om=new he,this.Fv=new vn(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Ss(this.Im,Z({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Ss(this.Im,Z({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const n=this.Jv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Hc(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),bs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),bs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,i){ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Z({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(Z({width:i,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n),this.$m(i,cN)}),this.wp(i),this.$m(i,aN)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,oN))}$m(e,s){const i=this.Qd.$t().wt();for(const n of i)Mo(s,r=>Lo(r,e,!1,void 0),n,void 0);for(const n of i)Mo(s,r=>xr(r,e,!1,void 0),n,void 0)}mp({context:e,bitmapSize:s}){pl(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const n=Math.max(1,Math.floor(this.jm().C*i));e.fillRect(0,0,s.width,n)}}wp(e){const s=this.Qd.$t().St(),i=s.Ha();if(!i||i.length===0)return;const n=this.q_.maxTickMarkWeight(i),r=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:u})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);o.beginPath();const m=Math.round(r.T*u);for(let x=i.length;x--;){const y=Math.round(i[x].coord*c);o.rect(y-d,0,h,m)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=r.C+r.T+r.L+r.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const u of i)if(u.weight<n){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const u of i)if(u.weight>=n){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}})}Ym(e,s,i){const n=this.Fv.xi(e,i),r=n/2,a=Math.floor(s-r)+.5;return a<0?s+=Math.abs(0-a):a+n>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+n))),s}Um(e,s){const i=this.jm();for(const n of e)for(const r of n.Qi())r.gt().X(s,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return li(this.j(),this.cn.fontFamily)}Zm(){return li(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new vn,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const i=this.j();e.P=i,e.R=s,e.L=3*i/12,e.B=3*i/12,e.ji=9*i/12,e.N=0,e.Hm=4*i/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},n=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,r=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new ud("left",s,i,n,r),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new ud("right",s,i,n,r),this.Am.appendChild(this.Dm.lp()))}}const hN=!!ai&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!ai&&(!((Na=navigator==null?void 0:navigator.userAgentData)===null||Na===void 0)&&Na.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Na;class dN{constructor(e,s,i){var n;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new he,this.Op=new he,this.Rc=new he,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(n=this.Xd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ja(this.cn)&&this.hb(!0),this.$i=new Qw(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new uN(this,this.q_),this.sb.appendChild(this.ab.lp());const r=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(r||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],M(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,i=!1){if(this.ho===s&&this.__===e)return;const n=function(o){const c=Math.floor(o.width),u=Math.floor(o.height);return Z({width:c-c%2,height:u-u%2})}(Z({width:e,height:s}));this.ho=n.height,this.__=n.width;const r=this.ho+"px",a=this.__+"px";M(this.Xd).style.height=r,M(this.Xd).style.width=a,this.sb.style.height=r,this.sb.style.width=a,i?this.mb(Ne.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Ne.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=ja(this.cn);this.$i.$h(e);const i=ja(this.cn);i!==s&&this.hb(i),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const i=M(s.getContext("2d"));return this.gb(i),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:M(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Pe(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,i=0;const n=this.Xm[0],r=(o,c)=>{let u=0;for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],m=M(o==="left"?d.wm():d.gm()),x=m.xp();e!==null&&m.Sp(e,c,u),u+=x.height}};this.xb()&&(r("left",0),s+=M(n.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],u=c.xp();e!==null&&c.Sp(e,s,i),i+=u.height}s+=n.xp().width,this.Sb()&&(r("right",s),s+=M(n.gm()).xp().width);const a=(o,c,u)=>{M(o==="left"?this.ab.Lm():this.ab.Em()).Sp(M(e),c,u)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,i),c=M(n.wm()).xp().width),this.ab.Sp(e,c,i),c+=o.width,this.Sb()&&a("right",c,i)}i+=o.height}return Z({width:s,height:i})}Pb(){let e=0,s=0,i=0;for(const y of this.Xm)this.xb()&&(s=Math.max(s,M(y.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,M(y.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=y.M_();s=Eo(s),i=Eo(i);const n=this.__,r=this.ho,a=Math.max(n-s-i,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const h=0+c,d=r<h?0:r-h,m=d/e;let x=0;for(let y=0;y<this.Xm.length;++y){const g=this.Xm[y];g.qp(this.$i.qc()[y]);let j=0,v=0;v=y===this.Xm.length-1?d-x:Math.round(g.M_()*m),j=Math.max(v,2),x+=j,g.cp(Z({width:a,height:j})),this.xb()&&g._m(s,"left"),this.Sb()&&g._m(i,"right"),g.fp()&&this.$i.Kc(g.fp(),j)}this.ab.Fm(Z({width:o?a:0,height:c}),o?s:0,o?i:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==i&&(this.Jm=i)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return hN?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),i=s*e.deltaX/100,n=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,r)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(e,s){var i;const n=e.jn();n===3&&this.Db(),n!==3&&n!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(r=>{r.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const i of e.Qn())this.ns(i,s)}Vb(e){const s=this.$i.qc();for(let i=0;i<s.length;i++)e.Hn(i).Wn&&s[i].N_()}ns(e,s){const i=this.$i.St();switch(e.qn){case 0:i.hc();break;case 1:i.lc(e.Vt);break;case 2:i.Gn(e.Vt);break;case 3:i.Jn(e.Vt);break;case 4:i.qu();break;case 5:e.Vt.Qu(s)||i.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,s);for(const n of i.Qn())if(n.qn===5&&!n.Vt.Qu(s)){this.$t().Zn(n.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,i=this.Xm.length;for(let n=s;n<i;n++){const r=Pe(this.Xm.pop());this.sb.removeChild(r.lp()),r.lm().p(this),r.am().p(this),r.S()}for(let n=i;n<s;n++){const r=new Kc(this,e[n]);r.lm().l(this.Bb.bind(this),this),r.am().l(this.Ab.bind(this),this),this.Xm.push(r),this.sb.insertBefore(r.lp(),this.ab.lp())}for(let n=0;n<s;n++){const r=e[n],a=this.Xm[n];a.fp()!==r?a.qp(r):a.Up()}this.cb(),this.Pb()}Ib(e,s,i){var n;const r=new Map;e!==null&&this.$i.wt().forEach(h=>{const d=h.In().ll(e);d!==null&&r.set(h,d)});let a;if(e!==null){const h=(n=this.$i.St().Ui(e))===null||n===void 0?void 0:n.originalTime;h!==void 0&&(a=h)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Wc?o.Hc:void 0,u=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:r,Fb:u,Wb:i??void 0}}Bb(e,s,i){this.Vp.m(()=>this.Ib(e,s,i))}Ab(e,s,i){this.Op.m(()=>this.Ib(e,s,i))}lb(e,s,i){this.Rc.m(()=>this.Ib(e,s,i))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(i=>i.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ja(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function fN(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function zp(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]])}return s}function hd(t,e,s,i){const n=s.value,r={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.color!==void 0&&(r.V=s.color),r}function mN(t,e,s,i){const n=s.value,r={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.lineColor!==void 0&&(r.lt=s.lineColor),s.topColor!==void 0&&(r.Ps=s.topColor),s.bottomColor!==void 0&&(r.Rs=s.bottomColor),r}function pN(t,e,s,i){const n=s.value,r={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.topLineColor!==void 0&&(r.Re=s.topLineColor),s.bottomLineColor!==void 0&&(r.De=s.bottomLineColor),s.topFillColor1!==void 0&&(r.ke=s.topFillColor1),s.topFillColor2!==void 0&&(r.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(r.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(r.Te=s.bottomFillColor2),r}function vN(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),n}function gN(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),s.borderColor!==void 0&&(n.Ot=s.borderColor),s.wickColor!==void 0&&(n.Xh=s.wickColor),n}function yN(t,e,s,i,n){const r=Pe(n)(s),a=Math.max(...r),o=Math.min(...r),c=r[r.length-1],u=[c,a,o,c],h=s,{time:d,color:m}=h;return{ee:e,ot:t,Vt:u,zb:i,$e:zp(h,["time","color"]),V:m}}function ir(t){return t.Vt!==void 0}function dd(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function ls(t){return(e,s,i,n,r,a)=>function(o,c){return c?c(o):(u=o).open===void 0&&u.value===void 0;var u}(i,a)?dd({ot:e,ee:s,zb:n},i):dd(t(e,s,i,n,r),i)}function fd(t){return{Candlestick:ls(gN),Bar:ls(vN),Area:ls(mN),Baseline:ls(pN),Histogram:ls(hd),Line:ls(hd),Custom:ls(yN)}[t]}function md(t){return{ee:0,Hb:new Map,la:t}}function pd(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function vd(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Pe(e)}class xN{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let i=this.qb.size!==0,n=!1;const r=this.Yb.get(e);if(r!==void 0)if(this.Yb.size===1)i=!1,n=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(n=!0);let a=[];if(s.length!==0){const c=s.map(x=>x.time),u=this.q_.createConverterToInternalObj(s),h=fd(e.Qh()),d=e.Ca(),m=e.Ta();a=s.map((x,y)=>{const g=u(x.time),j=this.q_.key(g);let v=this.qb.get(j);v===void 0&&(v=md(g),this.qb.set(j,v),n=!0);const f=h(g,v.ee,x,c[y],d,m);return v.Hb.set(e,f),f})}i&&this.Gb(),this.Jb(e,a);let o=-1;if(n){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:vd(u.Hb)})}),c.sort((u,h)=>this.q_.key(u.time)-this.q_.key(h.time)),o=this.Qb(c)}return this.tw(e,o,function(c,u,h){const d=pd(c,h),m=pd(u,h);if(d!==void 0&&m!==void 0)return{ta:d.Ub>=m.Ub&&d.$b>=m.$b}}(this.Yb.get(e),r,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const i=s;(function(g){g.zb===void 0&&(g.zb=g.time)})(i),this.q_.preprocessData(s);const n=this.q_.createConverterToInternalObj([s])(s.time),r=this.Zb.get(e);if(r!==void 0&&this.q_.key(n)<this.q_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let a=this.qb.get(this.q_.key(n));const o=a===void 0;a===void 0&&(a=md(n),this.qb.set(this.q_.key(n),a));const c=fd(e.Qh()),u=e.Ca(),h=e.Ta(),d=c(n,a.ee,s,i.zb,u,h);a.Hb.set(e,d),this.nw(e,d);const m={ta:ir(d)};if(!o)return this.tw(e,-1,m);const x={timeWeight:0,time:a.la,pointData:a,originalTime:vd(a.Hb)},y=Cn(this.Xb,this.q_.key(x.time),(g,j)=>this.q_.key(g.time)<j);this.Xb.splice(y,0,x);for(let g=y;g<this.Xb.length;++g)Sa(this.Xb[g].pointData,g);return this.q_.fillWeightsForPoints(this.Xb,y),this.tw(e,y,m)}nw(e,s){let i=this.Yb.get(e);i===void 0&&(i=[],this.Yb.set(e,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.q_.key(s.ot)>this.q_.key(n.ot)?ir(s)&&i.push(s):ir(s)?i[i.length-1]=s:i.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(ir)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let i=0;i<this.Xb.length&&i<e.length;++i){const n=this.Xb[i],r=e[i];if(this.q_.key(n.time)!==this.q_.key(r.time)){s=i;break}r.timeWeight=n.timeWeight,Sa(r.pointData,i)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let i=s;i<e.length;++i)Sa(e[i].pointData,i);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,i){const n={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((r,a)=>{n.ew.set(a,{$e:r,rw:a===e?i:void 0})}),this.Yb.has(e)||n.ew.set(e,{$e:[],rw:i}),n.St.hw=this.Xb,n.St.lw=s;else{const r=this.Yb.get(e);n.ew.set(e,{$e:r||[],rw:i})}return n}}function Sa(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function Xc(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function gd(t){const e=Xc(t);return t.V!==void 0&&(e.color=t.V),e}function wN(t){const e=Xc(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function NN(t){const e=Xc(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function $p(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function jN(t){const e=$p(t);return t.V!==void 0&&(e.color=t.V),e}function SN(t){const e=$p(t),{V:s,Ot:i,Xh:n}=t;return s!==void 0&&(e.color=s),i!==void 0&&(e.borderColor=i),n!==void 0&&(e.wickColor=n),e}function Po(t){return{Area:wN,Line:gd,Baseline:NN,Histogram:gd,Bar:jN,Candlestick:SN,Custom:bN}[t]}function bN(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const kN={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},CN={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},_N={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Dc,attributionLogo:!0},ba={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},EN={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},LN={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Dc,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function yd(){return{width:0,height:0,autoSize:!1,layout:_N,crosshair:kN,grid:CN,overlayPriceScales:Object.assign({},ba),leftPriceScale:Object.assign(Object.assign({},ba),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ba),{visible:!0}),timeScale:EN,watermark:LN,localization:{locale:ai?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class MN{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return gl(this.ow)?this.aw.Mb(this.ow):0}Li(){return M(this.aw.$t().Uc(this.ow)).Dt}}function xd(t,e,s){const i=zp(t,["time","originalTime"]),n=Object.assign({time:e},i);return s!==void 0&&(n.originalTime=s),n}const PN={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class TN{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class RN{constructor(e,s,i,n,r){this.uw=new he,this.Es=e,this.cw=s,this.dw=i,this.q_=r,this.fw=n}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new qs(new Gi(e.from,e.to)).lu(),i=this.Es.In();if(i.Ni())return null;const n=i.ll(s.Os(),1),r=i.ll(s.ui(),-1),a=M(i.el()),o=M(i.An());if(n!==null&&r!==null&&n.ee>r.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:n===null||n.ee===a?e.from-a:n.ee-a,barsAfter:r===null||r.ee===o?o-e.to:o-r.ee};return n!==null&&r!==null&&(c.from=n.zb,c.to=r.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const i=this.Es.In().ll(e,s);return i===null?null:Po(this.seriesType())(i)}data(){const e=Po(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(i=>xd(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>xd(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return bt(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=ot(bt(PN),e),i=this.Es.ea(s);return new TN(i)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class zN{constructor(e,s,i){this.ww=new he,this.mu=new he,this.Om=new he,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},i=this.yl.Iu(s);this.$i.pd(i)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){ts(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),i=this.yl.Va(s,!1);return i===null?null:this.yl.It(i)}coordinateToTime(e){const s=this.$i.St(),i=s.Nu(e),n=s.Ui(i);return n===null?null:n.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},bt(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function $N(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(s);if(Math.abs(n-s)<1e-8)return i;s*=10}return i}(e.minMove))}function wd(t){return function(e){if(Xn(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=e.handleScale;Xn(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Xn(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const s=e.handleScroll;Xn(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class IN{constructor(e,s,i){this.Sw=new Map,this.kw=new Map,this.yw=new he,this.Cw=new he,this.Tw=new he,this.Pw=new xN(s);const n=i===void 0?bt(yd()):ot(bt(yd()),wd(i));this.q_=s,this.aw=new dN(e,n,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const r=this.aw.$t();this.Dw=new zN(r,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,i){this.autoSizeActive()||this.aw._b(e,s,i)}addCustomSeries(e,s){const i=Us(e),n=Object.assign(Object.assign({},up),i.defaultOptions());return this.Vw("Custom",n,s,i)}addAreaSeries(e){return this.Vw("Area",xx,e)}addBaselineSeries(e){return this.Vw("Baseline",wx,e)}addBarSeries(e){return this.Vw("Bar",gx,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",vx,e)}addHistogramSeries(e){return this.Vw("Histogram",Nx,e)}addLineSeries(e){return this.Vw("Line",yx,e)}removeSeries(e){const s=Pe(this.Sw.get(e)),i=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(i),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new MN(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(wd(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,i){const n=this.Sw.get(i);if(n===void 0)return;const r=this.aw.$t().dr(n);r!==null&&this.aw.$t().ad(e,s,r)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,i={},n){$N(i.priceFormat);const r=ot(bt(hp),bt(s),i),a=this.aw.$t().dd(e,r,n),o=new RN(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((i,n)=>n.J(i.$e,i.rw)),s.Wu()}Bw(e){return Pe(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((n,r)=>{const a=r.Qh(),o=Po(a)(n);if(a!=="Custom")ts(fN(o));else{const c=r.Ta();ts(!c||c(o)===!1)}s.set(this.Bw(r),o)});const i=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:i,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function DN(t,e,s){let i;if(kn(t)){const r=document.getElementById(t);ts(r!==null,`Cannot find element in DOM with id=${t}`),i=r}else i=t;const n=new IN(i,e,s);return e.setOptions(n.options()),n}function ka(t,e){return DN(t,new rd,rd.Id(e))}Object.assign(Object.assign({},hp),up);const ve=window.location.origin,FN=[{label:"5m",interval:"5m",period:"5d"},{label:"15m",interval:"15m",period:"1mo"},{label:"1D",interval:"1d",period:"6mo"}],To=({initialTab:t="trade"})=>{const e=()=>{switch(t){case"trade":return"stocks";case"portfolio":return"portfolio";case"orders":return"orders";default:return"stocks"}},[s,i]=w.useState(e()),[n,r]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState(""),[h,d]=w.useState(null),[m,x]=w.useState([]),[y,g]=w.useState(1e5),[j,v]=w.useState([]),[f,p]=w.useState({stocks:!1,portfolio:!1,trade:!1,wallet:!1,fyers:!1,watchlists:!1}),[N,S]=w.useState({quantity:1,price:"",orderType:"market",broker:"virtual"}),[_,k]=w.useState(!1),[C,z]=w.useState([]),[I,G]=w.useState(!1),[ne,de]=w.useState({message:"",type:"",show:!1}),[R,te]=w.useState([]),[V,L]=w.useState(null),[E,D]=w.useState([]),[F,H]=w.useState(!1),[Q,ut]=w.useState([]),[Ee,_s]=w.useState(!1),[xe,Es]=w.useState({interval:"5m",period:"5d"}),[gi,Qc]=w.useState({loading:!1,error:""}),[ht,Nl]=w.useState({sma:!1,ema:!1,rsi:!1}),jl=w.useRef(null),Sl=w.useRef(null),bl=w.useRef(null),W=w.useRef({chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}),Jc=!!h||Ee||F,{lastUpdate:Dp}=pi("trading-stocks",()=>Fp(),1e4);vi(Dp);const Fp=async()=>{var O;if(!V)return;const b=E.map(Y=>Y.symbol)||[],T=m.map(Y=>Y.symbol)||[];if([...new Set([...b,...T])].length!==0)try{const Y=await qt(`${ve}/watchlist/${V.id}/stocks`);((O=Y==null?void 0:Y.stocks)==null?void 0:O.length)>0&&D(Y.stocks)}catch(Y){console.error("Failed to refresh watchlist stocks",Y)}};w.useEffect(()=>(document.body.classList.toggle("modal-open",Jc),()=>document.body.classList.remove("modal-open")),[Jc]);const ce=(b,T="info")=>{de({message:b,type:T,show:!0}),setTimeout(()=>de({message:"",type:"",show:!1}),3e3)},Op=()=>{h&&(Qc({loading:!1,error:""}),_s(!0))},Yc=()=>{_s(!1),qc()},qc=()=>{W.current.chart&&W.current.chart.remove(),W.current.volumeChart&&W.current.volumeChart.remove(),W.current.rsiChart&&W.current.rsiChart.remove(),W.current={chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}},kl=(b,T="")=>{Qc({loading:b,error:T})},Cl=()=>{const b=W.current.chart,T=W.current.volumeChart,B=W.current.rsiChart,O=jl.current,Y=Sl.current,zt=bl.current;b&&O&&b.applyOptions({width:O.clientWidth,height:O.clientHeight}),T&&Y&&T.applyOptions({width:Y.clientWidth,height:Y.clientHeight}),B&&zt&&B.applyOptions({width:zt.clientWidth,height:zt.clientHeight})},Vp=()=>{if(W.current.chart&&W.current.volumeChart)return Cl(),!0;const b=jl.current;if(!b)return!1;const T=Sl.current,B=bl.current;return W.current.chart=ka(b,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Wi.Normal}}),W.current.candleSeries=W.current.chart.addCandlestickSeries({upColor:"#00d09c",downColor:"#ff4d4d",wickUpColor:"#00d09c",wickDownColor:"#ff4d4d",borderVisible:!1}),W.current.smaSeries=W.current.chart.addLineSeries({color:"#f5c542",lineWidth:2,priceLineVisible:!1}),W.current.emaSeries=W.current.chart.addLineSeries({color:"#4f9cf7",lineWidth:2,priceLineVisible:!1}),T&&(W.current.volumeChart=ka(T,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!1,visible:!1},crosshair:{mode:Wi.Normal}}),W.current.volumeSeries=W.current.volumeChart.addHistogramSeries({priceFormat:{type:"volume"},color:"#26a69a",priceScaleId:""}),W.current.chart.timeScale().subscribeVisibleLogicalRangeChange(O=>{O&&W.current.volumeChart&&W.current.volumeChart.timeScale().setVisibleLogicalRange(O)})),B&&(W.current.rsiChart=ka(B,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Wi.Normal}}),W.current.rsiSeries=W.current.rsiChart.addLineSeries({color:"#9b74ff",lineWidth:2,priceLineVisible:!1}),W.current.rsiChart.priceScale("right").applyOptions({minValue:0,maxValue:100}),W.current.rsiSeries.createPriceLine({price:70,color:"#4f9cf7",lineWidth:1,lineStyle:Kr.Dashed}),W.current.rsiSeries.createPriceLine({price:30,color:"#ff4d4d",lineWidth:1,lineStyle:Kr.Dashed}),W.current.chart.timeScale().subscribeVisibleLogicalRangeChange(O=>{O&&W.current.rsiChart&&W.current.rsiChart.timeScale().setVisibleLogicalRange(O)})),Cl(),!0},Bp=b=>{var lu,au,ou;if(!b)return;const{candleSeries:T,volumeSeries:B,smaSeries:O,emaSeries:Y,rsiSeries:zt,chart:nu,rsiChart:ru}=W.current;T&&T.setData(b.candles||[]),B&&B.setData(b.volume||[]),O&&O.setData(ht.sma?((lu=b.indicators)==null?void 0:lu.sma20)||[]:[]),Y&&Y.setData(ht.ema?((au=b.indicators)==null?void 0:au.ema20)||[]:[]),zt&&zt.setData(ht.rsi?((ou=b.indicators)==null?void 0:ou.rsi14)||[]:[]),nu&&nu.timeScale().fitContent(),ru&&ru.timeScale().fitContent()},Zc=async(b,T,B)=>{if(b){kl(!0,"");try{const O=`${ve}/market-data/candles?symbol=${encodeURIComponent(b)}&interval=${T}&period=${B}`,Y=await U(O);Bp(Y),kl(!1,"")}catch(O){kl(!1,O.message||"Failed to load chart")}}},_l=async()=>{p(b=>({...b,portfolio:!0}));try{const b=await U(`${ve}/portfolio/summary`);x(b.holdings||[]),g(b.wallet_balance||1e5)}catch(b){console.error("Failed to load portfolio",b);try{const T=await U(`${ve}/portfolio`);x(T.holdings||[])}catch{ce("Failed to load portfolio","error")}}finally{p(b=>({...b,portfolio:!1}))}},eu=async()=>{try{const b=await U(`${ve}/portfolio/orders?limit=20`);v(b.orders||[])}catch(b){console.error("Failed to load orders",b)}},El=async()=>{try{const b=await U(`${ve}/fyers/status`);if(k(b.connected),b.connected){p(B=>({...B,fyers:!0}));const T=await U(`${ve}/fyers/holdings`);z(T.holdings||[]),p(B=>({...B,fyers:!1}))}}catch(b){console.error("Failed to fetch Fyers data",b),p(T=>({...T,fyers:!1}))}},yi=async()=>{p(b=>({...b,watchlists:!0}));try{const T=(await U(`${ve}/watchlist`)).watchlists||[];te(T),T.length>0&&!V?(L(T[0]),Ls(T[0].id)):T.length===0&&Wp()}catch(b){console.error("Failed to load watchlists",b),ce("Failed to load watchlists","error")}finally{p(b=>({...b,watchlists:!1}))}},Ls=async b=>{p(T=>({...T,stocks:!0}));try{const T=await U(`${ve}/watchlist/${b}/stocks`);D(T.stocks||[])}catch(T){console.error("Failed to load watchlist stocks",T),ce("Failed to load stocks","error")}finally{p(T=>({...T,stocks:!1}))}},Ap=async()=>{if(R.length>=15){ce("Maximum 15 watchlists allowed","error");return}const b=`Watchlist ${R.length+1}`,T=R.length;try{const B=await U(`${ve}/watchlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,position:T})});ce(`Created ${b}`,"success"),yi()}catch(B){console.error("Failed to create watchlist",B),ce("Failed to create watchlist","error")}},Wp=async()=>{try{await U(`${ve}/watchlist/initialize`,{method:"POST"}),yi()}catch(b){console.error("Failed to initialize watchlists",b)}},Up=async b=>{if(R.length===1){ce("Cannot delete the last watchlist","error");return}try{if(await U(`${ve}/watchlist/${b}`,{method:"DELETE"}),ce("Watchlist deleted","success"),(V==null?void 0:V.id)===b){const T=R.filter(B=>B.id!==b);T.length>0&&(L(T[0]),Ls(T[0].id))}yi()}catch(T){console.error("Failed to delete watchlist",T),ce("Failed to delete watchlist","error")}},tu=async b=>{if(V)try{await U(`${ve}/watchlist/${V.id}/stocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:b})}),ce(`Added ${b} to watchlist`,"success"),Ls(V.id),H(!1)}catch(T){console.error("Failed to add stock",T),ce(T.message||"Failed to add stock","error")}},Hp=async b=>{if(V)try{await U(`${ve}/watchlist/${V.id}/stocks/${b}`,{method:"DELETE"}),ce(`Removed ${b} from watchlist`,"success"),Ls(V.id)}catch(T){console.error("Failed to remove stock",T),ce("Failed to remove stock","error")}},Kp=async()=>{try{const b=await U(`${ve}/nse_data/all-stocks`);ut(b.stocks||[])}catch(b){console.error("Failed to load stocks for search",b)}};w.useEffect(()=>{if(!c.trim())o(E);else{const b=c.toUpperCase();o(E.filter(T=>T.symbol.includes(b)))}},[c,E]),w.useEffect(()=>{yi(),_l(),El()},[]),w.useEffect(()=>{if(!Ee||!h)return;const b=Vp();b&&Zc(h.symbol,xe.interval,xe.period);const T=setInterval(()=>{b&&Zc(h.symbol,xe.interval,xe.period)},6e4);return()=>clearInterval(T)},[Ee,h,xe]),w.useEffect(()=>{if(!Ee){document.body.style.overflow="";return}document.body.style.overflow="hidden";const b=()=>Cl();return window.addEventListener("resize",b),()=>{document.body.style.overflow="",window.removeEventListener("resize",b)}},[Ee]),w.useEffect(()=>()=>{qc()},[]);const Gp=b=>{var T;d(b),S({quantity:1,price:((T=b.lastPrice)==null?void 0:T.toFixed(2))||"",orderType:"market"})},Xp=b=>{var B;const T={symbol:b.symbol,lastPrice:b.ltp||b.average_price,pChange:b.pnl_percent||0,dayHigh:b.ltp||b.average_price,dayLow:b.ltp||b.average_price,open:b.average_price,quantity:b.quantity,avgPrice:b.average_price,pnl:b.pnl};d(T),S({quantity:b.quantity,price:((B=T.lastPrice)==null?void 0:B.toFixed(2))||"",orderType:"market"})},Ll=()=>{d(null)},su=async b=>{var T;if(h){if(!N.quantity||N.quantity<=0){ce("Enter a valid quantity","error");return}if(!N.price||parseFloat(N.price)<=0){ce("Enter a valid price","error");return}p(B=>({...B,trade:!0}));try{if(N.broker==="fyers"){const B={symbol:`NSE:${h.symbol}-EQ`,qty:parseInt(N.quantity),type:N.orderType==="market"?2:1,side:b==="BUY"?1:-1,productType:"CNC",limitPrice:N.orderType==="limit"?parseFloat(N.price):0,stopPrice:0,validity:"DAY",disclosedQty:0,offlineOrder:!1},O=await U(`${ve}/fyers/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});O&&O.s==="ok"?ce(`Live ${b} Order Placed on Fyers: ${O.id}`,"success"):ce(`Fyers Error: ${(O==null?void 0:O.message)||"Order failed"}`,"error")}else{const B={symbol:h.symbol,quantity:parseInt(N.quantity),price:parseFloat(N.price),side:b,order_type:N.orderType.toUpperCase(),limit_price:N.orderType==="limit"?parseFloat(N.price):null},O=await U(`${ve}/portfolio/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});x(O.holdings||[]),O.wallet_balance!==void 0&&g(O.wallet_balance);const Y=N.orderType==="limit"?"(Limit)":"(Market)";ce(`${b} ${N.quantity} ${h.symbol} @ ${parseFloat(((T=O.order)==null?void 0:T.price)||N.price).toFixed(2)} ${Y}`,"success")}setTimeout(()=>Ll(),1200)}catch(B){console.error("Trade failed",B),ce(B.message||"Trade failed","error")}finally{p(B=>({...B,trade:!1}))}}},Ml=m.reduce((b,T)=>b+(T.pnl||0),0),iu=m.reduce((b,T)=>b+(T.ltp||T.average_price)*T.quantity,0);return l.jsxs("div",{className:"virtual-trading",children:[ne.show&&l.jsx("div",{className:`virtual-toast ${ne.type}`,children:ne.message}),l.jsxs("div",{className:"virtual-tabs",children:[l.jsx("button",{className:`virtual-tab ${s==="stocks"?"active":""}`,onClick:()=>i("stocks"),children:"Trade Stocks"}),l.jsx("button",{className:`virtual-tab ${s==="portfolio"?"active":""}`,onClick:()=>{i("portfolio"),_l()},children:"Portfolio"}),l.jsx("button",{className:`virtual-tab ${s==="orders"?"active":""}`,onClick:()=>{i("orders"),eu()},children:"Order History"})]}),s==="stocks"&&l.jsxs("div",{className:"virtual-stocks-container",children:[l.jsxs("div",{className:"watchlist-tabs-container",children:[l.jsxs("div",{className:"watchlist-tabs",children:[R.map(b=>l.jsxs("button",{className:`watchlist-tab ${(V==null?void 0:V.id)===b.id?"active":""}`,onClick:()=>{L(b),Ls(b.id)},onDoubleClick:()=>{const T=prompt("Rename watchlist:",b.name);T&&T.trim()&&U(`${ve}/watchlist/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T.trim()})}).then(()=>{ce("Watchlist renamed","success"),yi()}).catch(()=>ce("Failed to rename","error"))},children:[b.name,l.jsx("span",{className:"watchlist-count",children:b.stock_count||0})]},b.id)),R.length<15&&l.jsx("button",{className:"watchlist-tab add-tab",onClick:Ap,title:"Create new watchlist",children:"+"})]}),V&&R.length>1&&l.jsx("button",{className:"delete-watchlist-btn",onClick:()=>{confirm(`Delete "${V.name}"?`)&&Up(V.id)},title:"Delete watchlist",children:""})]}),l.jsxs("div",{className:"virtual-stocks-header",children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("p",{className:"eyebrow",children:(V==null?void 0:V.name)||"WATCHLIST"}),l.jsxs("div",{className:"live-badge",children:[l.jsx("span",{className:"pulse-dot"}),"LIVE"]})]}),l.jsx("h2",{children:"Pick a stock to trade"}),l.jsx("p",{className:"muted",children:"Search within watchlist or add new stocks"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{className:"primary-btn",onClick:()=>{H(!0),Kp()},children:"+ Add Stock"}),l.jsx("button",{className:"ghost-btn",onClick:()=>V&&Ls(V.id),disabled:f.stocks,children:f.stocks?"Loading...":"Refresh"})]})]}),l.jsx("div",{className:"search-row",children:l.jsx("input",{type:"text",placeholder:"Search symbol in watchlist...",value:c,onChange:b=>u(b.target.value),className:"search-input"})}),l.jsx("div",{className:"stock-grid",children:f.stocks?l.jsx("div",{className:"loading",children:"Loading stocks..."}):V?a.length===0?l.jsx("div",{className:"loading",children:c?"No stocks found":'No stocks in this watchlist. Click "Add Stock" to add some.'}):a.map(b=>l.jsxs("div",{className:"stock-item",onClick:()=>Gp(b),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:b.symbol}),l.jsxs("span",{className:"stock-price",children:["",Number(b.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsxs("span",{className:`stock-change ${b.pChange>=0?"positive":"negative"}`,children:[b.pChange>=0?"+":"",Number(b.pChange||0).toFixed(2),"%"]}),l.jsx("button",{className:"remove-stock-btn",onClick:T=>{T.stopPropagation(),confirm(`Remove ${b.symbol} from watchlist?`)&&Hp(b.symbol)},title:"Remove from watchlist",children:""})]})]},b.symbol)):l.jsx("div",{className:"loading",children:"Create a watchlist to get started"})})]}),h&&(s==="stocks"||s==="portfolio")&&!Ee&&l.jsx("div",{className:"stock-trade-modal",onClick:Ll,children:l.jsxs("div",{className:"stock-trade-shell",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[l.jsx("h3",{style:{margin:0},children:h.symbol}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[l.jsx("button",{className:`broker-toggle ${N.broker==="virtual"?"active":""}`,onClick:()=>S({...N,broker:"virtual"}),children:"Virtual"}),_&&l.jsx("button",{className:`broker-toggle ${N.broker==="fyers"?"active":""}`,onClick:()=>S({...N,broker:"fyers"}),children:"Fyers"})]})]}),l.jsx("button",{className:"icon-button",onClick:Ll,children:""})]}),l.jsxs("div",{className:"stock-trade-content",children:[l.jsxs("div",{className:"stock-trade-price-row",children:[l.jsxs("div",{className:"stock-trade-price-block",children:[l.jsx("span",{className:"stock-trade-label",children:"Current Price"}),l.jsxs("span",{className:"stock-trade-price",children:["",Number(h.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{className:`chip large ${h.pChange>=0?"positive":"negative"}`,children:[h.pChange>=0?"+":"",Number(h.pChange||0).toFixed(2),"%"]})]}),l.jsxs("div",{className:"stock-trade-stats",children:[l.jsxs("div",{className:"stock-trade-stat",children:[l.jsx("span",{className:"stock-trade-stat-label",children:"High"}),l.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.dayHigh||h.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{className:"stock-trade-stat",children:[l.jsx("span",{className:"stock-trade-stat-label",children:"Low"}),l.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.dayLow||h.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{className:"stock-trade-stat",children:[l.jsx("span",{className:"stock-trade-stat-label",children:"Open"}),l.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.open||h.lastPrice||0).toFixed(2)]})]})]}),l.jsxs("div",{className:"order-type-selector",children:[l.jsx("button",{className:`order-type-btn ${N.orderType==="market"?"active":""}`,onClick:()=>{var b;return S({...N,orderType:"market",price:((b=h.lastPrice)==null?void 0:b.toFixed(2))||""})},children:"Market Order"}),l.jsx("button",{className:`order-type-btn ${N.orderType==="limit"?"active":""}`,onClick:()=>S({...N,orderType:"limit"}),children:"Limit Order"})]}),l.jsxs("div",{className:"stock-trade-input-row",children:[l.jsxs("div",{className:"stock-trade-input-group",children:[l.jsx("label",{children:"Quantity"}),l.jsx("input",{type:"number",min:"1",value:N.quantity,onChange:b=>S({...N,quantity:b.target.value})})]}),l.jsxs("div",{className:"stock-trade-input-group",children:[l.jsx("label",{children:N.orderType==="market"?"Market Price ()":"Limit Price ()"}),l.jsx("input",{type:"number",step:"0.01",min:"0.01",value:N.price,onChange:b=>S({...N,price:b.target.value}),disabled:N.orderType==="market",className:N.orderType==="market"?"price-disabled":""}),N.orderType==="limit"&&l.jsx("span",{className:"limit-hint",children:"Enter your desired price"})]})]}),l.jsxs("div",{className:"stock-trade-wallet",children:[l.jsx("span",{children:"Available Balance"}),l.jsxs("span",{className:"stock-trade-wallet-value",children:["",y.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),N.orderType==="limit"&&l.jsxs("div",{className:"limit-order-info",children:[l.jsx("span",{className:"info-icon",children:""}),l.jsxs("span",{children:["Limit order will execute at ",N.price||"0.00"," or better"]})]}),l.jsxs("div",{className:"stock-trade-total",children:[l.jsx("span",{children:"Order Value"}),l.jsxs("span",{className:`stock-trade-total-value ${(N.quantity||0)*(parseFloat(N.price)||0)>y?"negative":"positive"}`,children:["",((N.quantity||0)*(parseFloat(N.price)||0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"stock-trade-actions",children:[l.jsx("button",{className:"buy-btn",onClick:()=>su("BUY"),disabled:f.trade,children:f.trade?"Processing...":"BUY"}),l.jsx("button",{className:"sell-btn",onClick:()=>su("SELL"),disabled:f.trade,children:f.trade?"Processing...":"SELL"}),l.jsx("button",{className:"chart-btn",onClick:Op,disabled:gi.loading,children:"View chart"})]})]})]})}),s==="portfolio"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:"Portfolio"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[l.jsx("button",{className:`virtual-tab mini ${I?"":"active"}`,onClick:()=>G(!1),children:"Virtual"}),_&&l.jsx("button",{className:`virtual-tab mini ${I?"active":""}`,onClick:()=>{G(!0),El()},children:"Fyers Real"})]})]}),l.jsx("button",{className:"ghost-btn",onClick:()=>I?El():_l(),disabled:f.portfolio||f.fyers,children:f.portfolio||f.fyers?"Loading...":"Refresh"})]}),I?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"portfolio-summary",children:[l.jsxs("div",{className:"summary-card highlight",children:[l.jsx("span",{className:"label",children:"Fyers Balance"}),l.jsx("span",{className:"value",children:"--"})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Live Holdings"}),l.jsxs("span",{className:"value",children:[C.length," Positions"]})]})]}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Avg Price"}),l.jsx("th",{className:"text-right",children:"LTP"}),l.jsx("th",{className:"text-right",children:"P&L"})]})}),l.jsx("tbody",{children:f.fyers?l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"loading",children:"Fetching data from Fyers..."})}):C.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"loading",children:"No holdings found in your Fyers account."})}):C.map((b,T)=>{const B=(b.lp-b.costPrice)*b.quantity,O=B>0?"positive":B<0?"negative":"";return l.jsxs("tr",{children:[l.jsx("td",{children:b.symbol.replace("NSE:","").replace("-EQ","")}),l.jsx("td",{className:"text-right",children:b.quantity}),l.jsxs("td",{className:"text-right",children:["",Number(b.costPrice).toFixed(2)]}),l.jsxs("td",{className:"text-right",children:["",Number(b.lp).toFixed(2)]}),l.jsxs("td",{className:`text-right ${O}`,children:[B>=0?"+":"","",Number(B).toFixed(2)]})]},b.symbol+T)})})]})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"portfolio-summary",children:[l.jsxs("div",{className:"summary-card wallet",children:[l.jsx("span",{className:"label",children:"Wallet Balance"}),l.jsxs("span",{className:"value",children:["",y.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Holdings Value"}),l.jsxs("span",{className:"value",children:["",iu.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:`summary-card ${Ml>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Total P&L"}),l.jsxs("span",{className:"value",children:[Ml>=0?"+":"","",Ml.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"summary-card highlight",children:[l.jsx("span",{className:"label",children:"Net Worth"}),l.jsxs("span",{className:"value",children:["",(y+iu).toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Avg Price"}),l.jsx("th",{className:"text-right",children:"LTP"}),l.jsx("th",{className:"text-right",children:"P&L"})]})}),l.jsx("tbody",{children:f.portfolio?l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"loading",children:"Loading portfolio..."})}):m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"loading",children:"No holdings yet. Start trading!"})}):m.map(b=>{const T=b.pnl>0?"positive":b.pnl<0?"negative":"";return l.jsxs("tr",{className:"clickable-row",onClick:()=>Xp(b),children:[l.jsx("td",{className:"stock-link",children:b.symbol}),l.jsx("td",{className:"text-right",children:b.quantity}),l.jsxs("td",{className:"text-right",children:["",Number(b.average_price).toFixed(2)]}),l.jsx("td",{className:"text-right",children:b.ltp!=null?`${Number(b.ltp).toFixed(2)}`:"--"}),l.jsx("td",{className:`text-right ${T}`,children:b.pnl!=null?`${b.pnl>=0?"+":""}${Number(b.pnl).toFixed(2)}`:"--"})]},b.symbol)})})]})})]})]}),s==="orders"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:"Order History"}),l.jsx("p",{className:"muted",children:"View all your virtual trades"})]}),l.jsx("button",{className:"ghost-btn",onClick:eu,children:"Refresh"})]}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date & Time"}),l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Type"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Price"}),l.jsx("th",{className:"text-right",children:"Total"})]})}),l.jsx("tbody",{children:j.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"loading",children:"No orders yet. Start trading!"})}):j.map((b,T)=>{var O;const B=b.created_at?new Date(b.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-";return l.jsxs("tr",{children:[l.jsx("td",{children:B}),l.jsx("td",{children:b.symbol}),l.jsx("td",{children:l.jsx("span",{className:`order-side ${(O=b.side)==null?void 0:O.toLowerCase()}`,children:b.side})}),l.jsx("td",{className:"text-right",children:b.quantity}),l.jsxs("td",{className:"text-right",children:["",Number(b.price||0).toFixed(2)]}),l.jsxs("td",{className:"text-right",children:["",Number(b.total_value||0).toLocaleString()]})]},b.id||T)})})]})})]}),F&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>H(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("h3",{children:["Add Stock to ",V==null?void 0:V.name]}),l.jsx("button",{className:"icon-button",onClick:()=>H(!1),children:""})]}),l.jsxs("div",{className:"stock-trade-content",children:[l.jsx("div",{className:"search-row",children:l.jsx("input",{type:"text",placeholder:"Search all NSE stocks...",value:c,onChange:b=>u(b.target.value),className:"search-input",autoFocus:!0})}),l.jsx("div",{className:"add-stock-list",children:Q.length===0?l.jsx("div",{className:"loading",children:"Loading stocks..."}):(()=>{const b=c.toUpperCase(),T=b?Q.filter(O=>O.symbol.includes(b)):Q,B=new Set(E.map(O=>O.symbol));return T.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):T.slice(0,50).map(O=>{const Y=B.has(O.symbol);return l.jsxs("div",{className:`add-stock-item ${Y?"disabled":""}`,onClick:()=>!Y&&tu(O.symbol),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:O.symbol}),l.jsxs("span",{className:"stock-price",children:["",Number(O.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsxs("span",{className:`stock-change ${O.pChange>=0?"positive":"negative"}`,children:[O.pChange>=0?"+":"",Number(O.pChange||0).toFixed(2),"%"]}),Y?l.jsx("span",{className:"added-badge",children:" Added"}):l.jsx("button",{className:"add-btn-small",onClick:zt=>{zt.stopPropagation(),tu(O.symbol)},children:"+ Add"})]})]},O.symbol)})})()})]})]})}),Ee&&h&&l.jsx("div",{className:"chart-modal",onClick:Yc,children:l.jsxs("div",{className:"chart-shell",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"chart-header",children:[l.jsxs("div",{children:[l.jsxs("h3",{children:[h.symbol," Chart"]}),l.jsxs("span",{className:"muted",children:[xe.interval.toUpperCase(),"  ",xe.period]})]}),l.jsx("button",{className:"icon-button",onClick:Yc,children:""})]}),l.jsxs("div",{className:"chart-controls",children:[l.jsx("div",{className:"chart-ranges",children:FN.map(b=>l.jsx("button",{className:`chart-range ${xe.interval===b.interval&&xe.period===b.period?"active":""}`,onClick:()=>Es({interval:b.interval,period:b.period}),children:b.label},`${b.interval}-${b.period}`))}),l.jsxs("div",{className:"chart-legend",children:[l.jsxs("button",{className:`legend-item sma ${ht.sma?"active":""}`,onClick:()=>Nl(b=>({...b,sma:!b.sma})),children:["SMA 20 ",ht.sma?"":""]}),l.jsxs("button",{className:`legend-item ema ${ht.ema?"active":""}`,onClick:()=>Nl(b=>({...b,ema:!b.ema})),children:["EMA 20 ",ht.ema?"":""]}),l.jsxs("button",{className:`legend-item rsi ${ht.rsi?"active":""}`,onClick:()=>Nl(b=>({...b,rsi:!b.rsi})),children:["RSI 14 ",ht.rsi?"":""]})]})]}),(gi.loading||gi.error)&&l.jsx("div",{className:"loading",children:gi.error||"Loading chart..."}),l.jsxs("div",{className:`chart-content ${gi.loading?"is-loading":""}`,children:[l.jsx("div",{ref:jl,className:"chart-canvas"}),l.jsx("div",{ref:Sl,className:"chart-canvas volume"}),ht.rsi&&l.jsx("div",{ref:bl,className:"chart-canvas small"})]})]})})]})},Ca=window.location.origin,ON=({initialTab:t="trade"})=>{const[e,s]=w.useState({connected:!1,loading:!0,error:null}),[i,n]=w.useState(!1);w.useEffect(()=>{r()},[]);const r=async()=>{try{const c=await U(`${Ca}/fyers/status`);s({connected:c.connected,loading:!1,error:null,connectedAt:c.connected_at,expiresAt:c.expires_at})}catch(c){console.error("Failed to check Fyers status:",c),s({connected:!1,loading:!1,error:c.message||"Failed to check Fyers status"})}},a=async()=>{n(!0);try{const c=await U(`${Ca}/fyers/auth-url`);c.url?window.location.href=c.url:alert("Failed to get Fyers auth URL")}catch(c){console.error("Failed to get Fyers auth URL:",c),alert("Error: "+(c.message||"Failed to connect to Fyers"))}finally{n(!1)}},o=async()=>{if(confirm("Are you sure you want to disconnect Fyers?"))try{await U(`${Ca}/fyers/disconnect`,{method:"DELETE"}),s({connected:!1,loading:!1,error:null})}catch(c){console.error("Failed to disconnect Fyers:",c),alert("Error: "+(c.message||"Failed to disconnect Fyers"))}};return e.loading?l.jsx("div",{className:"real-trading-container",children:l.jsxs("div",{className:"real-trading-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Checking broker connection..."})]})}):e.connected?l.jsxs("div",{className:"real-trading-container",children:[l.jsxs("div",{className:"broker-status-banner connected",children:[l.jsxs("div",{className:"broker-status-info",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsxs("span",{className:"status-text",children:[l.jsx("strong",{children:"Fyers Connected"}),l.jsx("span",{className:"status-detail",children:"Live trading enabled"})]})]}),l.jsx("button",{className:"disconnect-btn",onClick:o,children:"Disconnect"})]}),l.jsx(To,{initialTab:t})]}):l.jsx("div",{className:"real-trading-container",children:l.jsxs("div",{className:"real-trading-connect-prompt",children:[l.jsx("div",{className:"connect-icon",children:""}),l.jsx("h2",{children:"Connect Your Broker"}),l.jsx("p",{className:"connect-description",children:"Connect your Fyers account to start real trading. Your credentials are securely handled through Fyers' official OAuth flow."}),l.jsxs("div",{className:"broker-options",children:[l.jsxs("div",{className:"broker-card fyers",children:[l.jsxs("div",{className:"broker-header",children:[l.jsx("span",{className:"broker-logo",children:""}),l.jsx("span",{className:"broker-name",children:"Fyers"})]}),l.jsx("p",{className:"broker-desc",children:"India's trusted stockbroker with low brokerage and advanced trading platform"}),l.jsx("button",{className:"connect-btn primary",onClick:a,disabled:i,children:i?"Connecting...":"Connect Fyers"})]}),l.jsxs("div",{className:"broker-card coming-soon",children:[l.jsxs("div",{className:"broker-header",children:[l.jsx("span",{className:"broker-logo",children:""}),l.jsx("span",{className:"broker-name",children:"More Brokers"})]}),l.jsx("p",{className:"broker-desc",children:"Support for Zerodha, Angel One, and more coming soon"}),l.jsx("button",{className:"connect-btn disabled",disabled:!0,children:"Coming Soon"})]})]}),e.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("span",{className:"error-icon",children:""}),e.error]})]})})},VN=window.location.origin;function BN({subSection:t}){var y,g,j,v,f,p,N,S,_;const[e,s]=w.useState([]),[i,n]=w.useState(null),[r,a]=w.useState(null),[o,c]=w.useState(!0);w.useEffect(()=>{u()},[t]);const u=async()=>{c(!0);try{let k="";switch(t){case"gainers":k="/nse_data/top-gainers";break;case"losers":k="/nse_data/top-losers";break;case"bulk":k="/nse_data/bulk-deals";break;case"weekly":k="/nse_data/weekly-gainers?days=5";break;case"fii-dii":k="/nse_data/fii-dii-activity";break;default:k="/nse_data/top-gainers"}const C=await U(`${VN}${k}`);t==="weekly"?n(C):t==="bulk"?s(C.bulk_deals||[]):t==="fii-dii"?a(C):s(C.top_gainers||C.top_losers||[])}catch(k){console.error("Failed to load market data:",k)}finally{c(!1)}},h=k=>{if(!k&&k!==0)return"N/A";const C=Number(k);return isNaN(C)?"N/A":`${(C/100).toFixed(0)} Cr`},d=()=>{switch(t){case"gainers":return"Top Gainers";case"losers":return"Top Losers";case"bulk":return"Bulk Deals";case"weekly":return"Weekly Movers";case"fii-dii":return"FII/DII Activity";default:return"Market Data"}},m=()=>{switch(t){case"gainers":return"";case"losers":return"";case"bulk":return"";case"weekly":return"";case"fii-dii":return"";default:return""}};if(t==="fii-dii")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:m()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading FII/DII data..."}):r?l.jsxs("div",{className:"fii-dii-container",children:[r.date&&l.jsxs("div",{className:"fii-dii-date-header",children:["Data as of: ",l.jsx("strong",{children:r.date})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((y=r.fii)==null?void 0:y.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((g=r.fii)==null?void 0:g.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((j=r.fii)==null?void 0:j.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((v=r.fii)==null?void 0:v.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((f=r.dii)==null?void 0:f.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((p=r.dii)==null?void 0:p.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((N=r.dii)==null?void 0:N.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((S=r.dii)==null?void 0:S.netValue)})]})]})]})]})]}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No FII/DII Data"}),l.jsx("div",{className:"empty-state-text",children:"FII/DII activity data is not available at this time."})]})]});if(t==="weekly")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:m()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading weekly data..."}):(_=i==null?void 0:i.weeklyData)!=null&&_.length?l.jsx("div",{className:"weekly-container",children:i.weeklyData.map(k=>l.jsxs("div",{className:"weekly-column",children:[l.jsxs("div",{className:"weekly-header",children:[l.jsx("div",{children:k.dayName}),l.jsx("span",{className:"muted",children:k.date})]}),l.jsxs("div",{className:"weekly-block",children:[l.jsx("div",{className:"section-label positive",children:"Top Gainers"}),(k.gainers||[]).slice(0,5).map(C=>{var z;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:C.symbol}),l.jsxs("span",{className:"text-right positive",children:[(z=C.pChange)==null?void 0:z.toFixed(2),"%"]})]},`g-${C.symbol}`)}),l.jsx("div",{className:"section-label negative",children:"Top Losers"}),(k.losers||[]).slice(0,5).map(C=>{var z;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:C.symbol}),l.jsxs("span",{className:"text-right negative",children:[(z=C.pChange)==null?void 0:z.toFixed(2),"%"]})]},`l-${C.symbol}`)})]})]},k.dayName+k.date))}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Weekly Data"}),l.jsx("div",{className:"empty-state-text",children:"Weekly movers data is not available."})]})]});if(t==="bulk")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:m()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading bulk deals..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Bulk Deals"}),l.jsx("div",{className:"empty-state-text",children:"Bulk deals data is not available."})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Client"}),l.jsx("th",{className:"text-right",children:"Quantity"}),l.jsx("th",{className:"text-right",children:"Price"})]})}),l.jsx("tbody",{children:e.map((k,C)=>l.jsxs("tr",{children:[l.jsx("td",{className:"order-symbol",children:k.symbol||k.BD_SYMBOL||"N/A"}),l.jsx("td",{children:k.clientName||k.client_name||k.BD_CLIENT_NAME||"N/A"}),l.jsx("td",{className:"text-right",children:(k.quantity||k.quantityTraded||k.BD_QTY_TRD||0).toLocaleString()}),l.jsxs("td",{className:"text-right",children:["",Number(k.tradePrice||k.price||k.BD_TP_WATP||0).toFixed(2)]})]},`${k.symbol}-${C}`))})]})})]});const x=t==="gainers";return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:m()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading market data..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:m()}),l.jsx("div",{className:"empty-state-title",children:"No Data Available"}),l.jsx("div",{className:"empty-state-text",children:"Market data is not available at this time."})]}):l.jsx("div",{className:"market-grid",children:e.map((k,C)=>l.jsxs("div",{className:"market-card-item",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("span",{className:"market-symbol",children:k.symbol}),l.jsxs("span",{className:`market-change-badge ${x?"positive":"negative"}`,children:[x?"+":"",Number(k.pChange||0).toFixed(2),"%"]})]}),l.jsxs("div",{className:"market-card-body",children:[l.jsxs("div",{className:"market-price-main",children:["",Number(k.lastPrice||0).toLocaleString()]}),l.jsxs("div",{className:"market-stats",children:[l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Open"}),l.jsxs("span",{children:["",Number(k.open||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"High"}),l.jsxs("span",{children:["",Number(k.dayHigh||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Low"}),l.jsxs("span",{children:["",Number(k.dayLow||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Prev Close"}),l.jsxs("span",{children:["",Number(k.previousClose||0).toLocaleString()]})]})]})]})]},k.symbol||C))})]})}const Ro={HDFCBANK:12.96,RELIANCE:9.87,ICICIBANK:7.68,INFY:6.12,ITC:4.48,TCS:4.02,LT:3.89,BHARTIARTL:3.71,AXISBANK:3.01,SBIN:2.91,KOTAKBANK:2.62,BAJFINANCE:2.29,HINDUNILVR:2.25,MARUTI:1.68,ASIANPAINT:1.63,SUNPHARMA:1.6,TITAN:1.59,HCLTECH:1.54,NTPC:1.49,BAJAJFINSV:1.48,POWERGRID:1.44,"M&M":1.43,TATAMOTORS:1.38,ULTRACEMCO:1.36,ONGC:1.28,TECHM:1.15,NESTLEIND:1.14,TATASTEEL:1.09,WIPRO:1.05,ADANIENT:1.02,JSWSTEEL:.98,COALINDIA:.95,INDUSINDBK:.94,ADANIPORTS:.92,GRASIM:.88,HINDALCO:.85,BPCL:.82,DRREDDY:.78,BRITANNIA:.75,DIVISLAB:.72,CIPLA:.68,APOLLOHOSP:.65,HEROMOTOCO:.62,EICHERMOT:.58,TATACONSUM:.55,SBILIFE:.52,HDFCLIFE:.48,"BAJAJ-AUTO":.45,UPL:.42,LTIM:.38},Ip=24500;function AN(t,e,s,i=Ip){const n=Ro[t]||0;if(!n||!s||s===0)return 0;const r=e/s*n*(i/100);return Math.round(r*100)/100}const Nd={LONG_BUILDUP:{signal:"LONG_BUILDUP",label:"Long Buildup",emoji:"",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",description:"Fresh Buying - Trust this move"},SHORT_COVERING:{signal:"SHORT_COVERING",label:"Short Covering",emoji:"",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.15)",description:"Sellers Exiting - Weak move, be careful"},SHORT_BUILDUP:{signal:"SHORT_BUILDUP",label:"Short Buildup",emoji:"",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",description:"Fresh Selling - Trust the fall"},LONG_UNWINDING:{signal:"LONG_UNWINDING",label:"Long Unwinding",emoji:"",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",description:"Profit Booking - Just a dip"}};function WN(t,e){const s=t>0,i=e>0;return s&&i?"LONG_BUILDUP":s&&!i?"SHORT_COVERING":!s&&i?"SHORT_BUILDUP":"LONG_UNWINDING"}function UN(t,e=Ip){if(!t||!Array.isArray(t))return{movers:[],draggers:[],totalPositive:0,totalNegative:0};const i=[...t.filter(c=>Ro[c.symbol]).map(c=>{const u=(c.lastPrice||c.ltp||0)-(c.previousClose||c.prevClose||0),h=AN(c.symbol,u,c.previousClose||c.prevClose||0,e),d=c.oiChange||0,m=c.oiChangePct||0;return{symbol:c.symbol,ltp:c.lastPrice||c.ltp||0,prevClose:c.previousClose||c.prevClose||0,priceChange:u,priceChangePct:c.pChange||u/(c.previousClose||1)*100,weight:Ro[c.symbol]||0,contributionPoints:h,oiChange:d,oiChangePct:m,oiSignal:WN(u,d),dayHigh:c.dayHigh||0,dayLow:c.dayLow||0}})].sort((c,u)=>Math.abs(u.contributionPoints)-Math.abs(c.contributionPoints)),n=i.filter(c=>c.contributionPoints>0),r=i.filter(c=>c.contributionPoints<0),a=n.reduce((c,u)=>c+u.contributionPoints,0),o=r.reduce((c,u)=>c+u.contributionPoints,0);return{movers:n.slice(0,10),draggers:r.slice(0,10),totalPositive:Math.round(a*100)/100,totalNegative:Math.round(o*100)/100,netContribution:Math.round((a+o)*100)/100}}function HN(t){if(!t||t.length===0)return{strength:"neutral",message:"No data available",color:"text-gray-400 bg-gray-500/20",longBuildupCount:0,shortCoveringCount:0};const e=t.slice(0,3),s=e.filter(o=>o.oiSignal==="LONG_BUILDUP").length,i=e.filter(o=>o.oiSignal==="SHORT_COVERING").length;let n,r,a;return s>=2?(n="strong",r="Strong Trend - Fresh buying in top movers",a="strength-strong"):i>=2?(n="weak",r="Weak Rally - Mostly short covering",a="strength-weak"):(n="neutral",r="Mixed Signals - Watch carefully",a="strength-neutral"),{strength:n,message:r,color:a,longBuildupCount:s,shortCoveringCount:i}}function jd({stock:t,rank:e,type:s}){const i=Nd[t.oiSignal]||Nd.LONG_BUILDUP,n=s==="mover";return l.jsxs("div",{className:`contributor-card ${n?"contributor-mover":"contributor-dragger"}`,children:[l.jsxs("div",{className:"contributor-left",children:[l.jsx("span",{className:`contributor-rank ${n?"rank-positive":"rank-negative"}`,children:e}),l.jsxs("div",{className:"contributor-info",children:[l.jsx("div",{className:"contributor-symbol",children:t.symbol}),l.jsxs("div",{className:"contributor-price",children:["",Number(t.ltp).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),l.jsxs("div",{className:"oi-signal-badge",style:{backgroundColor:i.bgColor,color:i.color,borderColor:i.color+"40"},title:i.description,children:[l.jsx("span",{className:"oi-signal-emoji",children:i.emoji}),l.jsx("span",{className:"oi-signal-label",children:i.label}),t.oiChangePct!==0&&l.jsxs("span",{className:"oi-signal-pct",children:["(",t.oiChangePct>0?"+":"",t.oiChangePct.toFixed(1),"%)"]})]}),l.jsxs("div",{className:"contributor-right",children:[l.jsxs("div",{className:`contribution-points ${n?"points-positive":"points-negative"}`,children:[t.contributionPoints>0?"+":"",t.contributionPoints.toFixed(1)," pts"]}),l.jsxs("div",{className:"contribution-pct",children:[t.priceChangePct>0?"+":"",Number(t.priceChangePct).toFixed(2),"%"]})]})]})}function KN({movers:t}){const e=HN(t),s=()=>{switch(e.strength){case"strong":return"";case"weak":return"";default:return""}};return l.jsxs("div",{className:`market-strength-indicator ${e.color}`,children:[l.jsxs("div",{className:"strength-message",children:[l.jsx("span",{className:"strength-icon",children:s()}),l.jsx("span",{className:"strength-text",children:e.message})]}),l.jsxs("div",{className:"strength-details",children:["Top 3: ",e.longBuildupCount," Long Buildup, ",e.shortCoveringCount," Short Covering"]})]})}const _a=window.location.origin;function GN(){const[t,e]=w.useState([]),[s,i]=w.useState(24500),[n,r]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=pi("nifty-contributors",()=>m(),5e3),h=vi(u);w.useEffect(()=>{d()},[]);const d=async()=>{r(!0),o(null);try{const[y,g]=await Promise.all([U(`${_a}/nse_data/nifty-contributors`),U(`${_a}/nse_data/indices`).catch(()=>null)]);if(y!=null&&y.stocks&&e(y.stocks),g!=null&&g.indices){const j=g.indices.find(v=>v.index==="NIFTY 50"||v.indexSymbol==="NIFTY 50");(j!=null&&j.last||j!=null&&j.lastPrice)&&i(j.last||j.lastPrice)}}catch(y){console.error("Failed to load Nifty contributors:",y),o(y.message||"Failed to load data")}finally{r(!1),c.current=!1}},m=async()=>{const y=await qt(`${_a}/nse_data/nifty-contributors`);y!=null&&y.stocks&&e(y.stocks)},x=w.useMemo(()=>UN(t,s),[t,s]);return n&&c.current?l.jsxs("div",{className:"nifty-contributors-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading Nifty contributors..."})]}):a&&t.length===0?l.jsxs("div",{className:"nifty-contributors-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:a}),l.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]}):l.jsxs("div",{className:"nifty-contributors",children:[l.jsxs("div",{className:"contributors-header",children:[l.jsxs("div",{className:"contributors-title-section",children:[l.jsxs("h2",{className:"contributors-title",children:[l.jsx("span",{className:"contributors-icon",children:""}),"Nifty Index Contributors"]}),l.jsx("p",{className:"contributors-subtitle",children:"Who's lifting vs dragging the index - Sorted by Points, not %"})]}),l.jsxs("div",{className:"contributors-header-right",children:[l.jsx(KN,{movers:x.movers}),l.jsx("button",{onClick:d,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]})]}),l.jsxs("div",{className:"contribution-summary",children:[l.jsxs("div",{className:"summary-item summary-positive",children:[l.jsx("span",{className:"summary-label",children:"Total Positive"}),l.jsxs("span",{className:"summary-value",children:["+",x.totalPositive.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-net",children:[l.jsx("span",{className:"summary-label",children:"Net Contribution"}),l.jsxs("span",{className:`summary-value ${x.netContribution>=0?"positive":"negative"}`,children:[x.netContribution>=0?"+":"",x.netContribution.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-negative",children:[l.jsx("span",{className:"summary-label",children:"Total Negative"}),l.jsxs("span",{className:"summary-value",children:[x.totalNegative.toFixed(1)," pts"]})]})]}),l.jsxs("div",{className:"contributors-grid",children:[l.jsxs("div",{className:"contributors-column movers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title movers-title",children:[l.jsx("span",{children:""})," Index Movers"]}),l.jsxs("span",{className:"column-total positive",children:["+",x.totalPositive.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:x.movers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No positive contributors"})}):x.movers.map((y,g)=>l.jsx(jd,{stock:y,rank:g+1,type:"mover"},y.symbol))})]}),l.jsxs("div",{className:"contributors-column draggers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title draggers-title",children:[l.jsx("span",{children:""})," Index Draggers"]}),l.jsxs("span",{className:"column-total negative",children:[x.totalNegative.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:x.draggers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No negative contributors"})}):x.draggers.map((y,g)=>l.jsx(jd,{stock:y,rank:g+1,type:"dragger"},y.symbol))})]})]}),l.jsxs("div",{className:"oi-legend",children:[l.jsx("div",{className:"legend-title",children:"OI Signal Guide:"}),l.jsxs("div",{className:"legend-items",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh buying - trust the move"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Covering"}),l.jsx("span",{className:"legend-desc",children:"Weak move - be careful"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh selling - trust the fall"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Unwinding"}),l.jsx("span",{className:"legend-desc",children:"Profit booking - just a dip"})]})]})]}),u&&l.jsx("div",{className:"contributors-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const Ea=window.location.origin;function XN(){const[t,e]=w.useState(null),[s,i]=w.useState([]),[n,r]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=pi("fii-dii",()=>m(),6e4),h=vi(u);w.useEffect(()=>{d()},[]);const d=async()=>{r(!0),o(null);try{const[S,_]=await Promise.all([U(`${Ea}/nse_data/fii-dii-activity`),U(`${Ea}/nse_data/fii-dii-history?limit=30`)]);e(S),i((_==null?void 0:_.records)||[])}catch(S){console.error("Failed to load FII/DII data:",S),o(S.message||"Failed to load data")}finally{r(!1),c.current=!1}},m=async()=>{const S=await qt(`${Ea}/nse_data/fii-dii-activity`);S&&e(S)},x=S=>{if(S==null)return"";const _=S/100;return`${Math.abs(_).toFixed(2)} Cr`},y=S=>{if(S==null)return"";const _=S/100;return`${_>=0?"+":""}${_.toFixed(2)} Cr`},g=S=>S==null?"neutral":S>=0?"bullish":"bearish",v=(()=>{if(!s.length)return{fiiTotal:0,diiTotal:0,days:0};let S=0,_=0,k=0;return s.forEach(C=>{C.fii_net_value!==null&&(S+=C.fii_net_value,k++),C.dii_net_value!==null&&(_+=C.dii_net_value)}),{fiiTotal:S,diiTotal:_,days:k}})();if(n&&c.current)return l.jsxs("div",{className:"fii-dii-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading FII/DII activity..."})]});if(a&&!t)return l.jsxs("div",{className:"fii-dii-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:a}),l.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]});const f=t==null?void 0:t.fii,p=t==null?void 0:t.dii,N=t==null?void 0:t.date;return l.jsxs("div",{className:"fii-dii-activity",children:[l.jsxs("div",{className:"fii-dii-header",children:[l.jsxs("div",{className:"fii-dii-title-section",children:[l.jsxs("h2",{className:"fii-dii-title",children:[l.jsx("span",{className:"fii-dii-icon",children:""}),"FII / DII Activity"]}),l.jsxs("p",{className:"fii-dii-subtitle",children:["Foreign & Domestic Institutional Investor flows",N&&l.jsxs("span",{className:"trade-date",children:["  ",N]})]})]}),l.jsx("button",{onClick:d,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]}),l.jsxs("div",{className:"fii-dii-cards",children:[l.jsxs("div",{className:`institutional-card fii-card ${g(f==null?void 0:f.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"FII (Foreign)"})]}),l.jsx("div",{className:`net-badge ${g(f==null?void 0:f.netValue)}`,children:(f==null?void 0:f.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${g(f==null?void 0:f.netValue)}`,children:y(f==null?void 0:f.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:x(f==null?void 0:f.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:x(f==null?void 0:f.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card dii-card ${g(p==null?void 0:p.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"DII (Domestic)"})]}),l.jsx("div",{className:`net-badge ${g(p==null?void 0:p.netValue)}`,children:(p==null?void 0:p.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${g(p==null?void 0:p.netValue)}`,children:y(p==null?void 0:p.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:x(p==null?void 0:p.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:x(p==null?void 0:p.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card combined-card ${g(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))}`,children:[l.jsx("div",{className:"card-header",children:l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"Combined Flow"})]})}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${g(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))}`,children:y(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"FII Net"}),l.jsx("span",{className:`detail-value ${g(f==null?void 0:f.netValue)}`,children:y(f==null?void 0:f.netValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"DII Net"}),l.jsx("span",{className:`detail-value ${g(p==null?void 0:p.netValue)}`,children:y(p==null?void 0:p.netValue)})]})]})]})]}),s.length>0&&l.jsxs("div",{className:"fii-dii-history",children:[l.jsxs("h3",{className:"history-title",children:["Last ",v.days," Trading Days Summary"]}),l.jsxs("div",{className:"history-summary",children:[l.jsxs("div",{className:`summary-card ${g(v.fiiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"FII Cumulative"}),l.jsx("div",{className:`summary-value ${g(v.fiiTotal)}`,children:y(v.fiiTotal)})]}),l.jsxs("div",{className:`summary-card ${g(v.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"DII Cumulative"}),l.jsx("div",{className:`summary-value ${g(v.diiTotal)}`,children:y(v.diiTotal)})]}),l.jsxs("div",{className:`summary-card ${g(v.fiiTotal+v.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"Total Institutional"}),l.jsx("div",{className:`summary-value ${g(v.fiiTotal+v.diiTotal)}`,children:y(v.fiiTotal+v.diiTotal)})]})]}),l.jsx("div",{className:"history-table-container",children:l.jsxs("table",{className:"history-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{className:"text-right",children:"FII Net"}),l.jsx("th",{className:"text-right",children:"DII Net"}),l.jsx("th",{className:"text-right",children:"Total"})]})}),l.jsx("tbody",{children:s.slice(0,10).map((S,_)=>{const k=(S.fii_net_value||0)+(S.dii_net_value||0);return l.jsxs("tr",{children:[l.jsx("td",{className:"date-cell",children:S.trade_date?new Date(S.trade_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):""}),l.jsx("td",{className:`text-right ${g(S.fii_net_value)}`,children:y(S.fii_net_value)}),l.jsx("td",{className:`text-right ${g(S.dii_net_value)}`,children:y(S.dii_net_value)}),l.jsx("td",{className:`text-right ${g(k)}`,children:y(k)})]},S.trade_date||_)})})]})})]}),l.jsxs("div",{className:"fii-dii-insight",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("div",{className:"insight-title",children:"Market Insight"}),l.jsx("div",{className:"insight-text",children:(()=>{const S=(f==null?void 0:f.netValue)||0,_=(p==null?void 0:p.netValue)||0;return S>0&&_>0?"Both FII & DII are buying - Strong bullish sentiment with institutional support.":S<0&&_<0?"Both FII & DII are selling - Bearish sentiment, institutions are risk-off.":S<0&&_>0?"FII selling, DII buying - DIIs absorbing FII selling pressure. Watch for support levels.":S>0&&_<0?"FII buying, DII selling - Foreign interest increasing. DIIs may be booking profits.":"Mixed institutional activity. Monitor for clearer directional signals."})()})]})]}),u&&l.jsx("div",{className:"fii-dii-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const Sd=window.location.origin;function QN({subSection:t,onNavigate:e}){const[s,i]=w.useState(null),[n,r]=w.useState([]),[a,o]=w.useState(!0);w.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[j,v]=await Promise.all([U(`${Sd}/portfolio/summary`).catch(()=>null),U(`${Sd}/portfolio/orders`).catch(()=>({orders:[]}))]);i(j),r(v.orders||[])}catch(j){console.error("Failed to load wallet data:",j)}finally{o(!1)}},u=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(j||0),h=j=>j?new Date(j).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",d=(s==null?void 0:s.wallet_balance)??1e5,m=(s==null?void 0:s.total_invested)??0,x=(s==null?void 0:s.current_value)??0,y=(s==null?void 0:s.total_pnl)??0,g=d+x;return t==="transactions"?l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Transactions"})]}),l.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading transactions..."}):n.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Transactions"}),l.jsx("div",{className:"empty-state-text",children:"Start trading to see your transaction history here."}),l.jsx("button",{className:"primary-btn",onClick:()=>e("trading.trade"),children:"Start Trading"})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Type"}),l.jsx("th",{className:"text-right",children:"Amount"})]})}),l.jsx("tbody",{children:n.map((j,v)=>{var f;return l.jsxs("tr",{children:[l.jsx("td",{children:h(j.created_at)}),l.jsxs("td",{children:[j.side==="BUY"?"Bought":"Sold"," ",j.quantity," ",j.symbol]}),l.jsx("td",{children:l.jsx("span",{className:`order-side ${(f=j.side)==null?void 0:f.toLowerCase()}`,children:j.side})}),l.jsxs("td",{className:`text-right ${j.side==="BUY"?"negative":"positive"}`,children:[j.side==="BUY"?"-":"+","",Number(j.total_value||0).toLocaleString()]})]},j.id||v)})})]})})]}):l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Wallet"})]}),l.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading wallet..."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"wallet-overview",children:[l.jsxs("div",{className:"wallet-balance-card",children:[l.jsx("div",{className:"wallet-balance-label",children:"Available Balance"}),l.jsx("div",{className:"wallet-balance-value",children:u(d)}),l.jsx("div",{className:"wallet-balance-change",children:l.jsxs("span",{className:y>=0?"positive":"negative",children:[y>=0?"":""," ",u(Math.abs(y))," today"]})})]}),l.jsxs("div",{className:"wallet-actions-card",children:[l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.trade"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"Trade Stocks"})]}),l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.transactions"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"View Transactions"})]}),l.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.portfolio"),children:[l.jsx("span",{className:"wallet-action-icon",children:""}),l.jsx("span",{children:"View Portfolio"})]})]})]}),l.jsxs("div",{className:"wallet-stats-grid",children:[l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Net Worth"}),l.jsx("span",{className:"wallet-stat-value",children:u(g)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Invested"}),l.jsx("span",{className:"wallet-stat-value",children:u(m)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Current Value"}),l.jsx("span",{className:"wallet-stat-value",children:u(x)})]})]}),l.jsxs("div",{className:"wallet-stat-card",children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Total P&L"}),l.jsxs("span",{className:`wallet-stat-value ${y>=0?"positive":"negative"}`,children:[y>=0?"+":"",u(y)]})]})]})]}),n.length>0&&l.jsxs("div",{className:"wallet-recent",children:[l.jsxs("div",{className:"wallet-recent-header",children:[l.jsx("h3",{children:"Recent Transactions"}),l.jsx("button",{className:"link-btn",onClick:()=>e("wallet.transactions"),children:"View All "})]}),l.jsx("div",{className:"wallet-recent-list",children:n.slice(0,5).map((j,v)=>{var f;return l.jsxs("div",{className:"wallet-recent-item",children:[l.jsxs("div",{className:"wallet-recent-info",children:[l.jsx("span",{className:`order-side ${(f=j.side)==null?void 0:f.toLowerCase()}`,children:j.side}),l.jsxs("span",{className:"wallet-recent-desc",children:[j.quantity," ",j.symbol]})]}),l.jsxs("span",{className:j.side==="BUY"?"negative":"positive",children:[j.side==="BUY"?"-":"+","",Number(j.total_value||0).toLocaleString()]})]},j.id||v)})})]})]})]})}const bd=window.location.origin;function JN({onNavigate:t}){const[e,s]=w.useState([]),[i,n]=w.useState([]),[r,a]=w.useState(!0),[o,c]=w.useState(""),[u,h]=w.useState(!1),{lastUpdate:d}=pi("watchlist-prices",()=>y(),5e3);vi(d),w.useEffect(()=>{m(),x()},[]);const m=async()=>{const f=localStorage.getItem("watchlist");f&&s(JSON.parse(f))},x=async()=>{a(!0);try{const f=await U(`${bd}/nse_data/all-stocks`);n(f.stocks||[])}catch(f){console.error("Failed to load stocks:",f)}finally{a(!1)}},y=async()=>{var p;const f=await qt(`${bd}/nse_data/all-stocks`);if(((p=f==null?void 0:f.stocks)==null?void 0:p.length)>0){n(f.stocks);const N=localStorage.getItem("watchlist");if(N){const _=JSON.parse(N).map(k=>f.stocks.find(z=>z.symbol===k.symbol)||k);s(_)}}},g=f=>{if(!e.find(N=>N.symbol===f.symbol)){const N=[...e,f];s(N),localStorage.setItem("watchlist",JSON.stringify(N))}h(!1),c("")},j=f=>{const p=e.filter(N=>N.symbol!==f);s(p),localStorage.setItem("watchlist",JSON.stringify(p))},v=i.filter(f=>{var p,N;return((p=f.symbol)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))||((N=f.identifier)==null?void 0:N.toLowerCase().includes(o.toLowerCase()))});return l.jsxs("div",{className:"watchlist-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Watchlist"})]}),l.jsxs("div",{className:"section-actions",children:[l.jsx("button",{onClick:()=>h(!0),children:"+ Add Stock"}),l.jsx("button",{onClick:x,disabled:r,children:r?"Loading...":"Refresh"})]})]}),e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Stocks in Watchlist"}),l.jsx("div",{className:"empty-state-text",children:"Add stocks to your watchlist to track them easily."}),l.jsx("button",{className:"primary-btn",onClick:()=>h(!0),children:"Add Your First Stock"})]}):l.jsx("div",{className:"watchlist-grid",children:e.map(f=>{const p=i.find(_=>_.symbol===f.symbol),N=(p==null?void 0:p.lastPrice)||f.lastPrice||0,S=(p==null?void 0:p.pChange)||f.pChange||0;return l.jsxs("div",{className:"watchlist-item",children:[l.jsxs("div",{className:"watchlist-info",children:[l.jsx("span",{className:"watchlist-symbol",children:f.symbol}),l.jsx("span",{className:"watchlist-name",children:f.identifier||"Equity"})]}),l.jsxs("div",{className:"watchlist-price-info",children:[l.jsxs("div",{className:"watchlist-price",children:["",Number(N).toLocaleString()]}),l.jsxs("div",{className:`watchlist-change ${S>=0?"positive":"negative"}`,children:[S>=0?"+":"",Number(S).toFixed(2),"%"]})]}),l.jsxs("div",{className:"watchlist-actions",children:[l.jsx("button",{className:"watchlist-action-btn",onClick:()=>t("trading.trade"),title:"Trade",children:""}),l.jsx("button",{className:"watchlist-action-btn remove",onClick:()=>j(f.symbol),title:"Remove",children:""})]})]},f.symbol)})}),u&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>h(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:"Add to Watchlist"}),l.jsx("p",{className:"muted",children:"Search and add stocks to your watchlist"})]}),l.jsx("button",{className:"icon-button",onClick:()=>h(!1),children:""})]}),l.jsx("input",{type:"text",className:"search-input",placeholder:"Search stocks by symbol or name...",value:o,onChange:f=>c(f.target.value),autoFocus:!0}),l.jsx("div",{className:"stock-list",style:{maxHeight:"400px"},children:r?l.jsx("div",{className:"loading",children:"Loading stocks..."}):v.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):v.slice(0,20).map(f=>{const p=e.find(N=>N.symbol===f.symbol);return l.jsxs("div",{className:`stock-item ${p?"selected":""}`,onClick:()=>!p&&g(f),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:f.symbol}),l.jsx("span",{className:"stock-price",children:f.identifier||"Equity"})]}),l.jsx("div",{className:"stock-change",children:p?l.jsx("span",{className:"muted",children:"Added "}):f.lastPrice?l.jsxs("span",{className:f.pChange>=0?"positive":"negative",children:["",Number(f.lastPrice).toLocaleString()]}):l.jsx("span",{className:"muted",children:"-"})})]},f.symbol)})})]})})]})}function YN({subSection:t}){const e=mi(),{theme:s,setTheme:i}=lp(),n=localStorage.getItem("user_email")||"User",r=localStorage.getItem("user_name")||n.split("@")[0],[a,o]=w.useState(r),[c,u]=w.useState(localStorage.getItem("profile_pic")||""),[h,d]=w.useState(!1),[m,x]=w.useState(!1),[y,g]=w.useState(!1),j=w.useRef(null);La.useEffect(()=>{v()},[]),La.useEffect(()=>{v()},[t]);const v=async()=>{try{const z=await(await fetch("/fyers/status",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();x(z.connected)}catch(C){console.error("Error checking Fyers status:",C)}},f=async()=>{g(!0);try{const z=await(await fetch("/fyers/auth-url",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();z.url&&(window.location.href=z.url)}catch(C){console.error("Error getting Fyers auth URL:",C),alert("Failed to connect to Fyers. Please try again later.")}finally{g(!1)}},p=async()=>{if(confirm("Are you sure you want to disconnect your Fyers account?"))try{await fetch("/fyers/disconnect",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),x(!1)}catch(C){console.error("Error disconnecting Fyers:",C)}},N=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),e("/login")},S=()=>{d(!1),alert("Wallet reset feature coming soon!")},_=C=>{var I;const z=(I=C.target.files)==null?void 0:I[0];if(z){const G=new FileReader;G.onloadend=()=>{const ne=G.result;u(ne),localStorage.setItem("profile_pic",ne)},G.readAsDataURL(z)}},k=()=>{localStorage.setItem("user_name",a),alert("Display name saved!")};return t==="preferences"?l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Preferences"})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Display Settings"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Theme"}),l.jsx("span",{className:"settings-item-desc",children:"Choose your preferred theme"})]}),l.jsxs("select",{className:"settings-select",value:s,onChange:C=>{i(C.target.value)},children:[l.jsx("option",{value:"dark",children:"Dark Mode"}),l.jsx("option",{value:"light",children:"Light Mode"}),l.jsx("option",{value:"glass",children:"Glass Mode"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Currency Format"}),l.jsx("span",{className:"settings-item-desc",children:"Display currency format"})]}),l.jsx("select",{className:"settings-select",defaultValue:"inr",children:l.jsx("option",{value:"inr",children:" INR (Indian Rupee)"})})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Chart Default Interval"}),l.jsx("span",{className:"settings-item-desc",children:"Default time interval for charts"})]}),l.jsxs("select",{className:"settings-select",defaultValue:"1d",children:[l.jsx("option",{value:"1m",children:"1 Minute"}),l.jsx("option",{value:"5m",children:"5 Minutes"}),l.jsx("option",{value:"15m",children:"15 Minutes"}),l.jsx("option",{value:"1h",children:"1 Hour"}),l.jsx("option",{value:"1d",children:"1 Day"})]})]})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Notifications"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Trade Notifications"}),l.jsx("span",{className:"settings-item-desc",children:"Get notified when trades are executed"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Price Alerts"}),l.jsx("span",{className:"settings-item-desc",children:"Receive alerts when stocks hit target prices"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]})]})]})]}):l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Profile"})]})}),l.jsx("div",{className:"settings-card",children:l.jsxs("div",{className:"profile-header",children:[l.jsxs("div",{className:"profile-avatar clickable",onClick:()=>{var C;return(C=j.current)==null?void 0:C.click()},title:"Click to change profile picture",style:c?{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[!c&&a.charAt(0).toUpperCase(),l.jsx("div",{className:"avatar-overlay",children:""})]}),l.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:_,style:{display:"none"}}),l.jsxs("div",{className:"profile-info",children:[l.jsx("h3",{children:a}),l.jsx("span",{className:"profile-email",children:n}),l.jsx("span",{className:"profile-badge",children:"Paper Trading Account"})]})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Personal Information"}),l.jsx("div",{className:"settings-list",children:l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Display Name"}),l.jsx("span",{className:"settings-item-desc",children:"This name will be shown in the app"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsx("input",{type:"text",className:"settings-input",value:a,onChange:C=>o(C.target.value),placeholder:"Enter your name"}),l.jsx("button",{className:"settings-action-link primary",onClick:k,children:"Save"})]})]})})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Broker Connections"}),l.jsx("p",{className:"settings-desc",children:"Connect your real broker accounts to view holdings and place real trades."}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Fyers"}),l.jsx("span",{className:"settings-item-desc",children:"Trade with your Fyers account"})]})]})}),m?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("span",{className:"badge-connected",children:"Connected"}),l.jsx("button",{className:"settings-action-link danger",onClick:p,children:"Disconnect"})]}):l.jsx("button",{className:"settings-action-link primary",onClick:f,disabled:y,children:y?"Connecting...":"Connect"})]}),l.jsx("div",{className:"settings-item disabled",children:l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Zerodha"}),l.jsx("span",{className:"settings-item-desc",children:"Coming Soon"})]})]})})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Information"}),l.jsxs("div",{className:"settings-list",children:[l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Email"}),l.jsx("span",{className:"settings-item-value",children:n})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Account Type"}),l.jsx("span",{className:"settings-item-value",children:"Virtual Trading (Demo)"})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Starting Balance"}),l.jsx("span",{className:"settings-item-value",children:"1,00,000"})]})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Actions"}),l.jsxs("div",{className:"settings-actions",children:[l.jsxs("button",{className:"settings-action-btn warning",onClick:()=>d(!0),children:[l.jsx("span",{children:""}),"Reset Wallet"]}),l.jsxs("button",{className:"settings-action-btn danger",onClick:N,children:[l.jsx("span",{children:""}),"Logout"]})]})]}),h&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>d(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:C=>C.stopPropagation(),style:{maxWidth:"400px"},children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsx("div",{children:l.jsx("h3",{children:"Reset Wallet?"})}),l.jsx("button",{className:"icon-button",onClick:()=>d(!1),children:""})]}),l.jsx("p",{style:{marginBottom:"1.5rem"},children:"This will reset your wallet balance to 1,00,000 and clear all your holdings and order history. This action cannot be undone."}),l.jsxs("div",{className:"stock-trade-actions",style:{gridTemplateColumns:"1fr 1fr"},children:[l.jsx("button",{className:"chart-btn",onClick:()=>d(!1),children:"Cancel"}),l.jsx("button",{className:"sell-btn",onClick:S,children:"Reset Wallet"})]})]})})]})}const nr=window.location.origin;function kd(){var z,I,G,ne,de,R,te,V;const[t,e]=w.useState("NIFTY"),[s,i]=w.useState(null),[n,r]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(!0),[h,d]=w.useState(null),m=w.useRef(!0),{lastUpdate:x}=pi("option-clock",()=>j(),6e4),y=vi(x);w.useEffect(()=>{g()},[t]);const g=async()=>{u(!0),d(null);try{const[L,E,D]=await Promise.all([U(`${nr}/option-clock/overview`),U(`${nr}/option-clock/intraday/${t}`),U(`${nr}/option-clock/strike-analysis/${t}`)]);i(L),r((E==null?void 0:E.snapshots)||[]),o(D)}catch(L){console.error("Failed to load Option Clock data:",L),d(L.message||"Failed to load data")}finally{u(!1),m.current=!1}},j=async()=>{try{const L=await qt(`${nr}/option-clock/overview`);L&&i(L)}catch(L){console.error("Silent refresh failed:",L)}},v=L=>{switch(L){case"LONG_BUILDUP":return"bullish";case"SHORT_COVERING":return"bullish";case"SHORT_BUILDUP":return"bearish";case"LONG_UNWINDING":return"bearish";default:return"neutral"}},f=L=>{switch(L){case"LONG_BUILDUP":return"Price + OI Rising - Fresh Buying";case"SHORT_COVERING":return"Price Rising, OI Falling - Short Exit";case"SHORT_BUILDUP":return"Price Falling, OI Rising - Fresh Selling";case"LONG_UNWINDING":return"Price + OI Falling - Long Exit";default:return"No clear signal"}},p=L=>L?L.replace(/_/g," "):"N/A",N=L=>L?L>1.5?{text:"Heavy Put Writing - Bullish",color:"bullish"}:L>1.2?{text:"Put Heavy - Moderate Bullish",color:"bullish"}:L<.7?{text:"Heavy Call Writing - Bearish",color:"bearish"}:L<.9?{text:"Call Heavy - Moderate Bearish",color:"bearish"}:{text:"Balanced - Neutral",color:"neutral"}:{text:"No Data",color:"neutral"},S=s==null?void 0:s[t.toLowerCase()];if(c&&m.current)return l.jsxs("div",{className:"product-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Option Clock"})]})}),l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading Option Clock data..."})]})]});const _=L=>{if(!L)return!0;const E=new Date(L);return(new Date-E)/(1e3*60*60)>1},k=L=>{if(!L)return"No data";const E=new Date(L),F=new Date-E,H=Math.floor(F/(1e3*60)),Q=Math.floor(F/(1e3*60*60)),ut=Math.floor(F/(1e3*60*60*24));return ut>0?`${ut} day${ut>1?"s":""} ago`:Q>0?`${Q} hour${Q>1?"s":""} ago`:H>0?`${H} min${H>1?"s":""} ago`:"Just now"};if(h&&!S&&!s)return l.jsxs("div",{className:"product-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Option Clock"})]})}),l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),l.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",l.jsx("br",{}),l.jsx("br",{}),"Data is fetched every 15 minutes when the market is open.",l.jsx("br",{}),"Once collected, the last available data will be shown here even when market is closed."]}),l.jsx("button",{className:"refresh-btn",onClick:g,style:{marginTop:"1rem"},children:"Check Again"})]})]});const C=N(S==null?void 0:S.pcr);return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Option Clock"})]}),l.jsxs("p",{className:"section-subtitle",children:["OI-based market timing - Last updated: ",y]})]}),l.jsx("div",{className:"card symbol-selector-card",children:l.jsxs("div",{className:"symbol-toggle",children:[l.jsx("button",{className:`symbol-btn ${t==="NIFTY"?"active":""}`,onClick:()=>e("NIFTY"),children:"NIFTY 50"}),l.jsx("button",{className:`symbol-btn ${t==="BANKNIFTY"?"active":""}`,onClick:()=>e("BANKNIFTY"),children:"BANK NIFTY"})]})}),S&&(_(S.timestamp)?l.jsxs("div",{className:"stale-data-banner",children:[l.jsx("span",{className:"stale-data-icon",children:""}),l.jsxs("span",{className:"stale-data-text",children:[l.jsx("strong",{children:"Market Closed"})," - Showing last available data from ",k(S.timestamp),S.timestamp&&l.jsxs("span",{className:"stale-data-time",children:["(",new Date(S.timestamp).toLocaleString("en-IN",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),")"]})]})]}):l.jsxs("div",{className:"live-data-banner",children:[l.jsx("span",{className:"live-data-icon"}),l.jsxs("span",{className:"live-data-text",children:["Live Data - Updated ",k(S.timestamp)]})]})),S?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`signal-card ${v(S.signal)}`,children:[l.jsxs("div",{className:"signal-header",children:[l.jsx("span",{className:"signal-label",children:"Current Signal"}),l.jsx("span",{className:`signal-badge ${v(S.signal)}`,children:S.signal_strength})]}),l.jsx("div",{className:"signal-value",children:p(S.signal)}),l.jsx("div",{className:"signal-description",children:f(S.signal)})]}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsxs("div",{className:"stat-card-label",children:[t," Spot"]}),l.jsx("div",{className:"stat-card-value",children:(z=S.spot_price)==null?void 0:z.toLocaleString("en-IN",{maximumFractionDigits:2})}),l.jsxs("div",{className:`stat-card-change ${S.price_change>=0?"positive":"negative"}`,children:[S.price_change>=0?"+":"",(I=S.price_change)==null?void 0:I.toFixed(2)," (",(G=S.price_change_pct)==null?void 0:G.toFixed(2),"%)"]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:`stat-card-icon ${C.color==="bullish"?"green":C.color==="bearish"?"red":"blue"}`,children:""})}),l.jsx("div",{className:"stat-card-label",children:"Put-Call Ratio"}),l.jsx("div",{className:"stat-card-value",children:((ne=S.pcr)==null?void 0:ne.toFixed(3))||"N/A"}),l.jsx("div",{className:`stat-card-change ${C.color}`,children:C.text})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon orange",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Max Pain Strike"}),l.jsx("div",{className:"stat-card-value",children:((de=S.max_pain_strike)==null?void 0:de.toLocaleString("en-IN"))||"N/A"}),l.jsx("div",{className:"stat-card-change neutral",children:"Expected expiry level"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Data Timestamp"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem"},children:S.timestamp?new Date(S.timestamp).toLocaleTimeString("en-IN"):"N/A"}),l.jsx("div",{className:"stat-card-change neutral",children:"Updates every 15 min"})]})]}),a&&l.jsxs("div",{className:"card strike-levels-card",children:[l.jsx("h3",{children:"Key Strike Levels"}),l.jsxs("div",{className:"strike-levels-grid",children:[l.jsxs("div",{className:"strike-level-item support",children:[l.jsx("span",{className:"strike-label",children:"Highest Put OI (Support)"}),l.jsx("span",{className:"strike-value",children:((R=a.highest_put_oi_strike)==null?void 0:R.toLocaleString("en-IN"))||"N/A"})]}),l.jsxs("div",{className:"strike-level-item current",children:[l.jsx("span",{className:"strike-label",children:"Current Spot"}),l.jsx("span",{className:"strike-value",children:((te=a.spot_price)==null?void 0:te.toLocaleString("en-IN",{maximumFractionDigits:2}))||"N/A"})]}),l.jsxs("div",{className:"strike-level-item resistance",children:[l.jsx("span",{className:"strike-label",children:"Highest Call OI (Resistance)"}),l.jsx("span",{className:"strike-value",children:((V=a.highest_call_oi_strike)==null?void 0:V.toLocaleString("en-IN"))||"N/A"})]})]})]}),n.length>0&&l.jsxs("div",{className:"card intraday-timeline-card",children:[l.jsx("h3",{children:"Today's PCR Timeline"}),l.jsx("div",{className:"pcr-timeline",children:n.slice(-10).map((L,E)=>{var D,F;return l.jsxs("div",{className:`timeline-item ${v(L.signal)}`,title:`${new Date(L.timestamp).toLocaleTimeString()} - ${p(L.signal)}`,children:[l.jsx("div",{className:"timeline-time",children:new Date(L.timestamp).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),l.jsx("div",{className:"timeline-pcr",children:(D=L.pcr)==null?void 0:D.toFixed(2)}),l.jsx("div",{className:`timeline-signal ${v(L.signal)}`,children:(F=L.signal)==null?void 0:F.split("_")[0]})]},E)})})]}),(a==null?void 0:a.strikes)&&a.strikes.length>0&&l.jsxs("div",{className:"card strike-table-card",children:[l.jsx("h3",{children:"Strike-wise Open Interest"}),l.jsx("div",{className:"strike-table-container",children:l.jsxs("table",{className:"strike-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Call OI"}),l.jsx("th",{children:"Call Chg"}),l.jsx("th",{children:"Strike"}),l.jsx("th",{children:"Put Chg"}),l.jsx("th",{children:"Put OI"})]})}),l.jsx("tbody",{children:a.strikes.filter(L=>Math.abs(L.strike-a.spot_price)<=500).map((L,E)=>l.jsxs("tr",{className:L.is_atm?"atm-row":"",children:[l.jsxs("td",{className:L.is_resistance?"highlight-cell bearish":"",children:[(L.call_oi/1e5).toFixed(1),"L"]}),l.jsxs("td",{className:L.call_oi_change>0?"positive":L.call_oi_change<0?"negative":"",children:[L.call_oi_change>0?"+":"",(L.call_oi_change/1e5).toFixed(2),"L"]}),l.jsx("td",{className:"strike-col",children:L.strike}),l.jsxs("td",{className:L.put_oi_change>0?"positive":L.put_oi_change<0?"negative":"",children:[L.put_oi_change>0?"+":"",(L.put_oi_change/1e5).toFixed(2),"L"]}),l.jsxs("td",{className:L.is_support?"highlight-cell bullish":"",children:[(L.put_oi/1e5).toFixed(1),"L"]})]},E))})]})})]}),l.jsxs("div",{className:"card signal-legend-card",children:[l.jsx("h3",{children:"Signal Legend"}),l.jsxs("div",{className:"signal-legend-grid",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot bullish"}),l.jsxs("span",{className:"legend-text",children:[l.jsx("strong",{children:"Long Buildup:"})," Bullish - Fresh buying (Price + OI rising)"]})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot bullish"}),l.jsxs("span",{className:"legend-text",children:[l.jsx("strong",{children:"Short Covering:"})," Weak Bullish - Shorts exiting (Price rising, OI falling)"]})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot bearish"}),l.jsxs("span",{className:"legend-text",children:[l.jsx("strong",{children:"Short Buildup:"})," Bearish - Fresh selling (Price falling, OI rising)"]})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot bearish"}),l.jsxs("span",{className:"legend-text",children:[l.jsx("strong",{children:"Long Unwinding:"})," Weak Bearish - Longs exiting (Price + OI falling)"]})]})]})]})]}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),l.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",l.jsx("br",{}),l.jsx("br",{}),"Once data is collected, it will be displayed here even when market is closed."]})]})]})}function qN(){const[t,e]=w.useState("5m"),s=["1m","5m","15m","30m"];return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Option Apex"})]}),l.jsx("p",{className:"section-subtitle",children:"Candle-by-candle analysis of option position building throughout the trading day"})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{children:"Select Candle Interval"}),l.jsx("div",{className:"interval-buttons",children:s.map(i=>l.jsx("button",{className:`interval-btn ${t===i?"active":""}`,onClick:()=>e(i),children:i},i))})]}),l.jsx("div",{className:"coming-soon-section",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Option Apex - Coming Soon"}),l.jsxs("div",{className:"empty-state-text",children:["Advanced intraday options analysis featuring:",l.jsxs("ul",{style:{textAlign:"left",marginTop:"1rem"},children:[l.jsx("li",{children:"Real-time option premium candlestick charts"}),l.jsx("li",{children:"Per-candle OI and volume tracking"}),l.jsx("li",{children:"Institutional vs retail flow detection"}),l.jsx("li",{children:"Directional bias and conviction scoring"}),l.jsx("li",{children:"Entry/Exit signal generation with risk-reward"}),l.jsx("li",{children:"Put-Call Ratio and Max Pain calculator"}),l.jsx("li",{children:"Implied Volatility change tracker"})]})]}),l.jsx("div",{className:"feature-badge",children:"Premium Feature"})]})}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Option Candle Charts"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Smart Money Flow"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Trade Signals"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"PCR & Max Pain"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]})]})]})}function ZN(){const[t,e]=w.useState("volume"),s=[{id:"volume",label:"Volume Surge"},{id:"smart-money",label:"Smart Money"},{id:"breakout",label:"Breakouts"},{id:"delivery",label:"High Delivery"}];return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Market Pulse"})]}),l.jsx("p",{className:"section-subtitle",children:"Identify stocks where big players are actively building positions"})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{children:"Stock Screener Filters"}),l.jsx("div",{className:"filter-buttons",children:s.map(i=>l.jsx("button",{className:`filter-btn ${t===i.id?"active":""}`,onClick:()=>e(i.id),children:i.label},i.id))})]}),l.jsx("div",{className:"coming-soon-section",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Market Pulse - Coming Soon"}),l.jsxs("div",{className:"empty-state-text",children:["Detect institutional activity with:",l.jsxs("ul",{style:{textAlign:"left",marginTop:"1rem"},children:[l.jsx("li",{children:"Smart money flow tracking and alerts"}),l.jsx("li",{children:"Large block trade detection"}),l.jsx("li",{children:"Delivery percentage analysis"}),l.jsx("li",{children:"Unusual volume alerts with price correlation"}),l.jsx("li",{children:"Breakout volume confirmation"}),l.jsx("li",{children:"Accumulation/Distribution zone identification"}),l.jsx("li",{children:"Order flow imbalance tracker"}),l.jsx("li",{children:"Customizable stock screener"})]})]}),l.jsx("div",{className:"feature-badge",children:"Premium Feature"})]})}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Stock Screener"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Block Trades"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Volume Analysis"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Real-time Alerts"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]})]})]})}function ej(){const[t,e]=w.useState("all"),s=[{id:"all",label:"All Strategies"},{id:"breakout",label:"Breakout Plays"},{id:"reversal",label:"Reversal Patterns"},{id:"momentum",label:"Momentum Stocks"}];return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Insider Strategy"})]}),l.jsx("p",{className:"section-subtitle",children:"Analyze stocks based on proven market structures: price, volume, and OI growth"})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{children:"Select Strategy Type"}),l.jsx("div",{className:"strategy-buttons",children:s.map(i=>l.jsx("button",{className:`strategy-btn ${t===i.id?"active":""}`,onClick:()=>e(i.id),children:i.label},i.id))})]}),l.jsx("div",{className:"coming-soon-section",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Insider Strategy - Coming Soon"}),l.jsxs("div",{className:"empty-state-text",children:["High-reward trade identification with:",l.jsxs("ul",{style:{textAlign:"left",marginTop:"1rem"},children:[l.jsx("li",{children:"Multi-factor scoring engine (Price + Volume + OI)"}),l.jsx("li",{children:"Pattern recognition (Cup & Handle, Flags, H&S)"}),l.jsx("li",{children:"Volume growth and OI growth tracking"}),l.jsx("li",{children:"VWAP and volume surge detection"}),l.jsx("li",{children:"Risk-reward calculator with target projections"}),l.jsx("li",{children:"Optimal stop-loss recommendations"}),l.jsx("li",{children:"Backtesting engine with historical accuracy"}),l.jsx("li",{children:"Win rate and P/L statistics"})]})]}),l.jsx("div",{className:"feature-badge",children:"Premium Feature"})]})}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Pattern Detection"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Multi-Factor Score"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Backtesting Results"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Risk-Reward Analysis"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]})]})]})}const Cd=window.location.origin;function tj(){var C,z,I,G,ne,de;const[t,e]=w.useState("heatmap"),[s,i]=w.useState(!0),[n,r]=w.useState(null),[a,o]=w.useState(null),[c,u]=w.useState(null),[h,d]=w.useState(null),[m,x]=w.useState(!1),y=[{id:"heatmap",label:"Sector Heatmap"},{id:"leaders",label:"Leaders"},{id:"laggards",label:"Laggards"},{id:"rotation",label:"Rotation"}];w.useEffect(()=>{g()},[]),w.useEffect(()=>{c&&j(c)},[c]);const g=async()=>{i(!0),r(null);try{const R=await U(`${Cd}/sectors/heatmap`);o(R)}catch(R){console.error("Failed to load sector data:",R),r(R.message||"Failed to load sector data")}finally{i(!1)}},j=async R=>{x(!0);try{const te=await U(`${Cd}/sectors/${R}/stocks`);d(te)}catch(te){console.error("Failed to load sector stocks:",te),d(null)}finally{x(!1)}},v=R=>R>2?"rgba(34, 197, 94, 0.4)":R>1?"rgba(34, 197, 94, 0.25)":R>0?"rgba(34, 197, 94, 0.1)":R>-1?"rgba(239, 68, 68, 0.1)":R>-2?"rgba(239, 68, 68, 0.25)":"rgba(239, 68, 68, 0.4)";if(s)return l.jsxs("div",{className:"product-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Sector Scope"})]})}),l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading sector data..."})]})]});if(n&&!a)return l.jsxs("div",{className:"product-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Sector Scope"})]})}),l.jsx("div",{className:"error-container",children:l.jsxs("div",{className:"error-message",children:[l.jsx("span",{className:"error-icon",children:""}),l.jsx("p",{children:n}),l.jsx("button",{className:"refresh-btn",onClick:g,children:"Retry"})]})})]});const f=(a==null?void 0:a.sectors)||[],p=a==null?void 0:a.benchmark,N=a==null?void 0:a.rotation,S=a==null?void 0:a.summary,k=(()=>{switch(t){case"leaders":return f.filter(R=>R.percentChange>0).slice(0,8);case"laggards":return[...f].sort((R,te)=>R.percentChange-te.percentChange).slice(0,8);default:return f}})();return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Sector Scope"})]}),l.jsx("p",{className:"section-subtitle",children:"Sector performance analysis and rotation detection"})]}),p&&l.jsxs("div",{className:"card benchmark-card",children:[l.jsxs("div",{className:"benchmark-info",children:[l.jsx("span",{className:"benchmark-label",children:"Market Benchmark"}),l.jsx("span",{className:"benchmark-name",children:p.name})]}),l.jsxs("div",{className:"benchmark-value",children:[l.jsx("span",{className:"benchmark-price",children:(C=p.lastValue)==null?void 0:C.toLocaleString("en-IN")}),l.jsxs("span",{className:`benchmark-change ${p.percentChange>=0?"positive":"negative"}`,children:[p.percentChange>=0?"+":"",(z=p.percentChange)==null?void 0:z.toFixed(2),"%"]})]})]}),l.jsx("div",{className:"card",children:l.jsx("div",{className:"view-buttons",children:y.map(R=>l.jsx("button",{className:`view-btn ${t===R.id?"active":""}`,onClick:()=>{e(R.id),u(null)},children:R.label},R.id))})}),S&&t==="heatmap"&&l.jsxs("div",{className:"dashboard-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[l.jsxs("div",{className:"stat-card mini",children:[l.jsx("div",{className:"stat-card-label",children:"Total Sectors"}),l.jsx("div",{className:"stat-card-value",children:S.totalSectors})]}),l.jsxs("div",{className:"stat-card mini",children:[l.jsx("div",{className:"stat-card-label",children:"Advancing"}),l.jsx("div",{className:"stat-card-value positive",children:S.advancing})]}),l.jsxs("div",{className:"stat-card mini",children:[l.jsx("div",{className:"stat-card-label",children:"Declining"}),l.jsx("div",{className:"stat-card-value negative",children:S.declining})]}),l.jsxs("div",{className:"stat-card mini",children:[l.jsx("div",{className:"stat-card-label",children:"Breadth"}),l.jsxs("div",{className:`stat-card-value ${S.breadth>=50?"positive":"negative"}`,children:[S.breadth,"%"]})]})]}),t==="rotation"&&N&&l.jsxs("div",{className:"card rotation-card",children:[l.jsx("h3",{children:"Market Rotation Analysis"}),l.jsxs("div",{className:"rotation-phase",children:[l.jsx("span",{className:"phase-label",children:"Current Phase:"}),l.jsx("span",{className:`phase-badge ${(I=N.phase)==null?void 0:I.toLowerCase()}`,children:(G=N.phase)==null?void 0:G.replace("_"," ")})]}),l.jsx("p",{className:"rotation-insight",children:N.insight}),l.jsxs("div",{className:"rotation-sectors",children:[l.jsxs("div",{className:"rotation-group",children:[l.jsx("span",{className:"rotation-group-label",children:"Leading Sectors:"}),l.jsx("div",{className:"rotation-tags",children:(ne=N.leaders)==null?void 0:ne.map(R=>l.jsx("span",{className:"rotation-tag leader",children:R},R))})]}),l.jsxs("div",{className:"rotation-group",children:[l.jsx("span",{className:"rotation-group-label",children:"Lagging Sectors:"}),l.jsx("div",{className:"rotation-tags",children:(de=N.laggards)==null?void 0:de.map(R=>l.jsx("span",{className:"rotation-tag laggard",children:R},R))})]})]})]}),t!=="rotation"&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{children:t==="heatmap"?"Sector Performance":t==="leaders"?"Top Performing Sectors":"Worst Performing Sectors"}),l.jsx("div",{className:"sector-heatmap-grid",children:k.map(R=>{var te;return l.jsxs("div",{className:`sector-heatmap-cell ${c===R.shortName?"selected":""}`,style:{backgroundColor:v(R.percentChange)},onClick:()=>u(R.shortName),children:[l.jsx("div",{className:"sector-heatmap-name",children:R.name}),l.jsxs("div",{className:`sector-heatmap-change ${R.percentChange>=0?"positive":"negative"}`,children:[R.percentChange>=0?"+":"",(te=R.percentChange)==null?void 0:te.toFixed(2),"%"]}),l.jsxs("div",{className:"sector-heatmap-rs",children:[l.jsx("span",{className:"rs-label",children:"RS:"}),l.jsxs("span",{className:`rs-value ${R.relativeStrength>=0?"positive":"negative"}`,children:[R.relativeStrength>=0?"+":"",R.relativeStrength]})]}),l.jsx("div",{className:`sector-position-badge ${R.statusColor}`,children:R.position})]},R.indexName)})})]}),c&&l.jsxs("div",{className:"card sector-stocks-card",children:[l.jsxs("div",{className:"sector-stocks-header",children:[l.jsxs("h3",{children:[(h==null?void 0:h.sectorName)||c," Stocks",l.jsxs("span",{className:"stock-count",children:["(",(h==null?void 0:h.stockCount)||0," stocks)"]})]}),l.jsx("button",{className:"close-btn",onClick:()=>{u(null),d(null)},children:""})]}),m?l.jsx("div",{className:"loading-container",style:{padding:"2rem"},children:l.jsx("div",{className:"loading-spinner"})}):h!=null&&h.stocks?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"sector-stocks-summary",children:[l.jsxs("span",{className:"advancing",children:[" ",h.advancing," Advancing"]}),l.jsxs("span",{className:"declining",children:[" ",h.declining," Declining"]})]}),l.jsx("div",{className:"sector-stocks-table",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Price"}),l.jsx("th",{children:"Change"}),l.jsx("th",{children:"Volume"})]})}),l.jsx("tbody",{children:h.stocks.slice(0,15).map(R=>{var te,V;return l.jsxs("tr",{children:[l.jsx("td",{className:"stock-symbol",children:R.symbol}),l.jsx("td",{children:(te=R.lastPrice)==null?void 0:te.toLocaleString("en-IN",{maximumFractionDigits:2})}),l.jsxs("td",{className:R.percentChange>=0?"positive":"negative",children:[R.percentChange>=0?"+":"",(V=R.percentChange)==null?void 0:V.toFixed(2),"%"]}),l.jsxs("td",{children:[(R.volume/1e5).toFixed(2),"L"]})]},R.symbol)})})]})})]}):l.jsx("p",{className:"no-data",children:"No stocks data available"})]}),l.jsx("div",{className:"card",style:{textAlign:"center",padding:"1rem"},children:l.jsx("button",{className:"refresh-btn",onClick:g,children:"Refresh Data"})})]})}function sj(){const[t,e]=w.useState("breakouts"),s=[{id:"breakouts",label:"52W Breakouts"},{id:"ma-cross",label:"MA Crossovers"},{id:"momentum",label:"High Momentum"},{id:"reversals",label:"Trend Reversals"}];return l.jsxs("div",{className:"product-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Swing Spectrum"})]}),l.jsx("p",{className:"section-subtitle",children:"Stocks breaking barriers and signaling new trends for medium-term trading"})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{children:"Select Swing Trade Filter"}),l.jsx("div",{className:"filter-buttons",children:s.map(i=>l.jsx("button",{className:`filter-btn ${t===i.id?"active":""}`,onClick:()=>e(i.id),children:i.label},i.id))})]}),l.jsx("div",{className:"coming-soon-section",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Swing Spectrum - Coming Soon"}),l.jsxs("div",{className:"empty-state-text",children:["Medium-term trend detection with:",l.jsxs("ul",{style:{textAlign:"left",marginTop:"1rem"},children:[l.jsx("li",{children:"52-week high/low breakout tracker"}),l.jsx("li",{children:"Support/Resistance level calculator"}),l.jsx("li",{children:"Volume-confirmed breakout detection"}),l.jsx("li",{children:"Moving average crossovers (50/200 day)"}),l.jsx("li",{children:"Trend strength indicators (ADX, RSI, MACD)"}),l.jsx("li",{children:"Trend reversal signal detection"}),l.jsx("li",{children:"Swing trade portfolio manager"}),l.jsx("li",{children:"Trailing stop-loss system"}),l.jsx("li",{children:"Target achievement tracking"}),l.jsx("li",{children:"Multi-timeframe analysis (daily/weekly)"})]})]}),l.jsx("div",{className:"feature-badge",children:"Premium Feature"})]})}),l.jsxs("div",{className:"dashboard-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Breakout Stocks"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Technical Indicators"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon blue",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Swing Portfolio"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-card-header",children:l.jsx("div",{className:"stat-card-icon green",children:""})}),l.jsx("div",{className:"stat-card-label",children:"Auto Trailing SL"}),l.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem",opacity:.6},children:"Coming Soon"})]})]})]})}function ij(){const{isPaused:t,isOnline:e,togglePause:s,activeCount:i}=ox(),[n,r]=w.useState(bh()),[a,o]=w.useState(Ch());w.useEffect(()=>{const u=setInterval(()=>{r(bh()),o(Ch())},1e3);return()=>clearInterval(u)},[]);const c=ws();return e?l.jsxs("div",{className:"refresh-control",children:[l.jsxs("div",{className:"market-status",children:[l.jsxs("span",{className:`market-status-indicator ${c?"open":"closed"}`,children:[l.jsx("span",{className:"status-dot"}),n]}),l.jsxs("span",{className:"market-countdown",children:[a.event==="close"?"Closes":"Opens"," in ",a.countdown]})]}),c?l.jsxs("button",{className:`refresh-toggle-btn ${t?"paused":"active"}`,onClick:s,title:t?"Resume auto-refresh":"Pause auto-refresh",children:[t?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M3 2l10 6-10 6V2z"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M2 2h4v12H2V2zm8 0h4v12h-4V2z"})}),l.jsx("span",{className:"refresh-toggle-text",children:t?"Paused":`Live (${i})`})]}):l.jsx("span",{className:"refresh-status-text",children:"Auto-refresh paused (market closed)"})]}):l.jsx("div",{className:"refresh-control",children:l.jsxs("div",{className:"offline-indicator",children:[l.jsx("span",{className:"offline-dot"}),l.jsx("span",{children:"Offline"})]})})}function nj(){const t=mi(),{syncThemeWithBackend:e}=lp();localStorage.getItem("access_token");const s=localStorage.getItem("user_email")||"User",i=localStorage.getItem("user_name")||s.split("@")[0],[n,r]=w.useState("dashboard"),[a,o]=w.useState(!1),[c,u]=w.useState(!1),[h,d]=w.useState("");w.useEffect(()=>{e(),fetch("/static/version.json?t="+Date.now()).then(z=>z.json()).then(z=>d(`v${z.version}`)).catch(()=>d("v1.0.0"));const p=new URLSearchParams(window.location.search),N=p.get("s"),S=p.get("auth_code")||p.get("code"),_=p.get("id"),k=p.get("fyers_connected"),C=p.get("fyers_error");k==="true"?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),r("settings.profile")):C?(alert("Fyers connection failed: "+C),window.history.replaceState({},document.title,window.location.pathname),r("settings.profile")):N==="ok"&&S&&m(N,S,_)},[]);const m=async(p,N,S)=>{try{const _=await fetch(`/fyers/callback?s=${p}&code=${N}&id=${S}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),k=await _.json();_.ok?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),r("settings.profile")):alert("Failed to connect Fyers: "+k.detail)}catch(_){console.error("Error handling Fyers callback:",_)}},x=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),t("/login")},y=p=>{r(p),u(!1)},[g,j]=n.split("."),v=()=>{switch(g){case"dashboard":return l.jsx(_h,{onNavigate:y});case"products":switch(j){case"option-clock":return l.jsx(kd,{});case"option-apex":return l.jsx(qN,{});case"market-pulse":return l.jsx(ZN,{});case"insider-strategy":return l.jsx(ej,{});case"sector-scope":return l.jsx(tj,{});case"swing-spectrum":return l.jsx(sj,{});default:return l.jsx(kd,{})}case"trading":return j==="portfolio"||j==="orders"?l.jsx(To,{initialTab:j==="orders"?"orders":"portfolio"}):l.jsx(To,{initialTab:"trade"});case"real-trading":return l.jsx(ON,{initialTab:"trade"});case"market":return j==="nifty-contributors"?l.jsx(GN,{}):j==="fii-dii"?l.jsx(XN,{}):l.jsx(BN,{subSection:j||"gainers"});case"wallet":return l.jsx(QN,{subSection:j||"balance",onNavigate:y});case"watchlist":return l.jsx(JN,{onNavigate:y});case"settings":return l.jsx(YN,{subSection:j||"profile"});default:return l.jsx(_h,{onNavigate:y})}},f=()=>{const p={dashboard:"Dashboard",products:"TradeFinder Products","products.option-clock":"Option Clock","products.option-apex":"Option Apex","products.market-pulse":"Market Pulse","products.insider-strategy":"Insider Strategy","products.sector-scope":"Sector Scope","products.swing-spectrum":"Swing Spectrum",trading:"Virtual Trading","trading.trade":"Trade Stocks","trading.portfolio":"My Portfolio","trading.orders":"Order History","real-trading":"Real Trading","real-trading.fyers":"Fyers Trading",market:"Market Data","market.gainers":"Top Gainers","market.losers":"Top Losers","market.nifty-contributors":"Nifty Contributors","market.fii-dii":"FII / DII Activity","market.weekly":"Weekly Movers","market.bulk":"Bulk Deals",wallet:"Wallet","wallet.balance":"Balance","wallet.transactions":"Transactions",watchlist:"Watchlist",settings:"Settings","settings.profile":"Profile","settings.preferences":"Preferences"};return p[n]||p[g]||"Dashboard"};return l.jsxs("div",{className:"app-layout",children:[c&&l.jsx("div",{className:"mobile-overlay",onClick:()=>u(!1)}),l.jsx(ix,{activeSection:n,onSectionChange:y,collapsed:a,onToggleCollapse:()=>o(!a),mobileOpen:c,onMobileClose:()=>u(!1)}),l.jsxs("main",{className:`main-content ${a?"sidebar-collapsed":""}`,children:[l.jsxs("header",{className:"main-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsxs("button",{className:"mobile-menu-btn",onClick:()=>u(!c),"aria-label":"Toggle menu",children:[l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"})]}),l.jsx("h1",{className:"page-title",children:f()}),h&&l.jsx("span",{className:"version-badge",children:h})]}),l.jsxs("div",{className:"header-right",children:[l.jsx(ij,{}),l.jsx("span",{className:"user-email",children:i}),l.jsx("button",{className:"logout-btn",onClick:x,children:"Logout"})]})]}),l.jsx("div",{className:"content-area",children:v()})]})]})}function rj(){const t=mi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[r,a]=w.useState(""),[o,c]=w.useState({message:"",type:""}),[u,h]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/");const g=localStorage.getItem("GOOGLE_CLIENT_ID");g&&a(g);const j=()=>{const v=localStorage.getItem("GOOGLE_CLIENT_ID");v&&window.google&&(window.google.accounts.id.initialize({client_id:v,callback:d}),window.google.accounts.id.renderButton(document.getElementById("google-signin"),{theme:"outline",size:"large",width:280}))};if(window.google)j();else{const v=setInterval(()=>{window.google&&(clearInterval(v),j())},200);return()=>clearInterval(v)}},[t]);const d=async g=>{if(!(g!=null&&g.credential)){c({message:"Google sign-in failed",type:"error"});return}h(!0),c({message:"Signing in with Google...",type:"info"});try{const j=await Hr("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:g.credential})});m(j)}catch(j){c({message:j.message,type:"error"})}finally{h(!1)}},m=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):c({message:"Unexpected response from server",type:"error"})},x=async g=>{g.preventDefault(),h(!0),c({message:"Logging in...",type:"info"});try{const j=new URLSearchParams;j.append("username",e),j.append("password",i);const v=await Hr("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.toString()});m(v)}catch(j){c({message:j.message,type:"error"})}finally{h(!1)}},y=()=>{r&&(localStorage.setItem("GOOGLE_CLIENT_ID",r),c({message:"Saved Google Client ID. Reloading...",type:"info"}),setTimeout(()=>window.location.reload(),500))};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Welcome Back"}),l.jsx("p",{className:"muted",children:"Sign in to access your dashboard"})]}),l.jsxs("form",{onSubmit:x,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:g=>s(g.target.value),placeholder:"you@example.com",required:!0,disabled:u})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:i,onChange:g=>n(g.target.value),placeholder:"",required:!0,disabled:u})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:u,children:u?"Signing in...":"Sign In"})]}),l.jsx("div",{className:"auth-divider",children:l.jsx("span",{children:"or continue with"})}),l.jsxs("div",{className:"google-section",children:[l.jsx("div",{id:"google-signin",className:"google-placeholder",children:!localStorage.getItem("GOOGLE_CLIENT_ID")&&l.jsx("span",{className:"muted",children:"Set Google Client ID below to enable"})}),l.jsxs("div",{className:"google-config",children:[l.jsx("input",{type:"text",value:r,onChange:g=>a(g.target.value),placeholder:"Google Client ID (optional)"}),l.jsx("button",{type:"button",className:"ghost-btn",onClick:y,children:"Save"})]})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Don't have an account?"}),l.jsx(fl,{to:"/signup",children:"Create one"})]}),o.message&&l.jsx("div",{className:`auth-message ${o.type}`,children:o.message})]})})}function lj(){const t=mi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[r,a]=w.useState(""),[o,c]=w.useState(""),[u,h]=w.useState({message:"",type:""}),[d,m]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/")},[t]);const x=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):h({message:"Unexpected response from server",type:"error"})},y=async g=>{if(g.preventDefault(),r!==o){h({message:"Passwords do not match",type:"error"});return}if(r.length<6){h({message:"Password must be at least 6 characters",type:"error"});return}m(!0),h({message:"Creating account...",type:"info"});try{const j=await Hr("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:r,display_name:e||i.split("@")[0]})});x(j)}catch(j){h({message:j.message,type:"error"})}finally{m(!1)}};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Create Account"}),l.jsx("p",{className:"muted",children:"Join Stock Servs to start trading"})]}),l.jsxs("form",{onSubmit:y,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"displayName",children:"Display Name"}),l.jsx("input",{id:"displayName",type:"text",value:e,onChange:g=>s(g.target.value),placeholder:"John Doe",disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:i,onChange:g=>n(g.target.value),placeholder:"you@example.com",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:r,onChange:g=>a(g.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:g=>c(g.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:d,children:d?"Creating Account...":"Create Account"})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Already have an account?"}),l.jsx(fl,{to:"/login",children:"Sign in"})]}),u.message&&l.jsx("div",{className:`auth-message ${u.type}`,children:u.message})]})})}const wl=document.createElement("script");wl.src="https://accounts.google.com/gsi/client";wl.async=!0;wl.defer=!0;document.head.appendChild(wl);function aj({children:t}){return!!localStorage.getItem("access_token")?t:l.jsx(Rc,{to:"/login",replace:!0})}function _d({children:t}){return!!localStorage.getItem("access_token")?l.jsx(Rc,{to:"/",replace:!0}):t}Ma.createRoot(document.getElementById("root")).render(l.jsx(La.StrictMode,{children:l.jsx(q0,{children:l.jsx(Z0,{children:l.jsx(A0,{children:l.jsxs(y0,{children:[l.jsx(Ri,{path:"/",element:l.jsx(aj,{children:l.jsx(nj,{})})}),l.jsx(Ri,{path:"/login",element:l.jsx(_d,{children:l.jsx(rj,{})})}),l.jsx(Ri,{path:"/signup",element:l.jsx(_d,{children:l.jsx(lj,{})})}),l.jsx(Ri,{path:"*",element:l.jsx(Rc,{to:"/",replace:!0})})]})})})})}));
