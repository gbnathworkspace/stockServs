(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();function Ap(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fd={exports:{}},el={},md={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=Symbol.for("react.element"),Bp=Symbol.for("react.portal"),Vp=Symbol.for("react.fragment"),Wp=Symbol.for("react.strict_mode"),Up=Symbol.for("react.profiler"),Hp=Symbol.for("react.provider"),Kp=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Qp=Symbol.for("react.memo"),Yp=Symbol.for("react.lazy"),Xc=Symbol.iterator;function qp(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vd=Object.assign,gd={};function ui(t,e,s){this.props=t,this.context=e,this.refs=gd,this.updater=s||pd}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xd(){}xd.prototype=ui.prototype;function Mo(t,e,s){this.props=t,this.context=e,this.refs=gd,this.updater=s||pd}var Po=Mo.prototype=new xd;Po.constructor=Mo;vd(Po,ui.prototype);Po.isPureReactComponent=!0;var Qc=Array.isArray,yd=Object.prototype.hasOwnProperty,To={current:null},wd={key:!0,ref:!0,__self:!0,__source:!0};function jd(t,e,s){var i,n={},l=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(l=""+e.key),e)yd.call(e,i)&&!wd.hasOwnProperty(i)&&(n[i]=e[i]);var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:wn,type:t,key:l,ref:a,props:n,_owner:To.current}}function Jp(t,e){return{$$typeof:wn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $o(t){return typeof t=="object"&&t!==null&&t.$$typeof===wn}function Zp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Yc=/\/+/g;function _l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zp(""+t.key):e.toString(36)}function cr(t,e,s,i,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wn:case Bp:a=!0}}if(a)return a=t,n=n(a),t=i===""?"."+_l(a,0):i,Qc(n)?(s="",t!=null&&(s=t.replace(Yc,"$&/")+"/"),cr(n,e,s,"",function(u){return u})):n!=null&&($o(n)&&(n=Jp(n,s+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Yc,"$&/")+"/")+t)),e.push(n)),1;if(a=0,i=i===""?".":i+":",Qc(t))for(var o=0;o<t.length;o++){l=t[o];var c=i+_l(l,o);a+=cr(l,e,s,c,n)}else if(c=qp(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=i+_l(l,o++),a+=cr(l,e,s,c,n);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Pn(t,e,s){if(t==null)return t;var i=[],n=0;return cr(t,i,"","",function(l){return e.call(s,l,n++)}),i}function ev(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},ur={transition:null},tv={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ur,ReactCurrentOwner:To};function Nd(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Pn,forEach:function(t,e,s){Pn(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Pn(t,function(){e++}),e},toArray:function(t){return Pn(t,function(e){return e})||[]},only:function(t){if(!$o(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=ui;H.Fragment=Vp;H.Profiler=Up;H.PureComponent=Mo;H.StrictMode=Wp;H.Suspense=Xp;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tv;H.act=Nd;H.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vd({},t.props),n=t.key,l=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,a=To.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)yd.call(e,c)&&!wd.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:wn,type:t.type,key:n,ref:l,props:i,_owner:a}};H.createContext=function(t){return t={$$typeof:Kp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hp,_context:t},t.Consumer=t};H.createElement=jd;H.createFactory=function(t){var e=jd.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:Gp,render:t}};H.isValidElement=$o;H.lazy=function(t){return{$$typeof:Yp,_payload:{_status:-1,_result:t},_init:ev}};H.memo=function(t,e){return{$$typeof:Qp,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=ur.transition;ur.transition={};try{t()}finally{ur.transition=e}};H.unstable_act=Nd;H.useCallback=function(t,e){return Pe.current.useCallback(t,e)};H.useContext=function(t){return Pe.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};H.useEffect=function(t,e){return Pe.current.useEffect(t,e)};H.useId=function(){return Pe.current.useId()};H.useImperativeHandle=function(t,e,s){return Pe.current.useImperativeHandle(t,e,s)};H.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Pe.current.useMemo(t,e)};H.useReducer=function(t,e,s){return Pe.current.useReducer(t,e,s)};H.useRef=function(t){return Pe.current.useRef(t)};H.useState=function(t){return Pe.current.useState(t)};H.useSyncExternalStore=function(t,e,s){return Pe.current.useSyncExternalStore(t,e,s)};H.useTransition=function(){return Pe.current.useTransition()};H.version="18.3.1";md.exports=H;var w=md.exports;const Sr=Ap(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv=w,iv=Symbol.for("react.element"),nv=Symbol.for("react.fragment"),rv=Object.prototype.hasOwnProperty,lv=sv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,av={key:!0,ref:!0,__self:!0,__source:!0};function bd(t,e,s){var i,n={},l=null,a=null;s!==void 0&&(l=""+s),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)rv.call(e,i)&&!av.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:iv,type:t,key:l,ref:a,props:n,_owner:lv.current}}el.Fragment=nv;el.jsx=bd;el.jsxs=bd;fd.exports=el;var r=fd.exports,Ca={},Sd={exports:{}},Ke={},kd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var z=M.length;M.push(F);e:for(;0<z;){var W=z-1>>>1,Q=M[W];if(0<n(Q,F))M[W]=F,M[z]=Q,z=W;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var F=M[0],z=M.pop();if(z!==F){M[0]=z;e:for(var W=0,Q=M.length,$e=Q>>>1;W<$e;){var _e=2*(W+1)-1,as=M[_e],it=_e+1,Ms=M[it];if(0>n(as,z))it<Q&&0>n(Ms,as)?(M[W]=Ms,M[it]=z,W=it):(M[W]=as,M[_e]=z,W=_e);else if(it<Q&&0>n(Ms,z))M[W]=Ms,M[it]=z,W=it;else break e}}return F}function n(M,F){var z=M.sortIndex-F.sortIndex;return z!==0?z:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,p=3,x=!1,y=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(M){for(var F=s(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=M)i(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=s(u)}}function j(M){if(g=!1,m(M),!y)if(s(c)!==null)y=!0,Y(N);else{var F=s(u);F!==null&&P(j,F.startTime-M)}}function N(M,F){y=!1,g&&(g=!1,v(C),C=-1),x=!0;var z=p;try{for(m(F),f=s(c);f!==null&&(!(f.expirationTime>F)||M&&!O());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var Q=W(f.expirationTime<=F);F=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===s(c)&&i(c),m(F)}else i(c);f=s(c)}if(f!==null)var $e=!0;else{var _e=s(u);_e!==null&&P(j,_e.startTime-F),$e=!1}return $e}finally{f=null,p=z,x=!1}}var k=!1,S=null,C=-1,_=5,E=-1;function O(){return!(t.unstable_now()-E<_)}function B(){if(S!==null){var M=t.unstable_now();E=M;var F=!0;try{F=S(!0,M)}finally{F?G():(k=!1,S=null)}}else k=!1}var G;if(typeof h=="function")G=function(){h(B)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,K=R.port2;R.port1.onmessage=B,G=function(){K.postMessage(null)}}else G=function(){b(B,0)};function Y(M){S=M,k||(k=!0,G())}function P(M,F){C=b(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,Y(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var z=p;p=F;try{return M()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=p;p=M;try{return F()}finally{p=z}},t.unstable_scheduleCallback=function(M,F,z){var W=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,M){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=z+Q,M={id:d++,callback:F,priorityLevel:M,startTime:z,expirationTime:Q,sortIndex:-1},z>W?(M.sortIndex=z,e(u,M),s(c)===null&&M===s(u)&&(g?(v(C),C=-1):g=!0,P(j,z-W))):(M.sortIndex=Q,e(c,M),y||x||(y=!0,Y(N))),M},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(M){var F=p;return function(){var z=p;p=F;try{return M.apply(this,arguments)}finally{p=z}}}})(Cd);kd.exports=Cd;var ov=kd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=w,He=ov;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _d=new Set,Qi={};function _s(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(Qi[t]=e,t=0;t<e.length;t++)_d.add(e[t])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=Object.prototype.hasOwnProperty,uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qc={},Jc={};function hv(t){return _a.call(Jc,t)?!0:_a.call(qc,t)?!1:uv.test(t)?Jc[t]=!0:(qc[t]=!0,!1)}function dv(t,e,s,i){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fv(t,e,s,i){if(e===null||typeof e>"u"||dv(t,e,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Te(t,e,s,i,n,l,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=a}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new Te(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new Te(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new Te(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new Te(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new Te(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new Te(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new Te(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new Te(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new Te(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function zo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ro,zo);Ne[e]=new Te(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ro,zo);Ne[e]=new Te(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ro,zo);Ne[e]=new Te(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new Te(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new Te(t,1,!1,t.toLowerCase(),null,!0,!0)});function Io(t,e,s,i){var n=Ne.hasOwnProperty(e)?Ne[e]:null;(n!==null?n.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fv(e,s,n,i)&&(s=null),i||n===null?hv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(e=n.attributeName,i=n.attributeNamespace,s===null?t.removeAttribute(e):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,i?t.setAttributeNS(i,e,s):t.setAttribute(e,s))))}var It=cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tn=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),Do=Symbol.for("react.strict_mode"),Ea=Symbol.for("react.profiler"),Ed=Symbol.for("react.provider"),Ld=Symbol.for("react.context"),Fo=Symbol.for("react.forward_ref"),La=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),Oo=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Md=Symbol.for("react.offscreen"),Zc=Symbol.iterator;function wi(t){return t===null||typeof t!="object"?null:(t=Zc&&t[Zc]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,El;function Mi(t){if(El===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);El=e&&e[1]||""}return`
`+El+t}var Ll=!1;function Ml(t,e){if(!t||Ll)return"";Ll=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),l=i.stack.split(`
`),a=n.length-1,o=l.length-1;1<=a&&0<=o&&n[a]!==l[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==l[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==l[o]){var c=`
`+n[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Ll=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Mi(t):""}function mv(t){switch(t.tag){case 5:return Mi(t.type);case 16:return Mi("Lazy");case 13:return Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 2:case 15:return t=Ml(t.type,!1),t;case 11:return t=Ml(t.type.render,!1),t;case 1:return t=Ml(t.type,!0),t;default:return""}}function Pa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zs:return"Fragment";case Rs:return"Portal";case Ea:return"Profiler";case Do:return"StrictMode";case La:return"Suspense";case Ma:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ld:return(t.displayName||"Context")+".Consumer";case Ed:return(t._context.displayName||"Context")+".Provider";case Fo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oo:return e=t.displayName||null,e!==null?e:Pa(t.type)||"Memo";case At:e=t._payload,t=t._init;try{return Pa(t(e))}catch{}}return null}function pv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pa(e);case 8:return e===Do?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vv(t){var e=Pd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,l.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $n(t){t._valueTracker||(t._valueTracker=vv(t))}function Td(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),i="";return t&&(i=Pd(t)?t.checked?"true":"false":t.value),t=i,t!==s?(e.setValue(t),!0):!1}function kr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ta(t,e){var s=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function eu(t,e){var s=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;s=es(e.value!=null?e.value:s),t._wrapperState={initialChecked:i,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $d(t,e){e=e.checked,e!=null&&Io(t,"checked",e,!1)}function $a(t,e){$d(t,e);var s=es(e.value),i=e.type;if(s!=null)i==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ra(t,e.type,s):e.hasOwnProperty("defaultValue")&&Ra(t,e.type,es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ra(t,e,s){(e!=="number"||kr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Pi=Array.isArray;function Xs(t,e,s,i){if(t=t.options,e){e={};for(var n=0;n<s.length;n++)e["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=e.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&i&&(t[s].defaultSelected=!0)}else{for(s=""+es(s),e=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,i&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function za(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function su(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error($(92));if(Pi(s)){if(1<s.length)throw Error($(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:es(s)}}function Rd(t,e){var s=es(e.value),i=es(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),i!=null&&(t.defaultValue=""+i)}function iu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rn,Id=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,i,n){MSApp.execUnsafeLocalFunction(function(){return t(e,s,i,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rn=Rn||document.createElement("div"),Rn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gv=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(t){gv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zi[e]=zi[t]})});function Dd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||zi.hasOwnProperty(t)&&zi[t]?(""+e).trim():e+"px"}function Fd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var i=s.indexOf("--")===0,n=Dd(s,e[s],i);s==="float"&&(s="cssFloat"),i?t.setProperty(s,n):t[s]=n}}var xv=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(t,e){if(e){if(xv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Fa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oa=null;function Ao(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,Qs=null,Ys=null;function nu(t){if(t=bn(t)){if(typeof Aa!="function")throw Error($(280));var e=t.stateNode;e&&(e=rl(e),Aa(t.stateNode,t.type,e))}}function Od(t){Qs?Ys?Ys.push(t):Ys=[t]:Qs=t}function Ad(){if(Qs){var t=Qs,e=Ys;if(Ys=Qs=null,nu(t),e)for(t=0;t<e.length;t++)nu(e[t])}}function Bd(t,e){return t(e)}function Vd(){}var Pl=!1;function Wd(t,e,s){if(Pl)return t(e,s);Pl=!0;try{return Bd(t,e,s)}finally{Pl=!1,(Qs!==null||Ys!==null)&&(Vd(),Ad())}}function qi(t,e){var s=t.stateNode;if(s===null)return null;var i=rl(s);if(i===null)return null;s=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error($(231,e,typeof s));return s}var Ba=!1;if(Pt)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Ba=!1}function yv(t,e,s,i,n,l,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var Ii=!1,Cr=null,_r=!1,Va=null,wv={onError:function(t){Ii=!0,Cr=t}};function jv(t,e,s,i,n,l,a,o,c){Ii=!1,Cr=null,yv.apply(wv,arguments)}function Nv(t,e,s,i,n,l,a,o,c){if(jv.apply(this,arguments),Ii){if(Ii){var u=Cr;Ii=!1,Cr=null}else throw Error($(198));_r||(_r=!0,Va=u)}}function Es(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Ud(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ru(t){if(Es(t)!==t)throw Error($(188))}function bv(t){var e=t.alternate;if(!e){if(e=Es(t),e===null)throw Error($(188));return e!==t?null:t}for(var s=t,i=e;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(i=n.return,i!==null){s=i;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return ru(n),t;if(l===i)return ru(n),e;l=l.sibling}throw Error($(188))}if(s.return!==i.return)s=n,i=l;else{for(var a=!1,o=n.child;o;){if(o===s){a=!0,s=n,i=l;break}if(o===i){a=!0,i=n,s=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===s){a=!0,s=l,i=n;break}if(o===i){a=!0,i=l,s=n;break}o=o.sibling}if(!a)throw Error($(189))}}if(s.alternate!==i)throw Error($(190))}if(s.tag!==3)throw Error($(188));return s.stateNode.current===s?t:e}function Hd(t){return t=bv(t),t!==null?Kd(t):null}function Kd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kd(t);if(e!==null)return e;t=t.sibling}return null}var Gd=He.unstable_scheduleCallback,lu=He.unstable_cancelCallback,Sv=He.unstable_shouldYield,kv=He.unstable_requestPaint,ue=He.unstable_now,Cv=He.unstable_getCurrentPriorityLevel,Bo=He.unstable_ImmediatePriority,Xd=He.unstable_UserBlockingPriority,Er=He.unstable_NormalPriority,_v=He.unstable_LowPriority,Qd=He.unstable_IdlePriority,tl=null,wt=null;function Ev(t){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(tl,t,void 0,(t.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:Pv,Lv=Math.log,Mv=Math.LN2;function Pv(t){return t>>>=0,t===0?32:31-(Lv(t)/Mv|0)|0}var zn=64,In=4194304;function Ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lr(t,e){var s=t.pendingLanes;if(s===0)return 0;var i=0,n=t.suspendedLanes,l=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~n;o!==0?i=Ti(o):(l&=a,l!==0&&(i=Ti(l)))}else a=s&~n,a!==0?i=Ti(a):l!==0&&(i=Ti(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&n)&&(n=i&-i,l=e&-e,n>=l||n===16&&(l&4194240)!==0))return e;if(i&4&&(i|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)s=31-ct(e),n=1<<s,i|=t[s],e&=~n;return i}function Tv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $v(t,e){for(var s=t.suspendedLanes,i=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var a=31-ct(l),o=1<<a,c=n[a];c===-1?(!(o&s)||o&i)&&(n[a]=Tv(o,e)):c<=e&&(t.expiredLanes|=o),l&=~o}}function Wa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yd(){var t=zn;return zn<<=1,!(zn&4194240)&&(zn=64),t}function Tl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function jn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ct(e),t[e]=s}function Rv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-ct(s),l=1<<n;e[n]=0,i[n]=-1,t[n]=-1,s&=~l}}function Vo(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var i=31-ct(s),n=1<<i;n&e|t[i]&e&&(t[i]|=e),s&=~n}}var q=0;function qd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jd,Wo,Zd,ef,tf,Ua=!1,Dn=[],Kt=null,Gt=null,Xt=null,Ji=new Map,Zi=new Map,Vt=[],zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(t,e){switch(t){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":Ji.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(e.pointerId)}}function Ni(t,e,s,i,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:s,eventSystemFlags:i,nativeEvent:l,targetContainers:[n]},e!==null&&(e=bn(e),e!==null&&Wo(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function Iv(t,e,s,i,n){switch(e){case"focusin":return Kt=Ni(Kt,t,e,s,i,n),!0;case"dragenter":return Gt=Ni(Gt,t,e,s,i,n),!0;case"mouseover":return Xt=Ni(Xt,t,e,s,i,n),!0;case"pointerover":var l=n.pointerId;return Ji.set(l,Ni(Ji.get(l)||null,t,e,s,i,n)),!0;case"gotpointercapture":return l=n.pointerId,Zi.set(l,Ni(Zi.get(l)||null,t,e,s,i,n)),!0}return!1}function sf(t){var e=hs(t.target);if(e!==null){var s=Es(e);if(s!==null){if(e=s.tag,e===13){if(e=Ud(s),e!==null){t.blockedOn=e,tf(t.priority,function(){Zd(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ha(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var i=new s.constructor(s.type,s);Oa=i,s.target.dispatchEvent(i),Oa=null}else return e=bn(s),e!==null&&Wo(e),t.blockedOn=s,!1;e.shift()}return!0}function ou(t,e,s){hr(t)&&s.delete(e)}function Dv(){Ua=!1,Kt!==null&&hr(Kt)&&(Kt=null),Gt!==null&&hr(Gt)&&(Gt=null),Xt!==null&&hr(Xt)&&(Xt=null),Ji.forEach(ou),Zi.forEach(ou)}function bi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ua||(Ua=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,Dv)))}function en(t){function e(n){return bi(n,t)}if(0<Dn.length){bi(Dn[0],t);for(var s=1;s<Dn.length;s++){var i=Dn[s];i.blockedOn===t&&(i.blockedOn=null)}}for(Kt!==null&&bi(Kt,t),Gt!==null&&bi(Gt,t),Xt!==null&&bi(Xt,t),Ji.forEach(e),Zi.forEach(e),s=0;s<Vt.length;s++)i=Vt[s],i.blockedOn===t&&(i.blockedOn=null);for(;0<Vt.length&&(s=Vt[0],s.blockedOn===null);)sf(s),s.blockedOn===null&&Vt.shift()}var qs=It.ReactCurrentBatchConfig,Mr=!0;function Fv(t,e,s,i){var n=q,l=qs.transition;qs.transition=null;try{q=1,Uo(t,e,s,i)}finally{q=n,qs.transition=l}}function Ov(t,e,s,i){var n=q,l=qs.transition;qs.transition=null;try{q=4,Uo(t,e,s,i)}finally{q=n,qs.transition=l}}function Uo(t,e,s,i){if(Mr){var n=Ha(t,e,s,i);if(n===null)Vl(t,e,i,Pr,s),au(t,i);else if(Iv(n,t,e,s,i))i.stopPropagation();else if(au(t,i),e&4&&-1<zv.indexOf(t)){for(;n!==null;){var l=bn(n);if(l!==null&&Jd(l),l=Ha(t,e,s,i),l===null&&Vl(t,e,i,Pr,s),l===n)break;n=l}n!==null&&i.stopPropagation()}else Vl(t,e,i,null,s)}}var Pr=null;function Ha(t,e,s,i){if(Pr=null,t=Ao(i),t=hs(t),t!==null)if(e=Es(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Ud(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pr=t,null}function nf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cv()){case Bo:return 1;case Xd:return 4;case Er:case _v:return 16;case Qd:return 536870912;default:return 16}default:return 16}}var Ut=null,Ho=null,dr=null;function rf(){if(dr)return dr;var t,e=Ho,s=e.length,i,n="value"in Ut?Ut.value:Ut.textContent,l=n.length;for(t=0;t<s&&e[t]===n[t];t++);var a=s-t;for(i=1;i<=a&&e[s-i]===n[l-i];i++);return dr=n.slice(t,1<i?1-i:void 0)}function fr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fn(){return!0}function cu(){return!1}function Ge(t){function e(s,i,n,l,a){this._reactName=s,this._targetInst=n,this.type=i,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Fn:cu,this.isPropagationStopped=cu,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),e}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Ge(hi),Nn=le({},hi,{view:0,detail:0}),Av=Ge(Nn),$l,Rl,Si,sl=le({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?($l=t.screenX-Si.screenX,Rl=t.screenY-Si.screenY):Rl=$l=0,Si=t),$l)},movementY:function(t){return"movementY"in t?t.movementY:Rl}}),uu=Ge(sl),Bv=le({},sl,{dataTransfer:0}),Vv=Ge(Bv),Wv=le({},Nn,{relatedTarget:0}),zl=Ge(Wv),Uv=le({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hv=Ge(Uv),Kv=le({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gv=Ge(Kv),Xv=le({},hi,{data:0}),hu=Ge(Xv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qv[t])?!!e[t]:!1}function Go(){return Jv}var Zv=le({},Nn,{key:function(t){if(t.key){var e=Qv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(t){return t.type==="keypress"?fr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eg=Ge(Zv),tg=le({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),du=Ge(tg),sg=le({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),ig=Ge(sg),ng=le({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),rg=Ge(ng),lg=le({},sl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ag=Ge(lg),og=[9,13,27,32],Xo=Pt&&"CompositionEvent"in window,Di=null;Pt&&"documentMode"in document&&(Di=document.documentMode);var cg=Pt&&"TextEvent"in window&&!Di,lf=Pt&&(!Xo||Di&&8<Di&&11>=Di),fu=" ",mu=!1;function af(t,e){switch(t){case"keyup":return og.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function ug(t,e){switch(t){case"compositionend":return of(e);case"keypress":return e.which!==32?null:(mu=!0,fu);case"textInput":return t=e.data,t===fu&&mu?null:t;default:return null}}function hg(t,e){if(Is)return t==="compositionend"||!Xo&&af(t,e)?(t=rf(),dr=Ho=Ut=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lf&&e.locale!=="ko"?null:e.data;default:return null}}var dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dg[t.type]:e==="textarea"}function cf(t,e,s,i){Od(i),e=Tr(e,"onChange"),0<e.length&&(s=new Ko("onChange","change",null,s,i),t.push({event:s,listeners:e}))}var Fi=null,tn=null;function fg(t){wf(t,0)}function il(t){var e=Os(t);if(Td(e))return t}function mg(t,e){if(t==="change")return e}var uf=!1;if(Pt){var Il;if(Pt){var Dl="oninput"in document;if(!Dl){var vu=document.createElement("div");vu.setAttribute("oninput","return;"),Dl=typeof vu.oninput=="function"}Il=Dl}else Il=!1;uf=Il&&(!document.documentMode||9<document.documentMode)}function gu(){Fi&&(Fi.detachEvent("onpropertychange",hf),tn=Fi=null)}function hf(t){if(t.propertyName==="value"&&il(tn)){var e=[];cf(e,tn,t,Ao(t)),Wd(fg,e)}}function pg(t,e,s){t==="focusin"?(gu(),Fi=e,tn=s,Fi.attachEvent("onpropertychange",hf)):t==="focusout"&&gu()}function vg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return il(tn)}function gg(t,e){if(t==="click")return il(e)}function xg(t,e){if(t==="input"||t==="change")return il(e)}function yg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:yg;function sn(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),i=Object.keys(e);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var n=s[i];if(!_a.call(e,n)||!ht(t[n],e[n]))return!1}return!0}function xu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yu(t,e){var s=xu(t);t=0;for(var i;s;){if(s.nodeType===3){if(i=t+s.textContent.length,t<=e&&i>=e)return{node:s,offset:e-t};t=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=xu(s)}}function df(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?df(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ff(){for(var t=window,e=kr();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=kr(t.document)}return e}function Qo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wg(t){var e=ff(),s=t.focusedElem,i=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&df(s.ownerDocument.documentElement,s)){if(i!==null&&Qo(s)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,l=Math.min(i.start,n);i=i.end===void 0?l:Math.min(i.end,n),!t.extend&&l>i&&(n=i,i=l,l=n),n=yu(s,l);var a=yu(s,i);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jg=Pt&&"documentMode"in document&&11>=document.documentMode,Ds=null,Ka=null,Oi=null,Ga=!1;function wu(t,e,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ga||Ds==null||Ds!==kr(i)||(i=Ds,"selectionStart"in i&&Qo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Oi&&sn(Oi,i)||(Oi=i,i=Tr(Ka,"onSelect"),0<i.length&&(e=new Ko("onSelect","select",null,e,s),t.push({event:e,listeners:i}),e.target=Ds)))}function On(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Fs={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionend:On("Transition","TransitionEnd")},Fl={},mf={};Pt&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function nl(t){if(Fl[t])return Fl[t];if(!Fs[t])return t;var e=Fs[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in mf)return Fl[t]=e[s];return t}var pf=nl("animationend"),vf=nl("animationiteration"),gf=nl("animationstart"),xf=nl("transitionend"),yf=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(t,e){yf.set(t,e),_s(e,[t])}for(var Ol=0;Ol<ju.length;Ol++){var Al=ju[Ol],Ng=Al.toLowerCase(),bg=Al[0].toUpperCase()+Al.slice(1);is(Ng,"on"+bg)}is(pf,"onAnimationEnd");is(vf,"onAnimationIteration");is(gf,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(xf,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sg=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Nu(t,e,s){var i=t.type||"unknown-event";t.currentTarget=s,Nv(i,e,void 0,t),t.currentTarget=null}function wf(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var i=t[s],n=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==l&&n.isPropagationStopped())break e;Nu(n,o,u),l=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==l&&n.isPropagationStopped())break e;Nu(n,o,u),l=c}}}if(_r)throw t=Va,_r=!1,Va=null,t}function Z(t,e){var s=e[Ja];s===void 0&&(s=e[Ja]=new Set);var i=t+"__bubble";s.has(i)||(jf(e,t,2,!1),s.add(i))}function Bl(t,e,s){var i=0;e&&(i|=4),jf(s,t,i,e)}var An="_reactListening"+Math.random().toString(36).slice(2);function nn(t){if(!t[An]){t[An]=!0,_d.forEach(function(s){s!=="selectionchange"&&(Sg.has(s)||Bl(s,!1,t),Bl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[An]||(e[An]=!0,Bl("selectionchange",!1,e))}}function jf(t,e,s,i){switch(nf(e)){case 1:var n=Fv;break;case 4:n=Ov;break;default:n=Uo}s=n.bind(null,e,s,t),n=void 0,!Ba||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),i?n!==void 0?t.addEventListener(e,s,{capture:!0,passive:n}):t.addEventListener(e,s,!0):n!==void 0?t.addEventListener(e,s,{passive:n}):t.addEventListener(e,s,!1)}function Vl(t,e,s,i,n){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=hs(o),a===null)return;if(c=a.tag,c===5||c===6){i=l=a;continue e}o=o.parentNode}}i=i.return}Wd(function(){var u=l,d=Ao(s),f=[];e:{var p=yf.get(t);if(p!==void 0){var x=Ko,y=t;switch(t){case"keypress":if(fr(s)===0)break e;case"keydown":case"keyup":x=eg;break;case"focusin":y="focus",x=zl;break;case"focusout":y="blur",x=zl;break;case"beforeblur":case"afterblur":x=zl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ig;break;case pf:case vf:case gf:x=Hv;break;case xf:x=rg;break;case"scroll":x=Av;break;case"wheel":x=ag;break;case"copy":case"cut":case"paste":x=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=du}var g=(e&4)!==0,b=!g&&t==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var h=u,m;h!==null;){m=h;var j=m.stateNode;if(m.tag===5&&j!==null&&(m=j,v!==null&&(j=qi(h,v),j!=null&&g.push(rn(h,j,m)))),b)break;h=h.return}0<g.length&&(p=new x(p,y,null,s,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&s!==Oa&&(y=s.relatedTarget||s.fromElement)&&(hs(y)||y[Tt]))break e;if((x||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,x?(y=s.relatedTarget||s.toElement,x=u,y=y?hs(y):null,y!==null&&(b=Es(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(g=uu,j="onMouseLeave",v="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(g=du,j="onPointerLeave",v="onPointerEnter",h="pointer"),b=x==null?p:Os(x),m=y==null?p:Os(y),p=new g(j,h+"leave",x,s,d),p.target=b,p.relatedTarget=m,j=null,hs(d)===u&&(g=new g(v,h+"enter",y,s,d),g.target=m,g.relatedTarget=b,j=g),b=j,x&&y)t:{for(g=x,v=y,h=0,m=g;m;m=Ts(m))h++;for(m=0,j=v;j;j=Ts(j))m++;for(;0<h-m;)g=Ts(g),h--;for(;0<m-h;)v=Ts(v),m--;for(;h--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ts(g),v=Ts(v)}g=null}else g=null;x!==null&&bu(f,p,x,g,!1),y!==null&&b!==null&&bu(f,b,y,g,!0)}}e:{if(p=u?Os(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var N=mg;else if(pu(p))if(uf)N=xg;else{N=vg;var k=pg}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=gg);if(N&&(N=N(t,u))){cf(f,N,s,d);break e}k&&k(t,p,u),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Ra(p,"number",p.value)}switch(k=u?Os(u):window,t){case"focusin":(pu(k)||k.contentEditable==="true")&&(Ds=k,Ka=u,Oi=null);break;case"focusout":Oi=Ka=Ds=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,wu(f,s,d);break;case"selectionchange":if(jg)break;case"keydown":case"keyup":wu(f,s,d)}var S;if(Xo)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Is?af(t,s)&&(C="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(lf&&s.locale!=="ko"&&(Is||C!=="onCompositionStart"?C==="onCompositionEnd"&&Is&&(S=rf()):(Ut=d,Ho="value"in Ut?Ut.value:Ut.textContent,Is=!0)),k=Tr(u,C),0<k.length&&(C=new hu(C,t,null,s,d),f.push({event:C,listeners:k}),S?C.data=S:(S=of(s),S!==null&&(C.data=S)))),(S=cg?ug(t,s):hg(t,s))&&(u=Tr(u,"onBeforeInput"),0<u.length&&(d=new hu("onBeforeInput","beforeinput",null,s,d),f.push({event:d,listeners:u}),d.data=S))}wf(f,e)})}function rn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Tr(t,e){for(var s=e+"Capture",i=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=qi(t,s),l!=null&&i.unshift(rn(t,l,n)),l=qi(t,e),l!=null&&i.push(rn(t,l,n))),t=t.return}return i}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bu(t,e,s,i,n){for(var l=e._reactName,a=[];s!==null&&s!==i;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,n?(c=qi(s,l),c!=null&&a.unshift(rn(s,c,o))):n||(c=qi(s,l),c!=null&&a.push(rn(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var kg=/\r\n?/g,Cg=/\u0000|\uFFFD/g;function Su(t){return(typeof t=="string"?t:""+t).replace(kg,`
`).replace(Cg,"")}function Bn(t,e,s){if(e=Su(e),Su(t)!==e&&s)throw Error($(425))}function $r(){}var Xa=null,Qa=null;function Ya(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qa=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,ku=typeof Promise=="function"?Promise:void 0,Eg=typeof queueMicrotask=="function"?queueMicrotask:typeof ku<"u"?function(t){return ku.resolve(null).then(t).catch(Lg)}:qa;function Lg(t){setTimeout(function(){throw t})}function Wl(t,e){var s=e,i=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(i===0){t.removeChild(n),en(e);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=n}while(s);en(e)}function Qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),xt="__reactFiber$"+di,ln="__reactProps$"+di,Tt="__reactContainer$"+di,Ja="__reactEvents$"+di,Mg="__reactListeners$"+di,Pg="__reactHandles$"+di;function hs(t){var e=t[xt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Tt]||s[xt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Cu(t);t!==null;){if(s=t[xt])return s;t=Cu(t)}return e}t=s,s=t.parentNode}return null}function bn(t){return t=t[xt]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function rl(t){return t[ln]||null}var Za=[],As=-1;function ns(t){return{current:t}}function te(t){0>As||(t.current=Za[As],Za[As]=null,As--)}function J(t,e){As++,Za[As]=t.current,t.current=e}var ts={},Ce=ns(ts),De=ns(!1),gs=ts;function si(t,e){var s=t.type.contextTypes;if(!s)return ts;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Fe(t){return t=t.childContextTypes,t!=null}function Rr(){te(De),te(Ce)}function _u(t,e,s){if(Ce.current!==ts)throw Error($(168));J(Ce,e),J(De,s)}function Nf(t,e,s){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error($(108,pv(t)||"Unknown",n));return le({},s,i)}function zr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,gs=Ce.current,J(Ce,t),J(De,De.current),!0}function Eu(t,e,s){var i=t.stateNode;if(!i)throw Error($(169));s?(t=Nf(t,e,gs),i.__reactInternalMemoizedMergedChildContext=t,te(De),te(Ce),J(Ce,t)):te(De),J(De,s)}var St=null,ll=!1,Ul=!1;function bf(t){St===null?St=[t]:St.push(t)}function Tg(t){ll=!0,bf(t)}function rs(){if(!Ul&&St!==null){Ul=!0;var t=0,e=q;try{var s=St;for(q=1;t<s.length;t++){var i=s[t];do i=i(!0);while(i!==null)}St=null,ll=!1}catch(n){throw St!==null&&(St=St.slice(t+1)),Gd(Bo,rs),n}finally{q=e,Ul=!1}}return null}var Bs=[],Vs=0,Ir=null,Dr=0,Ye=[],qe=0,xs=null,kt=1,Ct="";function cs(t,e){Bs[Vs++]=Dr,Bs[Vs++]=Ir,Ir=t,Dr=e}function Sf(t,e,s){Ye[qe++]=kt,Ye[qe++]=Ct,Ye[qe++]=xs,xs=t;var i=kt;t=Ct;var n=32-ct(i)-1;i&=~(1<<n),s+=1;var l=32-ct(e)+n;if(30<l){var a=n-n%5;l=(i&(1<<a)-1).toString(32),i>>=a,n-=a,kt=1<<32-ct(e)+n|s<<n|i,Ct=l+t}else kt=1<<l|s<<n|i,Ct=t}function Yo(t){t.return!==null&&(cs(t,1),Sf(t,1,0))}function qo(t){for(;t===Ir;)Ir=Bs[--Vs],Bs[Vs]=null,Dr=Bs[--Vs],Bs[Vs]=null;for(;t===xs;)xs=Ye[--qe],Ye[qe]=null,Ct=Ye[--qe],Ye[qe]=null,kt=Ye[--qe],Ye[qe]=null}var Ue=null,We=null,se=!1,at=null;function kf(t,e){var s=Je(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Lu(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,We=Qt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=xs!==null?{id:kt,overflow:Ct}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Je(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ue=t,We=null,!0):!1;default:return!1}}function eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function to(t){if(se){var e=We;if(e){var s=e;if(!Lu(t,e)){if(eo(t))throw Error($(418));e=Qt(s.nextSibling);var i=Ue;e&&Lu(t,e)?kf(i,s):(t.flags=t.flags&-4097|2,se=!1,Ue=t)}}else{if(eo(t))throw Error($(418));t.flags=t.flags&-4097|2,se=!1,Ue=t}}}function Mu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function Vn(t){if(t!==Ue)return!1;if(!se)return Mu(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ya(t.type,t.memoizedProps)),e&&(e=We)){if(eo(t))throw Cf(),Error($(418));for(;e;)kf(t,e),e=Qt(e.nextSibling)}if(Mu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){We=Qt(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}We=null}}else We=Ue?Qt(t.stateNode.nextSibling):null;return!0}function Cf(){for(var t=We;t;)t=Qt(t.nextSibling)}function ii(){We=Ue=null,se=!1}function Jo(t){at===null?at=[t]:at.push(t)}var $g=It.ReactCurrentBatchConfig;function ki(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error($(309));var i=s.stateNode}if(!i)throw Error($(147,t));var n=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(a){var o=n.refs;a===null?delete o[l]:o[l]=a},e._stringRef=l,e)}if(typeof t!="string")throw Error($(284));if(!s._owner)throw Error($(290,t))}return t}function Wn(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pu(t){var e=t._init;return e(t._payload)}function _f(t){function e(v,h){if(t){var m=v.deletions;m===null?(v.deletions=[h],v.flags|=16):m.push(h)}}function s(v,h){if(!t)return null;for(;h!==null;)e(v,h),h=h.sibling;return null}function i(v,h){for(v=new Map;h!==null;)h.key!==null?v.set(h.key,h):v.set(h.index,h),h=h.sibling;return v}function n(v,h){return v=Zt(v,h),v.index=0,v.sibling=null,v}function l(v,h,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<h?(v.flags|=2,h):m):(v.flags|=2,h)):(v.flags|=1048576,h)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,h,m,j){return h===null||h.tag!==6?(h=ql(m,v.mode,j),h.return=v,h):(h=n(h,m),h.return=v,h)}function c(v,h,m,j){var N=m.type;return N===zs?d(v,h,m.props.children,j,m.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===At&&Pu(N)===h.type)?(j=n(h,m.props),j.ref=ki(v,h,m),j.return=v,j):(j=wr(m.type,m.key,m.props,null,v.mode,j),j.ref=ki(v,h,m),j.return=v,j)}function u(v,h,m,j){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Jl(m,v.mode,j),h.return=v,h):(h=n(h,m.children||[]),h.return=v,h)}function d(v,h,m,j,N){return h===null||h.tag!==7?(h=ps(m,v.mode,j,N),h.return=v,h):(h=n(h,m),h.return=v,h)}function f(v,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ql(""+h,v.mode,m),h.return=v,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Tn:return m=wr(h.type,h.key,h.props,null,v.mode,m),m.ref=ki(v,null,h),m.return=v,m;case Rs:return h=Jl(h,v.mode,m),h.return=v,h;case At:var j=h._init;return f(v,j(h._payload),m)}if(Pi(h)||wi(h))return h=ps(h,v.mode,m,null),h.return=v,h;Wn(v,h)}return null}function p(v,h,m,j){var N=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:o(v,h,""+m,j);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tn:return m.key===N?c(v,h,m,j):null;case Rs:return m.key===N?u(v,h,m,j):null;case At:return N=m._init,p(v,h,N(m._payload),j)}if(Pi(m)||wi(m))return N!==null?null:d(v,h,m,j,null);Wn(v,m)}return null}function x(v,h,m,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(m)||null,o(h,v,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Tn:return v=v.get(j.key===null?m:j.key)||null,c(h,v,j,N);case Rs:return v=v.get(j.key===null?m:j.key)||null,u(h,v,j,N);case At:var k=j._init;return x(v,h,m,k(j._payload),N)}if(Pi(j)||wi(j))return v=v.get(m)||null,d(h,v,j,N,null);Wn(h,j)}return null}function y(v,h,m,j){for(var N=null,k=null,S=h,C=h=0,_=null;S!==null&&C<m.length;C++){S.index>C?(_=S,S=null):_=S.sibling;var E=p(v,S,m[C],j);if(E===null){S===null&&(S=_);break}t&&S&&E.alternate===null&&e(v,S),h=l(E,h,C),k===null?N=E:k.sibling=E,k=E,S=_}if(C===m.length)return s(v,S),se&&cs(v,C),N;if(S===null){for(;C<m.length;C++)S=f(v,m[C],j),S!==null&&(h=l(S,h,C),k===null?N=S:k.sibling=S,k=S);return se&&cs(v,C),N}for(S=i(v,S);C<m.length;C++)_=x(S,v,C,m[C],j),_!==null&&(t&&_.alternate!==null&&S.delete(_.key===null?C:_.key),h=l(_,h,C),k===null?N=_:k.sibling=_,k=_);return t&&S.forEach(function(O){return e(v,O)}),se&&cs(v,C),N}function g(v,h,m,j){var N=wi(m);if(typeof N!="function")throw Error($(150));if(m=N.call(m),m==null)throw Error($(151));for(var k=N=null,S=h,C=h=0,_=null,E=m.next();S!==null&&!E.done;C++,E=m.next()){S.index>C?(_=S,S=null):_=S.sibling;var O=p(v,S,E.value,j);if(O===null){S===null&&(S=_);break}t&&S&&O.alternate===null&&e(v,S),h=l(O,h,C),k===null?N=O:k.sibling=O,k=O,S=_}if(E.done)return s(v,S),se&&cs(v,C),N;if(S===null){for(;!E.done;C++,E=m.next())E=f(v,E.value,j),E!==null&&(h=l(E,h,C),k===null?N=E:k.sibling=E,k=E);return se&&cs(v,C),N}for(S=i(v,S);!E.done;C++,E=m.next())E=x(S,v,C,E.value,j),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?C:E.key),h=l(E,h,C),k===null?N=E:k.sibling=E,k=E);return t&&S.forEach(function(B){return e(v,B)}),se&&cs(v,C),N}function b(v,h,m,j){if(typeof m=="object"&&m!==null&&m.type===zs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Tn:e:{for(var N=m.key,k=h;k!==null;){if(k.key===N){if(N=m.type,N===zs){if(k.tag===7){s(v,k.sibling),h=n(k,m.props.children),h.return=v,v=h;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===At&&Pu(N)===k.type){s(v,k.sibling),h=n(k,m.props),h.ref=ki(v,k,m),h.return=v,v=h;break e}s(v,k);break}else e(v,k);k=k.sibling}m.type===zs?(h=ps(m.props.children,v.mode,j,m.key),h.return=v,v=h):(j=wr(m.type,m.key,m.props,null,v.mode,j),j.ref=ki(v,h,m),j.return=v,v=j)}return a(v);case Rs:e:{for(k=m.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){s(v,h.sibling),h=n(h,m.children||[]),h.return=v,v=h;break e}else{s(v,h);break}else e(v,h);h=h.sibling}h=Jl(m,v.mode,j),h.return=v,v=h}return a(v);case At:return k=m._init,b(v,h,k(m._payload),j)}if(Pi(m))return y(v,h,m,j);if(wi(m))return g(v,h,m,j);Wn(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(s(v,h.sibling),h=n(h,m),h.return=v,v=h):(s(v,h),h=ql(m,v.mode,j),h.return=v,v=h),a(v)):s(v,h)}return b}var ni=_f(!0),Ef=_f(!1),Fr=ns(null),Or=null,Ws=null,Zo=null;function ec(){Zo=Ws=Or=null}function tc(t){var e=Fr.current;te(Fr),t._currentValue=e}function so(t,e,s){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===s)break;t=t.return}}function Js(t,e){Or=t,Zo=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ie=!0),t.firstContext=null)}function et(t){var e=t._currentValue;if(Zo!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(Or===null)throw Error($(308));Ws=t,Or.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var ds=null;function sc(t){ds===null?ds=[t]:ds.push(t)}function Lf(t,e,s,i){var n=e.interleaved;return n===null?(s.next=s,sc(e)):(s.next=n.next,n.next=s),e.interleaved=s,$t(t,i)}function $t(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Bt=!1;function ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yt(t,e,s){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,X&2){var n=i.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),i.pending=e,$t(t,s)}return n=i.interleaved,n===null?(e.next=e,sc(i)):(e.next=n.next,n.next=e),i.interleaved=e,$t(t,s)}function mr(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Vo(t,s)}}function Tu(t,e){var s=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=a:l=l.next=a,s=s.next}while(s!==null);l===null?n=l=e:l=l.next=e}else n=l=e;s={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ar(t,e,s,i){var n=t.updateQueue;Bt=!1;var l=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(l!==null){var f=n.baseState;a=0,d=u=c=null,o=l;do{var p=o.lane,x=o.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,g=o;switch(p=e,x=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(x,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(x,f,p):y,p==null)break e;f=le({},f,p);break e;case 2:Bt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=n.effects,p===null?n.effects=[o]:p.push(o))}else x={eventTime:x,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=x,c=f):d=d.next=x,a|=p;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;p=o,o=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(d===null&&(c=f),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=d,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else l===null&&(n.shared.lanes=0);ws|=a,t.lanes=a,t.memoizedState=f}}function $u(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],n=i.callback;if(n!==null){if(i.callback=null,i=s,typeof n!="function")throw Error($(191,n));n.call(i)}}}var Sn={},jt=ns(Sn),an=ns(Sn),on=ns(Sn);function fs(t){if(t===Sn)throw Error($(174));return t}function nc(t,e){switch(J(on,e),J(an,t),J(jt,Sn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ia(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ia(e,t)}te(jt),J(jt,e)}function ri(){te(jt),te(an),te(on)}function Pf(t){fs(on.current);var e=fs(jt.current),s=Ia(e,t.type);e!==s&&(J(an,t),J(jt,s))}function rc(t){an.current===t&&(te(jt),te(an))}var ne=ns(0);function Br(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hl=[];function lc(){for(var t=0;t<Hl.length;t++)Hl[t]._workInProgressVersionPrimary=null;Hl.length=0}var pr=It.ReactCurrentDispatcher,Kl=It.ReactCurrentBatchConfig,ys=0,re=null,pe=null,ge=null,Vr=!1,Ai=!1,cn=0,Rg=0;function be(){throw Error($(321))}function ac(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!ht(t[s],e[s]))return!1;return!0}function oc(t,e,s,i,n,l){if(ys=l,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pr.current=t===null||t.memoizedState===null?Fg:Og,t=s(i,n),Ai){l=0;do{if(Ai=!1,cn=0,25<=l)throw Error($(301));l+=1,ge=pe=null,e.updateQueue=null,pr.current=Ag,t=s(i,n)}while(Ai)}if(pr.current=Wr,e=pe!==null&&pe.next!==null,ys=0,ge=pe=re=null,Vr=!1,e)throw Error($(300));return t}function cc(){var t=cn!==0;return cn=0,t}function gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?re.memoizedState=ge=t:ge=ge.next=t,ge}function tt(){if(pe===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=ge===null?re.memoizedState:ge.next;if(e!==null)ge=e,pe=t;else{if(t===null)throw Error($(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ge===null?re.memoizedState=ge=t:ge=ge.next=t}return ge}function un(t,e){return typeof e=="function"?e(t):e}function Gl(t){var e=tt(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var i=pe,n=i.baseQueue,l=s.pending;if(l!==null){if(n!==null){var a=n.next;n.next=l.next,l.next=a}i.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,i=i.baseState;var o=a=null,c=null,u=l;do{var d=u.lane;if((ys&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=i):c=c.next=f,re.lanes|=d,ws|=d}u=u.next}while(u!==null&&u!==l);c===null?a=i:c.next=o,ht(i,e.memoizedState)||(Ie=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,s.lastRenderedState=i}if(t=s.interleaved,t!==null){n=t;do l=n.lane,re.lanes|=l,ws|=l,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xl(t){var e=tt(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var i=s.dispatch,n=s.pending,l=e.memoizedState;if(n!==null){s.pending=null;var a=n=n.next;do l=t(l,a.action),a=a.next;while(a!==n);ht(l,e.memoizedState)||(Ie=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),s.lastRenderedState=l}return[l,i]}function Tf(){}function $f(t,e){var s=re,i=tt(),n=e(),l=!ht(i.memoizedState,n);if(l&&(i.memoizedState=n,Ie=!0),i=i.queue,uc(If.bind(null,s,i,t),[t]),i.getSnapshot!==e||l||ge!==null&&ge.memoizedState.tag&1){if(s.flags|=2048,hn(9,zf.bind(null,s,i,n,e),void 0,null),xe===null)throw Error($(349));ys&30||Rf(s,e,n)}return n}function Rf(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function zf(t,e,s,i){e.value=s,e.getSnapshot=i,Df(e)&&Ff(t)}function If(t,e,s){return s(function(){Df(e)&&Ff(t)})}function Df(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ht(t,s)}catch{return!0}}function Ff(t){var e=$t(t,1);e!==null&&ut(e,t,1,-1)}function Ru(t){var e=gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:t},e.queue=t,t=t.dispatch=Dg.bind(null,re,t),[e.memoizedState,t]}function hn(t,e,s,i){return t={tag:t,create:e,destroy:s,deps:i,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(i=s.next,s.next=t,t.next=i,e.lastEffect=t)),t}function Of(){return tt().memoizedState}function vr(t,e,s,i){var n=gt();re.flags|=t,n.memoizedState=hn(1|e,s,void 0,i===void 0?null:i)}function al(t,e,s,i){var n=tt();i=i===void 0?null:i;var l=void 0;if(pe!==null){var a=pe.memoizedState;if(l=a.destroy,i!==null&&ac(i,a.deps)){n.memoizedState=hn(e,s,l,i);return}}re.flags|=t,n.memoizedState=hn(1|e,s,l,i)}function zu(t,e){return vr(8390656,8,t,e)}function uc(t,e){return al(2048,8,t,e)}function Af(t,e){return al(4,2,t,e)}function Bf(t,e){return al(4,4,t,e)}function Vf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wf(t,e,s){return s=s!=null?s.concat([t]):null,al(4,4,Vf.bind(null,e,t),s)}function hc(){}function Uf(t,e){var s=tt();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&ac(e,i[1])?i[0]:(s.memoizedState=[t,e],t)}function Hf(t,e){var s=tt();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&ac(e,i[1])?i[0]:(t=t(),s.memoizedState=[t,e],t)}function Kf(t,e,s){return ys&21?(ht(s,e)||(s=Yd(),re.lanes|=s,ws|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ie=!0),t.memoizedState=s)}function zg(t,e){var s=q;q=s!==0&&4>s?s:4,t(!0);var i=Kl.transition;Kl.transition={};try{t(!1),e()}finally{q=s,Kl.transition=i}}function Gf(){return tt().memoizedState}function Ig(t,e,s){var i=Jt(t);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},Xf(t))Qf(e,s);else if(s=Lf(t,e,s,i),s!==null){var n=Le();ut(s,t,i,n),Yf(s,e,i)}}function Dg(t,e,s){var i=Jt(t),n={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(Xf(t))Qf(e,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var a=e.lastRenderedState,o=l(a,s);if(n.hasEagerState=!0,n.eagerState=o,ht(o,a)){var c=e.interleaved;c===null?(n.next=n,sc(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}s=Lf(t,e,n,i),s!==null&&(n=Le(),ut(s,t,i,n),Yf(s,e,i))}}function Xf(t){var e=t.alternate;return t===re||e!==null&&e===re}function Qf(t,e){Ai=Vr=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Yf(t,e,s){if(s&4194240){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Vo(t,s)}}var Wr={readContext:et,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},Fg={readContext:et,useCallback:function(t,e){return gt().memoizedState=[t,e===void 0?null:e],t},useContext:et,useEffect:zu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,vr(4194308,4,Vf.bind(null,e,t),s)},useLayoutEffect:function(t,e){return vr(4194308,4,t,e)},useInsertionEffect:function(t,e){return vr(4,2,t,e)},useMemo:function(t,e){var s=gt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var i=gt();return e=s!==void 0?s(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ig.bind(null,re,t),[i.memoizedState,t]},useRef:function(t){var e=gt();return t={current:t},e.memoizedState=t},useState:Ru,useDebugValue:hc,useDeferredValue:function(t){return gt().memoizedState=t},useTransition:function(){var t=Ru(!1),e=t[0];return t=zg.bind(null,t[1]),gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var i=re,n=gt();if(se){if(s===void 0)throw Error($(407));s=s()}else{if(s=e(),xe===null)throw Error($(349));ys&30||Rf(i,e,s)}n.memoizedState=s;var l={value:s,getSnapshot:e};return n.queue=l,zu(If.bind(null,i,l,t),[t]),i.flags|=2048,hn(9,zf.bind(null,i,l,s,e),void 0,null),s},useId:function(){var t=gt(),e=xe.identifierPrefix;if(se){var s=Ct,i=kt;s=(i&~(1<<32-ct(i)-1)).toString(32)+s,e=":"+e+"R"+s,s=cn++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Rg++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Og={readContext:et,useCallback:Uf,useContext:et,useEffect:uc,useImperativeHandle:Wf,useInsertionEffect:Af,useLayoutEffect:Bf,useMemo:Hf,useReducer:Gl,useRef:Of,useState:function(){return Gl(un)},useDebugValue:hc,useDeferredValue:function(t){var e=tt();return Kf(e,pe.memoizedState,t)},useTransition:function(){var t=Gl(un)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Tf,useSyncExternalStore:$f,useId:Gf,unstable_isNewReconciler:!1},Ag={readContext:et,useCallback:Uf,useContext:et,useEffect:uc,useImperativeHandle:Wf,useInsertionEffect:Af,useLayoutEffect:Bf,useMemo:Hf,useReducer:Xl,useRef:Of,useState:function(){return Xl(un)},useDebugValue:hc,useDeferredValue:function(t){var e=tt();return pe===null?e.memoizedState=t:Kf(e,pe.memoizedState,t)},useTransition:function(){var t=Xl(un)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Tf,useSyncExternalStore:$f,useId:Gf,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function io(t,e,s,i){e=t.memoizedState,s=s(i,e),s=s==null?e:le({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ol={isMounted:function(t){return(t=t._reactInternals)?Es(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var i=Le(),n=Jt(t),l=Lt(i,n);l.payload=e,s!=null&&(l.callback=s),e=Yt(t,l,n),e!==null&&(ut(e,t,n,i),mr(e,t,n))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var i=Le(),n=Jt(t),l=Lt(i,n);l.tag=1,l.payload=e,s!=null&&(l.callback=s),e=Yt(t,l,n),e!==null&&(ut(e,t,n,i),mr(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Le(),i=Jt(t),n=Lt(s,i);n.tag=2,e!=null&&(n.callback=e),e=Yt(t,n,i),e!==null&&(ut(e,t,i,s),mr(e,t,i))}};function Iu(t,e,s,i,n,l,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,a):e.prototype&&e.prototype.isPureReactComponent?!sn(s,i)||!sn(n,l):!0}function qf(t,e,s){var i=!1,n=ts,l=e.contextType;return typeof l=="object"&&l!==null?l=et(l):(n=Fe(e)?gs:Ce.current,i=e.contextTypes,l=(i=i!=null)?si(t,n):ts),e=new e(s,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ol,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),e}function Du(t,e,s,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,i),e.state!==t&&ol.enqueueReplaceState(e,e.state,null)}function no(t,e,s,i){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},ic(t);var l=e.contextType;typeof l=="object"&&l!==null?n.context=et(l):(l=Fe(e)?gs:Ce.current,n.context=si(t,l)),n.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(io(t,e,l,s),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&ol.enqueueReplaceState(n,n.state,null),Ar(t,s,n,i),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function li(t,e){try{var s="",i=e;do s+=mv(i),i=i.return;while(i);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:n,digest:null}}function Ql(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function ro(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function Jf(t,e,s){s=Lt(-1,s),s.tag=3,s.payload={element:null};var i=e.value;return s.callback=function(){Hr||(Hr=!0,vo=i),ro(t,e)},s}function Zf(t,e,s){s=Lt(-1,s),s.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var n=e.value;s.payload=function(){return i(n)},s.callback=function(){ro(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){ro(t,e),typeof i!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Fu(t,e,s){var i=t.pingCache;if(i===null){i=t.pingCache=new Bg;var n=new Set;i.set(e,n)}else n=i.get(e),n===void 0&&(n=new Set,i.set(e,n));n.has(s)||(n.add(s),t=tx.bind(null,t,e,s),e.then(t,t))}function Ou(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Au(t,e,s,i,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Lt(-1,1),e.tag=2,Yt(s,e,1))),s.lanes|=1),t)}var Vg=It.ReactCurrentOwner,Ie=!1;function Ee(t,e,s,i){e.child=t===null?Ef(e,null,s,i):ni(e,t.child,s,i)}function Bu(t,e,s,i,n){s=s.render;var l=e.ref;return Js(e,n),i=oc(t,e,s,i,l,n),s=cc(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Rt(t,e,n)):(se&&s&&Yo(e),e.flags|=1,Ee(t,e,i,n),e.child)}function Vu(t,e,s,i,n){if(t===null){var l=s.type;return typeof l=="function"&&!yc(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=l,em(t,e,l,i,n)):(t=wr(s.type,null,i,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&n)){var a=l.memoizedProps;if(s=s.compare,s=s!==null?s:sn,s(a,i)&&t.ref===e.ref)return Rt(t,e,n)}return e.flags|=1,t=Zt(l,i),t.ref=e.ref,t.return=e,e.child=t}function em(t,e,s,i,n){if(t!==null){var l=t.memoizedProps;if(sn(l,i)&&t.ref===e.ref)if(Ie=!1,e.pendingProps=i=l,(t.lanes&n)!==0)t.flags&131072&&(Ie=!0);else return e.lanes=t.lanes,Rt(t,e,n)}return lo(t,e,s,i,n)}function tm(t,e,s){var i=e.pendingProps,n=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Hs,Ve),Ve|=s;else{if(!(s&1073741824))return t=l!==null?l.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Hs,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:s,J(Hs,Ve),Ve|=i}else l!==null?(i=l.baseLanes|s,e.memoizedState=null):i=s,J(Hs,Ve),Ve|=i;return Ee(t,e,n,s),e.child}function sm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function lo(t,e,s,i,n){var l=Fe(s)?gs:Ce.current;return l=si(e,l),Js(e,n),s=oc(t,e,s,i,l,n),i=cc(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Rt(t,e,n)):(se&&i&&Yo(e),e.flags|=1,Ee(t,e,s,n),e.child)}function Wu(t,e,s,i,n){if(Fe(s)){var l=!0;zr(e)}else l=!1;if(Js(e,n),e.stateNode===null)gr(t,e),qf(e,s,i),no(e,s,i,n),i=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=et(u):(u=Fe(s)?gs:Ce.current,u=si(e,u));var d=s.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&Du(e,a,i,u),Bt=!1;var p=e.memoizedState;a.state=p,Ar(e,i,a,n),c=e.memoizedState,o!==i||p!==c||De.current||Bt?(typeof d=="function"&&(io(e,s,d,i),c=e.memoizedState),(o=Bt||Iu(e,s,o,i,p,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Mf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:rt(e.type,o),a.props=u,f=e.pendingProps,p=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=et(c):(c=Fe(s)?gs:Ce.current,c=si(e,c));var x=s.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==c)&&Du(e,a,i,c),Bt=!1,p=e.memoizedState,a.state=p,Ar(e,i,a,n);var y=e.memoizedState;o!==f||p!==y||De.current||Bt?(typeof x=="function"&&(io(e,s,x,i),y=e.memoizedState),(u=Bt||Iu(e,s,u,i,p,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return ao(t,e,s,i,l,n)}function ao(t,e,s,i,n,l){sm(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return n&&Eu(e,s,!1),Rt(t,e,l);i=e.stateNode,Vg.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ni(e,t.child,null,l),e.child=ni(e,null,o,l)):Ee(t,e,o,l),e.memoizedState=i.state,n&&Eu(e,s,!0),e.child}function im(t){var e=t.stateNode;e.pendingContext?_u(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_u(t,e.context,!1),nc(t,e.containerInfo)}function Uu(t,e,s,i,n){return ii(),Jo(n),e.flags|=256,Ee(t,e,s,i),e.child}var oo={dehydrated:null,treeContext:null,retryLane:0};function co(t){return{baseLanes:t,cachePool:null,transitions:null}}function nm(t,e,s){var i=e.pendingProps,n=ne.current,l=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),J(ne,n&1),t===null)return to(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,l?(i=e.mode,l=e.child,a={mode:"hidden",children:a},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=hl(a,i,0,null),t=ps(t,i,s,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=co(s),e.memoizedState=oo,t):dc(e,a));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Wg(t,e,a,i,o,n,s);if(l){l=i.fallback,a=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==n?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Zt(n,c),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?l=Zt(o,l):(l=ps(l,a,s,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,a=t.child.memoizedState,a=a===null?co(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=t.childLanes&~s,e.memoizedState=oo,i}return l=t.child,t=l.sibling,i=Zt(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=s),i.return=e,i.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=i,e.memoizedState=null,i}function dc(t,e){return e=hl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Un(t,e,s,i){return i!==null&&Jo(i),ni(e,t.child,null,s),t=dc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wg(t,e,s,i,n,l,a){if(s)return e.flags&256?(e.flags&=-257,i=Ql(Error($(422))),Un(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,n=e.mode,i=hl({mode:"visible",children:i.children},n,0,null),l=ps(l,n,a,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&ni(e,t.child,null,a),e.child.memoizedState=co(a),e.memoizedState=oo,l);if(!(e.mode&1))return Un(t,e,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,l=Error($(419)),i=Ql(l,i,void 0),Un(t,e,a,i)}if(o=(a&t.childLanes)!==0,Ie||o){if(i=xe,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,$t(t,n),ut(i,t,n,-1))}return xc(),i=Ql(Error($(421))),Un(t,e,a,i)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=sx.bind(null,t),n._reactRetry=e,null):(t=l.treeContext,We=Qt(n.nextSibling),Ue=e,se=!0,at=null,t!==null&&(Ye[qe++]=kt,Ye[qe++]=Ct,Ye[qe++]=xs,kt=t.id,Ct=t.overflow,xs=e),e=dc(e,i.children),e.flags|=4096,e)}function Hu(t,e,s){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),so(t.return,e,s)}function Yl(t,e,s,i,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:n}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=s,l.tailMode=n)}function rm(t,e,s){var i=e.pendingProps,n=i.revealOrder,l=i.tail;if(Ee(t,e,i.children,s),i=ne.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hu(t,s,e);else if(t.tag===19)Hu(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(J(ne,i),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(s=e.child,n=null;s!==null;)t=s.alternate,t!==null&&Br(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=e.child,e.child=null):(n=s.sibling,s.sibling=null),Yl(e,!1,n,s,l);break;case"backwards":for(s=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Br(t)===null){e.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Yl(e,!0,s,null,l);break;case"together":Yl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),ws|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,s=Zt(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Zt(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Ug(t,e,s){switch(e.tag){case 3:im(e),ii();break;case 5:Pf(e);break;case 1:Fe(e.type)&&zr(e);break;case 4:nc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,n=e.memoizedProps.value;J(Fr,i._currentValue),i._currentValue=n;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(J(ne,ne.current&1),e.flags|=128,null):s&e.child.childLanes?nm(t,e,s):(J(ne,ne.current&1),t=Rt(t,e,s),t!==null?t.sibling:null);J(ne,ne.current&1);break;case 19:if(i=(s&e.childLanes)!==0,t.flags&128){if(i)return rm(t,e,s);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),J(ne,ne.current),i)break;return null;case 22:case 23:return e.lanes=0,tm(t,e,s)}return Rt(t,e,s)}var lm,uo,am,om;lm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};uo=function(){};am=function(t,e,s,i){var n=t.memoizedProps;if(n!==i){t=e.stateNode,fs(jt.current);var l=null;switch(s){case"input":n=Ta(t,n),i=Ta(t,i),l=[];break;case"select":n=le({},n,{value:void 0}),i=le({},i,{value:void 0}),l=[];break;case"textarea":n=za(t,n),i=za(t,i),l=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=$r)}Da(s,i);var a;s=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qi.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in i){var c=i[u];if(o=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(l||(l=[]),l.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Z("scroll",t),l||o===c||(l=[])):(l=l||[]).push(u,c))}s&&(l=l||[]).push("style",s);var u=l;(e.updateQueue=u)&&(e.flags|=4)}};om=function(t,e,s,i){s!==i&&(e.flags|=4)};function Ci(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Se(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,i=0;if(e)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=i,t.childLanes=s,e}function Hg(t,e,s){var i=e.pendingProps;switch(qo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(e),null;case 1:return Fe(e.type)&&Rr(),Se(e),null;case 3:return i=e.stateNode,ri(),te(De),te(Ce),lc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Vn(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(yo(at),at=null))),uo(t,e),Se(e),null;case 5:rc(e);var n=fs(on.current);if(s=e.type,t!==null&&e.stateNode!=null)am(t,e,s,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return Se(e),null}if(t=fs(jt.current),Vn(e)){i=e.stateNode,s=e.type;var l=e.memoizedProps;switch(i[xt]=e,i[ln]=l,t=(e.mode&1)!==0,s){case"dialog":Z("cancel",i),Z("close",i);break;case"iframe":case"object":case"embed":Z("load",i);break;case"video":case"audio":for(n=0;n<$i.length;n++)Z($i[n],i);break;case"source":Z("error",i);break;case"img":case"image":case"link":Z("error",i),Z("load",i);break;case"details":Z("toggle",i);break;case"input":eu(i,l),Z("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Z("invalid",i);break;case"textarea":su(i,l),Z("invalid",i)}Da(s,l),n=null;for(var a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="children"?typeof o=="string"?i.textContent!==o&&(l.suppressHydrationWarning!==!0&&Bn(i.textContent,o,t),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Bn(i.textContent,o,t),n=["children",""+o]):Qi.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Z("scroll",i)}switch(s){case"input":$n(i),tu(i,l,!0);break;case"textarea":$n(i),iu(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=$r)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(s,{is:i.is}):(t=a.createElement(s),s==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,s),t[xt]=e,t[ln]=i,lm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Fa(s,i),s){case"dialog":Z("cancel",t),Z("close",t),n=i;break;case"iframe":case"object":case"embed":Z("load",t),n=i;break;case"video":case"audio":for(n=0;n<$i.length;n++)Z($i[n],t);n=i;break;case"source":Z("error",t),n=i;break;case"img":case"image":case"link":Z("error",t),Z("load",t),n=i;break;case"details":Z("toggle",t),n=i;break;case"input":eu(t,i),n=Ta(t,i),Z("invalid",t);break;case"option":n=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},n=le({},i,{value:void 0}),Z("invalid",t);break;case"textarea":su(t,i),n=za(t,i),Z("invalid",t);break;default:n=i}Da(s,n),o=n;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Fd(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Id(t,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Yi(t,c):typeof c=="number"&&Yi(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qi.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Z("scroll",t):c!=null&&Io(t,l,c,a))}switch(s){case"input":$n(t),tu(t,i,!1);break;case"textarea":$n(t),iu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+es(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Xs(t,!!i.multiple,l,!1):i.defaultValue!=null&&Xs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=$r)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Se(e),null;case 6:if(t&&e.stateNode!=null)om(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(s=fs(on.current),fs(jt.current),Vn(e)){if(i=e.stateNode,s=e.memoizedProps,i[xt]=e,(l=i.nodeValue!==s)&&(t=Ue,t!==null))switch(t.tag){case 3:Bn(i.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bn(i.nodeValue,s,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[xt]=e,e.stateNode=i}return Se(e),null;case 13:if(te(ne),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&We!==null&&e.mode&1&&!(e.flags&128))Cf(),ii(),e.flags|=98560,l=!1;else if(l=Vn(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error($(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[xt]=e}else ii(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Se(e),l=!1}else at!==null&&(yo(at),at=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ne.current&1?ve===0&&(ve=3):xc())),e.updateQueue!==null&&(e.flags|=4),Se(e),null);case 4:return ri(),uo(t,e),t===null&&nn(e.stateNode.containerInfo),Se(e),null;case 10:return tc(e.type._context),Se(e),null;case 17:return Fe(e.type)&&Rr(),Se(e),null;case 19:if(te(ne),l=e.memoizedState,l===null)return Se(e),null;if(i=(e.flags&128)!==0,a=l.rendering,a===null)if(i)Ci(l,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Br(t),a!==null){for(e.flags|=128,Ci(l,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=s,s=e.child;s!==null;)l=s,t=i,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,t=a.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return J(ne,ne.current&1|2),e.child}t=t.sibling}l.tail!==null&&ue()>ai&&(e.flags|=128,i=!0,Ci(l,!1),e.lanes=4194304)}else{if(!i)if(t=Br(a),t!==null){if(e.flags|=128,i=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!se)return Se(e),null}else 2*ue()-l.renderingStartTime>ai&&s!==1073741824&&(e.flags|=128,i=!0,Ci(l,!1),e.lanes=4194304);l.isBackwards?(a.sibling=e.child,e.child=a):(s=l.last,s!==null?s.sibling=a:e.child=a,l.last=a)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ue(),e.sibling=null,s=ne.current,J(ne,i?s&1|2:s&1),e):(Se(e),null);case 22:case 23:return gc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ve&1073741824&&(Se(e),e.subtreeFlags&6&&(e.flags|=8192)):Se(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Kg(t,e){switch(qo(e),e.tag){case 1:return Fe(e.type)&&Rr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),te(De),te(Ce),lc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rc(e),null;case 13:if(te(ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ii()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(ne),null;case 4:return ri(),null;case 10:return tc(e.type._context),null;case 22:case 23:return gc(),null;case 24:return null;default:return null}}var Hn=!1,ke=!1,Gg=typeof WeakSet=="function"?WeakSet:Set,I=null;function Us(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){oe(t,e,i)}else s.current=null}function ho(t,e,s){try{s()}catch(i){oe(t,e,i)}}var Ku=!1;function Xg(t,e){if(Xa=Mr,t=ff(),Qo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var n=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var x;f!==s||n!==0&&f.nodeType!==3||(o=a+n),f!==l||i!==0&&f.nodeType!==3||(c=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)p=f,f=x;for(;;){if(f===t)break t;if(p===s&&++u===n&&(o=a),p===l&&++d===i&&(c=a),(x=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=x}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qa={focusedElem:t,selectionRange:s},Mr=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,b=y.memoizedState,v=e.stateNode,h=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:rt(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(j){oe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return y=Ku,Ku=!1,y}function Bi(t,e,s){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&ho(e,s,l)}n=n.next}while(n!==i)}}function cl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var i=s.create;s.destroy=i()}s=s.next}while(s!==e)}}function fo(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function cm(t){var e=t.alternate;e!==null&&(t.alternate=null,cm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xt],delete e[ln],delete e[Ja],delete e[Mg],delete e[Pg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function um(t){return t.tag===5||t.tag===3||t.tag===4}function Gu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mo(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=$r));else if(i!==4&&(t=t.child,t!==null))for(mo(t,e,s),t=t.sibling;t!==null;)mo(t,e,s),t=t.sibling}function po(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(po(t,e,s),t=t.sibling;t!==null;)po(t,e,s),t=t.sibling}var ye=null,lt=!1;function Dt(t,e,s){for(s=s.child;s!==null;)hm(t,e,s),s=s.sibling}function hm(t,e,s){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(tl,s)}catch{}switch(s.tag){case 5:ke||Us(s,e);case 6:var i=ye,n=lt;ye=null,Dt(t,e,s),ye=i,lt=n,ye!==null&&(lt?(t=ye,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):ye.removeChild(s.stateNode));break;case 18:ye!==null&&(lt?(t=ye,s=s.stateNode,t.nodeType===8?Wl(t.parentNode,s):t.nodeType===1&&Wl(t,s),en(t)):Wl(ye,s.stateNode));break;case 4:i=ye,n=lt,ye=s.stateNode.containerInfo,lt=!0,Dt(t,e,s),ye=i,lt=n;break;case 0:case 11:case 14:case 15:if(!ke&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var l=n,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ho(s,e,a),n=n.next}while(n!==i)}Dt(t,e,s);break;case 1:if(!ke&&(Us(s,e),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(o){oe(s,e,o)}Dt(t,e,s);break;case 21:Dt(t,e,s);break;case 22:s.mode&1?(ke=(i=ke)||s.memoizedState!==null,Dt(t,e,s),ke=i):Dt(t,e,s);break;default:Dt(t,e,s)}}function Xu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Gg),e.forEach(function(i){var n=ix.bind(null,t,i);s.has(i)||(s.add(i),i.then(n,n))})}}function nt(t,e){var s=e.deletions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];try{var l=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ye=o.stateNode,lt=!1;break e;case 3:ye=o.stateNode.containerInfo,lt=!0;break e;case 4:ye=o.stateNode.containerInfo,lt=!0;break e}o=o.return}if(ye===null)throw Error($(160));hm(l,a,n),ye=null,lt=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){oe(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dm(e,t),e=e.sibling}function dm(t,e){var s=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),pt(t),i&4){try{Bi(3,t,t.return),cl(3,t)}catch(g){oe(t,t.return,g)}try{Bi(5,t,t.return)}catch(g){oe(t,t.return,g)}}break;case 1:nt(e,t),pt(t),i&512&&s!==null&&Us(s,s.return);break;case 5:if(nt(e,t),pt(t),i&512&&s!==null&&Us(s,s.return),t.flags&32){var n=t.stateNode;try{Yi(n,"")}catch(g){oe(t,t.return,g)}}if(i&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,a=s!==null?s.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&$d(n,l),Fa(o,a);var u=Fa(o,l);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?Fd(n,f):d==="dangerouslySetInnerHTML"?Id(n,f):d==="children"?Yi(n,f):Io(n,d,f,u)}switch(o){case"input":$a(n,l);break;case"textarea":Rd(n,l);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Xs(n,!!l.multiple,x,!1):p!==!!l.multiple&&(l.defaultValue!=null?Xs(n,!!l.multiple,l.defaultValue,!0):Xs(n,!!l.multiple,l.multiple?[]:"",!1))}n[ln]=l}catch(g){oe(t,t.return,g)}}break;case 6:if(nt(e,t),pt(t),i&4){if(t.stateNode===null)throw Error($(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(g){oe(t,t.return,g)}}break;case 3:if(nt(e,t),pt(t),i&4&&s!==null&&s.memoizedState.isDehydrated)try{en(e.containerInfo)}catch(g){oe(t,t.return,g)}break;case 4:nt(e,t),pt(t);break;case 13:nt(e,t),pt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(pc=ue())),i&4&&Xu(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(ke=(u=ke)||d,nt(e,t),ke=u):nt(e,t),pt(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(I=t,d=t.child;d!==null;){for(f=I=d;I!==null;){switch(p=I,x=p.child,p.tag){case 0:case 11:case 14:case 15:Bi(4,p,p.return);break;case 1:Us(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,s=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){oe(i,s,g)}}break;case 5:Us(p,p.return);break;case 22:if(p.memoizedState!==null){Yu(f);continue}}x!==null?(x.return=p,I=x):Yu(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{n=f.stateNode,u?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Dd("display",a))}catch(g){oe(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){oe(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nt(e,t),pt(t),i&4&&Xu(t);break;case 21:break;default:nt(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(um(s)){var i=s;break e}s=s.return}throw Error($(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Yi(n,""),i.flags&=-33);var l=Gu(t);po(t,l,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=Gu(t);mo(t,o,a);break;default:throw Error($(161))}}catch(c){oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qg(t,e,s){I=t,fm(t)}function fm(t,e,s){for(var i=(t.mode&1)!==0;I!==null;){var n=I,l=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||Hn;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||ke;o=Hn;var u=ke;if(Hn=a,(ke=c)&&!u)for(I=n;I!==null;)a=I,c=a.child,a.tag===22&&a.memoizedState!==null?qu(n):c!==null?(c.return=a,I=c):qu(n);for(;l!==null;)I=l,fm(l),l=l.sibling;I=n,Hn=o,ke=u}Qu(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,I=l):Qu(t)}}function Qu(t){for(;I!==null;){var e=I;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ke||cl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ke)if(s===null)i.componentDidMount();else{var n=e.elementType===e.type?s.memoizedProps:rt(e.type,s.memoizedProps);i.componentDidUpdate(n,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&$u(e,l,i);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}$u(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&en(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ke||e.flags&512&&fo(e)}catch(p){oe(e,e.return,p)}}if(e===t){I=null;break}if(s=e.sibling,s!==null){s.return=e.return,I=s;break}I=e.return}}function Yu(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var s=e.sibling;if(s!==null){s.return=e.return,I=s;break}I=e.return}}function qu(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{cl(4,e)}catch(c){oe(e,s,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var n=e.return;try{i.componentDidMount()}catch(c){oe(e,n,c)}}var l=e.return;try{fo(e)}catch(c){oe(e,l,c)}break;case 5:var a=e.return;try{fo(e)}catch(c){oe(e,a,c)}}}catch(c){oe(e,e.return,c)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var Yg=Math.ceil,Ur=It.ReactCurrentDispatcher,fc=It.ReactCurrentOwner,Ze=It.ReactCurrentBatchConfig,X=0,xe=null,fe=null,je=0,Ve=0,Hs=ns(0),ve=0,dn=null,ws=0,ul=0,mc=0,Vi=null,ze=null,pc=0,ai=1/0,bt=null,Hr=!1,vo=null,qt=null,Kn=!1,Ht=null,Kr=0,Wi=0,go=null,xr=-1,yr=0;function Le(){return X&6?ue():xr!==-1?xr:xr=ue()}function Jt(t){return t.mode&1?X&2&&je!==0?je&-je:$g.transition!==null?(yr===0&&(yr=Yd()),yr):(t=q,t!==0||(t=window.event,t=t===void 0?16:nf(t.type)),t):1}function ut(t,e,s,i){if(50<Wi)throw Wi=0,go=null,Error($(185));jn(t,s,i),(!(X&2)||t!==xe)&&(t===xe&&(!(X&2)&&(ul|=s),ve===4&&Wt(t,je)),Oe(t,i),s===1&&X===0&&!(e.mode&1)&&(ai=ue()+500,ll&&rs()))}function Oe(t,e){var s=t.callbackNode;$v(t,e);var i=Lr(t,t===xe?je:0);if(i===0)s!==null&&lu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(s!=null&&lu(s),e===1)t.tag===0?Tg(Ju.bind(null,t)):bf(Ju.bind(null,t)),Eg(function(){!(X&6)&&rs()}),s=null;else{switch(qd(i)){case 1:s=Bo;break;case 4:s=Xd;break;case 16:s=Er;break;case 536870912:s=Qd;break;default:s=Er}s=jm(s,mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function mm(t,e){if(xr=-1,yr=0,X&6)throw Error($(327));var s=t.callbackNode;if(Zs()&&t.callbackNode!==s)return null;var i=Lr(t,t===xe?je:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Gr(t,i);else{e=i;var n=X;X|=2;var l=vm();(xe!==t||je!==e)&&(bt=null,ai=ue()+500,ms(t,e));do try{Zg();break}catch(o){pm(t,o)}while(!0);ec(),Ur.current=l,X=n,fe!==null?e=0:(xe=null,je=0,e=ve)}if(e!==0){if(e===2&&(n=Wa(t),n!==0&&(i=n,e=xo(t,n))),e===1)throw s=dn,ms(t,0),Wt(t,i),Oe(t,ue()),s;if(e===6)Wt(t,i);else{if(n=t.current.alternate,!(i&30)&&!qg(n)&&(e=Gr(t,i),e===2&&(l=Wa(t),l!==0&&(i=l,e=xo(t,l))),e===1))throw s=dn,ms(t,0),Wt(t,i),Oe(t,ue()),s;switch(t.finishedWork=n,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:us(t,ze,bt);break;case 3:if(Wt(t,i),(i&130023424)===i&&(e=pc+500-ue(),10<e)){if(Lr(t,0)!==0)break;if(n=t.suspendedLanes,(n&i)!==i){Le(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=qa(us.bind(null,t,ze,bt),e);break}us(t,ze,bt);break;case 4:if(Wt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,n=-1;0<i;){var a=31-ct(i);l=1<<a,a=e[a],a>n&&(n=a),i&=~l}if(i=n,i=ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yg(i/1960))-i,10<i){t.timeoutHandle=qa(us.bind(null,t,ze,bt),i);break}us(t,ze,bt);break;case 5:us(t,ze,bt);break;default:throw Error($(329))}}}return Oe(t,ue()),t.callbackNode===s?mm.bind(null,t):null}function xo(t,e){var s=Vi;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Gr(t,e),t!==2&&(e=ze,ze=s,e!==null&&yo(e)),t}function yo(t){ze===null?ze=t:ze.push.apply(ze,t)}function qg(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var n=s[i],l=n.getSnapshot;n=n.value;try{if(!ht(l(),n))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wt(t,e){for(e&=~mc,e&=~ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-ct(e),i=1<<s;t[s]=-1,e&=~i}}function Ju(t){if(X&6)throw Error($(327));Zs();var e=Lr(t,0);if(!(e&1))return Oe(t,ue()),null;var s=Gr(t,e);if(t.tag!==0&&s===2){var i=Wa(t);i!==0&&(e=i,s=xo(t,i))}if(s===1)throw s=dn,ms(t,0),Wt(t,e),Oe(t,ue()),s;if(s===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,ze,bt),Oe(t,ue()),null}function vc(t,e){var s=X;X|=1;try{return t(e)}finally{X=s,X===0&&(ai=ue()+500,ll&&rs())}}function js(t){Ht!==null&&Ht.tag===0&&!(X&6)&&Zs();var e=X;X|=1;var s=Ze.transition,i=q;try{if(Ze.transition=null,q=1,t)return t()}finally{q=i,Ze.transition=s,X=e,!(X&6)&&rs()}}function gc(){Ve=Hs.current,te(Hs)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,_g(s)),fe!==null)for(s=fe.return;s!==null;){var i=s;switch(qo(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Rr();break;case 3:ri(),te(De),te(Ce),lc();break;case 5:rc(i);break;case 4:ri();break;case 13:te(ne);break;case 19:te(ne);break;case 10:tc(i.type._context);break;case 22:case 23:gc()}s=s.return}if(xe=t,fe=t=Zt(t.current,null),je=Ve=e,ve=0,dn=null,mc=ul=ws=0,ze=Vi=null,ds!==null){for(e=0;e<ds.length;e++)if(s=ds[e],i=s.interleaved,i!==null){s.interleaved=null;var n=i.next,l=s.pending;if(l!==null){var a=l.next;l.next=n,i.next=a}s.pending=i}ds=null}return t}function pm(t,e){do{var s=fe;try{if(ec(),pr.current=Wr,Vr){for(var i=re.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Vr=!1}if(ys=0,ge=pe=re=null,Ai=!1,cn=0,fc.current=null,s===null||s.return===null){ve=1,dn=e,fe=null;break}e:{var l=t,a=s.return,o=s,c=e;if(e=je,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Ou(a);if(x!==null){x.flags&=-257,Au(x,a,o,l,e),x.mode&1&&Fu(l,u,e),e=x,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){Fu(l,u,e),xc();break e}c=Error($(426))}}else if(se&&o.mode&1){var b=Ou(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Au(b,a,o,l,e),Jo(li(c,o));break e}}l=c=li(c,o),ve!==4&&(ve=2),Vi===null?Vi=[l]:Vi.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var v=Jf(l,c,e);Tu(l,v);break e;case 1:o=c;var h=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qt===null||!qt.has(m)))){l.flags|=65536,e&=-e,l.lanes|=e;var j=Zf(l,o,e);Tu(l,j);break e}}l=l.return}while(l!==null)}xm(s)}catch(N){e=N,fe===s&&s!==null&&(fe=s=s.return);continue}break}while(!0)}function vm(){var t=Ur.current;return Ur.current=Wr,t===null?Wr:t}function xc(){(ve===0||ve===3||ve===2)&&(ve=4),xe===null||!(ws&268435455)&&!(ul&268435455)||Wt(xe,je)}function Gr(t,e){var s=X;X|=2;var i=vm();(xe!==t||je!==e)&&(bt=null,ms(t,e));do try{Jg();break}catch(n){pm(t,n)}while(!0);if(ec(),X=s,Ur.current=i,fe!==null)throw Error($(261));return xe=null,je=0,ve}function Jg(){for(;fe!==null;)gm(fe)}function Zg(){for(;fe!==null&&!Sv();)gm(fe)}function gm(t){var e=wm(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?xm(t):fe=e,fc.current=null}function xm(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Kg(s,e),s!==null){s.flags&=32767,fe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,fe=null;return}}else if(s=Hg(s,e,Ve),s!==null){fe=s;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);ve===0&&(ve=5)}function us(t,e,s){var i=q,n=Ze.transition;try{Ze.transition=null,q=1,ex(t,e,s,i)}finally{Ze.transition=n,q=i}return null}function ex(t,e,s,i){do Zs();while(Ht!==null);if(X&6)throw Error($(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(Rv(t,l),t===xe&&(fe=xe=null,je=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Kn||(Kn=!0,jm(Er,function(){return Zs(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=Ze.transition,Ze.transition=null;var a=q;q=1;var o=X;X|=4,fc.current=null,Xg(t,s),dm(s,t),wg(Qa),Mr=!!Xa,Qa=Xa=null,t.current=s,Qg(s),kv(),X=o,q=a,Ze.transition=l}else t.current=s;if(Kn&&(Kn=!1,Ht=t,Kr=n),l=t.pendingLanes,l===0&&(qt=null),Ev(s.stateNode),Oe(t,ue()),e!==null)for(i=t.onRecoverableError,s=0;s<e.length;s++)n=e[s],i(n.value,{componentStack:n.stack,digest:n.digest});if(Hr)throw Hr=!1,t=vo,vo=null,t;return Kr&1&&t.tag!==0&&Zs(),l=t.pendingLanes,l&1?t===go?Wi++:(Wi=0,go=t):Wi=0,rs(),null}function Zs(){if(Ht!==null){var t=qd(Kr),e=Ze.transition,s=q;try{if(Ze.transition=null,q=16>t?16:t,Ht===null)var i=!1;else{if(t=Ht,Ht=null,Kr=0,X&6)throw Error($(331));var n=X;for(X|=4,I=t.current;I!==null;){var l=I,a=l.child;if(I.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:Bi(8,d,l)}var f=d.child;if(f!==null)f.return=d,I=f;else for(;I!==null;){d=I;var p=d.sibling,x=d.return;if(cm(d),d===u){I=null;break}if(p!==null){p.return=x,I=p;break}I=x}}}var y=l.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}I=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,I=a;else e:for(;I!==null;){if(l=I,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Bi(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,I=v;break e}I=l.return}}var h=t.current;for(I=h;I!==null;){a=I;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,I=m;else e:for(a=h;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:cl(9,o)}}catch(N){oe(o,o.return,N)}if(o===a){I=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,I=j;break e}I=o.return}}if(X=n,rs(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(tl,t)}catch{}i=!0}return i}finally{q=s,Ze.transition=e}}return!1}function Zu(t,e,s){e=li(s,e),e=Jf(t,e,1),t=Yt(t,e,1),e=Le(),t!==null&&(jn(t,1,e),Oe(t,e))}function oe(t,e,s){if(t.tag===3)Zu(t,t,s);else for(;e!==null;){if(e.tag===3){Zu(e,t,s);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qt===null||!qt.has(i))){t=li(s,t),t=Zf(e,t,1),e=Yt(e,t,1),t=Le(),e!==null&&(jn(e,1,t),Oe(e,t));break}}e=e.return}}function tx(t,e,s){var i=t.pingCache;i!==null&&i.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&s,xe===t&&(je&s)===s&&(ve===4||ve===3&&(je&130023424)===je&&500>ue()-pc?ms(t,0):mc|=s),Oe(t,e)}function ym(t,e){e===0&&(t.mode&1?(e=In,In<<=1,!(In&130023424)&&(In=4194304)):e=1);var s=Le();t=$t(t,e),t!==null&&(jn(t,e,s),Oe(t,s))}function sx(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),ym(t,s)}function ix(t,e){var s=0;switch(t.tag){case 13:var i=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),ym(t,s)}var wm;wm=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||De.current)Ie=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ie=!1,Ug(t,e,s);Ie=!!(t.flags&131072)}else Ie=!1,se&&e.flags&1048576&&Sf(e,Dr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gr(t,e),t=e.pendingProps;var n=si(e,Ce.current);Js(e,s),n=oc(null,e,i,t,n,s);var l=cc();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(i)?(l=!0,zr(e)):l=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,ic(e),n.updater=ol,e.stateNode=n,n._reactInternals=e,no(e,i,t,s),e=ao(null,e,i,!0,l,s)):(e.tag=0,se&&l&&Yo(e),Ee(null,e,n,s),e=e.child),e;case 16:i=e.elementType;e:{switch(gr(t,e),t=e.pendingProps,n=i._init,i=n(i._payload),e.type=i,n=e.tag=rx(i),t=rt(i,t),n){case 0:e=lo(null,e,i,t,s);break e;case 1:e=Wu(null,e,i,t,s);break e;case 11:e=Bu(null,e,i,t,s);break e;case 14:e=Vu(null,e,i,rt(i.type,t),s);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:rt(i,n),lo(t,e,i,n,s);case 1:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:rt(i,n),Wu(t,e,i,n,s);case 3:e:{if(im(e),t===null)throw Error($(387));i=e.pendingProps,l=e.memoizedState,n=l.element,Mf(t,e),Ar(e,i,null,s);var a=e.memoizedState;if(i=a.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){n=li(Error($(423)),e),e=Uu(t,e,i,s,n);break e}else if(i!==n){n=li(Error($(424)),e),e=Uu(t,e,i,s,n);break e}else for(We=Qt(e.stateNode.containerInfo.firstChild),Ue=e,se=!0,at=null,s=Ef(e,null,i,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ii(),i===n){e=Rt(t,e,s);break e}Ee(t,e,i,s)}e=e.child}return e;case 5:return Pf(e),t===null&&to(e),i=e.type,n=e.pendingProps,l=t!==null?t.memoizedProps:null,a=n.children,Ya(i,n)?a=null:l!==null&&Ya(i,l)&&(e.flags|=32),sm(t,e),Ee(t,e,a,s),e.child;case 6:return t===null&&to(e),null;case 13:return nm(t,e,s);case 4:return nc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ni(e,null,i,s):Ee(t,e,i,s),e.child;case 11:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:rt(i,n),Bu(t,e,i,n,s);case 7:return Ee(t,e,e.pendingProps,s),e.child;case 8:return Ee(t,e,e.pendingProps.children,s),e.child;case 12:return Ee(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(i=e.type._context,n=e.pendingProps,l=e.memoizedProps,a=n.value,J(Fr,i._currentValue),i._currentValue=a,l!==null)if(ht(l.value,a)){if(l.children===n.children&&!De.current){e=Rt(t,e,s);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){a=l.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(l.tag===1){c=Lt(-1,s&-s),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),so(l.return,s,e),o.lanes|=s;break}c=c.next}}else if(l.tag===10)a=l.type===e.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error($(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),so(a,s,e),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Ee(t,e,n.children,s),e=e.child}return e;case 9:return n=e.type,i=e.pendingProps.children,Js(e,s),n=et(n),i=i(n),e.flags|=1,Ee(t,e,i,s),e.child;case 14:return i=e.type,n=rt(i,e.pendingProps),n=rt(i.type,n),Vu(t,e,i,n,s);case 15:return em(t,e,e.type,e.pendingProps,s);case 17:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:rt(i,n),gr(t,e),e.tag=1,Fe(i)?(t=!0,zr(e)):t=!1,Js(e,s),qf(e,i,n),no(e,i,n,s),ao(null,e,i,!0,t,s);case 19:return rm(t,e,s);case 22:return tm(t,e,s)}throw Error($(156,e.tag))};function jm(t,e){return Gd(t,e)}function nx(t,e,s,i){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,s,i){return new nx(t,e,s,i)}function yc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rx(t){if(typeof t=="function")return yc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fo)return 11;if(t===Oo)return 14}return 2}function Zt(t,e){var s=t.alternate;return s===null?(s=Je(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function wr(t,e,s,i,n,l){var a=2;if(i=t,typeof t=="function")yc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zs:return ps(s.children,n,l,e);case Do:a=8,n|=8;break;case Ea:return t=Je(12,s,e,n|2),t.elementType=Ea,t.lanes=l,t;case La:return t=Je(13,s,e,n),t.elementType=La,t.lanes=l,t;case Ma:return t=Je(19,s,e,n),t.elementType=Ma,t.lanes=l,t;case Md:return hl(s,n,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ed:a=10;break e;case Ld:a=9;break e;case Fo:a=11;break e;case Oo:a=14;break e;case At:a=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Je(a,s,e,n),e.elementType=t,e.type=i,e.lanes=l,e}function ps(t,e,s,i){return t=Je(7,t,i,e),t.lanes=s,t}function hl(t,e,s,i){return t=Je(22,t,i,e),t.elementType=Md,t.lanes=s,t.stateNode={isHidden:!1},t}function ql(t,e,s){return t=Je(6,t,null,e),t.lanes=s,t}function Jl(t,e,s){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lx(t,e,s,i,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function wc(t,e,s,i,n,l,a,o,c){return t=new lx(t,e,s,o,c),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Je(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(l),t}function ax(t,e,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:s}}function Nm(t){if(!t)return ts;t=t._reactInternals;e:{if(Es(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var s=t.type;if(Fe(s))return Nf(t,s,e)}return e}function bm(t,e,s,i,n,l,a,o,c){return t=wc(s,i,!0,t,n,l,a,o,c),t.context=Nm(null),s=t.current,i=Le(),n=Jt(s),l=Lt(i,n),l.callback=e??null,Yt(s,l,n),t.current.lanes=n,jn(t,n,i),Oe(t,i),t}function dl(t,e,s,i){var n=e.current,l=Le(),a=Jt(n);return s=Nm(s),e.context===null?e.context=s:e.pendingContext=s,e=Lt(l,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Yt(n,e,a),t!==null&&(ut(t,n,a,l),mr(t,n,a)),a}function Xr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function jc(t,e){eh(t,e),(t=t.alternate)&&eh(t,e)}function ox(){return null}var Sm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nc(t){this._internalRoot=t}fl.prototype.render=Nc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));dl(t,e,null,null)};fl.prototype.unmount=Nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){dl(null,t,null,null)}),e[Tt]=null}};function fl(t){this._internalRoot=t}fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ef();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Vt.length&&e!==0&&e<Vt[s].priority;s++);Vt.splice(s,0,t),s===0&&sf(t)}};function bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function th(){}function cx(t,e,s,i,n){if(n){if(typeof i=="function"){var l=i;i=function(){var u=Xr(a);l.call(u)}}var a=bm(e,i,t,0,null,!1,!1,"",th);return t._reactRootContainer=a,t[Tt]=a.current,nn(t.nodeType===8?t.parentNode:t),js(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var u=Xr(c);o.call(u)}}var c=wc(t,0,!1,null,null,!1,!1,"",th);return t._reactRootContainer=c,t[Tt]=c.current,nn(t.nodeType===8?t.parentNode:t),js(function(){dl(e,c,s,i)}),c}function pl(t,e,s,i,n){var l=s._reactRootContainer;if(l){var a=l;if(typeof n=="function"){var o=n;n=function(){var c=Xr(a);o.call(c)}}dl(e,a,t,n)}else a=cx(s,e,t,n,i);return Xr(a)}Jd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Ti(e.pendingLanes);s!==0&&(Vo(e,s|1),Oe(e,ue()),!(X&6)&&(ai=ue()+500,rs()))}break;case 13:js(function(){var i=$t(t,1);if(i!==null){var n=Le();ut(i,t,1,n)}}),jc(t,1)}};Wo=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var s=Le();ut(e,t,134217728,s)}jc(t,134217728)}};Zd=function(t){if(t.tag===13){var e=Jt(t),s=$t(t,e);if(s!==null){var i=Le();ut(s,t,e,i)}jc(t,e)}};ef=function(){return q};tf=function(t,e){var s=q;try{return q=t,e()}finally{q=s}};Aa=function(t,e,s){switch(e){case"input":if($a(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var i=s[e];if(i!==t&&i.form===t.form){var n=rl(i);if(!n)throw Error($(90));Td(i),$a(i,n)}}}break;case"textarea":Rd(t,s);break;case"select":e=s.value,e!=null&&Xs(t,!!s.multiple,e,!1)}};Bd=vc;Vd=js;var ux={usingClientEntryPoint:!1,Events:[bn,Os,rl,Od,Ad,vc]},_i={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hx={bundleType:_i.bundleType,version:_i.version,rendererPackageName:_i.rendererPackageName,rendererConfig:_i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hd(t),t===null?null:t.stateNode},findFiberByHostInstance:_i.findFiberByHostInstance||ox,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gn.isDisabled&&Gn.supportsFiber)try{tl=Gn.inject(hx),wt=Gn}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ux;Ke.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bc(e))throw Error($(200));return ax(t,e,null,s)};Ke.createRoot=function(t,e){if(!bc(t))throw Error($(299));var s=!1,i="",n=Sm;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=wc(t,1,!1,null,null,s,!1,i,n),t[Tt]=e.current,nn(t.nodeType===8?t.parentNode:t),new Nc(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Hd(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return js(t)};Ke.hydrate=function(t,e,s){if(!ml(e))throw Error($(200));return pl(null,t,e,!0,s)};Ke.hydrateRoot=function(t,e,s){if(!bc(t))throw Error($(405));var i=s!=null&&s.hydratedSources||null,n=!1,l="",a=Sm;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=bm(e,null,t,1,s??null,n,!1,l,a),t[Tt]=e.current,nn(t),i)for(t=0;t<i.length;t++)s=i[t],n=s._getVersion,n=n(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,n]:e.mutableSourceEagerHydrationData.push(s,n);return new fl(e)};Ke.render=function(t,e,s){if(!ml(e))throw Error($(200));return pl(null,t,e,!1,s)};Ke.unmountComponentAtNode=function(t){if(!ml(t))throw Error($(40));return t._reactRootContainer?(js(function(){pl(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};Ke.unstable_batchedUpdates=vc;Ke.unstable_renderSubtreeIntoContainer=function(t,e,s,i){if(!ml(s))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return pl(t,e,s,!1,i)};Ke.version="18.3.1-next-f1338f8080-20240426";function km(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(km)}catch(t){console.error(t)}}km(),Sd.exports=Ke;var dx=Sd.exports,sh=dx;Ca.createRoot=sh.createRoot,Ca.hydrateRoot=sh.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ih="popstate";function fx(t={}){function e(i,n){let{pathname:l,search:a,hash:o}=i.location;return wo("",{pathname:l,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(i,n){return typeof n=="string"?n:fn(n)}return px(e,s,null,t)}function ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function st(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mx(){return Math.random().toString(36).substring(2,10)}function nh(t,e){return{usr:t.state,key:t.key,idx:e}}function wo(t,e,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fi(e):e,state:s,key:e&&e.key||i||mx()}}function fn({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function fi(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function px(t,e,s,i={}){let{window:n=document.defaultView,v5Compat:l=!1}=i,a=n.history,o="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let b=d(),v=b==null?null:b-u;u=b,c&&c({action:o,location:g.location,delta:v})}function p(b,v){o="PUSH";let h=wo(g.location,b,v);u=d()+1;let m=nh(h,u),j=g.createHref(h);try{a.pushState(m,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(j)}l&&c&&c({action:o,location:g.location,delta:1})}function x(b,v){o="REPLACE";let h=wo(g.location,b,v);u=d();let m=nh(h,u),j=g.createHref(h);a.replaceState(m,"",j),l&&c&&c({action:o,location:g.location,delta:0})}function y(b){return vx(b)}let g={get action(){return o},get location(){return t(n,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(ih,f),c=b,()=>{n.removeEventListener(ih,f),c=null}},createHref(b){return e(n,b)},createURL:y,encodeLocation(b){let v=y(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:x,go(b){return a.go(b)}};return g}function vx(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ie(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:fn(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Cm(t,e,s="/"){return gx(t,e,s,!1)}function gx(t,e,s,i){let n=typeof e=="string"?fi(e):e,l=zt(n.pathname||"/",s);if(l==null)return null;let a=_m(t);xx(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=Lx(l);o=_x(a[c],u,i)}return o}function _m(t,e=[],s=[],i="",n=!1){let l=(a,o,c=n,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(i)&&c)return;ie(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length)}let f=Mt([i,d.relativePath]),p=s.concat(d);a.children&&a.children.length>0&&(ie(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),_m(a.children,e,p,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:kx(f,a.index),routesMeta:p})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,o);else for(let u of Em(a.path))l(a,o,!0,u)}),e}function Em(t){let e=t.split("/");if(e.length===0)return[];let[s,...i]=e,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(i.length===0)return n?[l,""]:[l];let a=Em(i.join("/")),o=[];return o.push(...a.map(c=>c===""?l:[l,c].join("/"))),n&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function xx(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Cx(e.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var yx=/^:[\w-]+$/,wx=3,jx=2,Nx=1,bx=10,Sx=-2,rh=t=>t==="*";function kx(t,e){let s=t.split("/"),i=s.length;return s.some(rh)&&(i+=Sx),e&&(i+=jx),s.filter(n=>!rh(n)).reduce((n,l)=>n+(yx.test(l)?wx:l===""?Nx:bx),i)}function Cx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,n)=>i===e[n])?t[t.length-1]-e[e.length-1]:0}function _x(t,e,s=!1){let{routesMeta:i}=t,n={},l="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],u=o===i.length-1,d=l==="/"?e:e.slice(l.length)||"/",f=Qr({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f&&u&&s&&!i[i.length-1].route.index&&(f=Qr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(n,f.params),a.push({params:n,pathname:Mt([l,f.pathname]),pathnameBase:$x(Mt([l,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(l=Mt([l,f.pathnameBase]))}return a}function Qr(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=Ex(t.path,t.caseSensitive,t.end),n=e.match(s);if(!n)return null;let l=n[0],a=l.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((u,{paramName:d,isOptional:f},p)=>{if(d==="*"){let y=o[p]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[p];return f&&!x?u[d]=void 0:u[d]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:t}}function Ex(t,e=!1,s=!0){st(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function Lx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return st(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var Lm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mx=t=>Lm.test(t);function Px(t,e="/"){let{pathname:s,search:i="",hash:n=""}=typeof t=="string"?fi(t):t,l;if(s)if(Mx(s))l=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),st(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${s}`)}s.startsWith("/")?l=lh(s.substring(1),"/"):l=lh(s,e)}else l=e;return{pathname:l,search:Rx(i),hash:zx(n)}}function lh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Zl(t,e,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tx(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Sc(t){let e=Tx(t);return e.map((s,i)=>i===e.length-1?s.pathname:s.pathnameBase)}function kc(t,e,s,i=!1){let n;typeof t=="string"?n=fi(t):(n={...t},ie(!n.pathname||!n.pathname.includes("?"),Zl("?","pathname","search",n)),ie(!n.pathname||!n.pathname.includes("#"),Zl("#","pathname","hash",n)),ie(!n.search||!n.search.includes("#"),Zl("#","search","hash",n)));let l=t===""||n.pathname==="",a=l?"/":n.pathname,o;if(a==null)o=s;else{let f=e.length-1;if(!i&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;n.pathname=p.join("/")}o=f>=0?e[f]:"/"}let c=Px(n,o),u=a&&a!=="/"&&a.endsWith("/"),d=(l||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Mt=t=>t.join("/").replace(/\/\/+/g,"/"),$x=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Rx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Ix=class{constructor(t,e,s,i=!1){this.status=t,this.statusText=e||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Dx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Fx(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Mm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pm(t,e){let s=t;if(typeof s!="string"||!Lm.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,n=!1;if(Mm)try{let l=new URL(window.location.href),a=s.startsWith("//")?new URL(l.protocol+s):new URL(s),o=zt(a.pathname,e);a.origin===l.origin&&o!=null?s=o+a.search+a.hash:n=!0}catch{st(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:n,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Tm=["POST","PUT","PATCH","DELETE"];new Set(Tm);var Ox=["GET",...Tm];new Set(Ox);var mi=w.createContext(null);mi.displayName="DataRouter";var vl=w.createContext(null);vl.displayName="DataRouterState";var Ax=w.createContext(!1),$m=w.createContext({isTransitioning:!1});$m.displayName="ViewTransition";var Bx=w.createContext(new Map);Bx.displayName="Fetchers";var Vx=w.createContext(null);Vx.displayName="Await";var Xe=w.createContext(null);Xe.displayName="Navigation";var kn=w.createContext(null);kn.displayName="Location";var Nt=w.createContext({outlet:null,matches:[],isDataRoute:!1});Nt.displayName="Route";var Cc=w.createContext(null);Cc.displayName="RouteError";var Rm="REACT_ROUTER_ERROR",Wx="REDIRECT",Ux="ROUTE_ERROR_RESPONSE";function Hx(t){if(t.startsWith(`${Rm}:${Wx}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Kx(t){if(t.startsWith(`${Rm}:${Ux}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ix(e.status,e.statusText,e.data)}catch{}}function Gx(t,{relative:e}={}){ie(pi(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=w.useContext(Xe),{hash:n,pathname:l,search:a}=Cn(t,{relative:e}),o=l;return s!=="/"&&(o=l==="/"?s:Mt([s,l])),i.createHref({pathname:o,search:a,hash:n})}function pi(){return w.useContext(kn)!=null}function ls(){return ie(pi(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(kn).location}var zm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Im(t){w.useContext(Xe).static||w.useLayoutEffect(t)}function vi(){let{isDataRoute:t}=w.useContext(Nt);return t?l0():Xx()}function Xx(){ie(pi(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(mi),{basename:e,navigator:s}=w.useContext(Xe),{matches:i}=w.useContext(Nt),{pathname:n}=ls(),l=JSON.stringify(Sc(i)),a=w.useRef(!1);return Im(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(st(a.current,zm),!a.current)return;if(typeof c=="number"){s.go(c);return}let d=kc(c,JSON.parse(l),n,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Mt([e,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[e,s,l,n,t])}w.createContext(null);function Cn(t,{relative:e}={}){let{matches:s}=w.useContext(Nt),{pathname:i}=ls(),n=JSON.stringify(Sc(s));return w.useMemo(()=>kc(t,JSON.parse(n),i,e==="path"),[t,n,i,e])}function Qx(t,e){return Dm(t,e)}function Dm(t,e,s,i,n){var h;ie(pi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(Xe),{matches:a}=w.useContext(Nt),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let m=f&&f.path||"";Om(u,!f||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let p=ls(),x;if(e){let m=typeof e=="string"?fi(e):e;ie(d==="/"||((h=m.pathname)==null?void 0:h.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${m.pathname}" was given in the \`location\` prop.`),x=m}else x=p;let y=x.pathname||"/",g=y;if(d!=="/"){let m=d.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(m.length).join("/")}let b=Cm(t,{pathname:g});st(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),st(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=e0(b&&b.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:Mt([d,l.encodeLocation?l.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?d:Mt([d,l.encodeLocation?l.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),a,s,i,n);return e&&v?w.createElement(kn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},v):v}function Yx(){let t=r0(),e=Dx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:n},s):null,a)}var qx=w.createElement(Yx,null),Fm=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=Kx(t.digest);s&&(t=s)}let e=t!==void 0?w.createElement(Nt.Provider,{value:this.props.routeContext},w.createElement(Cc.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?w.createElement(Jx,{error:t},e):e}};Fm.contextType=Ax;var ea=new WeakMap;function Jx({children:t,error:e}){let{basename:s}=w.useContext(Xe);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Hx(e.digest);if(i){let n=ea.get(e);if(n)throw n;let l=Pm(i.location,s);if(Mm&&!ea.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw ea.set(e,a),a}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function Zx({routeContext:t,match:e,children:s}){let i=w.useContext(mi);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Nt.Provider,{value:t},s)}function e0(t,e=[],s=null,i=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,a=s==null?void 0:s.errors;if(a!=null){let d=l.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);ie(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),l=l.slice(0,Math.min(l.length,d+1))}let o=!1,c=-1;if(s)for(let d=0;d<l.length;d++){let f=l[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:x}=s,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){o=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}let u=s&&i?(d,f)=>{var p,x;i(d,{location:s.location,params:((x=(p=s.matches)==null?void 0:p[0])==null?void 0:x.params)??{},unstable_pattern:Fx(s.matches),errorInfo:f})}:void 0;return l.reduceRight((d,f,p)=>{let x,y=!1,g=null,b=null;s&&(x=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||qx,o&&(c<0&&p===0?(Om("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===p&&(y=!0,b=f.route.hydrateFallbackElement||null)));let v=e.concat(l.slice(0,p+1)),h=()=>{let m;return x?m=g:y?m=b:f.route.Component?m=w.createElement(f.route.Component,null):f.route.element?m=f.route.element:m=d,w.createElement(Zx,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:s!=null},children:m})};return s&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?w.createElement(Fm,{location:s.location,revalidation:s.revalidation,component:g,error:x,children:h(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):h()},null)}function _c(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t0(t){let e=w.useContext(mi);return ie(e,_c(t)),e}function s0(t){let e=w.useContext(vl);return ie(e,_c(t)),e}function i0(t){let e=w.useContext(Nt);return ie(e,_c(t)),e}function Ec(t){let e=i0(t),s=e.matches[e.matches.length-1];return ie(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function n0(){return Ec("useRouteId")}function r0(){var i;let t=w.useContext(Cc),e=s0("useRouteError"),s=Ec("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[s]}function l0(){let{router:t}=t0("useNavigate"),e=Ec("useNavigate"),s=w.useRef(!1);return Im(()=>{s.current=!0}),w.useCallback(async(n,l={})=>{st(s.current,zm),s.current&&(typeof n=="number"?await t.navigate(n):await t.navigate(n,{fromRouteId:e,...l}))},[t,e])}var ah={};function Om(t,e,s){!e&&!ah[t]&&(ah[t]=!0,st(!1,s))}w.memo(a0);function a0({routes:t,future:e,state:s,onError:i}){return Dm(t,void 0,s,i,e)}function Lc({to:t,replace:e,state:s,relative:i}){ie(pi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=w.useContext(Xe);st(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(Nt),{pathname:a}=ls(),o=vi(),c=kc(t,Sc(l),a,i==="path"),u=JSON.stringify(c);return w.useEffect(()=>{o(JSON.parse(u),{replace:e,state:s,relative:i})},[o,u,i,e,s]),null}function Ri(t){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o0({basename:t="/",children:e=null,location:s,navigationType:i="POP",navigator:n,static:l=!1,unstable_useTransitions:a}){ie(!pi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:n,static:l,unstable_useTransitions:a,future:{}}),[o,n,l,a]);typeof s=="string"&&(s=fi(s));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:x="default"}=s,y=w.useMemo(()=>{let g=zt(u,o);return g==null?null:{location:{pathname:g,search:d,hash:f,state:p,key:x},navigationType:i}},[o,u,d,f,p,x,i]);return st(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(Xe.Provider,{value:c},w.createElement(kn.Provider,{children:e,value:y}))}function c0({children:t,location:e}){return Qx(jo(t),e)}function jo(t,e=[]){let s=[];return w.Children.forEach(t,(i,n)=>{if(!w.isValidElement(i))return;let l=[...e,n];if(i.type===w.Fragment){s.push.apply(s,jo(i.props.children,l));return}ie(i.type===Ri,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=jo(i.props.children,l)),s.push(a)}),s}var jr="get",Nr="application/x-www-form-urlencoded";function gl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function u0(t){return gl(t)&&t.tagName.toLowerCase()==="button"}function h0(t){return gl(t)&&t.tagName.toLowerCase()==="form"}function d0(t){return gl(t)&&t.tagName.toLowerCase()==="input"}function f0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function m0(t,e){return t.button===0&&(!e||e==="_self")&&!f0(t)}var Xn=null;function p0(){if(Xn===null)try{new FormData(document.createElement("form"),0),Xn=!1}catch{Xn=!0}return Xn}var v0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ta(t){return t!=null&&!v0.has(t)?(st(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nr}"`),null):t}function g0(t,e){let s,i,n,l,a;if(h0(t)){let o=t.getAttribute("action");i=o?zt(o,e):null,s=t.getAttribute("method")||jr,n=ta(t.getAttribute("enctype"))||Nr,l=new FormData(t)}else if(u0(t)||d0(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(i=c?zt(c,e):null,s=t.getAttribute("formmethod")||o.getAttribute("method")||jr,n=ta(t.getAttribute("formenctype"))||ta(o.getAttribute("enctype"))||Nr,l=new FormData(o,t),!p0()){let{name:u,type:d,value:f}=t;if(d==="image"){let p=u?`${u}.`:"";l.append(`${p}x`,"0"),l.append(`${p}y`,"0")}else u&&l.append(u,f)}}else{if(gl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=jr,i=null,n=Nr,a=t}return l&&n==="text/plain"&&(a=l,l=void 0),{action:i,method:s.toLowerCase(),encType:n,formData:l,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x0(t,e,s){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${s}`:e&&zt(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function y0(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w0(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function j0(t,e,s){let i=await Promise.all(t.map(async n=>{let l=e.routes[n.route.id];if(l){let a=await y0(l,s);return a.links?a.links():[]}return[]}));return k0(i.flat(1).filter(w0).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function oh(t,e,s,i,n,l){let a=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,o=(c,u)=>{var d;return s[u].pathname!==c.pathname||((d=s[u].route.path)==null?void 0:d.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return l==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):l==="data"?e.filter((c,u)=>{var f;let d=i.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((f=s[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function N0(t,e,{includeHydrateFallback:s}={}){return b0(t.map(i=>{let n=e.routes[i.route.id];if(!n)return[];let l=[n.module];return n.clientActionModule&&(l=l.concat(n.clientActionModule)),n.clientLoaderModule&&(l=l.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(l=l.concat(n.hydrateFallbackModule)),n.imports&&(l=l.concat(n.imports)),l}).flat(1))}function b0(t){return[...new Set(t)]}function S0(t){let e={},s=Object.keys(t).sort();for(let i of s)e[i]=t[i];return e}function k0(t,e){let s=new Set;return new Set(e),t.reduce((i,n)=>{let l=JSON.stringify(S0(n));return s.has(l)||(s.add(l),i.push({key:l,link:n})),i},[])}function Am(){let t=w.useContext(mi);return Mc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function C0(){let t=w.useContext(vl);return Mc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Pc=w.createContext(void 0);Pc.displayName="FrameworkContext";function Bm(){let t=w.useContext(Pc);return Mc(t,"You must render this element inside a <HydratedRouter> element"),t}function _0(t,e){let s=w.useContext(Pc),[i,n]=w.useState(!1),[l,a]=w.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,p=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=v=>{v.forEach(h=>{a(h.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),w.useEffect(()=>{if(i){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[i]);let x=()=>{n(!0)},y=()=>{n(!1),a(!1)};return s?t!=="intent"?[l,p,{}]:[l,p,{onFocus:Ei(o,x),onBlur:Ei(c,y),onMouseEnter:Ei(u,x),onMouseLeave:Ei(d,y),onTouchStart:Ei(f,x)}]:[!1,p,{}]}function Ei(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function E0({page:t,...e}){let{router:s}=Am(),i=w.useMemo(()=>Cm(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?w.createElement(M0,{page:t,matches:i,...e}):null}function L0(t){let{manifest:e,routeModules:s}=Bm(),[i,n]=w.useState([]);return w.useEffect(()=>{let l=!1;return j0(t,e,s).then(a=>{l||n(a)}),()=>{l=!0}},[t,e,s]),i}function M0({page:t,matches:e,...s}){let i=ls(),{manifest:n,routeModules:l}=Bm(),{basename:a}=Am(),{loaderData:o,matches:c}=C0(),u=w.useMemo(()=>oh(t,e,c,n,i,"data"),[t,e,c,n,i]),d=w.useMemo(()=>oh(t,e,c,n,i,"assets"),[t,e,c,n,i]),f=w.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let y=new Set,g=!1;if(e.forEach(v=>{var m;let h=n.routes[v.route.id];!h||!h.hasLoader||(!u.some(j=>j.route.id===v.route.id)&&v.route.id in o&&((m=l[v.route.id])!=null&&m.shouldRevalidate)||h.hasClientLoader?g=!0:y.add(v.route.id))}),y.size===0)return[];let b=x0(t,a,"data");return g&&y.size>0&&b.searchParams.set("_routes",e.filter(v=>y.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[a,o,i,n,u,e,t,l]),p=w.useMemo(()=>N0(d,n),[d,n]),x=L0(d);return w.createElement(w.Fragment,null,f.map(y=>w.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...s})),p.map(y=>w.createElement("link",{key:y,rel:"modulepreload",href:y,...s})),x.map(({key:y,link:g})=>w.createElement("link",{key:y,nonce:s.nonce,...g})))}function P0(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var T0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{T0&&(window.__reactRouterVersion="7.11.0")}catch{}function $0({basename:t,children:e,unstable_useTransitions:s,window:i}){let n=w.useRef();n.current==null&&(n.current=fx({window:i,v5Compat:!0}));let l=n.current,[a,o]=w.useState({action:l.action,location:l.location}),c=w.useCallback(u=>{s===!1?o(u):w.startTransition(()=>o(u))},[s]);return w.useLayoutEffect(()=>l.listen(c),[l,c]),w.createElement(o0,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:l,unstable_useTransitions:s})}var Vm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xl=w.forwardRef(function({onClick:e,discover:s="render",prefetch:i="none",relative:n,reloadDocument:l,replace:a,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y){let{basename:g,unstable_useTransitions:b}=w.useContext(Xe),v=typeof u=="string"&&Vm.test(u),h=Pm(u,g);u=h.to;let m=Gx(u,{relative:n}),[j,N,k]=_0(i,x),S=D0(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:n,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function C(E){e&&e(E),E.defaultPrevented||S(E)}let _=w.createElement("a",{...x,...k,href:h.absoluteURL||m,onClick:h.isExternal||l?e:C,ref:P0(y,N),target:c,"data-discover":!v&&s==="render"?"true":void 0});return j&&!v?w.createElement(w.Fragment,null,_,w.createElement(E0,{page:m})):_});xl.displayName="Link";var R0=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:i="",end:n=!1,style:l,to:a,viewTransition:o,children:c,...u},d){let f=Cn(a,{relative:u.relative}),p=ls(),x=w.useContext(vl),{navigator:y,basename:g}=w.useContext(Xe),b=x!=null&&V0(f)&&o===!0,v=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,h=p.pathname,m=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(h=h.toLowerCase(),m=m?m.toLowerCase():null,v=v.toLowerCase()),m&&g&&(m=zt(m,g)||m);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let N=h===v||!n&&h.startsWith(v)&&h.charAt(j)==="/",k=m!=null&&(m===v||!n&&m.startsWith(v)&&m.charAt(v.length)==="/"),S={isActive:N,isPending:k,isTransitioning:b},C=N?e:void 0,_;typeof i=="function"?_=i(S):_=[i,N?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(S):l;return w.createElement(xl,{...u,"aria-current":C,className:_,ref:d,style:E,to:a,viewTransition:o},typeof c=="function"?c(S):c)});R0.displayName="NavLink";var z0=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:i,replace:n,state:l,method:a=jr,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y)=>{let{unstable_useTransitions:g}=w.useContext(Xe),b=A0(),v=B0(o,{relative:u}),h=a.toLowerCase()==="get"?"get":"post",m=typeof o=="string"&&Vm.test(o),j=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let k=N.nativeEvent.submitter,S=(k==null?void 0:k.getAttribute("formmethod"))||a,C=()=>b(k||N.currentTarget,{fetcherKey:e,method:S,navigate:s,replace:n,state:l,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p});g&&s!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:y,method:h,action:v,onSubmit:i?c:j,...x,"data-discover":!m&&t==="render"?"true":void 0})});z0.displayName="Form";function I0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wm(t){let e=w.useContext(mi);return ie(e,I0(t)),e}function D0(t,{target:e,replace:s,state:i,preventScrollReset:n,relative:l,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=vi(),d=ls(),f=Cn(t,{relative:l});return w.useCallback(p=>{if(m0(p,e)){p.preventDefault();let x=s!==void 0?s:fn(d)===fn(f),y=()=>u(t,{replace:x,state:i,preventScrollReset:n,relative:l,viewTransition:a,unstable_defaultShouldRevalidate:o});c?w.startTransition(()=>y()):y()}},[d,u,f,s,i,e,t,n,l,a,o,c])}var F0=0,O0=()=>`__${String(++F0)}__`;function A0(){let{router:t}=Wm("useSubmit"),{basename:e}=w.useContext(Xe),s=n0(),i=t.fetch,n=t.navigate;return w.useCallback(async(l,a={})=>{let{action:o,method:c,encType:u,formData:d,body:f}=g0(l,e);if(a.navigate===!1){let p=a.fetcherKey||O0();await i(p,s,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await n(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,n,e,s])}function B0(t,{relative:e}={}){let{basename:s}=w.useContext(Xe),i=w.useContext(Nt);ie(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),l={...Cn(t||".",{relative:e})},a=ls();if(t==null){l.search=a.search;let o=new URLSearchParams(l.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();l.search=d?`?${d}`:""}}return(!t||t===".")&&n.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:Mt([s,l.pathname])),fn(l)}function V0(t,{relative:e}={}){let s=w.useContext($m);ie(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Wm("useViewTransitionState"),n=Cn(t,{relative:e});if(!s.isTransitioning)return!1;let l=zt(s.currentLocation.pathname,i)||s.currentLocation.pathname,a=zt(s.nextLocation.pathname,i)||s.nextLocation.pathname;return Qr(n.pathname,a)!=null||Qr(n.pathname,l)!=null}const Um=w.createContext(),Ft={DARK:"dark",LIGHT:"light",GLASS:"glass"};function W0({children:t}){const[e,s]=w.useState(()=>{const a=localStorage.getItem("theme");return Object.values(Ft).includes(a)?a:Ft.DARK}),i=async a=>{var o;if(Object.values(Ft).includes(a)){s(a),localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a);const c=localStorage.getItem("access_token");if(c)try{const f=((o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${c}`}})).json()).profile)==null?void 0:o.preferences)||{};await fetch("/profile/me",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({preferences:{...f,theme:a}})})}catch(u){console.error("Failed to sync theme to backend:",u)}}},n=async()=>{var o,c;const a=localStorage.getItem("access_token");if(a)try{const f=(c=(o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${a}`}})).json()).profile)==null?void 0:o.preferences)==null?void 0:c.theme;f&&Object.values(Ft).includes(f)&&f!==e&&(s(f),localStorage.setItem("theme",f),document.documentElement.setAttribute("data-theme",f))}catch(u){console.error("Failed to fetch user theme:",u)}};w.useEffect(()=>{n()},[]),w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),w.useEffect(()=>{const a=o=>{o.key==="theme"&&Object.values(Ft).includes(o.newValue)&&s(o.newValue)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const l={theme:e,setTheme:i,syncThemeWithBackend:n,isDark:e===Ft.DARK,isLight:e===Ft.LIGHT,isGlass:e===Ft.GLASS};return r.jsx(Um.Provider,{value:l,children:t})}function Hm(){const t=w.useContext(Um);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const Km=w.createContext(null);function U0({children:t}){const[e,s]=w.useState([]),i=w.useCallback((u,d="info",f=5e3)=>{const p=Date.now()+Math.random(),x={id:p,message:u,type:d,duration:f};return s(y=>[...y,x]),f>0&&setTimeout(()=>{s(y=>y.filter(g=>g.id!==p))},f),p},[]),n=w.useCallback(u=>{s(d=>d.filter(f=>f.id!==u))},[]),l=w.useCallback(u=>i(u,"error",6e3),[i]),a=w.useCallback(u=>i(u,"success",4e3),[i]),o=w.useCallback(u=>i(u,"info",4e3),[i]),c=w.useCallback(u=>i(u,"warning",5e3),[i]);return r.jsxs(Km.Provider,{value:{toasts:e,addToast:i,removeToast:n,showError:l,showSuccess:a,showInfo:o,showWarning:c},children:[t,r.jsx(H0,{toasts:e,removeToast:n})]})}function H0({toasts:t,removeToast:e}){return t.length===0?null:r.jsx("div",{className:"toast-container",children:t.map(s=>r.jsxs("div",{className:`toast toast-${s.type}`,children:[r.jsxs("div",{className:"toast-icon",children:[s.type==="error"&&"",s.type==="success"&&"",s.type==="warning"&&"",s.type==="info"&&""]}),r.jsx("div",{className:"toast-message",children:s.message}),r.jsx("button",{className:"toast-close",onClick:()=>e(s.id),children:""})]},s.id))})}function K0(){const t=w.useContext(Km);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const Gm=w.createContext(),Xm=()=>{const t=w.useContext(Gm);if(!t)throw new Error("useLoading must be used within LoadingProvider");return t},G0=({children:t})=>{const[e,s]=w.useState(!1),[i,n]=w.useState(""),l=(o="Loading...")=>{n(o),s(!0)},a=()=>{s(!1),n("")};return r.jsx(Gm.Provider,{value:{isLoading:e,loadingMessage:i,showLoading:l,hideLoading:a},children:t})},X0=()=>{const{isLoading:t,loadingMessage:e}=Xm();return t?r.jsxs("div",{className:"loading-overlay",children:[r.jsx("div",{className:"loading-backdrop"}),r.jsxs("div",{className:"loading-content",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{className:"loading-message",children:e})]})]}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,i)=>i?i.toUpperCase():s.toLowerCase()),ch=t=>{const e=Y0(t);return e.charAt(0).toUpperCase()+e.slice(1)},Qm=(...t)=>t.filter((e,s,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===s).join(" ").trim(),q0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:n="",children:l,iconNode:a,...o},c)=>w.createElement("svg",{ref:c,...J0,width:e,height:e,stroke:t,strokeWidth:i?Number(s)*24/Number(e):s,className:Qm("lucide",n),...!l&&!q0(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,d])=>w.createElement(u,d)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>{const s=w.forwardRef(({className:i,...n},l)=>w.createElement(Z0,{ref:l,iconNode:e,className:Qm(`lucide-${Q0(ch(t))}`,`lucide-${t}`,i),...n}));return s.displayName=ch(t),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ym=Be("activity",ey);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],sy=Be("building-2",ty);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ny=Be("chart-column",iy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],ly=Be("chart-line",ry);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oy=Be("chevron-right",ay);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uy=Be("clock",cy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],dy=Be("layout-dashboard",hy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],my=Be("search",fy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vy=Be("settings",py);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xy=Be("star",gy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],wy=Be("target",yy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ny=Be("trending-up",jy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sy=Be("users",by);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Cy=Be("zap",ky),_y=[{id:"dashboard",label:"Dashboard",icon:dy,subsections:[]},{id:"products",label:"TradeFinder Products",icon:wy,subsections:[{id:"option-clock",label:"Option Clock",icon:uy},{id:"option-apex",label:"Option Apex",icon:Cy},{id:"market-pulse",label:"Market Pulse",icon:Ym},{id:"insider-strategy",label:"Insider Strategy",icon:Sy},{id:"sector-scope",label:"Sector Scope",icon:my},{id:"swing-spectrum",label:"Swing Spectrum",icon:ny}]},{id:"trading",label:"Market Sandbox",icon:Ny,subsections:[]},{id:"real-trading",label:"Market Connect",icon:sy,subsections:[]},{id:"market",label:"Market Data",icon:ly,subsections:[{id:"gainers",label:"Top Gainers"},{id:"losers",label:"Top Losers"},{id:"nifty-contributors",label:"Nifty Contributors"},{id:"fii-dii",label:"FII/DII Activity"},{id:"weekly",label:"Weekly Movers"},{id:"bulk",label:"Bulk Deals"}]},{id:"watchlist",label:"Watchlist",icon:xy,subsections:[]},{id:"settings",label:"Settings",icon:vy,subsections:[{id:"profile",label:"Profile"},{id:"preferences",label:"Preferences"}]}];function Ey({activeSection:t,onSectionChange:e,collapsed:s,onToggleCollapse:i,mobileOpen:n,onMobileClose:l}){const[a,o]=w.useState(["products"]),c=d=>{o(f=>f.includes(d)?[]:[d])},u=(d,f=null)=>{if(d.subsections.length>0&&!f)c(d.id);else{const p=f?`${d.id}.${f.id}`:d.id;e(p),n&&l&&l()}};return r.jsxs("aside",{className:`sidebar ${s?"collapsed":""} ${n?"mobile-open":""}`,children:[r.jsxs("div",{className:"sidebar-header",children:[!s&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"sidebar-brand",children:[r.jsx("span",{className:"brand-icon",children:r.jsx(Ym,{size:24})}),r.jsx("span",{className:"brand-text",children:"StockServs"})]}),r.jsx("p",{className:"sidebar-tagline",children:"Smart Trading Intelligence"})]}),r.jsx("button",{className:"sidebar-toggle",onClick:i,children:s?"":""})]}),r.jsx("nav",{className:"sidebar-nav",children:_y.map(d=>{const f=a.includes(d.id),p=t===d.id||t.startsWith(`${d.id}.`),x=d.subsections.length>0;return r.jsxs("div",{className:`nav-group ${p?"active":""}`,children:[r.jsxs("button",{className:`nav-item ${p&&!x?"active":""}`,onClick:()=>u(d),title:s?d.label:void 0,children:[r.jsx("span",{className:"nav-icon",children:Sr.createElement(d.icon,{size:20})}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"nav-label",children:d.label}),x&&r.jsx("span",{className:`nav-arrow ${f?"expanded":""}`,children:r.jsx(oy,{size:16})})]})]}),!s&&x&&f&&r.jsx("div",{className:"nav-subsections",children:d.subsections.map(y=>r.jsx("button",{className:`nav-subitem ${t===`${d.id}.${y.id}`?"active":""}`,onClick:()=>u(d,y),children:y.label},y.id))})]},d.id)})}),r.jsx("div",{className:"sidebar-footer",children:!s&&r.jsxs("div",{className:"sidebar-footer-content",children:[r.jsx("span",{className:"footer-label",children:"Market Sandbox Mode"}),r.jsx("span",{className:"footer-badge",children:"Demo"})]})})]})}const qm=3e4,Qn=new Map,Ly=async(t,e={},s=qm)=>{const i=new AbortController,n=setTimeout(()=>i.abort(),s);try{return await fetch(t,{...e,signal:i.signal})}finally{clearTimeout(n)}},Yr=async(t,e={})=>{const s=await Ly(t,e,e.timeout||qm);if(!s.ok){let i=`Request failed (${s.status})`;try{i=(await s.json()).detail||i}catch{}const n=new Error(i);throw n.status=s.status,n}return s.json()},U=async(t,e={})=>{const s=localStorage.getItem("access_token");if(!s)throw new Error("Not authenticated");const i={...e.headers||{},Authorization:`Bearer ${s}`};return Yr(t,{...e,headers:i})},ot=async(t,e={},s=null)=>{if(Qn.has(t))return Qn.get(t);const i=(async()=>{var n,l;try{return await U(t,e)}catch(a){return!(a.name==="AbortError"||((n=a.message)==null?void 0:n.includes("aborted"))||((l=a.message)==null?void 0:l.includes("signal")))&&s&&typeof s=="function"&&s(a.message||"Request failed"),null}finally{Qn.delete(t)}})();return Qn.set(t,i),i},mn=()=>localStorage.getItem("access_token");function Tc(){return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}))}function Ns(){const t=Tc(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();if(e===0||e===6)return!1;const n=s*60+i,l=9*60+15,a=15*60+30;return n>=l&&n<=a}function uh(){return Ns()?"Open":"Closed"}function My(){if(Ns())return 0;const t=Tc(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();let n=new Date(t);return e===6?n.setDate(n.getDate()+2):e===0?n.setDate(n.getDate()+1):s>=15&&(s>15||i>30)&&(n.setDate(n.getDate()+1),n.getDay()===6&&n.setDate(n.getDate()+2)),n.setHours(9,15,0,0),n.getTime()-t.getTime()}function Py(){if(!Ns())return 0;const t=Tc(),e=new Date(t);return e.setHours(15,30,0,0),e.getTime()-t.getTime()}function hh(t){if(t<=0)return"Now";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),i=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}h ${s}m`:s>0?`${s}m ${i}s`:`${i}s`}function dh(){if(Ns()){const e=Py();return{event:"close",countdown:hh(e),ms:e}}else{const e=My();return{event:"open",countdown:hh(e),ms:e}}}let Yn=null;class Ty{constructor(){this.subscriptions=new Map,this.timers=new Map,this.inFlight=new Map,this.isPaused=!1,this.isTabVisible=!0,this.isOnline=typeof navigator<"u"?navigator.onLine:!0,this.listeners=new Set,typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isTabVisible=!document.hidden,this.handleStateChange()}),typeof window<"u"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.handleStateChange()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.handleStateChange()}))}handleStateChange(){this.shouldRefresh()?this.resumeAll():this.pauseAll(),this.notifyListeners()}shouldRefresh(){return!this.isPaused&&this.isTabVisible&&this.isOnline&&Ns()}isMarketOpen(){return Ns()}subscribe(e,s,i=1e3){return this.subscriptions.set(e,{callback:s,interval:i}),this.shouldRefresh()&&this.startTimer(e),this.notifyListeners(),e}unsubscribe(e){this.stopTimer(e),this.subscriptions.delete(e),this.notifyListeners()}startTimer(e){const s=this.subscriptions.get(e);if(!s)return;this.stopTimer(e);const i=setInterval(async()=>{if(!this.inFlight.get(e))if(this.shouldRefresh())try{this.inFlight.set(e,!0),await s.callback()}catch(n){console.error(`Error in auto-refresh callback for ${e}:`,n)}finally{this.inFlight.delete(e)}else this.stopTimer(e)},s.interval);this.timers.set(e,i)}stopTimer(e){const s=this.timers.get(e);s&&(clearInterval(s),this.timers.delete(e))}pauseAll(){this.timers.forEach((e,s)=>{clearInterval(e)}),this.timers.clear()}resumeAll(){this.shouldRefresh()&&this.subscriptions.forEach((e,s)=>{this.timers.has(s)||this.startTimer(s)})}togglePause(){this.isPaused=!this.isPaused,this.handleStateChange()}setPaused(e){this.isPaused!==e&&(this.isPaused=e,this.handleStateChange())}getPaused(){return this.isPaused}getOnline(){return this.isOnline}getActiveCount(){return this.timers.size}getTotalCount(){return this.subscriptions.size}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(s){console.error("Error in refresh manager listener:",s)}})}checkMarketHours(){this.handleStateChange()}}function Jm(){return Yn||(Yn=new Ty,setInterval(()=>{Yn.checkMarketHours()},3e4)),Yn}function Ls(t,e,s=1e3,i=!0){const n=Jm(),l=w.useRef(e),[a,o]=w.useState(Date.now());return w.useEffect(()=>{l.current=e},[e]),w.useEffect(()=>{if(!i)return;const c=()=>{l.current(),o(Date.now())};return n.subscribe(t,c,s),()=>{n.unsubscribe(t)}},[t,s,i]),{lastUpdate:a}}function $y(){const t=Jm(),[e,s]=w.useState({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()});w.useEffect(()=>{const l=()=>{s({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()})};t.addListener(l);const a=setInterval(l,6e4);return()=>{t.removeListener(l),clearInterval(a)}},[]);const i=w.useCallback(()=>{t.togglePause()},[]),n=w.useCallback(l=>{t.setPaused(l)},[]);return{isPaused:e.isPaused,isOnline:e.isOnline,isMarketOpen:e.isMarketOpen,activeCount:e.activeCount,totalCount:e.totalCount,togglePause:i,setPaused:n}}function gi(t){const[e,s]=w.useState("");return w.useEffect(()=>{const i=()=>{const l=Math.floor((Date.now()-t)/1e3);if(l<2)s("Just now");else if(l<60)s(`${l}s ago`);else if(l<3600){const a=Math.floor(l/60);s(`${a}m ago`)}else{const a=Math.floor(l/3600);s(`${a}h ago`)}};i();const n=setInterval(i,1e3);return()=>clearInterval(n)},[t]),e}const qn=window.location.origin;function fh({onNavigate:t}){var _,E,O,B,G,R,K,Y;const{showError:e}=K0(),[s,i]=w.useState(null),[n,l]=w.useState(!0),[a,o]=w.useState({gainers:[],losers:[]}),[c,u]=w.useState(null),d=w.useRef({message:"",time:0}),{lastUpdate:f}=Ls("dashboard-market",()=>g(),1e4),p=gi(f);w.useEffect(()=>{v()},[]);const x=P=>{const M=Date.now();d.current.message===P&&M-d.current.time<3e4||(d.current={message:P,time:M},e(P))},y=async()=>{const P=await ot(`${qn}/portfolio/summary`,{},M=>{x(`Error fetching portfolio: ${M}`)});P&&i(P)},g=async()=>{const[P,M]=await Promise.all([ot(`${qn}/nse_data/top-gainers`,{},F=>{x(`Error fetching NSE data for Top Gainers: ${F}`)}),ot(`${qn}/nse_data/top-losers`,{},F=>{x(`Error fetching NSE data for Top Losers: ${F}`)})]);o({gainers:(P==null?void 0:P.top_gainers)||[],losers:(M==null?void 0:M.top_losers)||[]})},b=async()=>{try{const P=await U(`${qn}/nse_data/fii-dii-activity`).catch(()=>null);P&&u(P)}catch(P){console.error("Failed to load FII/DII data:",P)}},v=async()=>{l(!0);try{await Promise.all([y(),g(),b()])}catch(P){console.error("Failed to load dashboard data:",P)}finally{l(!1)}},h=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(P||0),m=P=>{if(!P&&P!==0)return"N/A";const M=Number(P);return isNaN(M)?"N/A":`${(M/100).toFixed(0)} Cr`},j=(s==null?void 0:s.wallet_balance)??1e5,N=(s==null?void 0:s.total_invested)??0,k=(s==null?void 0:s.current_value)??0,S=(s==null?void 0:s.total_pnl)??0,C=N>0?(S/N*100).toFixed(2):0;return r.jsxs("div",{className:"dashboard-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Dashboard"})]}),r.jsx("button",{onClick:v,disabled:n,children:n?"Loading...":"Refresh"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-value",children:h(j)}),r.jsx("div",{className:"stat-card-label",children:"Available Balance"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-value",children:h(N)}),r.jsx("div",{className:"stat-card-label",children:"Total Invested"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-value",children:h(k)}),r.jsx("div",{className:"stat-card-label",children:"Current Value"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsxs("div",{className:"stat-card-header",children:[r.jsx("div",{className:"stat-card-icon green",children:""}),r.jsxs("span",{className:`stat-card-change ${S>=0?"positive":"negative"}`,children:[S>=0?"+":"",C,"%"]})]}),r.jsxs("div",{className:`stat-card-value ${S>=0?"positive":"negative"}`,children:[S>=0?"+":"",h(S)]}),r.jsx("div",{className:"stat-card-label",children:"Total P&L"})]})]}),r.jsxs("div",{className:"dashboard-actions",children:[r.jsx("h3",{children:"Quick Actions"}),r.jsxs("div",{className:"quick-actions-grid",children:[r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.trade"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Trade Stocks"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.portfolio"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"View Portfolio"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.gainers"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Top Gainers"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.losers"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Top Losers"})]})]})]}),c&&r.jsxs("div",{className:"fii-dii-container",children:[r.jsxs("h3",{children:[" FII/DII Activity ",c.date&&r.jsxs("span",{className:"fii-dii-date",children:["(",c.date,")"]})]}),r.jsxs("div",{className:"fii-dii-row",children:[r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"FII (Foreign)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy"}),r.jsx("span",{className:"value positive",children:m((_=c.fii)==null?void 0:_.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell"}),r.jsx("span",{className:"value negative",children:m((E=c.fii)==null?void 0:E.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((O=c.fii)==null?void 0:O.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net"}),r.jsx("span",{className:"value",children:m((B=c.fii)==null?void 0:B.netValue)})]})]})]}),r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"DII (Domestic)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy"}),r.jsx("span",{className:"value positive",children:m((G=c.dii)==null?void 0:G.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell"}),r.jsx("span",{className:"value negative",children:m((R=c.dii)==null?void 0:R.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((K=c.dii)==null?void 0:K.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net"}),r.jsx("span",{className:"value",children:m((Y=c.dii)==null?void 0:Y.netValue)})]})]})]})]})]}),r.jsxs("div",{className:"last-updated",children:[r.jsxs("svg",{className:"last-updated-icon",fill:"currentColor",viewBox:"0 0 16 16",children:[r.jsx("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),r.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),r.jsxs("span",{className:"last-updated-text",children:["Market data updated ",p]})]}),r.jsxs("div",{className:"dashboard-market-grid",children:[r.jsxs("div",{className:"market-card",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("h3",{children:"Top Gainers"}),r.jsx("button",{className:"link-btn",onClick:()=>t("market.gainers"),children:"View All "})]}),r.jsxs("div",{className:"market-list",children:[a.gainers.slice(0,5).map((P,M)=>r.jsxs("div",{className:"market-item",children:[r.jsxs("div",{className:"market-item-info",children:[r.jsx("span",{className:"market-symbol",children:P.symbol}),r.jsxs("span",{className:"market-price",children:["",Number(P.lastPrice||0).toLocaleString()]})]}),r.jsxs("span",{className:"market-change positive",children:["+",Number(P.pChange||0).toFixed(2),"%"]})]},P.symbol||M)),a.gainers.length===0&&r.jsx("div",{className:"loading",children:"No data available"})]})]}),r.jsxs("div",{className:"market-card",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("h3",{children:"Top Losers"}),r.jsx("button",{className:"link-btn",onClick:()=>t("market.losers"),children:"View All "})]}),r.jsxs("div",{className:"market-list",children:[a.losers.slice(0,5).map((P,M)=>r.jsxs("div",{className:"market-item",children:[r.jsxs("div",{className:"market-item-info",children:[r.jsx("span",{className:"market-symbol",children:P.symbol}),r.jsxs("span",{className:"market-price",children:["",Number(P.lastPrice||0).toLocaleString()]})]}),r.jsxs("span",{className:"market-change negative",children:[Number(P.pChange||0).toFixed(2),"%"]})]},P.symbol||M)),a.losers.length===0&&r.jsx("div",{className:"loading",children:"No data available"})]})]})]})]})}const Ry=()=>{const[t,e]=w.useState([]),[s,i]=w.useState(!0),n=async()=>{try{const l=await U(`${window.location.origin}/nse_data/major-indices`);l.indices&&e(l.indices)}catch(l){console.error("Failed to load major indices",l)}finally{i(!1)}};return Ls("market-status",n,1e4),w.useEffect(()=>{n()},[]),s&&t.length===0?r.jsx("div",{className:"market-status-loading",children:"Loading market data..."}):r.jsx("div",{className:"market-status-bar",children:t.map(l=>r.jsxs("div",{className:"market-index-item",children:[r.jsxs("div",{className:"index-name",children:[l.symbol,r.jsx("span",{className:"index-exchange",children:l.exchange})]}),r.jsxs("div",{className:"index-price-group",children:[r.jsx("span",{className:"index-price",children:l.last.toLocaleString("en-IN",{minimumFractionDigits:2})}),r.jsxs("span",{className:`index-change ${l.change>=0?"positive":"negative"}`,children:[l.change>=0?"+":"",l.change.toFixed(2)," (",l.pChange.toFixed(2),"%)"]})]})]},l.symbol))})},V={container:{padding:"1rem",color:"#e1e3e6",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},controls:{display:"flex",gap:"1rem",alignItems:"center"},select:{padding:"0.5rem",borderRadius:"6px",background:"#2d333b",border:"1px solid #444c56",color:"white"},tableContainer:{flex:1,overflow:"auto",border:"1px solid #444c56",borderRadius:"8px"},table:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},th:{position:"sticky",top:0,background:"#22272e",padding:"0.75rem",textAlign:"center",borderBottom:"1px solid #444c56",zIndex:10},td:{padding:"0.5rem",textAlign:"center",borderBottom:"1px solid #2d333b",color:"#adbac7"},strikeRow:{background:"#2d333b",fontWeight:"bold"},callBg:{background:"rgba(0, 208, 156, 0.05)"},putBg:{background:"rgba(255, 77, 77, 0.05)"}},zy=({symbol:t="NIFTY",onClose:e,onSelectToken:s})=>{var b,v;const[i,n]=w.useState(null),[l,a]=w.useState([]),[o,c]=w.useState(""),[u,d]=w.useState(!1),[f,p]=w.useState(t),x=["NIFTY","BANKNIFTY","FINNIFTY","RELIANCE","HDFCBANK","INFY","TCS"],y=async(h,m="")=>{d(!0);try{let j=`${window.location.origin}/nse_data/fno/option-chain/${h}`;m&&(j+=`?expiry=${m}`);const N=await U(j);n(N),!m&&N.expiryDates&&N.expiryDates.length>0&&(a(N.expiryDates),c(N.currentExpiry))}catch(j){console.error("Failed to fetch option chain",j)}finally{d(!1)}};w.useEffect(()=>{y(f,o)},[f,o]);const g=h=>{p(h.target.value),c("")};return r.jsxs("div",{style:V.container,children:[r.jsxs("div",{style:V.header,children:[r.jsxs("div",{style:V.controls,children:[r.jsx("h2",{style:{margin:0},children:"Option Chain"}),r.jsx("select",{style:V.select,value:f,onChange:g,children:x.map(h=>r.jsx("option",{value:h,children:h},h))}),r.jsx("select",{style:V.select,value:o,onChange:h=>c(h.target.value),disabled:!l.length,children:l.map(h=>r.jsx("option",{value:h,children:h},h))})]}),r.jsxs("div",{children:[i&&r.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:["Spot: ",r.jsx("span",{style:{color:"#00d09c"},children:(b=i.underlyingValue)==null?void 0:b.toFixed(2)}),r.jsxs("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#adbac7"},children:["PCR: ",i.pcr]})]}),e&&r.jsx("button",{onClick:e,style:{padding:"0.5rem 1rem",marginLeft:"1rem",background:"#373e47",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"Close"})]})]}),u?r.jsx("div",{style:{textAlign:"center",marginTop:"2rem",color:"#adbac7"},children:"Loading Option Chain..."}):r.jsx("div",{style:V.tableContainer,children:r.jsxs("table",{style:V.table,children:[r.jsxs("thead",{children:[r.jsxs("tr",{children:[r.jsx("th",{colSpan:"4",style:{...V.th,...V.callBg,color:"#00d09c"},children:"CALLS"}),r.jsx("th",{style:V.th,children:"STRIKE"}),r.jsx("th",{colSpan:"4",style:{...V.th,...V.putBg,color:"#ff4d4d"},children:"PUTS"})]}),r.jsxs("tr",{children:[r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"OI"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"Price"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),r.jsx("th",{style:{...V.th,top:"40px",fontSize:"0.75rem"},children:"OI"})]})]}),r.jsx("tbody",{children:(v=i==null?void 0:i.data)==null?void 0:v.map((h,m)=>{var N,k,S,C,_,E,O,B,G,R,K,Y,P,M,F,z,W,Q,$e,_e;i.atmStrike,h.strikePrice;const j=i.underlyingValue;return Math.abs(h.strikePrice-j),r.jsxs("tr",{children:[r.jsx("td",{style:{...V.td,...V.callBg},children:((k=(N=h.CE)==null?void 0:N.openInterest)==null?void 0:k.toLocaleString())||"-"}),r.jsx("td",{style:{...V.td,...V.callBg},children:((C=(S=h.CE)==null?void 0:S.totalTradedVolume)==null?void 0:C.toLocaleString())||"-"}),r.jsxs("td",{style:{...V.td,...V.callBg,color:((_=h.CE)==null?void 0:_.change)>=0?"#00d09c":"#ff4d4d"},children:[((O=(E=h.CE)==null?void 0:E.lastPrice)==null?void 0:O.toFixed(2))||"-",h.CE&&s&&r.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[r.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>s({...h.CE,symbol:f,expiry:h.expiryDate,strike:h.strikePrice,type:"CE"}),children:"B"}),r.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>s({...h.CE,symbol:f,expiry:h.expiryDate,strike:h.strikePrice,type:"CE"}),children:"S"})]})]}),r.jsxs("td",{style:{...V.td,...V.callBg,color:((B=h.CE)==null?void 0:B.pChange)>=0?"#00d09c":"#ff4d4d"},children:[(R=(G=h.CE)==null?void 0:G.pChange)==null?void 0:R.toFixed(1),"%"]}),r.jsx("td",{style:{...V.td,...V.strikeRow},children:h.strikePrice}),r.jsxs("td",{style:{...V.td,...V.putBg,color:((K=h.PE)==null?void 0:K.pChange)>=0?"#00d09c":"#ff4d4d"},children:[(P=(Y=h.PE)==null?void 0:Y.pChange)==null?void 0:P.toFixed(1),"%"]}),r.jsxs("td",{style:{...V.td,...V.putBg,color:((M=h.PE)==null?void 0:M.change)>=0?"#00d09c":"#ff4d4d"},children:[((z=(F=h.PE)==null?void 0:F.lastPrice)==null?void 0:z.toFixed(2))||"-",h.PE&&s&&r.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[r.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>s({...h.PE,symbol:f,expiry:h.expiryDate,strike:h.strikePrice,type:"PE"}),children:"B"}),r.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>s({...h.PE,symbol:f,expiry:h.expiryDate,strike:h.strikePrice,type:"PE"}),children:"S"})]})]}),r.jsx("td",{style:{...V.td,...V.putBg},children:((Q=(W=h.PE)==null?void 0:W.totalTradedVolume)==null?void 0:Q.toLocaleString())||"-"}),r.jsx("td",{style:{...V.td,...V.putBg},children:((_e=($e=h.PE)==null?void 0:$e.openInterest)==null?void 0:_e.toLocaleString())||"-"})]},m)})})]})})]})},sa=window.location.origin;function Iy({subSection:t,onNavigate:e}){const[s,i]=w.useState(null),[n,l]=w.useState([]),[a,o]=w.useState(!0);w.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[v,h]=await Promise.all([U(`${sa}/portfolio/summary`).catch(()=>null),U(`${sa}/portfolio/orders`).catch(()=>({orders:[]}))]);i(v),l(h.orders||[])}catch(v){console.error("Failed to load wallet data:",v)}finally{o(!1)}},u=async(v,h)=>{const m=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(v),j=h==="SET"?"reset your balance to":"add";if(window.confirm(`Are you sure you want to ${j} ${m}?`)){o(!0);try{await U(`${sa}/portfolio/funds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:v,type:h})}),alert("Wallet updated successfully!"),c(),h==="SET"&&e("wallet.balance")}catch(N){console.error("Failed to update funds:",N),alert("Failed to update funds: "+N.message)}finally{o(!1)}}},d=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(v||0),f=v=>v?new Date(v).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",p=(s==null?void 0:s.wallet_balance)??1e5,x=(s==null?void 0:s.total_invested)??0,y=(s==null?void 0:s.current_value)??0,g=(s==null?void 0:s.total_pnl)??0,b=p+y;return t==="transactions"?r.jsxs("div",{className:"wallet-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Transactions"})]}),r.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?r.jsx("div",{className:"loading",children:"Loading transactions..."}):n.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Transactions"}),r.jsx("div",{className:"empty-state-text",children:"Start trading to see your transaction history here."}),r.jsx("button",{className:"primary-btn",onClick:()=>e("trading.trade"),children:"Start Trading"})]}):r.jsx("div",{className:"orders-table-container",children:r.jsxs("table",{className:"orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Type"}),r.jsx("th",{className:"text-right",children:"Amount"})]})}),r.jsx("tbody",{children:n.map((v,h)=>{var m;return r.jsxs("tr",{children:[r.jsx("td",{children:f(v.created_at)}),r.jsxs("td",{children:[v.side==="BUY"?"Bought":"Sold"," ",v.quantity," ",v.symbol]}),r.jsx("td",{children:r.jsx("span",{className:`order-side ${(m=v.side)==null?void 0:m.toLowerCase()}`,children:v.side})}),r.jsxs("td",{className:`text-right ${v.side==="BUY"?"negative":"positive"}`,children:[v.side==="BUY"?"-":"+","",Number(v.total_value||0).toLocaleString()]})]},v.id||h)})})]})})]}):t==="funds"?r.jsxs("div",{className:"wallet-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Add Funds"})]}),r.jsx("button",{onClick:()=>e("wallet.balance"),children:"Back to Wallet"})]}),r.jsxs("div",{className:"wallet-plans-section",children:[r.jsx("h3",{children:"Subscription Plans (Reset Balance)"}),r.jsx("p",{className:"section-subtitle",children:"Choose a plan to reset your sandbox capital."}),r.jsxs("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:[r.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"SET"),children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Basic Plan"}),r.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),r.jsx("span",{className:"wallet-stat-change",children:"Start Fresh"})]})]}),r.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(1e6,"SET"),children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Standard Plan"}),r.jsx("span",{className:"wallet-stat-value",children:"10,00,000"}),r.jsx("span",{className:"wallet-stat-change",children:"Most Popular"})]})]}),r.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(2e6,"SET"),children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Premium Plan"}),r.jsx("span",{className:"wallet-stat-value",children:"20,00,000"}),r.jsx("span",{className:"wallet-stat-change",children:"Pro Trader"})]})]})]}),r.jsx("h3",{style:{marginTop:"2rem"},children:"Top Up"}),r.jsx("p",{className:"section-subtitle",children:"Add more funds to your current balance."}),r.jsx("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:r.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"TOPUP"),children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Top Up Pack"}),r.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),r.jsx("span",{className:"wallet-stat-change",children:"Cost: 299"})]})]})})]})]}):r.jsxs("div",{className:"wallet-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Wallet"})]}),r.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?r.jsx("div",{className:"loading",children:"Loading wallet..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"wallet-overview",children:[r.jsxs("div",{className:"wallet-balance-card",children:[r.jsx("div",{className:"wallet-balance-label",children:"Available Balance"}),r.jsx("div",{className:"wallet-balance-value",children:d(p)}),r.jsx("div",{className:"wallet-balance-change",children:r.jsxs("span",{className:g>=0?"positive":"negative",children:[g>=0?"":""," ",d(Math.abs(g))," today"]})})]}),r.jsxs("div",{className:"wallet-actions-card",children:[r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.trade"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"Trade Stocks"})]}),r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.transactions"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"View Transactions"})]}),r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.portfolio"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"View Portfolio"})]}),r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.funds"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"Add Funds"})]})]})]}),r.jsxs("div",{className:"wallet-stats-grid",children:[r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Net Worth"}),r.jsx("span",{className:"wallet-stat-value",children:d(b)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Invested"}),r.jsx("span",{className:"wallet-stat-value",children:d(x)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Current Value"}),r.jsx("span",{className:"wallet-stat-value",children:d(y)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Total P&L"}),r.jsxs("span",{className:`wallet-stat-value ${g>=0?"positive":"negative"}`,children:[g>=0?"+":"",d(g)]})]})]})]}),n.length>0&&r.jsxs("div",{className:"wallet-recent",children:[r.jsxs("div",{className:"wallet-recent-header",children:[r.jsx("h3",{children:"Recent Transactions"}),r.jsx("button",{className:"link-btn",onClick:()=>e("wallet.transactions"),children:"View All "})]}),r.jsx("div",{className:"wallet-recent-list",children:n.slice(0,5).map((v,h)=>{var m;return r.jsxs("div",{className:"wallet-recent-item",children:[r.jsxs("div",{className:"wallet-recent-info",children:[r.jsx("span",{className:`order-side ${(m=v.side)==null?void 0:m.toLowerCase()}`,children:v.side}),r.jsxs("span",{className:"wallet-recent-desc",children:[v.quantity," ",v.symbol]})]}),r.jsxs("span",{className:v.side==="BUY"?"negative":"positive",children:[v.side==="BUY"?"-":"+","",Number(v.total_value||0).toLocaleString()]})]},v.id||h)})})]})]})]})}function ee(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function vs(t,e){return t.width===e.width&&t.height===e.height}var Dy=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){s._observers=s._observers.filter(function(n){return n!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Fy(t){return new Dy(t)}var Oy=function(){function t(e,s,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ee({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(l){return l},this._allowResizeObserver=(n=i==null?void 0:i.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ee({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ee(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;vs(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,i=ee(this._transformBitmapSize(e,this._canvasElementClientSize)),n=vs(this.bitmapSize,i)?null:i;s===null&&n===null||s!==null&&n!==null&&vs(s,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(s,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}By().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=mh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Fy(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var i=mh(this._canvasElement);if(i!==null){var n=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:i.devicePixelRatio,l=this._canvasElement.getClientRects(),a=l[0]!==void 0?Vy(l[0],n):ee({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var i=s.find(function(a){return a.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],l=ee({width:n.inlineSize,height:n.blockSize});e._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Ay(t,e){return new Oy(t,e.transform,e.options)}function mh(t){return t.ownerDocument.defaultView}function By(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Vy(t,e){return ee({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Wy=function(){function t(e,s,i){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function bs(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var n=t.canvasElement.getContext("2d",e);return n===null?null:new Wy(n,s,i)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Uy={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Hy={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Ky={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Gy={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Xy={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Qy={color:"#26a69a",base:0},Zm={color:"#2196f3"},ep={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var ph,qr;function Ss(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function tp(t,e,s,i){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(s,e+n),t.lineTo(i,e+n),t.stroke()}function ss(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Me(t){if(t===void 0)throw new Error("Value is undefined");return t}function T(t){if(t===null)throw new Error("Value is null");return t}function Ks(t){return T(Me(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(ph||(ph={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(qr||(qr={}));const vh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Qe(t){return t<0?0:t>255?255:Math.round(t)||0}function sp(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const Yy=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,qy=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Jy=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Zy=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function pn(t){(t=t.toLowerCase())in vh&&(t=vh[t]);{const e=Zy.exec(t)||Jy.exec(t);if(e)return[Qe(parseInt(e[1],10)),Qe(parseInt(e[2],10)),Qe(parseInt(e[3],10)),sp(e.length<5?1:parseFloat(e[4]))]}{const e=qy.exec(t);if(e)return[Qe(parseInt(e[1],16)),Qe(parseInt(e[2],16)),Qe(parseInt(e[3],16)),1]}{const e=Yy.exec(t);if(e)return[Qe(17*parseInt(e[1],16)),Qe(17*parseInt(e[2],16)),Qe(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function ip(t){return .199*t[0]+.687*t[1]+.114*t[2]}function yl(t){const e=pn(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:ip(e)>160?"black":"white"}}class he{constructor(){this.h=[]}l(e,s,i){const n={o:e,_:s,u:i===!0};this.h.push(n)}v(e){const s=this.h.findIndex(i=>e===i.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,i){const n=[...this.h];this.h=this.h.filter(l=>!l.u),n.forEach(l=>l.o(e,s,i))}M(){return this.h.length>0}S(){this.h=[]}}function dt(t,...e){for(const s of e)for(const i in s)s[i]!==void 0&&Object.prototype.hasOwnProperty.call(s,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof s[i]!="object"||t[i]===void 0||Array.isArray(s[i])?t[i]=s[i]:dt(t[i],s[i]));return t}function yt(t){return typeof t=="number"&&isFinite(t)}function vn(t){return typeof t=="number"&&t%1==0}function _n(t){return typeof t=="string"}function Jn(t){return typeof t=="boolean"}function _t(t){const e=t;if(!e||typeof e!="object")return e;let s,i,n;for(i in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(n=e[i],s[i]=n&&typeof n=="object"?_t(n):n);return s}function ew(t){return t!==null}function gn(t){return t===null?void 0:t}const $c="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function oi(t,e,s){return e===void 0&&(e=$c),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class tw{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),i=this.H();return e.P===s&&e.D===i||(e.P=s,e.D=i,e.R=oi(s,i),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Rc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,i){this.Y.forEach(n=>{n.X(e,s,i)})}}class ft{X(e,s,i){e.useBitmapCoordinateSpace(n=>this.K(n,s,i))}}class sw extends ft{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const n=this.G.tt,l=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let u=n.to-1;u>=n.from;--u){const d=l.it[u],f=Math.round(d.nt*s)+a,p=d.st*i,x=c*i+a;e.moveTo(f,p),e.arc(f,p,x,0,2*Math.PI)}e.fill()};l.et>0&&(e.fillStyle=l.rt,o(l.ht+l.et)),e.fillStyle=l.lt,o(l.ht)}}function iw(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const nw={from:0,to:1};class rw{constructor(e,s){this.ut=new Rc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(iw),this.ct=this.dt.map(i=>{const n=new sw;return n.J(i),n}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),i=this.vt.xt(),n=this.F.St();s.forEach((l,a)=>{var o;const c=this.dt[a],u=l.kt(i);if(e||u===null||!l.yt())return void(c.tt=null);const d=T(l.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=l.Dt().Rt(u._t,d.Vt),c.rt=(o=u.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/l.Dt().At()),c.it[0].ot=i,c.it[0].nt=n.It(i),c.tt=nw})}}class lw extends ft{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const l=this.zt.Lt.yt,a=this.zt.Et.yt;if(!l&&!a)return;const o=Math.round(this.zt.nt*i),c=Math.round(this.zt.st*n);e.lineCap="butt",l&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*i),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Ss(e,this.zt.Lt.Nt),function(u,d,f,p){u.beginPath();const x=u.lineWidth%2?.5:0;u.moveTo(d+x,f),u.lineTo(d+x,p),u.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*n),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Ss(e,this.zt.Et.Nt),tp(e,c,0,s.width))}}class aw{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new lw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=T(this.jt.Ht()),i=s.$t().W().crosshair,n=this.Ft;if(i.mode===2)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=e&&this.jt.Ut(s),n.Lt.yt=e&&this.jt.qt(),n.Et.et=i.horzLine.width,n.Et.Nt=i.horzLine.style,n.Et.V=i.horzLine.color,n.Lt.et=i.vertLine.width,n.Lt.Nt=i.vertLine.style,n.Lt.V=i.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Zt()}}function ow(t,e,s,i,n,l){t.fillRect(e+l,s,i-2*l,l),t.fillRect(e+l,s+n-l,i-2*l,l),t.fillRect(e,s,l,n),t.fillRect(e+i-l,s,l,n)}function wl(t,e,s,i,n,l){t.save(),t.globalCompositeOperation="copy",t.fillStyle=l,t.fillRect(e,s,i,n),t.restore()}function gh(t,e,s,i,n,l){t.beginPath(),t.roundRect?t.roundRect(e,s,i,n,l):(t.lineTo(e+i-l[1],s),l[1]!==0&&t.arcTo(e+i,s,e+i,s+l[1],l[1]),t.lineTo(e+i,s+n-l[2]),l[2]!==0&&t.arcTo(e+i,s+n,e+i-l[2],s+n,l[2]),t.lineTo(e+l[3],s+n),l[3]!==0&&t.arcTo(e,s+n,e,s+n-l[3],l[3]),t.lineTo(e,s+l[0]),l[0]!==0&&t.arcTo(e,s,e+l[0],s,l[0]))}function xh(t,e,s,i,n,l,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===l)return gh(t,e,s,i,n,o),t.fillStyle=l,t.fill(),void t.restore();const u=a/2;var d;gh(t,e+u,s+u,i-a,n-a,(d=-u,o.map(f=>f===0?f:f+d))),l!=="transparent"&&(t.fillStyle=l,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function np(t,e,s,i,n,l,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,n);o.addColorStop(0,l),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,i,n),t.restore()}class yh{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,i,n){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const d=this.Gt(c,s,i,n),f=d.Jt;return d.Qt?xh(u,f.ti,f.ii,f.ni,f.si,a,f.ei,[f.ht,0,0,f.ht],a):xh(u,f.ri,f.ii,f.ni,f.si,a,f.ei,[0,f.ht,f.ht,0],a),this.zt.hi&&(u.fillStyle=l,u.fillRect(f.ri,f.li,f.ai-f.ri,f.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(d.Qt?f.ui-f.ei:0,f.ii,f.ei,f.ci-f.ii)),d});e.useMediaCoordinateSpace(({context:c})=>{const u=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=l,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,i,n){var l;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:d}=e,f=this.zt.hi||!this.zt.mi?s.T:0,p=this.zt.bi?s.C:0,x=s.L+this.Xt.wi,y=s.B+this.Xt.gi,g=s.A,b=s.I,v=this.zt.Kt,h=s.P,m=i.Mi(a,v),j=Math.ceil(i.xi(a,v)),N=h+x+y,k=s.C+g+b+j+f,S=Math.max(1,Math.floor(d));let C=Math.round(N*d);C%2!=S%2&&(C+=1);const _=p>0?Math.max(1,Math.floor(p*u)):0,E=Math.round(k*u),O=Math.round(f*u),B=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,G=Math.round(B*d)-Math.floor(.5*d),R=Math.floor(G+S/2-C/2),K=R+C,Y=n==="right",P=Y?c.width-p:p,M=Y?o.width-_:_;let F,z,W;return Y?(F=M-E,z=M-O,W=P-f-g-p):(F=M+E,z=M+O,W=P+f+g),{Qt:Y,Jt:{ii:R,li:G,ci:K,ni:E,si:C,ht:2*u,ei:_,ti:F,ri:M,ai:z,oi:S,ui:o.width},di:{ii:R/d,ci:K/d,fi:W,pi:m}}}}class jl{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||yh)(this.Ci,this.yi),this.Ri=new(e||yh)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class cw extends jl{constructor(e,s,i){super(),this.jt=e,this.Li=s,this.Ei=i}zi(e,s,i){if(e.yt=!1,this.jt.W().mode===2)return;const n=this.jt.W().horzLine;if(!n.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const a=yl(n.labelBackgroundColor);i.t=a.t,e.V=a.i;const o=2/12*this.Li.P();i.wi=o,i.gi=o;const c=this.Ei(this.Li);i.ki=c.ki,e.Kt=this.Li.Fi(c._t,l),e.yt=!0}}const uw=/[1-9]/g;class rp{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=e.useMediaCoordinateSpace(({context:p})=>(p.font=s.R,Math.round(s.Wi.xi(p,T(this.zt).Kt,uw))));if(i<=0)return;const n=s.ji,l=i+2*n,a=l/2,o=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+l>o&&(c-=Math.abs(o-(u+l)),u=Math.floor(c-a)+.5);const d=u+l,f=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:p,horizontalPixelRatio:x,verticalPixelRatio:y})=>{const g=T(this.zt);p.fillStyle=g.t;const b=Math.round(u*x),v=Math.round(0*y),h=Math.round(d*x),m=Math.round(f*y),j=Math.round(2*x);if(p.beginPath(),p.moveTo(b,v),p.lineTo(b,m-j),p.arcTo(b,m,b+j,m,j),p.lineTo(h-j,m),p.arcTo(h,m,h,m-j,j),p.lineTo(h,v),p.fill(),g.hi){const N=Math.round(g.ki*x),k=v,S=Math.round((k+s.T)*y);p.fillStyle=g.V;const C=Math.max(1,Math.floor(x)),_=Math.floor(.5*x);p.fillRect(N-_,k,C,S-k)}}),e.useMediaCoordinateSpace(({context:p})=>{const x=T(this.zt),y=0+s.C+s.T+s.L+s.P/2;p.font=s.R,p.textAlign="left",p.textBaseline="middle",p.fillStyle=x.V;const g=s.Wi.Mi(p,"Apr0");p.translate(u+n,y+g),p.fillText(x.Kt,0,0)})}}class hw{constructor(e,s,i){this.ft=!0,this.Wt=new rp,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const i=this.$i.St();if(i.Ni())return;e.Hi=i.Hi();const n=this.Ei();if(n===null)return;e.ki=n.ki;const l=i.Ui(this.vt.xt());e.Kt=i.qi(T(l)),e.yt=!0;const a=yl(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=i.W().ticksVisible}}class zc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Ui;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Ui||(Ui={}));class dw extends zc{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new rw(e,this),this.fn=((n,l)=>a=>{const o=l(),c=n();if(a===T(this.tn).vn())return{_t:c,ki:o};{const u=T(a.Ct());return{_t:a.pn(o,u),ki:o}}})(()=>this.nn,()=>this.an);const i=((n,l)=>()=>{const a=this.$i.St().mn(n()),o=l();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new hw(this,e,i),this.wn=new aw(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,i){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const i=[];return this.tn===e&&i.push(this.Dn(this.rn,s,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,i){this.Bn(e,s,i)&&this.Vn()}Bn(e,s,i){const n=this.ln,l=this.an,a=this.nn,o=this.sn,c=this.tn,u=this.On(i);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=i;const d=u!==null?u.Ct():null;return u!==null&&d!==null?(this.nn=s,this.an=u.Rt(s,d)):(this.nn=NaN,this.an=NaN),n!==this.ln||l!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(i=>i.In().An()).filter(ew),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,i){let n=e.get(s);return n===void 0&&(n=new cw(this,s,i),e.set(s,n)),n}}function Nl(t){return t==="left"||t==="right"}class we{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const i=function(n,l){return n===void 0?l:{Fn:Math.max(n.Fn,l.Fn),Wn:n.Wn||l.Wn}}(this.zn.get(e),s);this.zn.set(e,i)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,i)=>{this.Nn(i,s)})}static ss(){return new we(2)}static es(){return new we(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const wh=".";function Et(t,e){if(!yt(t))return"n/a";if(!vn(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class bl{constructor(e,s){if(s||(s=1),yt(e)&&vn(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let i=Math.floor(e),n="";const l=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-i*s).toFixed(this._s);a>=s&&(a-=s,i+=1),n=wh+Et(+a.toFixed(this._s)*this.rs,l)}else i=Math.round(i*s)/s,l>0&&(n=wh+Et(0,l));return i.toFixed(0)+n}}class lp extends bl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class fw{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const i=Math.pow(10,this.us);return s=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(n,l)=>l)}}function ap(t,e,s,i,n,l,a){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=t,d=e[i.from];let f=l(t,d),p=d;if(i.to-i.from<2){const x=n/2;o.beginPath();const y={nt:d.nt-x,st:d.st},g={nt:d.nt+x,st:d.st};o.moveTo(y.nt*c,y.st*u),o.lineTo(g.nt*c,g.st*u),a(t,f,y,g)}else{const x=(g,b)=>{a(t,f,p,b),o.beginPath(),f=g,p=b};let y=p;o.beginPath(),o.moveTo(d.nt*c,d.st*u);for(let g=i.from+1;g<i.to;++g){y=e[g];const b=l(t,y);switch(s){case 0:o.lineTo(y.nt*c,y.st*u);break;case 1:o.lineTo(y.nt*c,e[g-1].st*u),b!==f&&(x(b,y),o.lineTo(y.nt*c,e[g-1].st*u)),o.lineTo(y.nt*c,y.st*u);break;case 2:{const[v,h]=mw(e,g-1,g);o.bezierCurveTo(v.nt*c,v.st*u,h.nt*c,h.st*u,y.nt*c,y.st*u);break}}s!==1&&b!==f&&(x(b,y),o.moveTo(y.nt*c,y.st*u))}(p!==y||p===y&&s===1)&&a(t,f,p,y)}}const jh=6;function ia(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Nh(t,e){return{nt:t.nt/e,st:t.st/e}}function mw(t,e,s){const i=Math.max(0,e-1),n=Math.min(t.length-1,s+1);var l,a;return[(l=t[e],a=Nh(ia(t[s],t[i]),jh),{nt:l.nt+a.nt,st:l.st+a.st}),ia(t[s],Nh(ia(t[n],t[e]),jh))]}function pw(t,e,s,i,n){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=e;l.lineTo(n.nt*a,t*o),l.lineTo(i.nt*a,t*o),l.closePath(),l.fillStyle=s,l.fill()}class op extends ft{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:i,tt:n,ds:l,et:a,Nt:o,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(n===null)return;const d=e.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=a,Ss(d,o),d.lineWidth=1,ap(e,i,c,n,l,this.bs.bind(this),pw.bind(null,u))}}function No(t,e,s){return Math.min(Math.max(t,e),s)}function Zn(t,e,s){return e-t<=s}function cp(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Ic{ws(e,s){const i=this.gs,{Ms:n,xs:l,Ss:a,ks:o,ys:c,vs:u}=s;if(this.Cs===void 0||i===void 0||i.Ms!==n||i.xs!==l||i.Ss!==a||i.ks!==o||i.vs!==u||i.ys!==c){const d=e.context.createLinearGradient(0,0,0,c);if(d.addColorStop(0,n),u!=null){const f=No(u*e.verticalPixelRatio/c,0,1);d.addColorStop(f,l),d.addColorStop(f,a)}d.addColorStop(1,o),this.Cs=d,this.gs=s}return this.Cs}}class vw extends op{constructor(){super(...arguments),this.Ts=new Ic}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function gw(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class up extends ft{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:i,ds:n,fs:l,et:a,Nt:o,Ds:c}=this.G;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,Ss(u,o),u.lineJoin="round";const d=this.Vs.bind(this);l!==void 0&&ap(e,s,l,i,n,d,gw),c&&function(f,p,x,y,g){const{horizontalPixelRatio:b,verticalPixelRatio:v,context:h}=f;let m=null;const j=Math.max(1,Math.floor(b))%2/2,N=x*v+j;for(let k=y.to-1;k>=y.from;--k){const S=p[k];if(S){const C=g(f,S);C!==m&&(h.beginPath(),m!==null&&h.fill(),h.fillStyle=C,m=C);const _=Math.round(S.nt*b)+j,E=S.st*v;h.moveTo(_,E),h.arc(_,E,N,0,2*Math.PI)}}h.fill()}(e,s,c,i,d)}}class hp extends up{Vs(e,s){return s.lt}}function dp(t,e,s,i,n=0,l=e.length){let a=l-n;for(;0<a;){const o=a>>1,c=n+o;i(e[c],s)===t?(n=c+1,a-=o+1):a=o}return n}const En=dp.bind(null,!0),fp=dp.bind(null,!1);function xw(t,e){return t.ot<e}function yw(t,e){return e<t.ot}function mp(t,e,s){const i=e.Os(),n=e.ui(),l=En(t,i,xw),a=fp(t,n,yw);if(!s)return{from:l,to:a};let o=l,c=a;return l>0&&l<t.length&&t[l].ot>=i&&(o=l-1),a>0&&a<t.length&&t[a-1].ot<=n&&(c=a+1),{from:o,to:c}}class Dc{constructor(e,s,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=i}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const i=s.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Ct();n!==null&&(this.Ls=mp(this.zs,i,this.Fs),this.Gs(e,s,n.Vt),this.Js())}}class Sl extends Dc{constructor(e,s){super(e,s,!0)}Gs(e,s,i){s.Qs(this.zs,gn(this.Ls)),e.te(this.zs,i,gn(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const i=s.Vt[3];return this.se(s.ee,i,e)})}}class ww extends Sl{constructor(e,s){super(e,s),this.js=new Rc,this.re=new vw,this.he=new hp,this.js.Z([this.re,this.he])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class jw extends ft{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let n=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];n!==o.ce&&(e.fillStyle=o.ce,n=o.ce);const c=Math.floor(.5*this.oe),u=Math.round(o.nt*s),d=u-c,f=this.oe,p=d+f-1,x=Math.min(o.de,o.fe),y=Math.max(o.de,o.fe),g=Math.round(x*i)-c,b=Math.round(y*i)+c,v=Math.max(b-g,this.oe);e.fillRect(d,g,f,v);const h=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const k=u-h;let S=Math.max(g,Math.round(o.pe*i)-c),C=S+f-1;C>g+v-1&&(C=g+v-1,S=C-f+1),e.fillRect(k,S,d-k,C-S+1)}const m=u+h;let j=Math.max(g,Math.round(o.me*i)-c),N=j+f-1;N>g+v-1&&(N=g+v-1,j=N-f+1),e.fillRect(p+1,j,m-p,N-j+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(i,n){return Math.floor(.3*i*n)}(T(this.zt).le,e)))}}class pp extends Dc{constructor(e,s){super(e,s,!1)}Gs(e,s,i){s.Qs(this.zs,gn(this.Ls)),e.be(this.zs,i,gn(this.Ls))}we(e,s,i){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class Nw extends pp{constructor(){super(...arguments),this.js=new jw}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class bw extends op{constructor(){super(...arguments),this.Ts=new Ic}bs(e,s){const i=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:i.vs})}}class Sw extends up{constructor(){super(...arguments),this.Pe=new Ic}Vs(e,s){const i=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:i.vs})}}class kw extends Sl{constructor(e,s){super(e,s),this.js=new Rc,this.Ve=new bw,this.Oe=new Sw,this.js.Z([this.Ve,this.Oe])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),i=this.Es.Dt().Rt(s.baseValue.price,e.Vt),n=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:i,ps:!1,tt:this.Ls,ds:n}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:n})}}class Cw extends ft{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(l,a){if(l>=2.5&&l<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),c=Math.floor(l*o*a),u=Math.floor(l*a),d=Math.min(c,u);return Math.max(Math.floor(a),d)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(e,i,this.zt.tt),this.zt._i&&this.Ie(e,i,this.zt.tt);const n=this.ze(s);(!this.zt._i||this.ae>2*n)&&this.Le(e,i,this.zt.tt)}Ae(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(l),Math.floor(this.zt.le*l));c=Math.max(Math.floor(l),Math.min(c,this.ae));const u=Math.floor(.5*c);let d=null;for(let f=i.from;f<i.to;f++){const p=s[f];p.Ee!==o&&(n.fillStyle=p.Ee,o=p.Ee);const x=Math.round(Math.min(p.pe,p.me)*a),y=Math.round(Math.max(p.pe,p.me)*a),g=Math.round(p.de*a),b=Math.round(p.fe*a);let v=Math.round(l*p.nt)-u;const h=v+c-1;d!==null&&(v=Math.max(d+1,v),v=Math.min(v,h));const m=h-v+1;n.fillRect(v,g,m,x-g),n.fillRect(v,y+1,m,b-y),d=h}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(e),s);return this.ae<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}Ie(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);let u=null;for(let d=i.from;d<i.to;d++){const f=s[d];f.Ne!==o&&(n.fillStyle=f.Ne,o=f.Ne);let p=Math.round(f.nt*l)-Math.floor(.5*this.ae);const x=p+this.ae-1,y=Math.round(Math.min(f.pe,f.me)*a),g=Math.round(Math.max(f.pe,f.me)*a);if(u!==null&&(p=Math.max(u+1,p),p=Math.min(p,x)),this.zt.le*l>2*c)ow(n,p,y,x-p+1,g-y+1,c);else{const b=x-p+1;n.fillRect(p,y,b,g-y+1)}u=x}}Le(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);for(let u=i.from;u<i.to;u++){const d=s[u];let f=Math.round(Math.min(d.pe,d.me)*a),p=Math.round(Math.max(d.pe,d.me)*a),x=Math.round(d.nt*l)-Math.floor(.5*this.ae),y=x+this.ae-1;if(d.ce!==o){const g=d.ce;n.fillStyle=g,o=g}this.zt._i&&(x+=c,f+=c,y-=c,p-=c),f>p||n.fillRect(x,f,y-x+1,p-f+1)}}}class _w extends pp{constructor(){super(...arguments),this.js=new Cw}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class Ew{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,i){this.Fe.draw(e,this.Li,s,i)}}class na extends Dc{constructor(e,s,i){super(e,s,!1),this.wn=i,this.js=new Ew(this.wn.renderer(),n=>{const l=e.Ct();return l===null?null:e.Dt().Rt(n,l.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,gn(this.Ls))}Js(){this.wn.update({bars:this.zs.map(Lw),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function Lw(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class Mw extends ft{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const n=Math.max(1,Math.floor(i)),l=Math.round(this.zt.Ye*i)-Math.floor(n/2),a=l+n;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],u=this.Ue[o-this.zt.tt.from],d=Math.round(c.st*i);let f,p;e.fillStyle=c.ce,d<=l?(f=d,p=a):(f=l,p=d-Math.floor(n/2)+n),e.fillRect(u.Os,f,u.ui-u.Os+1,p-f)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.zt.it[l],o=Math.round(a.nt*e);let c,u;if(i%2){const d=(i-1)/2;c=o-d,u=o+d}else{const d=i/2;c=o-d,u=o+d-1}this.Ue[l-this.zt.tt.from]={Os:c,ui:u,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from],o=this.Ue[l-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let n=Math.ceil(this.zt.le*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;n=Math.min(o,n)}if(s>0&&n<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui-a.Os+1>n&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class Pw extends Sl{constructor(){super(...arguments),this.js=new Mw}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,T(this.Es.Ct()).Vt)};this.js.J(e)}}class Tw extends Sl{constructor(){super(...arguments),this.js=new hp}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const $w=/[2-9]/g;class xn{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,i){return this.sr(e,s,i).width}Mi(e,s,i){const n=this.sr(e,s,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}sr(e,s,i){const n=i||$w,l=String(s).replace(n,"0");if(this.tr.has(l))return Me(this.tr.get(l)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(l);return e.restore(),a.width===0&&s.length||(this.tr.set(l,{er:a,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),a}}class Rw{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,i){this.hr=e,this.k=s,this.lr=i}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class vp{constructor(e,s,i){this.ur=e,this.ar=new xn(50),this.cr=s,this.F=i,this.j=-1,this.Wt=new Rw(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const i=e.mr(s);if(i==="overlay")return null;const n=this.F.br();return n.P!==this.j&&(this.j=n.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),n,i),this.Wt}}class zw extends ft{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:n,et:l,gr:a}=this.zt;return s>=n-l-7&&s<=n+l+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*n);l<0||l>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*i),Ss(e,this.zt.Nt),tp(e,l,0,s.width))}}class Fc{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new zw,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class Iw extends Fc{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const n=this.Es.Ct();n!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(n.Vt,n.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class Dw extends ft{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){const n=this.zt;if(n===null)return;const l=Math.max(1,Math.floor(s)),a=l%2/2,o=Math.round(n.Xe.x*s)+a,c=n.Xe.y*i;e.fillStyle=n.Tr,e.beginPath();const u=Math.max(2,1.5*n.Pr)*s;e.arc(o,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=n.Rr,e.beginPath(),e.arc(o,c,n.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=l,e.strokeStyle=n.Dr,e.beginPath(),e.arc(o,c,n.ht*s+l/2,0,2*Math.PI,!1),e.stroke()}}const Fw=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function bh(t,e,s,i){return function(n,l){if(n==="transparent")return n;const a=pn(n),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${l*o})`}(t,s+(i-s)*e)}function Sh(t,e){const s=t%2600/2600;let i;for(const c of Fw)if(s>=c.Vr&&s<=c.Or){i=c;break}ss(i!==void 0,"Last price animation internal logic error");const n=(s-i.Vr)/(i.Or-i.Vr);return{Rr:bh(e,n,i.Ir,i.zr),Dr:bh(e,n,i.Lr,i.Er),ht:(l=n,a=i.Br,o=i.Ar,a+(o-a)*l)};var l,a,o}class Ow{constructor(e){this.Wt=new Dw,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),i=this.jr.Ct();if(s===null||i===null)return;const n=this.jr.Zr(!0);if(n.Xr||!s.Kr(n.ee))return;const l={x:e.It(n.ee),y:this.jr.Dt().Rt(n._t,i.Vt)},a=n.V,o=this.jr.W().lineWidth,c=Sh(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:l})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Sh(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Hi(t,e){return cp(Math.min(Math.max(t,12),30)*e)}function yn(t,e){switch(t){case"arrowDown":case"arrowUp":return Hi(e,1);case"circle":return Hi(e,.8);case"square":return Hi(e,.7)}}function gp(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Hi(t,1))}function kh(t){return Math.max(Hi(t,.1),3)}function Ch(t,e,s){return e?t:s?Math.ceil(t/2):0}function xp(t,e,s,i,n){const l=yn("square",s),a=(l-1)/2,o=t-a,c=e-a;return i>=o&&i<=o+l&&n>=c&&n<=c+l}function _h(t,e,s,i){const n=(yn("arrowUp",i)-1)/2*s.Jr,l=(cp(i/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st-n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st+n),e.lineTo(s.nt-l,s.st+n),e.lineTo(s.nt-l,s.st)):(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st+n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st-n),e.lineTo(s.nt-l,s.st-n),e.lineTo(s.nt-l,s.st)),e.fill()}function Aw(t,e,s,i,n,l){return xp(e,s,i,n,l)}class Bw extends ft{constructor(){super(...arguments),this.zt=null,this.ar=new xn,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=oi(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const n=this.zt.it[i];if(Ww(n,e,s))return{Mr:n.th,gr:n.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i},n,l){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),Vw(o,e,s,i)}}}}function Vw(t,e,s,i){e.fillStyle=t.V,t.Kt!==void 0&&function(n,l,a,o,c,u){n.save(),n.scale(c,u),n.fillText(l,a,o),n.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,i),function(n,l,a){if(n.Ks!==0){switch(n.nh){case"arrowDown":return void _h(!1,l,a,n.Ks);case"arrowUp":return void _h(!0,l,a,n.Ks);case"circle":return void function(o,c,u){const d=(yn("circle",u)-1)/2;o.beginPath(),o.arc(c.nt,c.st,d*c.Jr,0,2*Math.PI,!1),o.fill()}(l,a,n.Ks);case"square":return void function(o,c,u){const d=yn("square",u),f=(d-1)*c.Jr/2,p=c.nt-f,x=c.st-f;o.fillRect(p,x,d*c.Jr,d*c.Jr)}(l,a,n.Ks)}n.nh}}(t,e,function(n,l,a){const o=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(n.nt*l)+o,st:n.st*a,Jr:l}}(t,s,i))}function Ww(t,e,s){return!(t.Kt===void 0||!function(i,n,l,a,o,c){const u=a/2;return o>=i&&o<=i+l&&c>=n-u&&c<=n+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(i,n,l){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return Aw(0,i.nt,i.st,i.Ks,n,l);case"circle":return function(a,o,c,u,d){const f=2+yn("circle",c)/2,p=a-u,x=o-d;return Math.sqrt(p*p+x*x)<=f}(i.nt,i.st,i.Ks,n,l);case"square":return xp(i.nt,i.st,i.Ks,n,l)}}(t,e,s)}function Uw(t,e,s,i,n,l,a,o,c){const u=yt(s)?s:s.Se,d=yt(s)?s:s.Me,f=yt(s)?s:s.xe,p=yt(e.size)?Math.max(e.size,0):1,x=gp(o.le())*p,y=x/2;switch(t.Ks=x,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+y+l+.6*n));case"aboveBar":return t.st=a.Rt(d,c)-y-i.sh,t.Kt!==void 0&&(t.Kt.st=t.st-y-.6*n,i.sh+=1.2*n),void(i.sh+=x+l);case"belowBar":return t.st=a.Rt(f,c)+y+i.eh,t.Kt!==void 0&&(t.Kt.st=t.st+y+l+.6*n,i.eh+=1.2*n),void(i.eh+=x+l)}e.position}class Hw{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new Bw,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=kh(e),i=1.5*gp(e)+2*s,n=this.fh();this.ah={above:Ch(i,n.aboveBar,n.inBar),below:Ch(i,n.belowBar,n.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(d=>({ot:d.time,nt:0,st:0,Ks:0,nh:d.shape,V:d.color,th:d.th,gr:d.id,Kt:void 0})),this.rh=!1);const n=this.$i.W().layout;this.zt.tt=null;const l=s.Xs();if(l===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=kh(s.le()),u={sh:c,eh:c};this.zt.tt=mp(this.zt.it,l,!0);for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const f=i[d];f.time!==o&&(u.sh=c,u.eh=c,o=f.time);const p=this.zt.it[d];p.nt=s.It(f.time),f.text!==void 0&&f.text.length>0&&(p.Kt={ih:f.text,nt:0,st:0,Hi:0,At:0});const x=this.jr.ph(f.time);x!==null&&Uw(p,f,x,u,n.fontSize,c,e,s,a.Vt)}this.ft=!1}}class Kw extends Fc{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(s.priceLineSource===0);i.Xr||(e.yt=!0,e.st=i.ki,e.V=this.Es.mh(i.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class Gw extends jl{constructor(e){super(),this.jt=e}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.jt;if(!n.yt())return;const l=n.W(),a=l.lastValueVisible,o=n.bh()!=="",c=l.seriesLastValueMode===0,u=n.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(u,a,o,c),s.yt=s.Kt.length>0);const d=n.mh(u.V),f=yl(d);i.t=f.t,i.ki=u.ki,s.Ot=n.$t().Bt(u.ki/n.Dt().At()),e.Ot=d,e.V=f.i,s.V=f.i}gh(e,s,i,n){let l="";const a=this.jt.bh();return i&&a.length!==0&&(l+=`${a} `),s&&n&&(l+=this.jt.Dt().Mh()?e.xh:e.Sh),l.trim()}wh(e,s,i){return s?i?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Eh(t,e,s,i){const n=Number.isFinite(e),l=Number.isFinite(s);return n&&l?t(e,s):n||l?n?e:s:i}class Ae{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Ae(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Ae(Eh(Math.min,this.Ph(),e.Ph(),-1/0),Eh(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!yt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let i=this.yh-s,n=this.kh-s;i*=e,n*=e,this.yh=s+i,this.kh=s+n}Oh(e){yt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Ae(e.minValue,e.maxValue)}}class Jr{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Jr(Ae.Ah(e.priceRange),e.margins)}}class Xw extends Fc{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const i=this.Nh.Fh();i!==null&&(e.yt=!0,e.st=i,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class Qw extends jl{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.Nh.W(),l=n.axisLabelVisible,a=n.title!=="",o=this.jr;if(!l||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=n.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(n.price),e.yt=!0;const u=yl(n.axisLabelColor||n.color);i.t=u.t;const d=n.axisLabelTextColor||u.i;e.V=d,s.V=d,i.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class Yw{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Xw(e,this),this.ur=new Qw(e,this),this.Hh=new vp(this.ur,e,e.$t())}$h(e){dt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const i=e.Ct();return i===null?null:s.Rt(this.cn.price,i.Vt)}}class qw extends zc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Jw={Bar:(t,e,s,i)=>{var n;const l=e.upColor,a=e.downColor,o=T(t(s,i)),c=Ks(o.Vt[0])<=Ks(o.Vt[3]);return{ce:(n=o.V)!==null&&n!==void 0?n:c?l:a}},Candlestick:(t,e,s,i)=>{var n,l,a;const o=e.upColor,c=e.downColor,u=e.borderUpColor,d=e.borderDownColor,f=e.wickUpColor,p=e.wickDownColor,x=T(t(s,i)),y=Ks(x.Vt[0])<=Ks(x.Vt[3]);return{ce:(n=x.V)!==null&&n!==void 0?n:y?o:c,Ne:(l=x.Ot)!==null&&l!==void 0?l:y?u:d,Ee:(a=x.Xh)!==null&&a!==void 0?a:y?f:p}},Custom:(t,e,s,i)=>{var n;return{ce:(n=T(t(s,i)).V)!==null&&n!==void 0?n:e.color}},Area:(t,e,s,i)=>{var n,l,a,o;const c=T(t(s,i));return{ce:(n=c.lt)!==null&&n!==void 0?n:e.lineColor,lt:(l=c.lt)!==null&&l!==void 0?l:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,i)=>{var n,l,a,o,c,u;const d=T(t(s,i));return{ce:d.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(n=d.Re)!==null&&n!==void 0?n:e.topLineColor,De:(l=d.De)!==null&&l!==void 0?l:e.bottomLineColor,ke:(a=d.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=d.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=d.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=d.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,i)=>{var n,l;const a=T(t(s,i));return{ce:(n=a.V)!==null&&n!==void 0?n:e.color,lt:(l=a.V)!==null&&l!==void 0?l:e.color}},Histogram:(t,e,s,i)=>{var n;return{ce:(n=T(t(s,i)).V)!==null&&n!==void 0?n:e.color}}};class Zw{constructor(e){this.Kh=(s,i)=>i!==void 0?i.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=Jw[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var Lh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Lh||(Lh={}));const Ot=30;class ej{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const i=this.hl(e,s);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(e,s,i){if(this.Ni())return null;let n=null;for(const l of i)n=er(n,this._l(e,s,l));return n}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const i=this.ul(e);if(i===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return i}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return En(this.tl,e,(s,i)=>s.ee<i)}vl(e){return fp(this.tl,e,(s,i)=>s.ee>i)}pl(e,s,i){let n=null;for(let l=e;l<s;l++){const a=this.tl[l].Vt[i];Number.isNaN(a)||(n===null?n={ml:a,bl:a}:(a<n.ml&&(n.ml=a),a>n.bl&&(n.bl=a)))}return n}_l(e,s,i){if(this.Ni())return null;let n=null;const l=T(this.el()),a=T(this.An()),o=Math.max(e,l),c=Math.min(s,a),u=Math.ceil(o/Ot)*Ot,d=Math.max(u,Math.floor(c/Ot)*Ot);{const p=this.fl(o),x=this.vl(Math.min(c,u,s));n=er(n,this.pl(p,x,i))}let f=this.il.get(i);f===void 0&&(f=new Map,this.il.set(i,f));for(let p=Math.max(u+1,o);p<d;p+=Ot){const x=Math.floor(p/Ot);let y=f.get(x);if(y===void 0){const g=this.fl(x*Ot),b=this.vl((x+1)*Ot-1);y=this.pl(g,b,i),f.set(x,y)}n=er(n,y)}{const p=this.fl(d),x=this.vl(c);n=er(n,this.pl(p,x,i))}return n}}function er(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class tj{constructor(e){this.wl=e}X(e,s,i){this.wl.draw(e)}gl(e,s,i){var n,l;(l=(n=this.wl).drawBackground)===null||l===void 0||l.call(n,e)}}class ra{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const i=new tj(s);return this.tr={Ml:s,xl:i},i}Sl(){var e,s,i;return(i=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:"normal"}}function yp(t){var e,s,i,n,l;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(i=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||i===void 0||i,hi:(l=(n=t.tickVisible)===null||n===void 0?void 0:n.call(t))===null||l===void 0||l}}class sj{constructor(e,s){this.Wt=new rp,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},yp(this.kl))),this.Wt}}class ij extends jl{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,i){const n=yp(this.kl);i.t=n.t,e.V=n.V;const l=2/12*this.Li.P();i.wi=l,i.gi=l,i.ki=n.ki,i.Si=n.Si,e.Kt=n.Kt,e.yt=n.yt,e.hi=n.hi}}class nj{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,i,n;const l=(i=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Cl)===null||n===void 0?void 0:n.Ml)===l)return this.Cl.xl;const a=l.map(o=>new ra(o));return this.Cl={Ml:l,xl:a},a}Qi(){var e,s,i,n;const l=(i=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Tl)===null||n===void 0?void 0:n.Ml)===l)return this.Tl.xl;const a=this.jr.$t().St(),o=l.map(c=>new sj(c,a));return this.Tl={Ml:l,xl:o},o}Rn(){var e,s,i,n;const l=(i=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Pl)===null||n===void 0?void 0:n.Ml)===l)return this.Pl.xl;const a=this.jr.Dt(),o=l.map(c=>new ij(c,a));return this.Pl={Ml:l,xl:o},o}Bl(){var e,s,i,n;const l=(i=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Rl)===null||n===void 0?void 0:n.Ml)===l)return this.Rl.xl;const a=l.map(o=>new ra(o));return this.Rl={Ml:l,xl:a},a}Al(){var e,s,i,n;const l=(i=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Dl)===null||n===void 0?void 0:n.Ml)===l)return this.Dl.xl;const a=l.map(o=>new ra(o));return this.Dl={Ml:l,xl:a},a}Il(e,s){var i,n,l;return(l=(n=(i=this.Vl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,e,s))!==null&&l!==void 0?l:null}wr(e,s){var i,n,l;return(l=(n=(i=this.Vl).hitTest)===null||n===void 0?void 0:n.call(i,e,s))!==null&&l!==void 0?l:null}}function la(t,e,s,i){t.forEach(n=>{e(n).forEach(l=>{l.Sl()===s&&i.push(l)})})}function aa(t){return t.Pn()}function rj(t){return t.Bl()}function lj(t){return t.Al()}class Oc extends qw{constructor(e,s,i,n,l){super(e),this.zt=new ej,this.jh=new Kw(this),this.zl=[],this.Ll=new Iw(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=i;const a=new Gw(this);this.rn=[a],this.Hh=new vp(a,this,e),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new Ow(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return s;const n=this.$t().St().Xs(),l=this.Ct();if(n===null||l===null)return s;let a,o;if(e){const f=this.zt.sl();if(f===null)return s;a=f,o=f.ee}else{const f=this.zt.ll(n.ui(),-1);if(f===null||(a=this.zt.Gh(f.ee),a===null))return s;o=f.ee}const c=a.Vt[3],u=this.Us().$s(o,{Vt:a}),d=i.Rt(c,l.Vt);return{Xr:!1,_t:c,Kt:i.Fi(c,l.Vt),xh:i.Yl(c),Sh:i.Zl(c,l.Vt),V:u.ce,ki:d,ee:o}}Us(){return this.Nl!==null||(this.Nl=new Zw(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),dt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new Yw(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];la(this.Hl,aa,"top",s);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),s.unshift(i)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(i=>i.qh());return e.push(...s),la(this.Hl,aa,"normal",e),e}ua(){return this.ca(aa,"bottom")}da(e){return this.ca(rj,e)}fa(e){return this.ca(lj,e)}va(e,s){return this.Hl.map(i=>i.wr(e,s)).filter(i=>i!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const n of this.zl)i.push(n.Zh());return this.Hl.forEach(n=>{i.push(...n.Rn())}),i}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const n=this.pa(e,s);return n===null?null:n.Bh()});return Jr.Ah(i)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return T(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new nj(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof na)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof na)return e=>this.wn.je(e)}_a(){return!Nl(this.Dt().Pa())}pa(e,s){if(!vn(e)||!vn(s)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],n=this.zt.ol(e,s,i);let l=n!==null?new Ae(n.ml,n.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new Ae(o,o);l=l!==null?l.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const x=new Ae(c.priceRange.minValue,c.priceRange.maxValue);l=l!==null?l.ts(x):x}var u,d,f,p;c!=null&&c.margins&&(u=a,d=c.margins,a={above:Math.max((f=u==null?void 0:u.above)!==null&&f!==void 0?f:0,d.above),below:Math.max((p=u==null?void 0:u.below)!==null&&p!==void 0?p:0,d.below)})}),new Jr(l,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new fw(this.cn.priceFormat.precision);break;case"percent":this.wa=new lp(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new bl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=T(this.zt.el());this.Wl=this.Fl.map((i,n)=>{const l=T(e.Va(i.time,!0)),a=l<s?1:-1;return{time:T(this.zt.ll(l,a)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:n,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(e){switch(this.dn=new Hw(this,this.$t()),this.$l){case"Bar":this.wn=new Nw(this,this.$t());break;case"Candlestick":this.wn=new _w(this,this.$t());break;case"Line":this.wn=new Tw(this,this.$t());break;case"Custom":this.wn=new na(this,this.$t(),Me(e));break;case"Area":this.wn=new ww(this,this.$t());break;case"Baseline":this.wn=new kw(this,this.$t());break;case"Histogram":this.wn=new Pw(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const i=[];return la(this.Hl,e,s,i),i}}class aj{constructor(e){this.cn=e}Oa(e,s,i){let n=e;if(this.cn.mode===0)return n;const l=i.vn(),a=l.Ct();if(a===null)return n;const o=l.Rt(e,a),c=i.Ba().filter(d=>d instanceof Oc).reduce((d,f)=>{if(i.vr(f)||!f.yt())return d;const p=f.Dt(),x=f.In();if(p.Ni()||!x.Kr(s))return d;const y=x.Gh(s);if(y===null)return d;const g=Ks(f.Ct());return d.concat([p.Rt(y.Vt[3],g.Vt)])},[]);if(c.length===0)return n;c.sort((d,f)=>Math.abs(d-o)-Math.abs(f-o));const u=c[0];return n=l.pn(u,a),n}}class oj extends ft{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const l=Math.max(1,Math.floor(i));e.lineWidth=l,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=T(this.zt);if(a.Aa){e.strokeStyle=a.Ia,Ss(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*i);e.moveTo(c,-l),e.lineTo(c,s.height+l)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,Ss(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*n);e.moveTo(-l,c),e.lineTo(s.width+l,c)}e.stroke()}})}}class cj{constructor(e){this.Wt=new oj,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class uj{constructor(e){this.wn=new cj(e)}qh(){return this.wn}}const oa={$a:4,Ua:1e-4};function Gs(t,e){const s=100*(t-e)/e;return e<0?-s:s}function hj(t,e){const s=Gs(t.Ph(),e),i=Gs(t.Rh(),e);return new Ae(s,i)}function Ki(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function dj(t,e){const s=Ki(t.Ph(),e),i=Ki(t.Rh(),e);return new Ae(s,i)}function Zr(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.log10(s+e.Ua)+e.$a;return t<0?-i:i}function Gi(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.pow(10,s-e.$a)-e.Ua;return t<0?-i:i}function Li(t,e){if(t===null)return null;const s=Zr(t.Ph(),e),i=Zr(t.Rh(),e);return new Ae(s,i)}function tr(t,e){if(t===null)return null;const s=Gi(t.Ph(),e),i=Gi(t.Rh(),e);return new Ae(s,i)}function ca(t){if(t===null)return oa;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return oa;const s=Math.ceil(Math.abs(Math.log10(e))),i=oa.$a+s;return{$a:i,Ua:1/Math.pow(10,i)}}class ua{constructor(e,s){if(this.qa=e,this.Ya=s,function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,i){const n=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const f=Zn(l,n,1e-14)&&l>n+1e-14,p=Zn(l,i*o,1e-14),x=Zn(l,1,1e-14);if(!(f&&p&&x))break;l/=o,o=this.Ya[++a%this.Ya.length]}if(l<=n+1e-14&&(l=n),l=Math.max(1,l),this.Za.length>0&&(c=l,u=1,d=1e-14,Math.abs(c-u)<d))for(a=0,o=this.Za[0];Zn(l,i*o,1e-14)&&l>n+1e-14;)l/=o,o=this.Za[++a%this.Za.length];var c,u,d;return l}}class Mh{constructor(e,s,i,n){this.Ka=[],this.Li=e,this.qa=s,this.Ga=i,this.Ja=n}Xa(e,s){if(e<s)throw new Error("high < low");const i=this.Li.At(),n=(e-s)*this.Qa()/i,l=new ua(this.qa,[2,2.5,2]),a=new ua(this.qa,[2,2,2.5]),o=new ua(this.qa,[2.5,2,2]),c=[];return c.push(l.Xa(e,s,n),a.Xa(e,s,n),o.Xa(e,s,n)),function(u){if(u.length<1)throw Error("array is empty");let d=u[0];for(let f=1;f<u.length;++f)u[f]<d&&(d=u[f]);return d}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const i=e.At(),n=this.Ga(i-1,s),l=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=i-1-a,u=Math.max(n,l),d=Math.min(n,l);if(u===d)return void(this.Ka=[]);let f=this.Xa(u,d),p=u%f;p+=p<0?f:0;const x=u>=d?1:-1;let y=null,g=0;for(let b=u-p;b>d;b-=f){const v=this.Ja(b,s,!0);y!==null&&Math.abs(v-y)<this.Qa()||v<o||v>c||(g<this.Ka.length?(this.Ka[g].Ea=v,this.Ka[g].so=e.eo(b)):this.Ka.push({Ea:v,so:e.eo(b)}),g++,y=v,e.ro()&&(f=this.Xa(b*x,d)))}this.Ka.length=g}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function wp(t){return t.slice().sort((e,s)=>T(e.Xi())-T(s.Xi()))}var Ph;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Ph||(Ph={}));const Th=new lp,$h=new bl(100,1);class fj{constructor(e,s,i,n){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new he,this.vo=new he,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=$h,this.xo=ca(null),this.So=e,this.cn=s,this.ko=i,this.yo=n,this.Co=new Mh(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(dt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Me(e.scaleMargins.top),i=Me(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(s+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let i=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(l,a){if(l===null)return!1;const o=Gi(l.Ph(),a),c=Gi(l.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(i=tr(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(i=Li(this.Ih,this.xo),i!==null&&this.Ao(i));const n=s.Cr!==this.cn.mode;n&&(s.Cr===2||this.Mh())&&this.Ra(),n&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const i=this.Ih;(s||i===null&&e!==null||i!==null&&!i.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=Gs(e,s):this.Oo()&&(e=Ki(e,s)),this.Po(e,s)}te(e,s,i){this.Wo();const n=this.Fo(),l=T(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(o-a),f=i===void 0?0:i.from,p=i===void 0?e.length:i.to,x=this.Ho();for(let y=f;y<p;y++){const g=e[y],b=g._t;if(isNaN(b))continue;let v=b;x!==null&&(v=x(g._t,s));const h=n+d*(v-a),m=u?h:this.ho-1-h;g.st=m}}be(e,s,i){this.Wo();const n=this.Fo(),l=T(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(o-a),f=i===void 0?0:i.from,p=i===void 0?e.length:i.to,x=this.Ho();for(let y=f;y<p;y++){const g=e[y];let b=g.ge,v=g.Me,h=g.xe,m=g.Se;x!==null&&(b=x(g.ge,s),v=x(g.Me,s),h=x(g.xe,s),m=x(g.Se,s));let j=n+d*(b-a),N=u?j:this.ho-1-j;g.pe=N,j=n+d*(v-a),N=u?j:this.ho-1-j,g.de=N,j=n+d*(h-a),N=u?j:this.ho-1-j,g.fe=N,j=n+d*(m-a),N=u?j:this.ho-1-j,g.me=N}}pn(e,s){const i=this.To(e,s);return this.$o(i,s)}$o(e,s){let i=e;return this.Mh()?i=function(n,l){return l<0&&(n=-n),n/100*l+l}(i,s):this.Oo()&&(i=function(n,l){return n-=100,l<0&&(n=-n),n/100*l+l}(i,s)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const i=this.po[s];i.Xi()===null&&i.Ki(s+1),e.push(i)}return e=wp(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const i=s.Ct();i!==null&&(e===null||i.la<e.la)&&(e=i)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=T(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const i=T(this.ao).Th();s=Math.max(s,.1),i.Vh(s),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=T(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=T(this.Lh()).Dh()/(this.Eo()-1);let i=e-this.Mo;this.Bo()&&(i*=-1);const n=i*s,l=T(this.ao).Th();l.Oh(n),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(Gs(e,s));case 3:return this.ba().format(Ki(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,T(this.e_()).ba())}Zl(e,s){return e=Gs(e,s),this.s_(e,Th)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=$h,this.Mh()?(this.wa=Th,s=100):this.Oo()?(this.wa=new bl(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new Mh(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Zr(e,this.xo):e;const i=T(this.Lh()),n=this.Fo()+(this.Eo()-1)*(e-i.Ph())/i.Dh();return this.jo(n)}To(e,s){if(this.Wo(),this.Ni())return 0;const i=this.jo(e),n=T(this.Lh()),l=n.Ph()+n.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?Gi(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const i=this.r_();let n=0,l=0;for(const c of i){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const d=c.Il(e.Os(),e.ui());let f=d&&d.Lh();if(f!==null){switch(this.cn.mode){case 1:f=Li(f,this.xo);break;case 2:f=hj(f,u.Vt);break;case 3:f=dj(f,u.Vt)}if(s=s===null?f:s.ts(T(f)),d!==null){const p=d.Eh();p!==null&&(n=Math.max(n,p.above),l=Math.max(l,p.below))}}}if(n===this.co&&l===this.do||(this.co=n,this.do=l,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=tr(s,this.xo)),s=new Ae(s.Ph()-u,s.Rh()+u),this.ro()&&(s=Li(s,this.xo))}if(this.ro()){const c=tr(s,this.xo),u=ca(c);if(a=u,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const d=this.ao!==null?tr(this.ao,this.xo):null;this.xo=u,s=Li(c,u),d!==null&&(this.ao=Li(d,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Ae(-.5,.5)),this.xo=ca(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?Gs:this.Oo()?Ki:this.ro()?e=>Zr(e,this.xo):null}a_(e,s,i){return s===void 0?(i===void 0&&(i=this.ba()),i.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class mj{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new he,this.yl=e,this.$i=s,this.d_=new uj(this);const i=s.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const i of s){const n=T(i[0].Dt());n.$h(e.overlayPriceScales),e.localization&&n.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Me(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const i=s.Dt();i!==null&&i.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,i){const n=i!==void 0?i:this.C_().y_+1;this.T_(e,s,n)}Zo(e){const s=this.po.indexOf(e);ss(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const i=T(e.Dt()).Pa();if(this.o_.has(i)){const l=Me(this.o_.get(i)),a=l.indexOf(e);a!==-1&&(l.splice(a,1),l.length===0&&this.o_.delete(i))}const n=e.Dt();n&&n.Ba().indexOf(e)>=0&&n.Zo(e),n!==null&&(n.Yo(),this.P_(n)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=wp(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&e.h_(i)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,i=0;for(let n=0;n<e.length;n++){const l=e[n].Xi();l!==null&&(l<s&&(s=l),l>i&&(i=l))}return{H_:s,y_:i}}T_(e,s,i){let n=this.w_(s);if(n===null&&(n=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!Nl(s)){const l=this.o_.get(s)||[];l.push(e),this.o_.set(s,l)}n.qo(e),e.Gi(n),e.Ki(i),this.P_(n),this.mo=null}m_(e,s,i){s.Cr!==i.Cr&&this.L_(e)}v_(e,s){const i=Object.assign({visible:!0,autoScale:!0},_t(s)),n=new fj(e,i,this.$i.W().layout,this.$i.W().localization);return n.Lo(this.At()),n}}class pj{constructor(e,s,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=i}Y_(e){const s=e.time,i=this.q_.cacheKey(s),n=this.tr.get(i);if(n!==void 0)return n.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Me(a)),this.Je++,this.Ke--}const l=this.U_(e);return this.tr.set(i,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,l}}class Xi{constructor(e,s){ss(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Rh(t,e){return t===null||e===null?t===e:t.Ch(e)}class vj{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let i=s;i<e.length;++i){const n=e[i];let l=this.J_.get(n.timeWeight);l===void 0&&(l=[],this.J_.set(n.timeWeight,l)),l.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}su(e,s){const i=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((i,n)=>{e<=i[0].index?s.push(n):i.splice(En(i,e,l=>l.index<e),1/0)});for(const i of s)this.J_.delete(i)}ru(e){let s=[];for(const i of Array.from(this.J_.keys()).sort((n,l)=>l-n)){if(!this.J_.get(i))continue;const n=s;s=[];const l=n.length;let a=0;const o=Me(this.J_.get(i)),c=o.length;let u=1/0,d=-1/0;for(let f=0;f<c;f++){const p=o[f],x=p.index;for(;a<l;){const y=n[a],g=y.index;if(!(g<x)){u=g;break}a++,s.push(y),d=g,u=1/0}if(u-x>=e&&x-d>=e)s.push(p),d=x;else if(this.Q_)return n}for(;a<l;a++)s.push(n[a])}return s}}class ei{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Xi(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ei(null)}}function gj(t,e){return t.weight>e.weight?t:e}class xj{constructor(e,s,i,n){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new vj,this.du=new Map,this.fu=ei.ou(),this.vu=!0,this.pu=new he,this.mu=new he,this.bu=new he,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=i,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=n,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){dt(this.yo,e),this.Cu(),this.ku()}$h(e,s){var i;dt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((i=e.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,i;return(i=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&i!==void 0?i:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const i=En(this.uu,this.q_.key(e),(n,l)=>this.q_.key(n.time)<l);return this.q_.key(e)<this.q_.key(this.uu[i].time)?s?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),i=Math.round(e.to),n=T(this.Bu()),l=T(this.Au());return{from:T(this.Ui(Math.max(n,s))),to:T(this.Ui(Math.min(l,i)))}}Iu(e){return{from:T(this.Va(e.from,!0)),to:T(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),i=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.Su*e/i;this.Su=n}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const n=i-e;this.xu-=Math.round(n/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!vn(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const i=this.Eu(),n=s===void 0?0:s.from,l=s===void 0?e.length:s.to;for(let a=n;a<l;a++){const o=e[a].ot,c=i+this.xu-o,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(s/e),n=T(this.Xs()),l=Math.max(n.Os(),n.Os()-i),a=Math.max(n.ui(),n.ui()-i),o=this.cu.su(e,s),c=this.Bu()+i,u=this.Au()-i,d=this.$u(),f=this.cn.fixLeftEdge||d,p=this.cn.fixRightEdge||d;let x=0;for(const y of o){if(!(l<=y.index&&y.index<=a))continue;let g;x<this.Mu.length?(g=this.Mu[x],g.coord=this.It(y.index),g.label=this.Uu(y),g.weight=y.weight):(g={needAlignCoordinate:!1,coord:this.It(y.index),label:this.Uu(y),weight:y.weight},this.Mu.push(g)),this.Su>s/2&&!d?g.needAlignCoordinate=!1:g.needAlignCoordinate=f&&y.index<=c||p&&y.index>=u,x++}return this.Mu.length=x,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const i=this.Fu(e),n=this.le(),l=n+s*(n/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=No(this.__-e,0,this.__),i=No(this.__-T(this.wo),0,this.__);s!==0&&i!==0&&this.Gn(this.wu.le*s/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=T(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,n=performance.now();this.$i.Zn({Qu:l=>(l-n)/s>=1,tc:l=>{const a=(l-n)/s;return a>=1?e:i+(e-i)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new Xi(e,s+this.cn.rightOffset))}lc(e){const s=new Xi(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),i=this.Eu()+this.xu-s;return Math.round(1e6*i)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ei.ou());const e=this.Eu(),s=this.__/this.Su,i=this.xu+e,n=new Xi(i-s+1,i);this._c(new ei(n))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new pj(i=>this.fc(i),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,Rh(s.lu(),this.fu.lu())||this.pu.m(),Rh(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const i=s.Os()-e;if(i<0){const n=this.xu-i-1;this.Jn(n)}this.zu()}Pu(){this.Lu(),this.zu()}}class yj{X(e,s,i){e.useMediaCoordinateSpace(n=>this.K(n,s,i))}gl(e,s,i){e.useMediaCoordinateSpace(n=>this.vc(n,s,i))}vc(e,s,i){}}class wj extends yj{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:i}=e;let n=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>i.width?a.Zu=i.width/o:a.Zu=1,n+=a.gc*a.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((i.height-n)/2,0);break;case"bottom":l=Math.max(i.height-n,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=i.width/2;break;case"right":s.textAlign="right",o=i.width-1-a.gc/2}s.translate(o,l),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),l+=a.gc*a.Zu}}wc(e,s){const i=this.kc(e.font);let n=i.get(s);return n===void 0&&(n=e.measureText(s).width,i.set(s,n)),n}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class jj{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new wj(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:oi(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Nj extends zc{constructor(e,s){super(),this.cn=s,this.wn=new jj(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var zh,Ih,Dh,Fh,Oh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(zh||(zh={}));class bj{constructor(e,s,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new he,this.Rc=new he,this.Dc=null,this.Vc=e,this.cn=s,this.q_=i,this.Oc=new tw(this),this.yl=new xj(this,s.timeScale,this.cn.localization,i),this.vt=new dw(this,s.crosshair),this.Bc=new aj(s.crosshair),this.Ac=new Nj(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(we.es())}Uh(){this.Nc(we.ss())}oa(){this.Nc(new we(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){dt(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const i=this.Uc(e);i!==null&&(i.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const i=s.w_(e);if(i!==null)return{Ht:s,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new mj(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const i=e===void 0?this.yc.length-1:e,n=we.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Nc(n),s}V_(e,s,i){e.V_(s,i)}O_(e,s,i){e.O_(s,i),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,i){s.Vo()||e.A_(s,i)}I_(e,s,i){s.Vo()||(e.I_(s,i),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const i=this.St();if(i.Ni()||s===0)return;const n=i.Hi();e=Math.max(1,Math.min(e,n)),i.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,i,n,l){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const u=n.vn(),d=u.Ct();d!==null&&(a=u.pn(s,d)),a=this.Bc.Oa(a,o,n),this.vt.kn(o,a,n),this.oa(),l||this.Rc.m(this.vt.xt(),{x:e,y:s},i)}ad(e,s,i){const n=i.vn(),l=n.Ct(),a=n.Rt(e,T(l)),o=this.yl.Va(s,!0),c=this.yl.It(T(o));this.ld(c,a,null,i,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),i=this.vt.Sn();this.ld(s,i,null,e)}this.vt.Vn()}_d(e,s,i){const n=this.yl.mn(0);s!==void 0&&i!==void 0&&this.yl.bt(s,i);const l=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&n!==null&&l!==null){const c=o.Kr(a),u=this.q_.key(n)>this.q_.key(l),d=e!==null&&e>a&&!u,f=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,p=c&&(i!==void 0||f)&&this.yl.W().shiftVisibleRangeOnNewBar;if(d&&!p){const x=e-a;this.yl.Jn(this.yl.Hu()-x)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(i=>i.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,i){const n=this.yc[0],l=this.fd(s,e,n,i);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(e){const s=this.dr(e),i=this.Cc.indexOf(e);ss(i!==-1,"Series not found"),this.Cc.splice(i,1),T(s).Zo(e),e.S&&e.S()}Xl(e,s){const i=T(this.dr(e));i.Zo(e);const n=this.Uc(s);if(n===null){const l=e.Xi();i.qo(e,s,l)}else{const l=n.Ht===i?e.Xi():void 0;n.Ht.qo(e,s,l)}}hc(){const e=we.ss();e.$n(),this.Nc(e)}pd(e){const s=we.ss();s.Yn(e),this.Nc(s)}Kn(){const e=we.ss();e.Kn(),this.Nc(e)}Gn(e){const s=we.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=we.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=we.ss();s.Zn(e),this.Nc(s)}Un(){const e=we.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,i=this.zc;if(s===i)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==s)this.Dc={Ps:i,Rs:s,wd:new Map};else{const l=this.Dc.wd.get(e);if(l!==void 0)return l}const n=function(l,a,o){const[c,u,d,f]=pn(l),[p,x,y,g]=pn(a),b=[Qe(c+o*(p-c)),Qe(u+o*(x-u)),Qe(d+o*(y-d)),sp(f+o*(g-f))];return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${b[3]})`}(i,s,e/100);return this.Dc.wd.set(e,n),n}Gc(e,s){const i=new we(s);if(e!==null){const n=this.yc.indexOf(e);i.Nn(n,{Fn:s})}return i}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,i,n){const l=new Oc(this,e,s,i,n),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return i.qo(l,a),Nl(a)||l.$h(e),l}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function bo(t){return!yt(t)&&!_n(t)}function jp(t){return yt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Ih||(Ih={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Dh||(Dh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Fh||(Fh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Oh||(Oh={}));const Ah=t=>t.getUTCFullYear();function Sj(t,e,s){return e.replace(/yyyy/g,(i=>Et(Ah(i),4))(t)).replace(/yy/g,(i=>Et(Ah(i)%100,2))(t)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(t,s)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(t,s)).replace(/MM/g,(i=>Et((n=>n.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>Et((n=>n.getUTCDate())(i),2))(t))}class Np{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return Sj(e,this.gd,this.Md)}}class kj{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Et(e.getUTCHours(),2)).replace("%m",Et(e.getUTCMinutes(),2)).replace("%s",Et(e.getUTCSeconds(),2))}}const Cj={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class _j{constructor(e={}){const s=Object.assign(Object.assign({},Cj),e);this.Td=new Np(s.Sd,s.Cd),this.Pd=new kj(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function sr(t){return 60*t*60*1e3}function ha(t){return 60*t*1e3}const ir=[{Dd:(Bh=1,1e3*Bh),Vd:10},{Dd:ha(1),Vd:20},{Dd:ha(5),Vd:21},{Dd:ha(30),Vd:22},{Dd:sr(1),Vd:30},{Dd:sr(3),Vd:31},{Dd:sr(6),Vd:32},{Dd:sr(12),Vd:33}];var Bh;function Vh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=ir.length-1;s>=0;--s)if(Math.floor(e.getTime()/ir[s].Dd)!==Math.floor(t.getTime()/ir[s].Dd))return ir[s].Vd;return 0}function da(t){let e=t;if(_n(t)&&(e=Ac(t)),!bo(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function Wh(t){if(!jp(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Ac(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Uh(t){_n(t.time)&&(t.time=Ac(t.time))}class Hh{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(Uh)}(e):Uh(e)}createConverterToInternalObj(e){return T(function(s){return s.length===0?null:bo(s[0].time)||_n(s[0].time)?da:Wh}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return jp(s=e)?Wh(s):bo(s)?da(s):da(Ac(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new _j({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Np(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const i=function(l,a,o){switch(l){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const l=n.tickMarkFormatter(e.originalTime,i,s.locale);if(l!==null)return l}return function(l,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,i,s.locale)}maxTickMarkWeight(e){let s=e.reduce(gj,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(i,n=0){if(i.length===0)return;let l=n===0?null:i[n-1].time.Od,a=l!==null?new Date(1e3*l):null,o=0;for(let c=n;c<i.length;++c){const u=i[c],d=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=Vh(d,a)),o+=u.time.Od-(l||u.time.Od),l=u.time.Od,a=d}if(n===0&&i.length>1){const c=Math.ceil(o/(i.length-1)),u=new Date(1e3*(i[0].time.Od-c));i[0].timeWeight=Vh(new Date(1e3*i[0].time.Od),u)}})(e,s)}static Id(e){return dt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const ci=typeof window<"u";function Kh(){return!!ci&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function fa(){return!!ci&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function So(t){return t+t%2}function ma(t,e){return t.zd-e.zd}function pa(t,e,s){const i=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(i)*Math.min(Math.abs(i),s)}class Ej{constructor(e,s,i,n){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=i,this.rs=n}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let i=0;const n=pa(this.Ld,this.Ed,this.Ud),l=ma(this.Ld,this.Ed),a=[n],o=[l];if(i+=l,this.Nd!==null){const u=pa(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(n)){const d=ma(this.Ed,this.Nd);if(a.push(u),o.push(d),i+=d,this.Fd!==null){const f=pa(this.Nd,this.Fd,this.Ud);if(Math.sign(f)===Math.sign(n)){const p=ma(this.Nd,this.Fd);a.push(f),o.push(p),i+=p}}}}let c=0;for(let u=0;u<a.length;++u)c+=o[u]/i*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,d){const f=Math.log(d);return Math.log(1*f/-u)/f}(Math.abs(c),this.qd))}tc(e){const s=T(this.Wd),i=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-T(this.Wd).ot;return Math.min(s,this.jd)}}class Lj{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return ip(pn(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function ks(t,e){const s=T(t.ownerDocument).createElement("canvas");t.appendChild(s);const i=Ay(s,{options:{allowResizeObserver:!1},transform:(n,l)=>({width:Math.max(n.width,l.width),height:Math.max(n.height,l.height)})});return i.resizeCanvasElement(e),i}function Cs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function ko(t,e,s,i){t.gl&&t.gl(e,s,i)}function br(t,e,s,i){t.X(e,s,i)}function Co(t,e,s,i){const n=t(s,i);for(const l of n){const a=l.gt();a!==null&&e(a)}}function Mj(t){ci&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Bc{constructor(e,s,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!fa(),this.Af=n=>{this.If(n)},this.zf=n=>{if(this.Lf(n)){const l=this.Ef(n);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(vt(n),this.cf);a<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(n);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(vt(n),this.af);a<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=va(e.changedTouches,T(this.Of));if(s===null||(this.Vf=nr(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(vt(s),T(this.pf)),{nv:n,sv:l,Nf:a}=i;if(this.mf||!(a<5)){if(!this.mf){const o=.5*n,c=l>=o&&!this.cn.ev(),u=o>l&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),$s(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(vt(e),T(this.vf)),{Nf:i}=s;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const n=this.Ef(e);this.Uf(n,this.Hf.av)}}Ff(e,s){const i=Math.abs(s.nt-e.nt),n=Math.abs(s.st-e.st);return{nv:i,sv:n,Nf:i+n}}ov(e){let s=va(e.changedTouches,T(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=nr(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(e,s);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:n}=this.Ff(vt(s),this.cf);n<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&$s(e));this._f===0&&$s(e),e.touches.length===0&&this.ff&&(this.ff=!1,$s(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),Kh()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(vt(e),this.af);i<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=nr(e);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=vt(s),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",l),i.removeEventListener("touchend",a)},i.addEventListener("touchmove",l,{passive:!1}),i.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const n=this.Ef(e,s);this.Wf(n,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=vt(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;Kh()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=vt(e),this.kf&&(this.kf(),this.kf=null);{const n=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",l)},s.addEventListener("mousemove",n),s.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=vt(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}fa()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),Mj(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=Gh(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),$s(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=Gh(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!fa()}vv(e){const s=va(e.touches,T(this.Of));if(s===null)return;const i=this.Ef(e,s);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:nr(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const i=s||e,n=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:i.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&$s(e)}}}}function Gh(t,e){const s=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(s*s+i*i)}function $s(t){t.cancelable&&t.preventDefault()}function vt(t){return{nt:t.pageX,st:t.pageY}}function nr(t){return t.timeStamp||performance.now()}function va(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function rr(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function Pj(t,e,s){for(const i of t){const n=i.gt();if(n!==null&&n.wr){const l=n.wr(e,s);if(l!==null)return{Bv:i,Iv:l}}}return null}function ga(t,e){return s=>{var i,n,l,a;return((n=(i=s.Dt())===null||i===void 0?void 0:i.Pa())!==null&&n!==void 0?n:"")!==e?[]:(a=(l=s.da)===null||l===void 0?void 0:l.call(s,t))!==null&&a!==void 0?a:[]}}function Xh(t,e,s,i){if(!t.length)return;let n=0;const l=s/2,a=t[0].At(i,!0);let o=e===1?l-(t[0].Vi()-a/2):t[0].Vi()-a/2-l;o=Math.max(0,o);for(let c=1;c<t.length;c++){const u=t[c],d=t[c-1],f=d.At(i,!1),p=u.Vi(),x=d.Vi();if(e===1?p>x-f:p<x+f){const y=x-f*e;u.Oi(y);const g=y-e*f/2;if((e===1?g<0:g>s)&&o>0){const b=e===1?-1-g:g-s,v=Math.min(b,o);for(let h=n;h<t.length;h++)t[h].Oi(t[h].Vi()+e*v);o-=v}}else n=c,o=e===1?x-f-p:p-(x+f)}}class Qh{constructor(e,s,i,n){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new xn(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=i,this.qv=n==="left",this.Yv=ga("normal",n),this.Zv=ga("top",n),this.Xv=ga("bottom",n),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=ks(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=ks(this.Kv,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Bc(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Cs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Cs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),i=T(this.Gv.canvasElement.getContext("2d"));i.save();const n=this.Li.Ha();i.font=this._p(),n.length>0&&(e=Math.max(this.Fv.xi(i,n[0].so),this.Fv.xi(i,n[n.length-1].so)));const l=this.up();for(let u=l.length;u--;){const d=this.Fv.xi(i,l[u].Kt());d>e&&(e=d)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const u=this.Li.pn(1,a),d=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(u,d))+.11111111111111,a)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(u,d))-.11111111111111,a)))}var o;i.restore();const c=e||34;return So(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&vs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return T(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,T(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=bs(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const s=bs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,s.V_(i,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp(),n=this.Li;s.O_(i,n,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,i))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,s.B_(i,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const l=i[n].Rn(this.tn.fp(),s);for(let a=0;a<l.length;a++)e.push(l[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,l=this.tn.fp().$t(),a=l.q(),o=l.bd();a===o?wl(e,0,0,i,n,a):np(e,0,0,i,n,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.ap().C*i));let l;l=this.qv?s.width-n:0,e.fillRect(l,0,n,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),i=this.Li.W(),n=this.ap(),l=this.qv?this.Ev.width-n.T:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=i.borderColor;const u=Math.max(1,Math.floor(c)),d=Math.floor(.5*c),f=Math.round(n.T*o);a.beginPath();for(const p of s)a.rect(Math.floor(l*o),Math.round(p.Ea*c)-d,f,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=i.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(l-n.A):Math.round(l+n.T+n.A),u=s.map(d=>this.Fv.Mi(a,d.so));for(let d=s.length;d--;){const f=s[d];a.fillText(f.so,c,f.Ea+u[d])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),i=this.tn.fp(),n=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(a=>{i.vr(a)&&s.push(a)});const l=this.Li;s.forEach(a=>{a.Rn(i,l).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,n)}yp(e,s){if(this.Ev===null)return;const i=this.Ev.height/2,n=e.filter(a=>a.ki()<=i),l=e.filter(a=>a.ki()>i);n.sort((a,o)=>o.ki()-a.ki()),l.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}Xh(n,1,this.Ev.height,s),Xh(l,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),i=this.ap(),n=this.qv?"right":"left";s.forEach(l=>{l.Ai()&&l.gt(T(this.Li)).X(e,i,this.Fv,n)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),i=[],n=this.tn.fp(),l=s.Zc().Rn(n,this.Li);l.length&&i.push(l);const a=this.ap(),o=this.qv?"right":"left";i.forEach(c=>{c.forEach(u=>{u.gt(T(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return oi(this.ko.fontSize,this.ko.fontFamily)}}function Tj(t,e){var s,i;return(i=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function lr(t,e){var s,i;return(i=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function $j(t,e){var s,i;return(i=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function Rj(t,e){var s,i;return(i=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}class Vc{constructor(e,s){this.Ev=ee({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new he,this.Op=new he,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=ks(i,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=ks(i,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Bc(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Cs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Cs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return T(this.Np)}qp(e){var s,i;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Vc.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new Lj(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(T(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(T(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,i=e.localY;this.Gp(s,i,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const i=e.localX,n=e.localY;this.Gp(i,n,e);const l=this.wr(i,n);this.Qd.Qp((s=l==null?void 0:l.Lv)!==null&&s!==void 0?s:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const i=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,i)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,i=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const n=T(this.Lp),l=n.x+(s-this.Ip.x),a=n.y+(i-this.Ip.y);this.Gp(l,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const i=this.Np;return i===null?null:function(n,l,a){const o=n.Uo(),c=function(u,d,f){var p,x;let y,g;for(const h of u){const m=(x=(p=h.va)===null||p===void 0?void 0:p.call(h,d,f))!==null&&x!==void 0?x:[];for(const j of m)b=j.zOrder,(!(v=y==null?void 0:y.zOrder)||b==="top"&&v!=="top"||b==="normal"&&v==="bottom")&&(y=j,g=h)}var b,v;return y&&g?{zv:y,Hc:g}:null}(o,l,a);if((c==null?void 0:c.zv.zOrder)==="top")return rr(c);for(const u of o){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return rr(c);const d=Pj(u.Pn(n),l,a);if(d!==null)return{Hc:u,Bv:d.Bv,Iv:d.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return rr(c)}return c!=null&&c.zv?rr(c):null}(i,e,s)}_m(e,s){T(s==="left"?this.Cp:this.Tp).cp(ee({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){vs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=T(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const i=s.Dt();i!==null&&e.P_(i),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const i=bs(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n)}),this.Np&&(this.fm(i,Tj),this.vm(i),this.pm(i),this.fm(i,lr),this.fm(i,$j)))}this.Jv.applySuggestedBitmapSize();const s=bs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.bm(s),this.fm(s,Rj))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const i=s.localX,n=s.localY;e.M()&&e.m(this.$i().St().Nu(i),{x:i,y:n},s)}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,l=this.$i(),a=l.q(),o=l.bd();a===o?wl(e,0,0,i,n,o):np(e,0,0,i,n,a,o)}vm(e){const s=T(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,lr,ko,s),this.Mm(e,lr,br,s)}bm(e){this.Mm(e,lr,br,this.$i().Zc())}fm(e,s){const i=T(this.Np).Uo();for(const n of i)this.Mm(e,s,ko,n);for(const n of i)this.Mm(e,s,br,n)}Mm(e,s,i,n){const l=T(this.Np),a=l.$t().Wc(),o=a!==null&&a.Hc===n,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;Co(s,u=>i(u,e,o,c),n,l)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,i=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const n=e.$t().ud();s&&this.Cp===null&&(this.Cp=new Qh(this,e.W(),n,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new Qh(this,e.W(),n,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,i){this.$i().ld(this.Sm(e),this.km(s),i,T(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,i){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,i);const n=this.$i().Zc();this.Lp={x:n.Yt(),y:n.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),i=this.fp();if(s.z_(i,i.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const n=performance.now(),l=s.St();this.Ep.Vr(l.Hu(),n),this.Ep.Qu(n)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)T(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),i=s.St();if(i.Ni())return;const n=this.Qd.W(),l=n.handleScroll,a=n.kineticScroll;if((!l.pressedMouseMove||e.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=i.le();this.Ep=new Ej(.2/u,7/u,.997,15/u),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),c))}}class Yh{constructor(e,s,i,n,l){this.ft=!0,this.Ev=ee({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=i.ud,this.cn=s,this.Tm=n,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=ks(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Cs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){vs(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=bs(this.Gv);s!==null&&s.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*i),a=Math.floor(this.Oc.W().C*n),o=this.qv?s.width-l:0;e.fillRect(o,0,l,a)}mp({context:e,bitmapSize:s}){wl(e,0,0,s.width,s.height,this.Pm())}}function Wc(t){return e=>{var s,i;return(i=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&i!==void 0?i:[]}}const zj=Wc("normal"),Ij=Wc("top"),Dj=Wc("bottom");class Fj{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=ee({width:0,height:0}),this.Om=new he,this.Fv=new xn(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=ks(this.Im,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=ks(this.Im,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const n=this.Jv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Bc(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Cs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Cs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,i){vs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(ee({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(ee({width:i,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const i=bs(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n),this.$m(i,Dj)}),this.wp(i),this.$m(i,zj)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=bs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,Ij))}$m(e,s){const i=this.Qd.$t().wt();for(const n of i)Co(s,l=>ko(l,e,!1,void 0),n,void 0);for(const n of i)Co(s,l=>br(l,e,!1,void 0),n,void 0)}mp({context:e,bitmapSize:s}){wl(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const n=Math.max(1,Math.floor(this.jm().C*i));e.fillRect(0,0,s.width,n)}}wp(e){const s=this.Qd.$t().St(),i=s.Ha();if(!i||i.length===0)return;const n=this.q_.maxTickMarkWeight(i),l=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:u})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const d=Math.max(1,Math.floor(c)),f=Math.floor(.5*c);o.beginPath();const p=Math.round(l.T*u);for(let x=i.length;x--;){const y=Math.round(i[x].coord*c);o.rect(y-f,0,d,p)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=l.C+l.T+l.L+l.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const u of i)if(u.weight<n){const d=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,d,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const u of i)if(u.weight>=n){const d=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,d,c)}})}Ym(e,s,i){const n=this.Fv.xi(e,i),l=n/2,a=Math.floor(s-l)+.5;return a<0?s+=Math.abs(0-a):a+n>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+n))),s}Um(e,s){const i=this.jm();for(const n of e)for(const l of n.Qi())l.gt().X(s,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return oi(this.j(),this.cn.fontFamily)}Zm(){return oi(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new xn,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const i=this.j();e.P=i,e.R=s,e.L=3*i/12,e.B=3*i/12,e.ji=9*i/12,e.N=0,e.Hm=4*i/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},n=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,l=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new Yh("left",s,i,n,l),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new Yh("right",s,i,n,l),this.Am.appendChild(this.Dm.lp()))}}const Oj=!!ci&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!ci&&(!((xa=navigator==null?void 0:navigator.userAgentData)===null||xa===void 0)&&xa.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var xa;class Aj{constructor(e,s,i){var n;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new he,this.Op=new he,this.Rc=new he,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(n=this.Xd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ya(this.cn)&&this.hb(!0),this.$i=new bj(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new Fj(this,this.q_),this.sb.appendChild(this.ab.lp());const l=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(l||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],T(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,i=!1){if(this.ho===s&&this.__===e)return;const n=function(o){const c=Math.floor(o.width),u=Math.floor(o.height);return ee({width:c-c%2,height:u-u%2})}(ee({width:e,height:s}));this.ho=n.height,this.__=n.width;const l=this.ho+"px",a=this.__+"px";T(this.Xd).style.height=l,T(this.Xd).style.width=a,this.sb.style.height=l,this.sb.style.width=a,i?this.mb(we.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=we.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=ya(this.cn);this.$i.$h(e);const i=ya(this.cn);i!==s&&this.hb(i),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const i=T(s.getContext("2d"));return this.gb(i),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:T(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Me(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,i=0;const n=this.Xm[0],l=(o,c)=>{let u=0;for(let d=0;d<this.Xm.length;d++){const f=this.Xm[d],p=T(o==="left"?f.wm():f.gm()),x=p.xp();e!==null&&p.Sp(e,c,u),u+=x.height}};this.xb()&&(l("left",0),s+=T(n.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],u=c.xp();e!==null&&c.Sp(e,s,i),i+=u.height}s+=n.xp().width,this.Sb()&&(l("right",s),s+=T(n.gm()).xp().width);const a=(o,c,u)=>{T(o==="left"?this.ab.Lm():this.ab.Em()).Sp(T(e),c,u)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,i),c=T(n.wm()).xp().width),this.ab.Sp(e,c,i),c+=o.width,this.Sb()&&a("right",c,i)}i+=o.height}return ee({width:s,height:i})}Pb(){let e=0,s=0,i=0;for(const y of this.Xm)this.xb()&&(s=Math.max(s,T(y.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,T(y.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=y.M_();s=So(s),i=So(i);const n=this.__,l=this.ho,a=Math.max(n-s-i,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=0+c,f=l<d?0:l-d,p=f/e;let x=0;for(let y=0;y<this.Xm.length;++y){const g=this.Xm[y];g.qp(this.$i.qc()[y]);let b=0,v=0;v=y===this.Xm.length-1?f-x:Math.round(g.M_()*p),b=Math.max(v,2),x+=b,g.cp(ee({width:a,height:b})),this.xb()&&g._m(s,"left"),this.Sb()&&g._m(i,"right"),g.fp()&&this.$i.Kc(g.fp(),b)}this.ab.Fm(ee({width:o?a:0,height:c}),o?s:0,o?i:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==i&&(this.Jm=i)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return Oj?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),i=s*e.deltaX/100,n=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(n)*Math.min(1,Math.abs(n)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,l)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(e,s){var i;const n=e.jn();n===3&&this.Db(),n!==3&&n!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const i of e.Qn())this.ns(i,s)}Vb(e){const s=this.$i.qc();for(let i=0;i<s.length;i++)e.Hn(i).Wn&&s[i].N_()}ns(e,s){const i=this.$i.St();switch(e.qn){case 0:i.hc();break;case 1:i.lc(e.Vt);break;case 2:i.Gn(e.Vt);break;case 3:i.Jn(e.Vt);break;case 4:i.qu();break;case 5:e.Vt.Qu(s)||i.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,s);for(const n of i.Qn())if(n.qn===5&&!n.Vt.Qu(s)){this.$t().Zn(n.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,i=this.Xm.length;for(let n=s;n<i;n++){const l=Me(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let n=i;n<s;n++){const l=new Vc(this,e[n]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let n=0;n<s;n++){const l=e[n],a=this.Xm[n];a.fp()!==l?a.qp(l):a.Up()}this.cb(),this.Pb()}Ib(e,s,i){var n;const l=new Map;e!==null&&this.$i.wt().forEach(d=>{const f=d.In().ll(e);f!==null&&l.set(d,f)});let a;if(e!==null){const d=(n=this.$i.St().Ui(e))===null||n===void 0?void 0:n.originalTime;d!==void 0&&(a=d)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Oc?o.Hc:void 0,u=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:l,Fb:u,Wb:i??void 0}}Bb(e,s,i){this.Vp.m(()=>this.Ib(e,s,i))}Ab(e,s,i){this.Op.m(()=>this.Ib(e,s,i))}lb(e,s,i){this.Rc.m(()=>this.Ib(e,s,i))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(i=>i.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ya(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Bj(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function bp(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]])}return s}function qh(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.color!==void 0&&(l.V=s.color),l}function Vj(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.lineColor!==void 0&&(l.lt=s.lineColor),s.topColor!==void 0&&(l.Ps=s.topColor),s.bottomColor!==void 0&&(l.Rs=s.bottomColor),l}function Wj(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.topLineColor!==void 0&&(l.Re=s.topLineColor),s.bottomLineColor!==void 0&&(l.De=s.bottomLineColor),s.topFillColor1!==void 0&&(l.ke=s.topFillColor1),s.topFillColor2!==void 0&&(l.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(l.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(l.Te=s.bottomFillColor2),l}function Uj(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),n}function Hj(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),s.borderColor!==void 0&&(n.Ot=s.borderColor),s.wickColor!==void 0&&(n.Xh=s.wickColor),n}function Kj(t,e,s,i,n){const l=Me(n)(s),a=Math.max(...l),o=Math.min(...l),c=l[l.length-1],u=[c,a,o,c],d=s,{time:f,color:p}=d;return{ee:e,ot:t,Vt:u,zb:i,$e:bp(d,["time","color"]),V:p}}function ar(t){return t.Vt!==void 0}function Jh(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function os(t){return(e,s,i,n,l,a)=>function(o,c){return c?c(o):(u=o).open===void 0&&u.value===void 0;var u}(i,a)?Jh({ot:e,ee:s,zb:n},i):Jh(t(e,s,i,n,l),i)}function Zh(t){return{Candlestick:os(Hj),Bar:os(Uj),Area:os(Vj),Baseline:os(Wj),Histogram:os(qh),Line:os(qh),Custom:os(Kj)}[t]}function ed(t){return{ee:0,Hb:new Map,la:t}}function td(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function sd(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Me(e)}class Gj{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let i=this.qb.size!==0,n=!1;const l=this.Yb.get(e);if(l!==void 0)if(this.Yb.size===1)i=!1,n=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(n=!0);let a=[];if(s.length!==0){const c=s.map(x=>x.time),u=this.q_.createConverterToInternalObj(s),d=Zh(e.Qh()),f=e.Ca(),p=e.Ta();a=s.map((x,y)=>{const g=u(x.time),b=this.q_.key(g);let v=this.qb.get(b);v===void 0&&(v=ed(g),this.qb.set(b,v),n=!0);const h=d(g,v.ee,x,c[y],f,p);return v.Hb.set(e,h),h})}i&&this.Gb(),this.Jb(e,a);let o=-1;if(n){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:sd(u.Hb)})}),c.sort((u,d)=>this.q_.key(u.time)-this.q_.key(d.time)),o=this.Qb(c)}return this.tw(e,o,function(c,u,d){const f=td(c,d),p=td(u,d);if(f!==void 0&&p!==void 0)return{ta:f.Ub>=p.Ub&&f.$b>=p.$b}}(this.Yb.get(e),l,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const i=s;(function(g){g.zb===void 0&&(g.zb=g.time)})(i),this.q_.preprocessData(s);const n=this.q_.createConverterToInternalObj([s])(s.time),l=this.Zb.get(e);if(l!==void 0&&this.q_.key(n)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${n}`);let a=this.qb.get(this.q_.key(n));const o=a===void 0;a===void 0&&(a=ed(n),this.qb.set(this.q_.key(n),a));const c=Zh(e.Qh()),u=e.Ca(),d=e.Ta(),f=c(n,a.ee,s,i.zb,u,d);a.Hb.set(e,f),this.nw(e,f);const p={ta:ar(f)};if(!o)return this.tw(e,-1,p);const x={timeWeight:0,time:a.la,pointData:a,originalTime:sd(a.Hb)},y=En(this.Xb,this.q_.key(x.time),(g,b)=>this.q_.key(g.time)<b);this.Xb.splice(y,0,x);for(let g=y;g<this.Xb.length;++g)wa(this.Xb[g].pointData,g);return this.q_.fillWeightsForPoints(this.Xb,y),this.tw(e,y,p)}nw(e,s){let i=this.Yb.get(e);i===void 0&&(i=[],this.Yb.set(e,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.q_.key(s.ot)>this.q_.key(n.ot)?ar(s)&&i.push(s):ar(s)?i[i.length-1]=s:i.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(ar)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let i=0;i<this.Xb.length&&i<e.length;++i){const n=this.Xb[i],l=e[i];if(this.q_.key(n.time)!==this.q_.key(l.time)){s=i;break}l.timeWeight=n.timeWeight,wa(l.pointData,i)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let i=s;i<e.length;++i)wa(e[i].pointData,i);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,i){const n={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((l,a)=>{n.ew.set(a,{$e:l,rw:a===e?i:void 0})}),this.Yb.has(e)||n.ew.set(e,{$e:[],rw:i}),n.St.hw=this.Xb,n.St.lw=s;else{const l=this.Yb.get(e);n.ew.set(e,{$e:l||[],rw:i})}return n}}function wa(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function Uc(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function id(t){const e=Uc(t);return t.V!==void 0&&(e.color=t.V),e}function Xj(t){const e=Uc(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function Qj(t){const e=Uc(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function Sp(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function Yj(t){const e=Sp(t);return t.V!==void 0&&(e.color=t.V),e}function qj(t){const e=Sp(t),{V:s,Ot:i,Xh:n}=t;return s!==void 0&&(e.color=s),i!==void 0&&(e.borderColor=i),n!==void 0&&(e.wickColor=n),e}function _o(t){return{Area:Xj,Line:id,Baseline:Qj,Histogram:id,Bar:Yj,Candlestick:qj,Custom:Jj}[t]}function Jj(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const Zj={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},eN={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},tN={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:$c,attributionLogo:!0},ja={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},sN={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},iN={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:$c,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function nd(){return{width:0,height:0,autoSize:!1,layout:tN,crosshair:Zj,grid:eN,overlayPriceScales:Object.assign({},ja),leftPriceScale:Object.assign(Object.assign({},ja),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ja),{visible:!0}),timeScale:sN,watermark:iN,localization:{locale:ci?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class nN{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Nl(this.ow)?this.aw.Mb(this.ow):0}Li(){return T(this.aw.$t().Uc(this.ow)).Dt}}function rd(t,e,s){const i=bp(t,["time","originalTime"]),n=Object.assign({time:e},i);return s!==void 0&&(n.originalTime=s),n}const rN={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class lN{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class aN{constructor(e,s,i,n,l){this.uw=new he,this.Es=e,this.cw=s,this.dw=i,this.q_=l,this.fw=n}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new ei(new Xi(e.from,e.to)).lu(),i=this.Es.In();if(i.Ni())return null;const n=i.ll(s.Os(),1),l=i.ll(s.ui(),-1),a=T(i.el()),o=T(i.An());if(n!==null&&l!==null&&n.ee>l.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:n===null||n.ee===a?e.from-a:n.ee-a,barsAfter:l===null||l.ee===o?o-e.to:o-l.ee};return n!==null&&l!==null&&(c.from=n.zb,c.to=l.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const i=this.Es.In().ll(e,s);return i===null?null:_o(this.seriesType())(i)}data(){const e=_o(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(i=>rd(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>rd(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return _t(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=dt(_t(rN),e),i=this.Es.ea(s);return new lN(i)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class oN{constructor(e,s,i){this.ww=new he,this.mu=new he,this.Om=new he,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},i=this.yl.Iu(s);this.$i.pd(i)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){ss(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),i=this.yl.Va(s,!1);return i===null?null:this.yl.It(i)}coordinateToTime(e){const s=this.$i.St(),i=s.Nu(e),n=s.Ui(i);return n===null?null:n.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},_t(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function cN(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(s);if(Math.abs(n-s)<1e-8)return i;s*=10}return i}(e.minMove))}function ld(t){return function(e){if(Jn(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=e.handleScale;Jn(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Jn(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const s=e.handleScroll;Jn(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class uN{constructor(e,s,i){this.Sw=new Map,this.kw=new Map,this.yw=new he,this.Cw=new he,this.Tw=new he,this.Pw=new Gj(s);const n=i===void 0?_t(nd()):dt(_t(nd()),ld(i));this.q_=s,this.aw=new Aj(e,n,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const l=this.aw.$t();this.Dw=new oN(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,i){this.autoSizeActive()||this.aw._b(e,s,i)}addCustomSeries(e,s){const i=Ks(e),n=Object.assign(Object.assign({},Zm),i.defaultOptions());return this.Vw("Custom",n,s,i)}addAreaSeries(e){return this.Vw("Area",Gy,e)}addBaselineSeries(e){return this.Vw("Baseline",Xy,e)}addBarSeries(e){return this.Vw("Bar",Hy,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",Uy,e)}addHistogramSeries(e){return this.Vw("Histogram",Qy,e)}addLineSeries(e){return this.Vw("Line",Ky,e)}removeSeries(e){const s=Me(this.Sw.get(e)),i=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(i),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new nN(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(ld(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,i){const n=this.Sw.get(i);if(n===void 0)return;const l=this.aw.$t().dr(n);l!==null&&this.aw.$t().ad(e,s,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,i={},n){cN(i.priceFormat);const l=dt(_t(ep),_t(s),i),a=this.aw.$t().dd(e,l,n),o=new aN(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((i,n)=>n.J(i.$e,i.rw)),s.Wu()}Bw(e){return Me(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((n,l)=>{const a=l.Qh(),o=_o(a)(n);if(a!=="Custom")ss(Bj(o));else{const c=l.Ta();ss(!c||c(o)===!1)}s.set(this.Bw(l),o)});const i=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:i,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function hN(t,e,s){let i;if(_n(t)){const l=document.getElementById(t);ss(l!==null,`Cannot find element in DOM with id=${t}`),i=l}else i=t;const n=new uN(i,e,s);return e.setOptions(n.options()),n}function Na(t,e){return hN(t,new Hh,Hh.Id(e))}Object.assign(Object.assign({},ep),Zm);const dN=[{label:"5m",interval:"5m",period:"5d"},{label:"15m",interval:"15m",period:"1mo"},{label:"1D",interval:"1d",period:"6mo"}];function fN({isOpen:t,onClose:e,stock:s,API_BASE_URL:i}){var j,N;const[n,l]=w.useState({interval:"5m",period:"5d"}),[a,o]=w.useState({loading:!1,error:""}),[c,u]=w.useState({sma:!1,ema:!1,rsi:!1}),d=w.useRef(null),f=w.useRef(null),p=w.useRef(null),x=w.useRef({chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null});w.useEffect(()=>(t?document.body.style.overflow="hidden":(document.body.style.overflow="",l({interval:"5m",period:"5d"})),()=>{document.body.style.overflow=""}),[t]),w.useEffect(()=>{if(!t||!s)return;const k=b();k&&v();const S=setInterval(()=>{k&&v()},6e4);return()=>clearInterval(S)},[t,s,n]),w.useEffect(()=>{if(!t)return;const k=()=>g();return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[t]),w.useEffect(()=>()=>y(),[]);const y=()=>{x.current.chart&&x.current.chart.remove(),x.current.volumeChart&&x.current.volumeChart.remove(),x.current.rsiChart&&x.current.rsiChart.remove(),x.current={chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}},g=()=>{const{chart:k,volumeChart:S,rsiChart:C}=x.current,_=d.current,E=f.current,O=p.current;k&&_&&k.applyOptions({width:_.clientWidth,height:_.clientHeight}),S&&E&&S.applyOptions({width:E.clientWidth,height:E.clientHeight}),C&&O&&C.applyOptions({width:O.clientWidth,height:O.clientHeight})},b=()=>{if(x.current.chart&&x.current.volumeChart)return g(),!0;const k=d.current;if(!k)return!1;const S=f.current,C=p.current;return x.current.chart=Na(k,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Ui.Normal}}),x.current.candleSeries=x.current.chart.addCandlestickSeries({upColor:"#00d09c",downColor:"#ff4d4d",wickUpColor:"#00d09c",wickDownColor:"#ff4d4d",borderVisible:!1}),x.current.smaSeries=x.current.chart.addLineSeries({color:"#f5c542",lineWidth:2,priceLineVisible:!1}),x.current.emaSeries=x.current.chart.addLineSeries({color:"#4f9cf7",lineWidth:2,priceLineVisible:!1}),S&&(x.current.volumeChart=Na(S,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!1,visible:!1},crosshair:{mode:Ui.Normal}}),x.current.volumeSeries=x.current.volumeChart.addHistogramSeries({priceFormat:{type:"volume"},color:"#26a69a",priceScaleId:""}),x.current.chart.timeScale().subscribeVisibleLogicalRangeChange(_=>{_&&x.current.volumeChart&&x.current.volumeChart.timeScale().setVisibleLogicalRange(_),_&&x.current.rsiChart&&x.current.rsiChart.timeScale().setVisibleLogicalRange(_)})),C&&(x.current.rsiChart=Na(C,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Ui.Normal}}),x.current.rsiSeries=x.current.rsiChart.addLineSeries({color:"#9b74ff",lineWidth:2,priceLineVisible:!1}),x.current.rsiChart.priceScale("right").applyOptions({minValue:0,maxValue:100}),x.current.rsiSeries.createPriceLine({price:70,color:"#4f9cf7",lineWidth:1,lineStyle:qr.Dashed}),x.current.rsiSeries.createPriceLine({price:30,color:"#ff4d4d",lineWidth:1,lineStyle:qr.Dashed})),g(),!0},v=async()=>{if(s){o({loading:!0,error:""});try{const k=`${i}/market-data/candles?symbol=${encodeURIComponent(s.symbol)}&interval=${n.interval}&period=${n.period}`,S=await U(k);h(S),o({loading:!1,error:""})}catch(k){o({loading:!1,error:k.message||"Failed to load chart"})}}},h=k=>{var R,K,Y;if(!k)return;const{candleSeries:S,volumeSeries:C,smaSeries:_,emaSeries:E,rsiSeries:O,chart:B,rsiChart:G}=x.current;S&&S.setData(k.candles||[]),C&&C.setData(k.volume||[]),_&&_.setData(c.sma?((R=k.indicators)==null?void 0:R.sma20)||[]:[]),E&&E.setData(c.ema?((K=k.indicators)==null?void 0:K.ema20)||[]:[]),O&&O.setData(c.rsi?((Y=k.indicators)==null?void 0:Y.rsi14)||[]:[]),B&&B.timeScale().fitContent(),G&&G.timeScale().fitContent()},m=k=>{u(S=>{const C={...S,[k]:!S[k]};return setTimeout(v,0),C})};return!t||!s?null:r.jsx("div",{className:"stock-modal-overlay show",children:r.jsxs("div",{className:"stock-modal-content chart-mode",children:[r.jsx("button",{className:"modal-close",onClick:e,children:""}),r.jsxs("div",{className:"modal-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:s.symbol}),r.jsxs("span",{className:"stock-price",children:["",(j=s.lastPrice)==null?void 0:j.toFixed(2)]}),r.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(N=s.pChange)==null?void 0:N.toFixed(2),"%"]})]}),r.jsxs("div",{className:"chart-controls",children:[r.jsxs("div",{className:"chart-toggles",children:[r.jsx("button",{className:`chart-toggle ${c.sma?"active":""}`,onClick:()=>m("sma"),children:"SMA 20"}),r.jsx("button",{className:`chart-toggle ${c.ema?"active":""}`,onClick:()=>m("ema"),children:"EMA 20"}),r.jsx("button",{className:`chart-toggle ${c.rsi?"active":""}`,onClick:()=>m("rsi"),children:"RSI"})]}),r.jsx("div",{className:"chart-ranges",children:dN.map(k=>r.jsx("button",{className:`range-btn ${n.label===k.label?"active":""}`,onClick:()=>l(k),children:k.label},k.label))})]})]}),r.jsxs("div",{className:"chart-container-wrapper",children:[a.loading&&r.jsx("div",{className:"chart-loading",children:"Loading Chart..."}),a.error&&r.jsx("div",{className:"chart-error",children:a.error}),r.jsx("div",{className:"main-chart",ref:d}),r.jsx("div",{className:"volume-chart",ref:f}),r.jsx("div",{className:"rsi-chart",ref:p})]})]})})}function mN({isOpen:t,onClose:e,stock:s,walletBalance:i,onTrade:n,isSubmitting:l}){var d,f;const[a,o]=w.useState({quantity:1,price:"",orderType:"market",broker:"virtual"});if(w.useEffect(()=>{s&&o(p=>{var x;return{...p,price:((x=s.lastPrice)==null?void 0:x.toFixed(2))||"",quantity:s.quantity||1}})},[s]),!t||!s)return null;const c=(parseFloat(a.price)||0)*(parseInt(a.quantity)||0),u=p=>{n(p,a)};return r.jsx("div",{className:"stock-modal-overlay show",style:{zIndex:1e4},children:r.jsxs("div",{className:"stock-modal-content",children:[r.jsx("button",{className:"modal-close",onClick:e,children:""}),r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:s.symbol}),r.jsxs("div",{className:"stock-price-info",children:[r.jsxs("span",{className:"stock-price",children:["",((d=s.lastPrice)==null?void 0:d.toFixed(2))||s.ltp]}),r.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(f=s.pChange)==null?void 0:f.toFixed(2),"%"]})]})]}),r.jsxs("div",{className:"trade-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Broker"}),r.jsxs("div",{className:"toggle-group",children:[r.jsx("button",{className:`toggle-btn ${a.broker==="virtual"?"active":""}`,onClick:()=>o({...a,broker:"virtual"}),children:"Virtual Sandbox"}),r.jsx("button",{className:`toggle-btn ${a.broker==="fyers"?"active":""}`,onClick:()=>o({...a,broker:"fyers"}),children:"Fyers Live"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Order Type"}),r.jsxs("div",{className:"toggle-group",children:[r.jsx("button",{className:`toggle-btn ${a.orderType==="market"?"active":""}`,onClick:()=>o({...a,orderType:"market"}),children:"Market"}),r.jsx("button",{className:`toggle-btn ${a.orderType==="limit"?"active":""}`,onClick:()=>o({...a,orderType:"limit"}),children:"Limit"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Quantity"}),r.jsx("input",{type:"number",min:"1",value:a.quantity,onChange:p=>o({...a,quantity:p.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Price"}),r.jsx("input",{type:"number",value:a.price,onChange:p=>o({...a,price:p.target.value}),disabled:a.orderType==="market"})]})]}),r.jsxs("div",{className:"trade-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Value"}),r.jsxs("span",{children:["",c.toLocaleString()]})]}),a.broker==="virtual"&&r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Available Balance"}),r.jsxs("span",{children:["",i==null?void 0:i.toLocaleString()]})]})]}),r.jsxs("div",{className:"trade-actions",children:[r.jsx("button",{className:"trade-btn buy-btn",onClick:()=>u("BUY"),disabled:l,children:l?"Processing...":"BUY"}),r.jsx("button",{className:"trade-btn sell-btn",onClick:()=>u("SELL"),disabled:l,children:l?"Processing...":"SELL"})]})]})]})})}function pN({placeholder:t="Search stocks...",onSelect:e,fetchSuggestions:s,minChars:i=1,debounceMs:n=300,maxResults:l=8}){const[a,o]=w.useState(""),[c,u]=w.useState([]),[d,f]=w.useState(!1),[p,x]=w.useState(!1),[y,g]=w.useState(-1),b=w.useRef(null),v=w.useRef(null),h=w.useRef(null),m=w.useCallback(async _=>{if(_.length<i){u([]),f(!1);return}x(!0);try{const E=await s(_);u(E.slice(0,l)),f(!0),g(-1)}catch(E){console.error("Search failed:",E),u([])}finally{x(!1)}},[s,i,l]),j=_=>{const E=_.target.value;o(E),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(E)},n)},N=_=>{if(d)switch(_.key){case"ArrowDown":_.preventDefault(),g(E=>E<c.length-1?E+1:E);break;case"ArrowUp":_.preventDefault(),g(E=>E>0?E-1:-1);break;case"Enter":_.preventDefault(),y>=0&&c[y]&&k(c[y]);break;case"Escape":_.preventDefault(),f(!1),g(-1);break}},k=_=>{o(""),f(!1),g(-1),u([]),e(_)};w.useEffect(()=>{const _=E=>{v.current&&!v.current.contains(E.target)&&!b.current.contains(E.target)&&(f(!1),g(-1))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),w.useEffect(()=>{if(y>=0&&v.current){const _=v.current.children[y];_&&_.scrollIntoView({block:"nearest",behavior:"smooth"})}},[y]);const S=(_,E)=>{if(!E.trim())return _;const O=new RegExp(`(${E})`,"gi");return _.split(O).map((G,R)=>O.test(G)?r.jsx("mark",{className:"highlight",children:G},R):G)},C=_=>{const E=_.symbol||_.identifier||_.tradingSymbol||"";if(/CE|PE/.test(E)){let O=E.match(/^([A-Z]+)(\d{2})([A-Z]{3})(\d{2})(\d+)(CE|PE)$/);if(O||(O=E.match(/^([A-Z]+)\s+(\d{2})\s+([A-Z]{3})\s+(\d{2})\s+(\d+)\s+(CE|PE)$/)),!O&&_.display)return{displayName:_.display,underlying:_.underlying||E.split(/\d/)[0],typeLabel:/CE/.test(E)?"Options CALL":"Options PUT",isOption:!0};if(O){const[,B,G,R,K,Y,P]=O,M=`20${K}`;return{displayName:`${B} ${G} ${R} ${M} ${P} ${Y}`,underlying:B,typeLabel:P==="CE"?"Options CALL":"Options PUT",isOption:!0}}}return _.display?{displayName:_.display,underlying:null,typeLabel:null,isOption:!1}:{displayName:E,underlying:null,typeLabel:null,isOption:!1}};return r.jsxs("div",{className:"search-autocomplete",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{ref:b,type:"text",className:"search-input",placeholder:t,value:a,onChange:j,onKeyDown:N,onFocus:()=>a.length>=i&&f(!0),autoComplete:"off","aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":d,"aria-activedescendant":y>=0?`suggestion-${y}`:void 0}),p&&r.jsx("div",{className:"search-spinner"})]}),d&&r.jsx("div",{ref:v,id:"search-suggestions",className:"search-dropdown",role:"listbox",children:c.length===0?r.jsx("div",{className:"no-results",children:"No results found"}):c.map((_,E)=>{var B;const O=C(_);return r.jsxs("div",{id:`suggestion-${E}`,className:`suggestion-item ${y===E?"selected":""}`,role:"option","aria-selected":y===E,onClick:()=>k(_),onMouseEnter:()=>g(E),children:[r.jsxs("div",{className:"suggestion-main",children:[r.jsx("div",{className:"suggestion-symbol",children:S(O.displayName,a)}),O.isOption&&r.jsxs("div",{className:"suggestion-meta",children:[r.jsx("span",{className:"suggestion-underlying",children:O.underlying}),r.jsxs("span",{className:"suggestion-type-label",children:["(",O.typeLabel,")"]})]}),!O.isOption&&_.lastPrice>0&&r.jsxs("div",{className:`suggestion-price ${_.pChange>=0?"positive":"negative"}`,children:["",(B=_.lastPrice)==null?void 0:B.toFixed(2)]}),!O.isOption&&_.lastPrice===0&&r.jsx("div",{className:"suggestion-price",style:{opacity:.5,fontSize:"0.75rem"},children:"Price on selection"})]}),_.pChange!==0&&r.jsxs("div",{className:`suggestion-change ${_.pChange>=0?"positive":"negative"}`,children:[_.pChange>=0?"":""," ",Math.abs(_.pChange||0).toFixed(2),"%"]})]},`${_.symbol}-${E}`)})})]})}function vN({stocks:t,loading:e,onSelectStock:s,onOpenChart:i,searchQuery:n,setSearchQuery:l,watchlists:a,activeWatchlist:o,setActiveWatchlist:c,onCreateWatchlist:u,onDeleteWatchlist:d,onRemoveStock:f,onShowAddStock:p,hasMore:x,onLoadMore:y,onSearch:g}){const b=w.useRef(),v=w.useCallback(h=>{e||(b.current&&b.current.disconnect(),b.current=new IntersectionObserver(m=>{m[0].isIntersecting&&x&&y()}),h&&b.current.observe(h))},[e,x,y]);return r.jsxs("div",{className:"virtual-trading-container",children:[r.jsxs("div",{className:"market-header",children:[r.jsx(pN,{placeholder:"Search stocks (e.g. RELIANCE, NIFTY 25JAN...)",onSelect:s,fetchSuggestions:g,minChars:1,debounceMs:300,maxResults:8}),r.jsxs("div",{className:"watchlist-tabs",children:[a.map(h=>r.jsxs("div",{className:`watchlist-tab ${(o==null?void 0:o.id)===h.id?"active":""}`,onClick:()=>c(h),children:[r.jsx("span",{className:"watchlist-name",children:h.name}),(o==null?void 0:o.id)===h.id&&!h.is_default&&r.jsx("button",{className:"delete-watchlist-btn",onClick:m=>{m.stopPropagation(),d(h.id)},title:"Delete Watchlist",children:""})]},h.id)),a.length<15&&r.jsx("button",{className:"new-watchlist-btn",onClick:u,children:"+"})]}),o&&r.jsx("div",{className:"watchlist-actions",children:r.jsx("button",{className:"add-stock-btn",onClick:p,children:"+ Add Stock"})})]}),r.jsx("div",{className:"stocks-grid",children:e?r.jsx("div",{className:"loading-state",children:"Loading stocks..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No stocks found"}):t.map((h,m)=>{const j=m===t.length-1;return r.jsxs("div",{ref:j?v:null,className:"stock-card",onClick:()=>s(h),children:[r.jsxs("div",{className:"stock-card-header",children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:h.symbol}),r.jsxs("span",{className:`stock-price ${h.pChange>=0?"positive":"negative"}`,children:["",Math.abs(h.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:"stock-actions",children:[r.jsx("button",{className:"chart-btn",onClick:N=>{N.stopPropagation(),s(h),i()},children:""}),o&&!n.trim()&&r.jsx("button",{className:"remove-btn",onClick:N=>{N.stopPropagation(),f(h.symbol)},children:""})]})]}),r.jsx("div",{className:"stock-card-body",children:r.jsxs("div",{className:`change-pill ${h.pChange>=0?"positive":"negative"}`,children:[h.pChange>=0?"":""," ",Math.abs(h.pChange||0).toFixed(2),"%"]})})]},`${h.symbol}-${m}`)})})]})}function gN({portfolio:t,loading:e,onSelectHolding:s}){const i=t.reduce((a,o)=>a+o.quantity*(o.ltp||o.average_price),0),n=t.reduce((a,o)=>a+o.quantity*o.average_price,0),l=i-n;return r.jsxs("div",{className:"portfolio-container",children:[r.jsxs("div",{className:"portfolio-summary-card",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx("label",{children:"Current Value"}),r.jsxs("span",{className:"value",children:["",i.toLocaleString()]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx("label",{children:"Invested"}),r.jsxs("span",{className:"value",children:["",n.toLocaleString()]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx("label",{children:"Total P&L"}),r.jsxs("span",{className:`value ${l>=0?"positive":"negative"}`,children:[l>=0?"+":"","",Math.abs(l).toLocaleString()]})]})]}),r.jsx("div",{className:"portfolio-list",children:e?r.jsx("div",{className:"loading-state",children:"Loading portfolio..."}):t.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-icon",children:""}),r.jsx("h3",{children:"Your portfolio is empty"}),r.jsx("p",{children:"Start trading to build your portfolio"})]}):r.jsxs("table",{className:"portfolio-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{className:"text-right",children:"Qty"}),r.jsx("th",{className:"text-right",children:"Avg. Price"}),r.jsx("th",{className:"text-right",children:"LTP"}),r.jsx("th",{className:"text-right",children:"Cur. Value"}),r.jsx("th",{className:"text-right",children:"P&L"})]})}),r.jsx("tbody",{children:t.map((a,o)=>{var f;const c=a.quantity*(a.ltp||a.average_price),u=c-a.quantity*a.average_price,d=u/(a.quantity*a.average_price)*100;return r.jsxs("tr",{onClick:()=>s(a),className:"clickable-row",children:[r.jsx("td",{className:"font-medium",children:a.symbol}),r.jsx("td",{className:"text-right",children:a.quantity}),r.jsxs("td",{className:"text-right",children:["",a.average_price.toFixed(2)]}),r.jsxs("td",{className:"text-right",children:["",((f=a.ltp)==null?void 0:f.toFixed(2))||"-"]}),r.jsxs("td",{className:"text-right",children:["",c.toLocaleString()]}),r.jsxs("td",{className:`text-right ${u>=0?"positive":"negative"}`,children:[r.jsxs("div",{children:[u>=0?"+":"","",Math.abs(u).toLocaleString()]}),r.jsxs("div",{className:"sub-text",children:["(",d.toFixed(2),"%)"]})]})]},o)})})]})})]})}function xN({orders:t,loading:e}){return e?r.jsx("div",{className:"loading-state",children:"Loading orders..."}):t.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-icon",children:""}),r.jsx("h3",{children:"No orders yet"}),r.jsx("p",{children:"Your trade history will appear here"})]}):r.jsx("div",{className:"orders-container",children:r.jsxs("table",{className:"orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Time"}),r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Side"}),r.jsx("th",{className:"text-right",children:"Qty"}),r.jsx("th",{className:"text-right",children:"Price"}),r.jsx("th",{className:"text-right",children:"Status"})]})}),r.jsx("tbody",{children:t.map((s,i)=>{var n;return r.jsxs("tr",{children:[r.jsx("td",{children:new Date(s.created_at).toLocaleString("en-IN")}),r.jsx("td",{className:"font-medium",children:s.symbol}),r.jsx("td",{children:s.order_type||"MARKET"}),r.jsx("td",{children:r.jsx("span",{className:`badge ${s.side==="BUY"?"bg-green":"bg-red"}`,children:s.side})}),r.jsx("td",{className:"text-right",children:s.quantity}),r.jsxs("td",{className:"text-right",children:["",(n=s.price)==null?void 0:n.toFixed(2)]}),r.jsxs("td",{className:"text-right status-cell",children:[r.jsx("span",{className:"status-dot success"})," Executed"]})]},s.id||i)})})]})})}const de=window.location.origin,Eo=({initialTab:t="trade"})=>{const e=()=>{switch(t){case"trade":return"stocks";case"portfolio":return"portfolio";case"orders":return"orders";default:return"stocks"}},[s,i]=w.useState(e()),{showLoading:n,hideLoading:l}=Xm(),[a,o]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[p,x]=w.useState([]),[y,g]=w.useState(1e5),[b,v]=w.useState([]),[h,m]=w.useState({stocks:!1,portfolio:!1,trade:!1,wallet:!1,fyers:!1,watchlists:!1}),[j,N]=w.useState(""),[k,S]=w.useState(1),[C,_]=w.useState(!1),[E,O]=w.useState({message:"",type:"",show:!1}),[B,G]=w.useState("balance"),[R,K]=w.useState(null),[Y,P]=w.useState(!1),[M,F]=w.useState([]),[z,W]=w.useState(null),[Q,$e]=w.useState([]),[_e,as]=w.useState(!1),[it,Ms]=w.useState([]),[Cp,_p]=w.useState(!1),[xi,Hc]=w.useState(!1),{lastUpdate:Ep}=Ls("trading-stocks",()=>Lp(),1e4);gi(Ep),w.useEffect(()=>{Kc(),Cl(),Ip(),Ln()},[]);const Lp=async()=>{var ce;if(!z)return;const L=Q.map(ae=>ae.symbol)||[],D=d.map(ae=>ae.symbol)||[];if([...new Set([...L,...D])].length!==0)try{const ae=await ot(`${de}/watchlist/${z.id}/stocks?fast=true`);((ce=ae==null?void 0:ae.stocks)==null?void 0:ce.length)>0&&$e(ae.stocks)}catch(ae){console.error("Failed to refresh watchlist stocks",ae)}},me=(L,D="info")=>{O({message:L,type:D,show:!0}),setTimeout(()=>O({message:"",type:"",show:!1}),3e3)},Kc=async()=>{m(L=>({...L,portfolio:!0}));try{const L=await U(`${de}/portfolio/summary`);f(L.holdings||[]),g(L.wallet_balance||1e5)}catch(L){console.error("Failed to load portfolio",L);try{const D=await U(`${de}/portfolio`);f(D.holdings||[])}catch{me("Failed to load portfolio","error")}}finally{m(L=>({...L,portfolio:!1}))}},Mp=async()=>{m(L=>({...L,orders:!0}));try{const L=await U(`${de}/portfolio/orders?limit=20`);x(L.orders||[])}catch(L){console.error("Failed to load orders",L)}finally{m(L=>({...L,orders:!1}))}},Cl=async()=>{try{const L=await U(`${de}/fyers/status`);if(_p(L.connected),L.connected&&xi){m(A=>({...A,fyers:!0}));const D=await U(`${de}/fyers/holdings`);v(D.holdings||[]),m(A=>({...A,fyers:!1}))}}catch(L){console.error("Failed to fetch Fyers data",L),m(D=>({...D,fyers:!1}))}},Ln=async()=>{m(L=>({...L,watchlists:!0})),n("Loading watchlists...");try{const D=(await U(`${de}/watchlist`)).watchlists||[];F(D),D.length>0&&!z?(W(D[0]),yi(D[0].id)):D.length===0&&Pp()}catch(L){console.error("Failed to load watchlists",L),me("Failed to load watchlists","error")}finally{m(L=>({...L,watchlists:!1})),l()}},yi=async L=>{m(D=>({...D,stocks:!0}));try{const D=await U(`${de}/watchlist/${L}/stocks`);$e(D.stocks||[])}catch(D){console.error("Failed to load watchlist stocks",D),me("Failed to load stocks","error")}finally{m(D=>({...D,stocks:!1}))}},Pp=async()=>{try{await U(`${de}/watchlist/initialize`,{method:"POST"}),Ln()}catch(L){console.error("Failed to initialize watchlists",L)}},Tp=async()=>{if(M.length>=15){me("Maximum 15 watchlists allowed","error");return}const L=`Watchlist ${M.length+1}`;try{await U(`${de}/watchlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L,position:M.length})}),me(`Created ${L}`,"success"),Ln()}catch{me("Failed to create watchlist","error")}},$p=async L=>{const D=M.find(A=>A.id===L);if(D!=null&&D.is_default){me("Cannot delete the default watchlist","error");return}try{if(await U(`${de}/watchlist/${L}`,{method:"DELETE"}),me("Watchlist deleted","success"),(z==null?void 0:z.id)===L){const A=M.filter(ce=>ce.id!==L);A.length>0?(W(A[0]),yi(A[0].id)):W(null)}Ln()}catch{me("Failed to delete","error")}},Rp=async L=>{if(z)try{await U(`${de}/watchlist/${z.id}/stocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:L})}),me(`Added ${L}`,"success"),yi(z.id)}catch{me("Failed to add stock","error")}},zp=async L=>{if(z)try{await U(`${de}/watchlist/${z.id}/stocks/${L}`,{method:"DELETE"}),me(`Removed ${L}`,"success"),yi(z.id)}catch{me("Failed to remove stock","error")}},Ip=async()=>{try{const L=await U(`${de}/nse_data/all-stocks`);Ms(L.stocks||[])}catch(L){console.error("Failed to load stocks for search",L)}},Dp=async()=>{if(h.stocks||!C)return;const L=k+1,D=j.toUpperCase();m(A=>({...A,stocks:!0}));try{const A=await ot(`${de}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=${L}&limit=20`);if(A.results){const ce=A.results.map(ae=>({symbol:ae.identifier,lastPrice:ae.ltp,pChange:ae.pChange,isFno:!0,...ae}));u(ae=>[...ae,...ce]),S(L),_(ce.length===20&&A.total>L*20)}}catch(A){console.error("Load more failed",A)}finally{m(A=>({...A,stocks:!1}))}};w.useEffect(()=>{_e?j.trim()?Gc(j):u(it.slice(0,50)):j.trim()?Gc(j):u(Q)},[j,Q,it,_e]);const Gc=L=>{const D=L.toUpperCase(),A=it.filter(Ps=>Ps.symbol.includes(D)).slice(0,20),ae=setTimeout(async()=>{m(mt=>({...mt,stocks:!0})),S(1),_(!1);let Ps=[];if(/\d/.test(D)||/CE|PE|CALL|PUT/i.test(D)||/NIFTY|BANK/i.test(D))try{const mt=await ot(`${de}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=1&limit=20`);mt.results&&(_(mt.results.length===20&&mt.total>20),Ps=mt.results.map(Mn=>({symbol:Mn.identifier,lastPrice:Mn.ltp,pChange:Mn.pChange,isFno:!0,...Mn})))}catch(mt){console.error("F&O Search failed",mt)}const Re=Ps.length>0?[...Ps,...A]:A;u(Re),m(mt=>({...mt,stocks:!1}))},300);return()=>clearTimeout(ae)},Fp=async L=>{const D=L.toUpperCase();try{const A=await ot(`${de}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=1&limit=20`);if(A.results&&A.results.length>0){const ce=A.results.map(Re=>({symbol:Re.identifier,display:Re.display||Re.identifier,lastPrice:Re.ltp||0,pChange:Re.pChange||0,strike:Re.strike,expiry:Re.expiry,type:Re.type,isFno:!0,...Re})),ae=new Set;return ce.filter(Re=>ae.has(Re.symbol)?!1:(ae.add(Re.symbol),!0)).slice(0,8)}}catch(A){console.error("Autocomplete search failed",A)}return[]},Op=async(L,D)=>{if(R){if(!D.quantity||D.quantity<=0)return me("Enter valid quantity","error");if(!D.price||parseFloat(D.price)<=0)return me("Enter valid price","error");m(A=>({...A,trade:!0})),n(`Executing ${L} order...`);try{if(D.broker==="fyers"){const A={symbol:`NSE:${R.symbol}-EQ`,qty:parseInt(D.quantity),type:D.orderType==="market"?2:1,side:L==="BUY"?1:-1,productType:"CNC",limitPrice:D.orderType==="limit"?parseFloat(D.price):0,stopPrice:0,validity:"DAY",offlineOrder:!1};R.isFno&&(A.symbol=R.symbol||R.identifier,A.productType="MARGIN");const ce=await U(`${de}/fyers/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});ce&&ce.s==="ok"?me(`Live ${L} Order Placed: ${ce.id}`,"success"):me(`Fyers Error: ${(ce==null?void 0:ce.message)||"Order failed"}`,"error")}else{const A={symbol:R.symbol,quantity:parseInt(D.quantity),price:parseFloat(D.price),side:L,order_type:D.orderType.toUpperCase(),limit_price:D.orderType==="limit"?parseFloat(D.price):null},ce=await U(`${de}/portfolio/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});f(ce.holdings||[]),ce.wallet_balance!==void 0&&g(ce.wallet_balance),me(`${L} ${D.quantity} ${R.symbol} Success`,"success")}setTimeout(()=>K(null),500)}catch(A){me(A.message||"Trade failed","error")}finally{m(A=>({...A,trade:!1})),l()}}};return r.jsxs("div",{className:"virtual-trading",children:[E.show&&r.jsx("div",{className:`virtual-toast ${E.type}`,children:E.message}),r.jsx("div",{className:"section-tabs",style:{marginBottom:"1rem",display:"flex",gap:"8px",borderBottom:"1px solid #444c56",paddingBottom:"8px",overflowX:"auto"},children:["stocks","portfolio","orders","fno","wallet"].map(L=>r.jsx("button",{className:`virtual-tab ${s===L?"active":""}`,onClick:()=>i(L),children:L==="stocks"?"Trade":L==="fno"?"Option Chain":L.charAt(0).toUpperCase()+L.slice(1)},L))}),s==="stocks"&&r.jsxs("div",{className:"virtual-stocks-container",children:[r.jsx(Ry,{}),r.jsx(vN,{stocks:c,loading:h.stocks&&c.length===0,searchQuery:j,setSearchQuery:N,watchlists:M,activeWatchlist:z,setActiveWatchlist:L=>{W(L),yi(L.id)},onCreateWatchlist:Tp,onDeleteWatchlist:$p,onRemoveStock:zp,onShowAddStock:()=>{N(""),as(!0)},onSelectStock:K,onOpenChart:()=>P(!0),onSearch:Fp,hasMore:!1})]}),s==="portfolio"&&r.jsxs("div",{className:"portfolio-section",children:[r.jsxs("div",{className:"portfolio-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Portfolio"}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[r.jsx("button",{className:`virtual-tab mini ${xi?"":"active"}`,onClick:()=>Hc(!1),children:"Virtual"}),Cp&&r.jsx("button",{className:`virtual-tab mini ${xi?"active":""}`,onClick:()=>{Hc(!0),Cl()},children:"Fyers Real"})]})]}),r.jsx("button",{className:"ghost-btn",onClick:()=>xi?Cl():Kc(),children:"Refresh"})]}),r.jsx(gN,{portfolio:xi?b.map(L=>({symbol:L.symbol,quantity:L.quantity,average_price:L.costPrice,ltp:L.lp})):d,loading:h.portfolio||h.fyers,onSelectHolding:L=>{const D={symbol:L.symbol,lastPrice:L.ltp||L.average_price,pChange:0,quantity:L.quantity};K(D)}})]}),s==="orders"&&r.jsxs("div",{className:"portfolio-section",children:[r.jsxs("div",{className:"portfolio-header",children:[r.jsx("h2",{children:"Order History"}),r.jsx("button",{className:"ghost-btn",onClick:Mp,children:"Refresh"})]}),r.jsx(xN,{orders:p,loading:h.orders})]}),s==="fno"&&r.jsx(zy,{symbol:"NIFTY",onClose:()=>i("stocks"),onSelectToken:L=>{const D={symbol:L.identifier||`${L.symbol} ${L.expiry} ${L.strike} ${L.type}`,lastPrice:L.ltp,pChange:L.pChange,isFno:!0};L.symbol,K(D)}}),s==="wallet"&&r.jsxs("div",{className:"wallet-container",style:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsx("div",{className:"wallet-nav",style:{display:"flex",gap:"1rem",padding:"0.5rem 0",marginBottom:"1rem"},children:["balance","funds","transactions"].map(L=>r.jsx("button",{className:`secondary-btn ${B===L?"active-sub":""}`,style:{borderColor:B===L?"#00d09c":"#444c56"},onClick:()=>G(L),children:L.charAt(0).toUpperCase()+L.slice(1)},L))}),r.jsx(Iy,{subSection:B,onNavigate:L=>{L&&L.includes("funds")?G("funds"):L&&L.includes("transactions")?G("transactions"):G("balance")}})]}),r.jsx(mN,{isOpen:!!R&&!_e&&!Y,onClose:()=>K(null),stock:R,walletBalance:y,onTrade:Op,isSubmitting:h.trade}),Y&&R&&r.jsx(fN,{isOpen:Y,onClose:()=>P(!1),stock:R,API_BASE_URL:de}),_e&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>as(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:L=>L.stopPropagation(),style:{maxWidth:"800px",width:"90%",height:"80vh",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsxs("h3",{children:["Add Stock to ",z==null?void 0:z.name]}),r.jsx("button",{className:"icon-button",onClick:()=>as(!1),children:""})]}),r.jsxs("div",{className:"stock-trade-content",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1},children:[r.jsx("div",{className:"search-row",children:r.jsx("input",{type:"text",placeholder:"Search NSE stocks...",value:j,onChange:L=>N(L.target.value),className:"search-input",autoFocus:!0})}),r.jsxs("div",{className:"add-stock-list",style:{overflowY:"auto",flex:1,paddingRight:"4px"},children:[c.length===0?r.jsx("div",{className:"loading",children:"No stocks found"}):c.map(L=>{const D=Q.some(A=>A.symbol===L.symbol);return r.jsxs("div",{className:`add-stock-item ${D?"disabled":""}`,onClick:()=>!D&&Rp(L.symbol),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:L.display||L.symbol}),r.jsxs("span",{className:"stock-price",children:["",Number(L.lastPrice||0).toFixed(2)]})]}),D?r.jsx("span",{className:"added-badge",children:" Added"}):r.jsx("button",{className:"add-btn-small",children:"+ Add"})]},L.symbol)}),C&&r.jsx("button",{className:"load-more-btn",onClick:Dp,children:h.stocks?"Loading":"Load More"})]})]})]})})]})},ba=window.location.origin,yN=({initialTab:t="trade"})=>{const[e,s]=w.useState({connected:!1,loading:!0,error:null}),[i,n]=w.useState(!1);w.useEffect(()=>{l()},[]);const l=async()=>{try{const c=await U(`${ba}/fyers/status`);s({connected:c.connected,loading:!1,error:null,connectedAt:c.connected_at,expiresAt:c.expires_at})}catch(c){console.error("Failed to check Fyers status:",c),s({connected:!1,loading:!1,error:c.message||"Failed to check Fyers status"})}},a=async()=>{n(!0);try{const c=await U(`${ba}/fyers/auth-url`);c.url?window.location.href=c.url:alert("Failed to get Fyers auth URL")}catch(c){console.error("Failed to get Fyers auth URL:",c),alert("Error: "+(c.message||"Failed to connect to Fyers"))}finally{n(!1)}},o=async()=>{if(confirm("Are you sure you want to disconnect Fyers?"))try{await U(`${ba}/fyers/disconnect`,{method:"DELETE"}),s({connected:!1,loading:!1,error:null})}catch(c){console.error("Failed to disconnect Fyers:",c),alert("Error: "+(c.message||"Failed to disconnect Fyers"))}};return e.loading?r.jsx("div",{className:"real-trading-container",children:r.jsxs("div",{className:"real-trading-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Checking broker connection..."})]})}):e.connected?r.jsxs("div",{className:"real-trading-container",children:[r.jsxs("div",{className:"broker-status-banner connected",children:[r.jsxs("div",{className:"broker-status-info",children:[r.jsx("span",{className:"status-icon",children:""}),r.jsxs("span",{className:"status-text",children:[r.jsx("strong",{children:"Fyers Connected"}),r.jsx("span",{className:"status-detail",children:"Live trading enabled"})]})]}),r.jsx("button",{className:"disconnect-btn",onClick:o,children:"Disconnect"})]}),r.jsx(Eo,{initialTab:t})]}):r.jsx("div",{className:"real-trading-container",children:r.jsxs("div",{className:"real-trading-connect-prompt",children:[r.jsx("div",{className:"connect-icon",children:""}),r.jsx("h2",{children:"Connect Your Broker"}),r.jsx("p",{className:"connect-description",children:"Connect your Fyers account to start real trading. Your credentials are securely handled through Fyers' official OAuth flow."}),r.jsxs("div",{className:"broker-options",children:[r.jsxs("div",{className:"broker-card fyers",children:[r.jsxs("div",{className:"broker-header",children:[r.jsx("span",{className:"broker-logo",children:""}),r.jsx("span",{className:"broker-name",children:"Fyers"})]}),r.jsx("p",{className:"broker-desc",children:"India's trusted stockbroker with low brokerage and advanced trading platform"}),r.jsx("button",{className:"connect-btn primary",onClick:a,disabled:i,children:i?"Connecting...":"Connect Fyers"})]}),r.jsxs("div",{className:"broker-card coming-soon",children:[r.jsxs("div",{className:"broker-header",children:[r.jsx("span",{className:"broker-logo",children:""}),r.jsx("span",{className:"broker-name",children:"More Brokers"})]}),r.jsx("p",{className:"broker-desc",children:"Support for Zerodha, Angel One, and more coming soon"}),r.jsx("button",{className:"connect-btn disabled",disabled:!0,children:"Coming Soon"})]})]}),e.error&&r.jsxs("div",{className:"error-message",children:[r.jsx("span",{className:"error-icon",children:""}),e.error]})]})})},wN=window.location.origin;function jN({subSection:t}){var y,g,b,v,h,m,j,N,k;const[e,s]=w.useState([]),[i,n]=w.useState(null),[l,a]=w.useState(null),[o,c]=w.useState(!0);w.useEffect(()=>{u()},[t]);const u=async()=>{c(!0);try{let S="";switch(t){case"gainers":S="/nse_data/top-gainers";break;case"losers":S="/nse_data/top-losers";break;case"bulk":S="/nse_data/bulk-deals";break;case"weekly":S="/nse_data/weekly-gainers?days=5";break;case"fii-dii":S="/nse_data/fii-dii-activity";break;default:S="/nse_data/top-gainers"}const C=await U(`${wN}${S}`);t==="weekly"?n(C):t==="bulk"?s(C.bulk_deals||[]):t==="fii-dii"?a(C):s(C.top_gainers||C.top_losers||[])}catch(S){console.error("Failed to load market data:",S)}finally{c(!1)}},d=S=>{if(!S&&S!==0)return"N/A";const C=Number(S);return isNaN(C)?"N/A":`${(C/100).toFixed(0)} Cr`},f=()=>{switch(t){case"gainers":return"Top Gainers";case"losers":return"Top Losers";case"bulk":return"Bulk Deals";case"weekly":return"Weekly Movers";case"fii-dii":return"FII/DII Activity";default:return"Market Data"}},p=()=>{switch(t){case"gainers":return"";case"losers":return"";case"bulk":return"";case"weekly":return"";case"fii-dii":return"";default:return""}};if(t==="fii-dii")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:p()}),r.jsx("h2",{children:f()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading FII/DII data..."}):l?r.jsxs("div",{className:"fii-dii-container",children:[l.date&&r.jsxs("div",{className:"fii-dii-date-header",children:["Data as of: ",r.jsx("strong",{children:l.date})]}),r.jsxs("div",{className:"fii-dii-row",children:[r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"FII (Foreign Institutional Investors)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy Value"}),r.jsx("span",{className:"value positive",children:d((y=l.fii)==null?void 0:y.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell Value"}),r.jsx("span",{className:"value negative",children:d((g=l.fii)==null?void 0:g.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((b=l.fii)==null?void 0:b.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net Value"}),r.jsx("span",{className:"value",children:d((v=l.fii)==null?void 0:v.netValue)})]})]})]}),r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"DII (Domestic Institutional Investors)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy Value"}),r.jsx("span",{className:"value positive",children:d((h=l.dii)==null?void 0:h.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell Value"}),r.jsx("span",{className:"value negative",children:d((m=l.dii)==null?void 0:m.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((j=l.dii)==null?void 0:j.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net Value"}),r.jsx("span",{className:"value",children:d((N=l.dii)==null?void 0:N.netValue)})]})]})]})]})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No FII/DII Data"}),r.jsx("div",{className:"empty-state-text",children:"FII/DII activity data is not available at this time."})]})]});if(t==="weekly")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:p()}),r.jsx("h2",{children:f()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading weekly data..."}):(k=i==null?void 0:i.weeklyData)!=null&&k.length?r.jsx("div",{className:"weekly-container",children:i.weeklyData.map(S=>r.jsxs("div",{className:"weekly-column",children:[r.jsxs("div",{className:"weekly-header",children:[r.jsx("div",{children:S.dayName}),r.jsx("span",{className:"muted",children:S.date})]}),r.jsxs("div",{className:"weekly-block",children:[r.jsx("div",{className:"section-label positive",children:"Top Gainers"}),(S.gainers||[]).slice(0,5).map(C=>{var _;return r.jsxs("div",{className:"mini-row",children:[r.jsx("span",{children:C.symbol}),r.jsxs("span",{className:"text-right positive",children:[(_=C.pChange)==null?void 0:_.toFixed(2),"%"]})]},`g-${C.symbol}`)}),r.jsx("div",{className:"section-label negative",children:"Top Losers"}),(S.losers||[]).slice(0,5).map(C=>{var _;return r.jsxs("div",{className:"mini-row",children:[r.jsx("span",{children:C.symbol}),r.jsxs("span",{className:"text-right negative",children:[(_=C.pChange)==null?void 0:_.toFixed(2),"%"]})]},`l-${C.symbol}`)})]})]},S.dayName+S.date))}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Weekly Data"}),r.jsx("div",{className:"empty-state-text",children:"Weekly movers data is not available."})]})]});if(t==="bulk")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:p()}),r.jsx("h2",{children:f()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading bulk deals..."}):e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Bulk Deals"}),r.jsx("div",{className:"empty-state-text",children:"Bulk deals data is not available."})]}):r.jsx("div",{className:"orders-table-container",children:r.jsxs("table",{className:"orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Client"}),r.jsx("th",{className:"text-right",children:"Quantity"}),r.jsx("th",{className:"text-right",children:"Price"})]})}),r.jsx("tbody",{children:e.map((S,C)=>r.jsxs("tr",{children:[r.jsx("td",{className:"order-symbol",children:S.symbol||S.BD_SYMBOL||"N/A"}),r.jsx("td",{children:S.clientName||S.client_name||S.BD_CLIENT_NAME||"N/A"}),r.jsx("td",{className:"text-right",children:(S.quantity||S.quantityTraded||S.BD_QTY_TRD||0).toLocaleString()}),r.jsxs("td",{className:"text-right",children:["",Number(S.tradePrice||S.price||S.BD_TP_WATP||0).toFixed(2)]})]},`${S.symbol}-${C}`))})]})})]});const x=t==="gainers";return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:p()}),r.jsx("h2",{children:f()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading market data..."}):e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:p()}),r.jsx("div",{className:"empty-state-title",children:"No Data Available"}),r.jsx("div",{className:"empty-state-text",children:"Market data is not available at this time."})]}):r.jsx("div",{className:"market-grid",children:e.map((S,C)=>r.jsxs("div",{className:"market-card-item",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("span",{className:"market-symbol",children:S.symbol}),r.jsxs("span",{className:`market-change-badge ${x?"positive":"negative"}`,children:[x?"+":"",Number(S.pChange||0).toFixed(2),"%"]})]}),r.jsxs("div",{className:"market-card-body",children:[r.jsxs("div",{className:"market-price-main",children:["",Number(S.lastPrice||0).toLocaleString()]}),r.jsxs("div",{className:"market-stats",children:[r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Open"}),r.jsxs("span",{children:["",Number(S.open||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"High"}),r.jsxs("span",{children:["",Number(S.dayHigh||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Low"}),r.jsxs("span",{children:["",Number(S.dayLow||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Prev Close"}),r.jsxs("span",{children:["",Number(S.previousClose||0).toLocaleString()]})]})]})]})]},S.symbol||C))})]})}const Lo={HDFCBANK:12.96,RELIANCE:9.87,ICICIBANK:7.68,INFY:6.12,ITC:4.48,TCS:4.02,LT:3.89,BHARTIARTL:3.71,AXISBANK:3.01,SBIN:2.91,KOTAKBANK:2.62,BAJFINANCE:2.29,HINDUNILVR:2.25,MARUTI:1.68,ASIANPAINT:1.63,SUNPHARMA:1.6,TITAN:1.59,HCLTECH:1.54,NTPC:1.49,BAJAJFINSV:1.48,POWERGRID:1.44,"M&M":1.43,TATAMOTORS:1.38,ULTRACEMCO:1.36,ONGC:1.28,TECHM:1.15,NESTLEIND:1.14,TATASTEEL:1.09,WIPRO:1.05,ADANIENT:1.02,JSWSTEEL:.98,COALINDIA:.95,INDUSINDBK:.94,ADANIPORTS:.92,GRASIM:.88,HINDALCO:.85,BPCL:.82,DRREDDY:.78,BRITANNIA:.75,DIVISLAB:.72,CIPLA:.68,APOLLOHOSP:.65,HEROMOTOCO:.62,EICHERMOT:.58,TATACONSUM:.55,SBILIFE:.52,HDFCLIFE:.48,"BAJAJ-AUTO":.45,UPL:.42,LTIM:.38},kp=24500;function NN(t,e,s,i=kp){const n=Lo[t]||0;if(!n||!s||s===0)return 0;const l=e/s*n*(i/100);return Math.round(l*100)/100}const ad={LONG_BUILDUP:{signal:"LONG_BUILDUP",label:"Long Buildup",emoji:"",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",description:"Fresh Buying - Trust this move"},SHORT_COVERING:{signal:"SHORT_COVERING",label:"Short Covering",emoji:"",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.15)",description:"Sellers Exiting - Weak move, be careful"},SHORT_BUILDUP:{signal:"SHORT_BUILDUP",label:"Short Buildup",emoji:"",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",description:"Fresh Selling - Trust the fall"},LONG_UNWINDING:{signal:"LONG_UNWINDING",label:"Long Unwinding",emoji:"",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",description:"Profit Booking - Just a dip"}};function bN(t,e){const s=t>0,i=e>0;return s&&i?"LONG_BUILDUP":s&&!i?"SHORT_COVERING":!s&&i?"SHORT_BUILDUP":"LONG_UNWINDING"}function SN(t,e=kp){if(!t||!Array.isArray(t))return{movers:[],draggers:[],totalPositive:0,totalNegative:0};const i=[...t.filter(c=>Lo[c.symbol]).map(c=>{const u=(c.lastPrice||c.ltp||0)-(c.previousClose||c.prevClose||0),d=NN(c.symbol,u,c.previousClose||c.prevClose||0,e),f=c.oiChange||0,p=c.oiChangePct||0;return{symbol:c.symbol,ltp:c.lastPrice||c.ltp||0,prevClose:c.previousClose||c.prevClose||0,priceChange:u,priceChangePct:c.pChange||u/(c.previousClose||1)*100,weight:Lo[c.symbol]||0,contributionPoints:d,oiChange:f,oiChangePct:p,oiSignal:bN(u,f),dayHigh:c.dayHigh||0,dayLow:c.dayLow||0}})].sort((c,u)=>Math.abs(u.contributionPoints)-Math.abs(c.contributionPoints)),n=i.filter(c=>c.contributionPoints>0),l=i.filter(c=>c.contributionPoints<0),a=n.reduce((c,u)=>c+u.contributionPoints,0),o=l.reduce((c,u)=>c+u.contributionPoints,0);return{movers:n.slice(0,10),draggers:l.slice(0,10),totalPositive:Math.round(a*100)/100,totalNegative:Math.round(o*100)/100,netContribution:Math.round((a+o)*100)/100}}function kN(t){if(!t||t.length===0)return{strength:"neutral",message:"No data available",color:"text-gray-400 bg-gray-500/20",longBuildupCount:0,shortCoveringCount:0};const e=t.slice(0,3),s=e.filter(o=>o.oiSignal==="LONG_BUILDUP").length,i=e.filter(o=>o.oiSignal==="SHORT_COVERING").length;let n,l,a;return s>=2?(n="strong",l="Strong Trend - Fresh buying in top movers",a="strength-strong"):i>=2?(n="weak",l="Weak Rally - Mostly short covering",a="strength-weak"):(n="neutral",l="Mixed Signals - Watch carefully",a="strength-neutral"),{strength:n,message:l,color:a,longBuildupCount:s,shortCoveringCount:i}}function od({stock:t,rank:e,type:s}){const i=ad[t.oiSignal]||ad.LONG_BUILDUP,n=s==="mover";return r.jsxs("div",{className:`contributor-card ${n?"contributor-mover":"contributor-dragger"}`,children:[r.jsxs("div",{className:"contributor-left",children:[r.jsx("span",{className:`contributor-rank ${n?"rank-positive":"rank-negative"}`,children:e}),r.jsxs("div",{className:"contributor-info",children:[r.jsx("div",{className:"contributor-symbol",children:t.symbol}),r.jsxs("div",{className:"contributor-price",children:["",Number(t.ltp).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"oi-signal-badge",style:{backgroundColor:i.bgColor,color:i.color,borderColor:i.color+"40"},title:i.description,children:[r.jsx("span",{className:"oi-signal-emoji",children:i.emoji}),r.jsx("span",{className:"oi-signal-label",children:i.label}),t.oiChangePct!==0&&r.jsxs("span",{className:"oi-signal-pct",children:["(",t.oiChangePct>0?"+":"",t.oiChangePct.toFixed(1),"%)"]})]}),r.jsxs("div",{className:"contributor-right",children:[r.jsxs("div",{className:`contribution-points ${n?"points-positive":"points-negative"}`,children:[t.contributionPoints>0?"+":"",t.contributionPoints.toFixed(1)," pts"]}),r.jsxs("div",{className:"contribution-pct",children:[t.priceChangePct>0?"+":"",Number(t.priceChangePct).toFixed(2),"%"]})]})]})}function CN({movers:t}){const e=kN(t),s=()=>{switch(e.strength){case"strong":return"";case"weak":return"";default:return""}};return r.jsxs("div",{className:`market-strength-indicator ${e.color}`,children:[r.jsxs("div",{className:"strength-message",children:[r.jsx("span",{className:"strength-icon",children:s()}),r.jsx("span",{className:"strength-text",children:e.message})]}),r.jsxs("div",{className:"strength-details",children:["Top 3: ",e.longBuildupCount," Long Buildup, ",e.shortCoveringCount," Short Covering"]})]})}const Sa=window.location.origin;function _N(){const[t,e]=w.useState([]),[s,i]=w.useState(24500),[n,l]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=Ls("nifty-contributors",()=>p(),5e3),d=gi(u);w.useEffect(()=>{f()},[]);const f=async()=>{l(!0),o(null);try{const[y,g]=await Promise.all([U(`${Sa}/nse_data/nifty-contributors`),U(`${Sa}/nse_data/indices`).catch(()=>null)]);if(y!=null&&y.stocks&&e(y.stocks),g!=null&&g.indices){const b=g.indices.find(v=>v.index==="NIFTY 50"||v.indexSymbol==="NIFTY 50");(b!=null&&b.last||b!=null&&b.lastPrice)&&i(b.last||b.lastPrice)}}catch(y){console.error("Failed to load Nifty contributors:",y),o(y.message||"Failed to load data")}finally{l(!1),c.current=!1}},p=async()=>{const y=await ot(`${Sa}/nse_data/nifty-contributors`);y!=null&&y.stocks&&e(y.stocks)},x=w.useMemo(()=>SN(t,s),[t,s]);return n&&c.current?r.jsxs("div",{className:"nifty-contributors-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading Nifty contributors..."})]}):a&&t.length===0?r.jsxs("div",{className:"nifty-contributors-error",children:[r.jsx("div",{className:"error-icon",children:""}),r.jsx("p",{children:a}),r.jsx("button",{onClick:f,className:"retry-btn",children:"Retry"})]}):r.jsxs("div",{className:"nifty-contributors",children:[r.jsxs("div",{className:"contributors-header",children:[r.jsxs("div",{className:"contributors-title-section",children:[r.jsxs("h2",{className:"contributors-title",children:[r.jsx("span",{className:"contributors-icon",children:""}),"Nifty Index Contributors"]}),r.jsx("p",{className:"contributors-subtitle",children:"Who's lifting vs dragging the index - Sorted by Points, not %"})]}),r.jsxs("div",{className:"contributors-header-right",children:[r.jsx(CN,{movers:x.movers}),r.jsx("button",{onClick:f,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]})]}),r.jsxs("div",{className:"contribution-summary",children:[r.jsxs("div",{className:"summary-item summary-positive",children:[r.jsx("span",{className:"summary-label",children:"Total Positive"}),r.jsxs("span",{className:"summary-value",children:["+",x.totalPositive.toFixed(1)," pts"]})]}),r.jsxs("div",{className:"summary-item summary-net",children:[r.jsx("span",{className:"summary-label",children:"Net Contribution"}),r.jsxs("span",{className:`summary-value ${x.netContribution>=0?"positive":"negative"}`,children:[x.netContribution>=0?"+":"",x.netContribution.toFixed(1)," pts"]})]}),r.jsxs("div",{className:"summary-item summary-negative",children:[r.jsx("span",{className:"summary-label",children:"Total Negative"}),r.jsxs("span",{className:"summary-value",children:[x.totalNegative.toFixed(1)," pts"]})]})]}),r.jsxs("div",{className:"contributors-grid",children:[r.jsxs("div",{className:"contributors-column movers-column",children:[r.jsxs("div",{className:"column-header",children:[r.jsxs("h3",{className:"column-title movers-title",children:[r.jsx("span",{children:""})," Index Movers"]}),r.jsxs("span",{className:"column-total positive",children:["+",x.totalPositive.toFixed(1)," pts"]})]}),r.jsx("div",{className:"contributors-list",children:x.movers.length===0?r.jsx("div",{className:"empty-contributors",children:r.jsx("p",{children:"No positive contributors"})}):x.movers.map((y,g)=>r.jsx(od,{stock:y,rank:g+1,type:"mover"},y.symbol))})]}),r.jsxs("div",{className:"contributors-column draggers-column",children:[r.jsxs("div",{className:"column-header",children:[r.jsxs("h3",{className:"column-title draggers-title",children:[r.jsx("span",{children:""})," Index Draggers"]}),r.jsxs("span",{className:"column-total negative",children:[x.totalNegative.toFixed(1)," pts"]})]}),r.jsx("div",{className:"contributors-list",children:x.draggers.length===0?r.jsx("div",{className:"empty-contributors",children:r.jsx("p",{children:"No negative contributors"})}):x.draggers.map((y,g)=>r.jsx(od,{stock:y,rank:g+1,type:"dragger"},y.symbol))})]})]}),r.jsxs("div",{className:"oi-legend",children:[r.jsx("div",{className:"legend-title",children:"OI Signal Guide:"}),r.jsxs("div",{className:"legend-items",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Long Buildup"}),r.jsx("span",{className:"legend-desc",children:"Fresh buying - trust the move"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Short Covering"}),r.jsx("span",{className:"legend-desc",children:"Weak move - be careful"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Short Buildup"}),r.jsx("span",{className:"legend-desc",children:"Fresh selling - trust the fall"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Long Unwinding"}),r.jsx("span",{className:"legend-desc",children:"Profit booking - just a dip"})]})]})]}),u&&r.jsx("div",{className:"contributors-footer",children:r.jsxs("span",{className:"last-update",children:["Last updated: ",d]})})]})}const ka=window.location.origin,EN=({data:t})=>{const e=[...t].slice(0,15).reverse();if(!e.length)return null;const s=e.flatMap(f=>[f.fii_net_value,f.dii_net_value].filter(p=>p!==null)),n=(Math.max(...s.map(f=>Math.abs(f)))||1e3)*1.1,l=220,a={top:20,bottom:30},o=l-a.top-a.bottom,c=a.top+o/2,u=f=>{const p=f/n*(o/2);return c-p},d=f=>Math.abs(f/100).toFixed(0)+"Cr";return r.jsxs("div",{className:"fii-dii-chart-container",children:[r.jsx("h3",{className:"history-title",children:"Institutional Flow Trend (Last 15 Days)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-color fii"})," FII"]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-color dii"})," DII"]})]}),r.jsx("div",{className:"fii-dii-chart-scroll",children:r.jsxs("svg",{viewBox:`0 0 ${e.length*60} ${l}`,preserveAspectRatio:"xMidYMid meet",className:"fii-dii-svg-content",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"gradGreen",x1:"0",x2:"0",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"var(--accent-green)",stopOpacity:"0.8"}),r.jsx("stop",{offset:"100%",stopColor:"var(--accent-green)",stopOpacity:"0.4"})]}),r.jsxs("linearGradient",{id:"gradRed",x1:"0",x2:"0",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"var(--accent-red)",stopOpacity:"0.8"}),r.jsx("stop",{offset:"100%",stopColor:"var(--accent-red)",stopOpacity:"0.4"})]})]}),r.jsx("line",{x1:"0",y1:c,x2:"100%",y2:c,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),r.jsxs("text",{x:"5",y:a.top+10,fontSize:"10",fill:"var(--text-secondary)",children:["+",d(n)]}),r.jsxs("text",{x:"5",y:l-a.bottom-5,fontSize:"10",fill:"var(--text-secondary)",children:["-",d(n)]}),e.map((f,p)=>{const y=p*60+30,g=12,b=4,v=f.fii_net_value||0,h=f.dii_net_value||0,m=u(v),j=u(h),N=Math.abs(m-c),k=Math.abs(j-c),S=v>=0?m:c,C=h>=0?j:c,_=new Date(f.trade_date),E=`${_.getDate()} ${_.toLocaleString("default",{month:"short"}).slice(0,3)}`;return r.jsxs("g",{children:[r.jsx("text",{x:y,y:l-5,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",children:E}),r.jsx("title",{children:`${E}
FII: ${d(v*100)}
DII: ${d(h*100)}`}),r.jsx("rect",{x:y-g-b/2,y:S,width:g,height:N||1,fill:v>=0?"url(#gradGreen)":"url(#gradRed)",rx:"2"}),r.jsx("rect",{x:y+b/2,y:C,width:g,height:k||1,fill:h>=0?"var(--accent-green)":"var(--accent-red)",opacity:"0.5",rx:"2",stroke:h>=0?"var(--accent-green)":"var(--accent-red)",strokeWidth:"0.5"})]},p)})]})})]})};function LN(){const[t,e]=w.useState(null),[s,i]=w.useState([]),[n,l]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=Ls("fii-dii",()=>p(),6e4),d=gi(u);w.useEffect(()=>{f()},[]);const f=async()=>{l(!0),o(null);try{const[N,k]=await Promise.all([U(`${ka}/nse_data/fii-dii-activity`),U(`${ka}/nse_data/fii-dii-history?limit=30`)]);e(N),i((k==null?void 0:k.records)||[])}catch(N){console.error("Failed to load FII/DII data:",N),o(N.message||"Failed to load data")}finally{l(!1),c.current=!1}},p=async()=>{const N=await ot(`${ka}/nse_data/fii-dii-activity`);N&&e(N)},x=N=>{if(N==null)return"";const k=N/100;return`${Math.abs(k).toFixed(2)} Cr`},y=N=>{if(N==null)return"";const k=N/100;return`${k>=0?"+":""}${k.toFixed(2)} Cr`},g=N=>N==null?"neutral":N>=0?"bullish":"bearish",v=(()=>{if(!s.length)return{fiiTotal:0,diiTotal:0,days:0};let N=0,k=0,S=0;return s.forEach(C=>{C.fii_net_value!==null&&(N+=C.fii_net_value,S++),C.dii_net_value!==null&&(k+=C.dii_net_value)}),{fiiTotal:N,diiTotal:k,days:S}})();if(n&&c.current)return r.jsxs("div",{className:"fii-dii-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading FII/DII activity..."})]});if(a&&!t)return r.jsxs("div",{className:"fii-dii-error",children:[r.jsx("div",{className:"error-icon",children:""}),r.jsx("p",{children:a}),r.jsx("button",{onClick:f,className:"retry-btn",children:"Retry"})]});const h=t==null?void 0:t.fii,m=t==null?void 0:t.dii,j=t==null?void 0:t.date;return r.jsxs("div",{className:"fii-dii-activity",children:[r.jsxs("div",{className:"fii-dii-header",children:[r.jsxs("div",{className:"fii-dii-title-section",children:[r.jsxs("h2",{className:"fii-dii-title",children:[r.jsx("span",{className:"fii-dii-icon",children:""}),"FII / DII Activity"]}),r.jsxs("p",{className:"fii-dii-subtitle",children:["Foreign & Domestic Institutional Investor flows",j&&r.jsxs("span",{className:"trade-date",children:["  ",j]})]})]}),r.jsx("button",{onClick:f,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]}),r.jsxs("div",{className:"fii-dii-cards",children:[r.jsxs("div",{className:`institutional-card fii-card ${g(h==null?void 0:h.netValue)}`,children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"FII (Foreign)"})]}),r.jsx("div",{className:`net-badge ${g(h==null?void 0:h.netValue)}`,children:(h==null?void 0:h.netValue)>=0?"Net Buyer":"Net Seller"})]}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(h==null?void 0:h.netValue)}`,children:y(h==null?void 0:h.netValue)})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Buy Value"}),r.jsx("span",{className:"detail-value buy",children:x(h==null?void 0:h.buyValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Sell Value"}),r.jsx("span",{className:"detail-value sell",children:x(h==null?void 0:h.sellValue)})]})]})]}),r.jsxs("div",{className:`institutional-card dii-card ${g(m==null?void 0:m.netValue)}`,children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"DII (Domestic)"})]}),r.jsx("div",{className:`net-badge ${g(m==null?void 0:m.netValue)}`,children:(m==null?void 0:m.netValue)>=0?"Net Buyer":"Net Seller"})]}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(m==null?void 0:m.netValue)}`,children:y(m==null?void 0:m.netValue)})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Buy Value"}),r.jsx("span",{className:"detail-value buy",children:x(m==null?void 0:m.buyValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Sell Value"}),r.jsx("span",{className:"detail-value sell",children:x(m==null?void 0:m.sellValue)})]})]})]}),r.jsxs("div",{className:`institutional-card combined-card ${g(((h==null?void 0:h.netValue)||0)+((m==null?void 0:m.netValue)||0))}`,children:[r.jsx("div",{className:"card-header",children:r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"Combined Flow"})]})}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(((h==null?void 0:h.netValue)||0)+((m==null?void 0:m.netValue)||0))}`,children:y(((h==null?void 0:h.netValue)||0)+((m==null?void 0:m.netValue)||0))})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"FII Net"}),r.jsx("span",{className:`detail-value ${g(h==null?void 0:h.netValue)}`,children:y(h==null?void 0:h.netValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"DII Net"}),r.jsx("span",{className:`detail-value ${g(m==null?void 0:m.netValue)}`,children:y(m==null?void 0:m.netValue)})]})]})]})]}),s.length>0&&r.jsxs("div",{className:"fii-dii-history",children:[r.jsxs("h3",{className:"history-title",children:["Last ",v.days," Trading Days Summary"]}),r.jsxs("div",{className:"history-summary",children:[r.jsxs("div",{className:`summary-card ${g(v.fiiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"FII Cumulative"}),r.jsx("div",{className:`summary-value ${g(v.fiiTotal)}`,children:y(v.fiiTotal)})]}),r.jsxs("div",{className:`summary-card ${g(v.diiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"DII Cumulative"}),r.jsx("div",{className:`summary-value ${g(v.diiTotal)}`,children:y(v.diiTotal)})]}),r.jsxs("div",{className:`summary-card ${g(v.fiiTotal+v.diiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"Total Institutional"}),r.jsx("div",{className:`summary-value ${g(v.fiiTotal+v.diiTotal)}`,children:y(v.fiiTotal+v.diiTotal)})]})]}),r.jsx("div",{className:"history-table-container",children:r.jsxs("table",{className:"history-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{className:"text-right",children:"FII Net"}),r.jsx("th",{className:"text-right",children:"DII Net"}),r.jsx("th",{className:"text-right",children:"Total"})]})}),r.jsx("tbody",{children:s.slice(0,10).map((N,k)=>{const S=(N.fii_net_value||0)+(N.dii_net_value||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"date-cell",children:N.trade_date?new Date(N.trade_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):""}),r.jsx("td",{className:`text-right ${g(N.fii_net_value)}`,children:y(N.fii_net_value)}),r.jsx("td",{className:`text-right ${g(N.dii_net_value)}`,children:y(N.dii_net_value)}),r.jsx("td",{className:`text-right ${g(S)}`,children:y(S)})]},N.trade_date||k)})})]})}),r.jsx(EN,{data:s})]}),r.jsxs("div",{className:"fii-dii-insight",children:[r.jsx("div",{className:"insight-icon",children:""}),r.jsxs("div",{className:"insight-content",children:[r.jsx("div",{className:"insight-title",children:"Market Insight"}),r.jsx("div",{className:"insight-text",children:(()=>{const N=(h==null?void 0:h.netValue)||0,k=(m==null?void 0:m.netValue)||0;return N>0&&k>0?"Both FII & DII are buying - Strong bullish sentiment with institutional support.":N<0&&k<0?"Both FII & DII are selling - Bearish sentiment, institutions are risk-off.":N<0&&k>0?"FII selling, DII buying - DIIs absorbing FII selling pressure. Watch for support levels.":N>0&&k<0?"FII buying, DII selling - Foreign interest increasing. DIIs may be booking profits.":"Mixed institutional activity. Monitor for clearer directional signals."})()})]})]}),u&&r.jsx("div",{className:"fii-dii-footer",children:r.jsxs("span",{className:"last-update",children:["Last updated: ",d]})})]})}const cd=window.location.origin;function MN({onNavigate:t}){const[e,s]=w.useState([]),[i,n]=w.useState([]),[l,a]=w.useState(!0),[o,c]=w.useState(""),[u,d]=w.useState(!1),{lastUpdate:f}=Ls("watchlist-prices",()=>y(),5e3);gi(f),w.useEffect(()=>{p(),x()},[]);const p=async()=>{const h=localStorage.getItem("watchlist");h&&s(JSON.parse(h))},x=async()=>{a(!0);try{const h=await U(`${cd}/nse_data/all-stocks`);n(h.stocks||[])}catch(h){console.error("Failed to load stocks:",h)}finally{a(!1)}},y=async()=>{var m;const h=await ot(`${cd}/nse_data/all-stocks`);if(((m=h==null?void 0:h.stocks)==null?void 0:m.length)>0){n(h.stocks);const j=localStorage.getItem("watchlist");if(j){const k=JSON.parse(j).map(S=>h.stocks.find(_=>_.symbol===S.symbol)||S);s(k)}}},g=h=>{if(!e.find(j=>j.symbol===h.symbol)){const j=[...e,h];s(j),localStorage.setItem("watchlist",JSON.stringify(j))}d(!1),c("")},b=h=>{const m=e.filter(j=>j.symbol!==h);s(m),localStorage.setItem("watchlist",JSON.stringify(m))},v=i.filter(h=>{var m,j;return((m=h.symbol)==null?void 0:m.toLowerCase().includes(o.toLowerCase()))||((j=h.identifier)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))});return r.jsxs("div",{className:"watchlist-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Watchlist"})]}),r.jsxs("div",{className:"section-actions",children:[r.jsx("button",{onClick:()=>d(!0),children:"+ Add Stock"}),r.jsx("button",{onClick:x,disabled:l,children:l?"Loading...":"Refresh"})]})]}),e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Stocks in Watchlist"}),r.jsx("div",{className:"empty-state-text",children:"Add stocks to your watchlist to track them easily."}),r.jsx("button",{className:"primary-btn",onClick:()=>d(!0),children:"Add Your First Stock"})]}):r.jsx("div",{className:"watchlist-grid",children:e.map(h=>{const m=i.find(k=>k.symbol===h.symbol),j=(m==null?void 0:m.lastPrice)||h.lastPrice||0,N=(m==null?void 0:m.pChange)||h.pChange||0;return r.jsxs("div",{className:"watchlist-item",children:[r.jsxs("div",{className:"watchlist-info",children:[r.jsx("span",{className:"watchlist-symbol",children:h.symbol}),r.jsx("span",{className:"watchlist-name",children:h.identifier||"Equity"})]}),r.jsxs("div",{className:"watchlist-price-info",children:[r.jsxs("div",{className:"watchlist-price",children:["",Number(j).toLocaleString()]}),r.jsxs("div",{className:`watchlist-change ${N>=0?"positive":"negative"}`,children:[N>=0?"+":"",Number(N).toFixed(2),"%"]})]}),r.jsxs("div",{className:"watchlist-actions",children:[r.jsx("button",{className:"watchlist-action-btn",onClick:()=>t("trading.trade"),title:"Trade",children:""}),r.jsx("button",{className:"watchlist-action-btn remove",onClick:()=>b(h.symbol),title:"Remove",children:""})]})]},h.symbol)})}),u&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>d(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:h=>h.stopPropagation(),children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsxs("div",{children:[r.jsx("h3",{children:"Add to Watchlist"}),r.jsx("p",{className:"muted",children:"Search and add stocks to your watchlist"})]}),r.jsx("button",{className:"icon-button",onClick:()=>d(!1),children:""})]}),r.jsx("input",{type:"text",className:"search-input",placeholder:"Search stocks by symbol or name...",value:o,onChange:h=>c(h.target.value),autoFocus:!0}),r.jsx("div",{className:"stock-list",style:{maxHeight:"400px"},children:l?r.jsx("div",{className:"loading",children:"Loading stocks..."}):v.length===0?r.jsx("div",{className:"loading",children:"No stocks found"}):v.slice(0,20).map(h=>{const m=e.find(j=>j.symbol===h.symbol);return r.jsxs("div",{className:`stock-item ${m?"selected":""}`,onClick:()=>!m&&g(h),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:h.symbol}),r.jsx("span",{className:"stock-price",children:h.identifier||"Equity"})]}),r.jsx("div",{className:"stock-change",children:m?r.jsx("span",{className:"muted",children:"Added "}):h.lastPrice?r.jsxs("span",{className:h.pChange>=0?"positive":"negative",children:["",Number(h.lastPrice).toLocaleString()]}):r.jsx("span",{className:"muted",children:"-"})})]},h.symbol)})})]})})]})}function PN({subSection:t}){const e=vi(),{theme:s,setTheme:i}=Hm(),n=localStorage.getItem("user_email")||"User",l=localStorage.getItem("user_name")||n.split("@")[0],[a,o]=w.useState(l),[c,u]=w.useState(localStorage.getItem("profile_pic")||""),[d,f]=w.useState(!1),[p,x]=w.useState(!1),[y,g]=w.useState(!1),b=w.useRef(null);Sr.useEffect(()=>{v()},[]),Sr.useEffect(()=>{v()},[t]);const v=async()=>{try{const _=await(await fetch("/fyers/status",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();x(_.connected)}catch(C){console.error("Error checking Fyers status:",C)}},h=async()=>{g(!0);try{const _=await(await fetch("/fyers/auth-url",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();_.url&&(window.location.href=_.url)}catch(C){console.error("Error getting Fyers auth URL:",C),alert("Failed to connect to Fyers. Please try again later.")}finally{g(!1)}},m=async()=>{if(confirm("Are you sure you want to disconnect your Fyers account?"))try{await fetch("/fyers/disconnect",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),x(!1)}catch(C){console.error("Error disconnecting Fyers:",C)}},j=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),e("/login")},N=()=>{f(!1),alert("Wallet reset feature coming soon!")},k=C=>{var E;const _=(E=C.target.files)==null?void 0:E[0];if(_){const O=new FileReader;O.onloadend=()=>{const B=O.result;u(B),localStorage.setItem("profile_pic",B)},O.readAsDataURL(_)}},S=()=>{localStorage.setItem("user_name",a),alert("Display name saved!")};return t==="preferences"?r.jsxs("div",{className:"settings-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Preferences"})]})}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Display Settings"}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Theme"}),r.jsx("span",{className:"settings-item-desc",children:"Choose your preferred theme"})]}),r.jsxs("select",{className:"settings-select",value:s,onChange:C=>{i(C.target.value)},children:[r.jsx("option",{value:"dark",children:"Dark Mode"}),r.jsx("option",{value:"light",children:"Light Mode"}),r.jsx("option",{value:"glass",children:"Glass Mode"})]})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Currency Format"}),r.jsx("span",{className:"settings-item-desc",children:"Display currency format"})]}),r.jsx("select",{className:"settings-select",defaultValue:"inr",children:r.jsx("option",{value:"inr",children:" INR (Indian Rupee)"})})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Chart Default Interval"}),r.jsx("span",{className:"settings-item-desc",children:"Default time interval for charts"})]}),r.jsxs("select",{className:"settings-select",defaultValue:"1d",children:[r.jsx("option",{value:"1m",children:"1 Minute"}),r.jsx("option",{value:"5m",children:"5 Minutes"}),r.jsx("option",{value:"15m",children:"15 Minutes"}),r.jsx("option",{value:"1h",children:"1 Hour"}),r.jsx("option",{value:"1d",children:"1 Day"})]})]})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Notifications"}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Trade Notifications"}),r.jsx("span",{className:"settings-item-desc",children:"Get notified when trades are executed"})]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0}),r.jsx("span",{className:"toggle-slider"})]})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Price Alerts"}),r.jsx("span",{className:"settings-item-desc",children:"Receive alerts when stocks hit target prices"})]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0}),r.jsx("span",{className:"toggle-slider"})]})]})]})]})]}):r.jsxs("div",{className:"settings-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Profile"})]})}),r.jsx("div",{className:"settings-card",children:r.jsxs("div",{className:"profile-header",children:[r.jsxs("div",{className:"profile-avatar clickable",onClick:()=>{var C;return(C=b.current)==null?void 0:C.click()},title:"Click to change profile picture",style:c?{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[!c&&a.charAt(0).toUpperCase(),r.jsx("div",{className:"avatar-overlay",children:""})]}),r.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:k,style:{display:"none"}}),r.jsxs("div",{className:"profile-info",children:[r.jsx("h3",{children:a}),r.jsx("span",{className:"profile-email",children:n}),r.jsx("span",{className:"profile-badge",children:"Paper Trading Account"})]})]})}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Personal Information"}),r.jsx("div",{className:"settings-list",children:r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Display Name"}),r.jsx("span",{className:"settings-item-desc",children:"This name will be shown in the app"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",className:"settings-input",value:a,onChange:C=>o(C.target.value),placeholder:"Enter your name"}),r.jsx("button",{className:"settings-action-link primary",onClick:S,children:"Save"})]})]})})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Broker Connections"}),r.jsx("p",{className:"settings-desc",children:"Connect your real broker accounts to view holdings and place real trades."}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsx("div",{className:"settings-item-info",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.5rem"},children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"settings-item-label",children:"Fyers"}),r.jsx("span",{className:"settings-item-desc",children:"Trade with your Fyers account"})]})]})}),p?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("span",{className:"badge-connected",children:"Connected"}),r.jsx("button",{className:"settings-action-link danger",onClick:m,children:"Disconnect"})]}):r.jsx("button",{className:"settings-action-link primary",onClick:h,disabled:y,children:y?"Connecting...":"Connect"})]}),r.jsx("div",{className:"settings-item disabled",children:r.jsx("div",{className:"settings-item-info",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.5rem"},children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"settings-item-label",children:"Zerodha"}),r.jsx("span",{className:"settings-item-desc",children:"Coming Soon"})]})]})})})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Account Information"}),r.jsxs("div",{className:"settings-list",children:[r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Email"}),r.jsx("span",{className:"settings-item-value",children:n})]})}),r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Account Type"}),r.jsx("span",{className:"settings-item-value",children:"Market Sandbox (Demo)"})]})}),r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Starting Balance"}),r.jsx("span",{className:"settings-item-value",children:"1,00,000"})]})})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Account Actions"}),r.jsxs("div",{className:"settings-actions",children:[r.jsxs("button",{className:"settings-action-btn warning",onClick:()=>f(!0),children:[r.jsx("span",{children:""}),"Reset Wallet"]}),r.jsxs("button",{className:"settings-action-btn danger",onClick:j,children:[r.jsx("span",{children:""}),"Logout"]})]})]}),d&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>f(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:C=>C.stopPropagation(),style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Reset Wallet?"})}),r.jsx("button",{className:"icon-button",onClick:()=>f(!1),children:""})]}),r.jsx("p",{style:{marginBottom:"1.5rem"},children:"This will reset your wallet balance to 1,00,000 and clear all your holdings and order history. This action cannot be undone."}),r.jsxs("div",{className:"stock-trade-actions",style:{gridTemplateColumns:"1fr 1fr"},children:[r.jsx("button",{className:"chart-btn",onClick:()=>f(!1),children:"Cancel"}),r.jsx("button",{className:"sell-btn",onClick:N,children:"Reset Wallet"})]})]})})]})}const or=window.location.origin;function ud(){var _,E,O,B,G,R,K,Y;const[t,e]=w.useState("NIFTY"),[s,i]=w.useState(null),[n,l]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(!0),[d,f]=w.useState(null),p=w.useRef(!0),{lastUpdate:x}=Ls("option-clock",()=>b(),6e4),y=gi(x);w.useEffect(()=>{g()},[t]);const g=async()=>{u(!0),f(null);try{const[P,M,F]=await Promise.all([U(`${or}/option-clock/overview`),U(`${or}/option-clock/intraday/${t}`),U(`${or}/option-clock/strike-analysis/${t}`)]);i(P),l((M==null?void 0:M.snapshots)||[]),o(F)}catch(P){console.error("Failed to load Option Clock data:",P),f(P.message||"Failed to load data")}finally{u(!1),p.current=!1}},b=async()=>{try{const P=await ot(`${or}/option-clock/overview`);P&&i(P)}catch(P){console.error("Silent refresh failed:",P)}},v=P=>{switch(P){case"LONG_BUILDUP":return"bullish";case"SHORT_COVERING":return"bullish";case"SHORT_BUILDUP":return"bearish";case"LONG_UNWINDING":return"bearish";default:return"neutral"}},h=P=>{switch(P){case"LONG_BUILDUP":return"Price + OI Rising - Fresh Buying";case"SHORT_COVERING":return"Price Rising, OI Falling - Short Exit";case"SHORT_BUILDUP":return"Price Falling, OI Rising - Fresh Selling";case"LONG_UNWINDING":return"Price + OI Falling - Long Exit";default:return"No clear signal"}},m=P=>P?P.replace(/_/g," "):"N/A",j=P=>P?P>1.5?{text:"Heavy Put Writing - Bullish",color:"bullish"}:P>1.2?{text:"Put Heavy - Moderate Bullish",color:"bullish"}:P<.7?{text:"Heavy Call Writing - Bearish",color:"bearish"}:P<.9?{text:"Call Heavy - Moderate Bearish",color:"bearish"}:{text:"Balanced - Neutral",color:"neutral"}:{text:"No Data",color:"neutral"},N=s==null?void 0:s[t.toLowerCase()];if(c&&p.current)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]})}),r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading Option Clock data..."})]})]});const k=P=>{if(!P)return!0;const M=new Date(P);return(new Date-M)/(1e3*60*60)>1},S=P=>{if(!P)return"No data";const M=new Date(P),z=new Date-M,W=Math.floor(z/(1e3*60)),Q=Math.floor(z/(1e3*60*60)),$e=Math.floor(z/(1e3*60*60*24));return $e>0?`${$e} day${$e>1?"s":""} ago`:Q>0?`${Q} hour${Q>1?"s":""} ago`:W>0?`${W} min${W>1?"s":""} ago`:"Just now"};if(d&&!N&&!s)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]})}),r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),r.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",r.jsx("br",{}),r.jsx("br",{}),"Data is fetched every 15 minutes when the market is open.",r.jsx("br",{}),"Once collected, the last available data will be shown here even when market is closed."]}),r.jsx("button",{className:"refresh-btn",onClick:g,style:{marginTop:"1rem"},children:"Check Again"})]})]});const C=j(N==null?void 0:N.pcr);return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]}),r.jsxs("p",{className:"section-subtitle",children:["OI-based market timing - Last updated: ",y]})]}),r.jsx("div",{className:"card symbol-selector-card",children:r.jsxs("div",{className:"symbol-toggle",children:[r.jsx("button",{className:`symbol-btn ${t==="NIFTY"?"active":""}`,onClick:()=>e("NIFTY"),children:"NIFTY 50"}),r.jsx("button",{className:`symbol-btn ${t==="BANKNIFTY"?"active":""}`,onClick:()=>e("BANKNIFTY"),children:"BANK NIFTY"})]})}),N&&(k(N.timestamp)?r.jsxs("div",{className:"stale-data-banner",children:[r.jsx("span",{className:"stale-data-icon",children:""}),r.jsxs("span",{className:"stale-data-text",children:[r.jsx("strong",{children:"Market Closed"})," - Showing last available data from ",S(N.timestamp),N.timestamp&&r.jsxs("span",{className:"stale-data-time",children:["(",new Date(N.timestamp).toLocaleString("en-IN",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),")"]})]})]}):r.jsxs("div",{className:"live-data-banner",children:[r.jsx("span",{className:"live-data-icon"}),r.jsxs("span",{className:"live-data-text",children:["Live Data - Updated ",S(N.timestamp)]})]})),N?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`signal-card ${v(N.signal)}`,children:[r.jsxs("div",{className:"signal-header",children:[r.jsx("span",{className:"signal-label",children:"Current Signal"}),r.jsx("span",{className:`signal-badge ${v(N.signal)}`,children:N.signal_strength})]}),r.jsx("div",{className:"signal-value",children:m(N.signal)}),r.jsx("div",{className:"signal-description",children:h(N.signal)})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsxs("div",{className:"stat-card-label",children:[t," Spot"]}),r.jsx("div",{className:"stat-card-value",children:(_=N.spot_price)==null?void 0:_.toLocaleString("en-IN",{maximumFractionDigits:2})}),r.jsxs("div",{className:`stat-card-change ${N.price_change>=0?"positive":"negative"}`,children:[N.price_change>=0?"+":"",(E=N.price_change)==null?void 0:E.toFixed(2)," (",(O=N.price_change_pct)==null?void 0:O.toFixed(2),"%)"]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:`stat-card-icon ${C.color==="bullish"?"green":C.color==="bearish"?"red":"blue"}`,children:""})}),r.jsx("div",{className:"stat-card-label",children:"Put-Call Ratio"}),r.jsx("div",{className:"stat-card-value",children:((B=N.pcr)==null?void 0:B.toFixed(3))||"N/A"}),r.jsx("div",{className:`stat-card-change ${C.color}`,children:C.text})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Max Pain Strike"}),r.jsx("div",{className:"stat-card-value",children:((G=N.max_pain_strike)==null?void 0:G.toLocaleString("en-IN"))||"N/A"}),r.jsx("div",{className:"stat-card-change neutral",children:"Expected expiry level"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Data Timestamp"}),r.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem"},children:N.timestamp?new Date(N.timestamp).toLocaleTimeString("en-IN"):"N/A"}),r.jsx("div",{className:"stat-card-change neutral",children:"Updates every 15 min"})]})]}),a&&r.jsxs("div",{className:"card strike-levels-card",children:[r.jsx("h3",{children:"Key Strike Levels"}),r.jsxs("div",{className:"strike-levels-grid",children:[r.jsxs("div",{className:"strike-level-item support",children:[r.jsx("span",{className:"strike-label",children:"Highest Put OI (Support)"}),r.jsx("span",{className:"strike-value",children:((R=a.highest_put_oi_strike)==null?void 0:R.toLocaleString("en-IN"))||"N/A"})]}),r.jsxs("div",{className:"strike-level-item current",children:[r.jsx("span",{className:"strike-label",children:"Current Spot"}),r.jsx("span",{className:"strike-value",children:((K=a.spot_price)==null?void 0:K.toLocaleString("en-IN",{maximumFractionDigits:2}))||"N/A"})]}),r.jsxs("div",{className:"strike-level-item resistance",children:[r.jsx("span",{className:"strike-label",children:"Highest Call OI (Resistance)"}),r.jsx("span",{className:"strike-value",children:((Y=a.highest_call_oi_strike)==null?void 0:Y.toLocaleString("en-IN"))||"N/A"})]})]})]}),n.length>0&&r.jsxs("div",{className:"card intraday-timeline-card",children:[r.jsx("h3",{children:"Today's PCR Timeline"}),r.jsx("div",{className:"pcr-timeline",children:n.slice(-10).map((P,M)=>{var F,z;return r.jsxs("div",{className:`timeline-item ${v(P.signal)}`,title:`${new Date(P.timestamp).toLocaleTimeString()} - ${m(P.signal)}`,children:[r.jsx("div",{className:"timeline-time",children:new Date(P.timestamp).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),r.jsx("div",{className:"timeline-pcr",children:(F=P.pcr)==null?void 0:F.toFixed(2)}),r.jsx("div",{className:`timeline-signal ${v(P.signal)}`,children:(z=P.signal)==null?void 0:z.split("_")[0]})]},M)})})]}),(a==null?void 0:a.strikes)&&a.strikes.length>0&&r.jsxs("div",{className:"card strike-table-card",children:[r.jsx("h3",{children:"Strike-wise Open Interest"}),r.jsx("div",{className:"strike-table-container",children:r.jsxs("table",{className:"strike-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Call OI"}),r.jsx("th",{children:"Call Chg"}),r.jsx("th",{children:"Strike"}),r.jsx("th",{children:"Put Chg"}),r.jsx("th",{children:"Put OI"})]})}),r.jsx("tbody",{children:a.strikes.filter(P=>Math.abs(P.strike-a.spot_price)<=500).map((P,M)=>r.jsxs("tr",{className:P.is_atm?"atm-row":"",children:[r.jsxs("td",{className:P.is_resistance?"highlight-cell bearish":"",children:[(P.call_oi/1e5).toFixed(1),"L"]}),r.jsxs("td",{className:P.call_oi_change>0?"positive":P.call_oi_change<0?"negative":"",children:[P.call_oi_change>0?"+":"",(P.call_oi_change/1e5).toFixed(2),"L"]}),r.jsx("td",{className:"strike-col",children:P.strike}),r.jsxs("td",{className:P.put_oi_change>0?"positive":P.put_oi_change<0?"negative":"",children:[P.put_oi_change>0?"+":"",(P.put_oi_change/1e5).toFixed(2),"L"]}),r.jsxs("td",{className:P.is_support?"highlight-cell bullish":"",children:[(P.put_oi/1e5).toFixed(1),"L"]})]},M))})]})})]}),r.jsxs("div",{className:"card signal-legend-card",children:[r.jsx("h3",{children:"Signal Legend"}),r.jsxs("div",{className:"signal-legend-grid",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bullish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Long Buildup:"})," Bullish - Fresh buying (Price + OI rising)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bullish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Short Covering:"})," Weak Bullish - Shorts exiting (Price rising, OI falling)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bearish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Short Buildup:"})," Bearish - Fresh selling (Price falling, OI rising)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bearish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Long Unwinding:"})," Weak Bearish - Longs exiting (Price + OI falling)"]})]})]})]})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),r.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",r.jsx("br",{}),r.jsx("br",{}),"Once data is collected, it will be displayed here even when market is closed."]})]})]})}function TN(){const[t,e]=w.useState("5m"),[s,i]=w.useState("all"),[n,l]=w.useState(!0),[a,o]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState(null),p=[{id:"all",label:"All Signals",icon:""},{id:"ENTRY",label:"Entry Signals",icon:""},{id:"EXIT",label:"Exit Signals",icon:""}];w.useEffect(()=>{(async()=>{try{const m=mn(),j=await fetch("http://localhost:8000/option-apex/timeframes",{headers:{Authorization:`Bearer ${m}`}});if(j.ok){const N=await j.json();u(N.timeframes||[])}}catch(m){console.error("Error fetching timeframes:",m)}})()},[]),w.useEffect(()=>{const h=async()=>{l(!0),f(null);try{const j=mn();let k="http://localhost:8000/option-apex/signals/active?min_confidence=0";s!=="all"&&(k+=`&signal_type=${s}`);const S=await fetch(k,{headers:{Authorization:`Bearer ${j}`}});if(S.ok){const C=await S.json();o(C.signals||[])}}catch(j){console.error("Error fetching Option Apex data:",j),f("Failed to load Option Apex data")}finally{l(!1)}};h();const m=setInterval(h,3e4);return()=>clearInterval(m)},[s]);const x=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Direction"}),r.jsx("th",{children:"Confidence"}),r.jsx("th",{children:"Entry"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Stop Loss"}),r.jsx("th",{children:"Generated"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No active signals found"})}):a.slice(0,20).map((h,m)=>{var j,N,k,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:h.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${h.signal_type==="ENTRY"?"badge-green":"badge-red"}`,children:h.signal_type})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${h.direction==="BULLISH"?"badge-green":"badge-red"}`,children:h.direction})}),r.jsx("td",{children:r.jsxs("span",{className:`badge ${h.confidence_score>=80?"badge-green":h.confidence_score>=60?"badge-blue":"badge-yellow"}`,children:[(j=h.confidence_score)==null?void 0:j.toFixed(0),"%"]})}),r.jsxs("td",{children:["",(N=h.entry_level)==null?void 0:N.toFixed(2)]}),r.jsxs("td",{children:["",(k=h.target_level)==null?void 0:k.toFixed(2)]}),r.jsxs("td",{children:["",(S=h.stop_loss_level)==null?void 0:S.toFixed(2)]}),r.jsx("td",{style:{fontSize:"0.85rem",opacity:.8},children:h.generated_at?new Date(h.generated_at).toLocaleTimeString():"-"})]},m)})})]})}),y=a.filter(h=>h.signal_type==="ENTRY"),g=a.filter(h=>h.signal_type==="EXIT"),b=a.filter(h=>h.direction==="BULLISH"),v=a.filter(h=>h.confidence_score>=80);return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Apex"})]}),r.jsx("p",{className:"section-subtitle",children:"Real-time option candle analysis with institutional flow detection"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Entry Signals"}),r.jsx("div",{className:"stat-card-value",children:y.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon red",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Exit Signals"}),r.jsx("div",{className:"stat-card-value",children:g.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Bullish Signals"}),r.jsx("div",{className:"stat-card-value",children:b.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"High Confidence (80+)"}),r.jsx("div",{className:"stat-card-value",children:v.length})]})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Select Timeframe"}),r.jsx("div",{className:"filter-buttons",children:c.length>0?c.map(h=>r.jsxs("button",{className:`filter-btn ${t===h.value?"active":""}`,onClick:()=>e(h.value),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),h.label]},h.value)):r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:`filter-btn ${t==="1m"?"active":""}`,onClick:()=>e("1m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"1 Minute"]}),r.jsxs("button",{className:`filter-btn ${t==="5m"?"active":""}`,onClick:()=>e("5m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"5 Minutes"]}),r.jsxs("button",{className:`filter-btn ${t==="15m"?"active":""}`,onClick:()=>e("15m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"15 Minutes"]}),r.jsxs("button",{className:`filter-btn ${t==="30m"?"active":""}`,onClick:()=>e("30m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"30 Minutes"]})]})})]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Filter Signals"}),r.jsx("div",{className:"filter-buttons",children:p.map(h=>r.jsxs("button",{className:`filter-btn ${s===h.id?"active":""}`,onClick:()=>i(h.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:h.icon}),h.label]},h.id))})]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Active Signals"}),n?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Option Apex signals..."}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:d}):x()]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"How Option Apex Works"}),r.jsxs("div",{style:{lineHeight:"1.8",opacity:.9},children:[r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Timeframe Analysis:"})," Select your preferred candle interval (1m, 5m, 15m, 30m) to match your trading style."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Signal Types:"})," Entry signals identify new opportunities, while Exit signals suggest profit booking or position closures."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Confidence Score:"})," Based on OI buildup, volume spikes, IV changes, and institutional flow patterns (0-100%)."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Direction:"})," Bullish signals suggest buying calls/selling puts. Bearish signals suggest buying puts/selling calls."]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Levels:"})," Entry, Target, and Stop Loss levels are calculated using risk-reward ratios and volatility analysis."]})]})]})]})}function $N(){const[t,e]=w.useState("volume"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState(null),p=[{id:"volume",label:"Volume Surge",icon:""},{id:"delivery",label:"High Delivery %",icon:""},{id:"blocks",label:"Block Deals",icon:""}];w.useEffect(()=>{const b=async()=>{i(!0),f(null);try{const h=mn(),m="http://localhost:8000",j=await fetch(`${m}/market-pulse/volume-surge?min_ratio=2.0`,{headers:{Authorization:`Bearer ${h}`}});if(j.ok){const S=await j.json();l(S.stocks||[])}const N=await fetch(`${m}/market-pulse/delivery-leaders?min_pct=60`,{headers:{Authorization:`Bearer ${h}`}});if(N.ok){const S=await N.json();o(S.stocks||[])}const k=await fetch(`${m}/market-pulse/block-activity?days=1`,{headers:{Authorization:`Bearer ${h}`}});if(k.ok){const S=await k.json();u(S.deals||[])}}catch(h){console.error("Error fetching Market Pulse data:",h),f("Failed to load Market Pulse data")}finally{i(!1)}};b();const v=setInterval(b,6e4);return()=>clearInterval(v)},[]);const x=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No volume surges detected"})}):n.slice(0,20).map((b,v)=>{var h,m,j;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:b.symbol}),r.jsxs("td",{children:["",(h=b.ltp)==null?void 0:h.toFixed(2)]}),r.jsxs("td",{className:b.priceChangePct>=0?"positive":"negative",children:[b.priceChangePct>=0?"+":"",(m=b.priceChangePct)==null?void 0:m.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(j=b.volumeRatio)==null?void 0:j.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${b.priceChangePct>=3?"badge-green":"badge-yellow"}`,children:b.priceChangePct>=3?"Strong":"Moderate"})})]},v)})})]})}),y=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Delivery %"}),r.jsx("th",{children:"Signal"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No high delivery stocks found"})}):a.slice(0,20).map((b,v)=>{var h,m,j;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:b.symbol}),r.jsxs("td",{children:["",(h=b.ltp)==null?void 0:h.toFixed(2)]}),r.jsxs("td",{className:b.priceChangePct>=0?"positive":"negative",children:[b.priceChangePct>=0?"+":"",(m=b.priceChangePct)==null?void 0:m.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(j=b.deliveryPct)==null?void 0:j.toFixed(1),"%"]})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-blue",children:b.deliveryPct>=70?"Institutional":"Smart Money"})})]},v)})})]})}),g=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Client"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"})]})}),r.jsx("tbody",{children:c.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No block deals found"})}):c.slice(0,20).map((b,v)=>{var h,m,j,N;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:b.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${b.dealType==="buy"?"badge-green":"badge-red"}`,children:(h=b.dealType)==null?void 0:h.toUpperCase()})}),r.jsxs("td",{style:{fontSize:"0.85rem",opacity:.8},children:[(m=b.clientName)==null?void 0:m.substring(0,30),"..."]}),r.jsx("td",{children:(j=b.quantity)==null?void 0:j.toLocaleString()}),r.jsxs("td",{children:["",(N=b.price)==null?void 0:N.toFixed(2)]})]},v)})})]})});return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Market Pulse"})]}),r.jsx("p",{className:"section-subtitle",children:"Detect institutional activity and smart money flow"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Volume Surges"}),r.jsx("div",{className:"stat-card-value",children:n.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Delivery Leaders"}),r.jsx("div",{className:"stat-card-value",children:a.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Block Deals"}),r.jsx("div",{className:"stat-card-value",children:c.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Active Signals"}),r.jsx("div",{className:"stat-card-value",children:n.filter(b=>b.priceChangePct>=3).length})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:p.map(b=>r.jsxs("button",{className:`filter-btn ${t===b.id?"active":""}`,onClick:()=>e(b.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:b.icon}),b.label]},b.id))})}),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Market Pulse data..."}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:d}):r.jsxs(r.Fragment,{children:[t==="volume"&&x(),t==="delivery"&&y(),t==="blocks"&&g()]})})]})}function RN(){var g,b,v,h,m;const[t,e]=w.useState("all"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState(null),p=[{id:"all",label:"All Grades",icon:"",color:"blue"},{id:"A",label:"Grade A (80+)",icon:"",color:"green"},{id:"B",label:"Grade B (60-79)",icon:"",color:"blue"},{id:"C",label:"Grade C (40-59)",icon:"",color:"yellow"},{id:"D",label:"Grade D (<40)",icon:"",color:"gray"}];w.useEffect(()=>{const j=async()=>{i(!0),f(null);try{const k=mn(),S="http://localhost:8000";let C=`${S}/insider-strategy/picks/active`;t!=="all"&&(C=`${S}/insider-strategy/top-picks?grade=${t}&limit=20`);const _=await fetch(C,{headers:{Authorization:`Bearer ${k}`}});if(_.ok){const B=await _.json();l(B.picks||[])}const E=await fetch(`${S}/insider-strategy/grade-distribution`,{headers:{Authorization:`Bearer ${k}`}});if(E.ok){const B=await E.json();o(B)}const O=await fetch(`${S}/insider-strategy/performance`,{headers:{Authorization:`Bearer ${k}`}});if(O.ok){const B=await O.json();u(B)}}catch(k){console.error("Error fetching Insider Strategy data:",k),f("Failed to load Insider Strategy data")}finally{i(!1)}};j();const N=setInterval(j,6e4);return()=>clearInterval(N)},[t]);const x=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Grade"}),r.jsx("th",{children:"Composite Score"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Entry"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Stop Loss"}),r.jsx("th",{children:"R:R"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No picks found for selected grade"})}):n.slice(0,20).map((j,N)=>{var k,S,C,_,E;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:j.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${j.grade==="A"?"badge-green":j.grade==="B"?"badge-blue":j.grade==="C"?"badge-yellow":"badge-gray"}`,children:j.grade})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-blue",children:(k=j.composite_score)==null?void 0:k.toFixed(1)})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${j.pick_type==="BULLISH"?"badge-green":"badge-red"}`,children:j.pick_type})}),r.jsxs("td",{children:["",(S=j.entry_price)==null?void 0:S.toFixed(2)]}),r.jsxs("td",{children:["",(C=j.target_price)==null?void 0:C.toFixed(2)]}),r.jsxs("td",{children:["",(_=j.stop_loss)==null?void 0:_.toFixed(2)]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(E=j.risk_reward_ratio)==null?void 0:E.toFixed(1),":1"]})})]},N)})})]})}),y=()=>{var N,k,S,C;if(n.length===0)return null;const j=n[0];return r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsxs("h3",{style:{marginBottom:"1rem"},children:["Top Pick Score Breakdown: ",j.symbol]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Momentum Score (40%)"}),r.jsx("div",{className:"stat-card-value",children:(N=j.momentum_score)==null?void 0:N.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Volume Score (30%)"}),r.jsx("div",{className:"stat-card-value",children:(k=j.volume_score)==null?void 0:k.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"OI Score (30%)"}),r.jsx("div",{className:"stat-card-value",children:(S=j.oi_score)==null?void 0:S.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Composite Score"}),r.jsx("div",{className:"stat-card-value",children:(C=j.composite_score)==null?void 0:C.toFixed(1)})]})]})]})};return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Insider Strategy"})]}),r.jsx("p",{className:"section-subtitle",children:"Multi-factor composite scoring: Momentum (40%) + Volume (30%) + OI (30%)"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Grade A Picks"}),r.jsx("div",{className:"stat-card-value",children:(Array.isArray(a==null?void 0:a.distribution)?(g=a.distribution.find(j=>j.grade==="A"))==null?void 0:g.count:0)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Grade B Picks"}),r.jsx("div",{className:"stat-card-value",children:(Array.isArray(a==null?void 0:a.distribution)?(b=a.distribution.find(j=>j.grade==="B"))==null?void 0:b.count:0)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon yellow",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Total Active Picks"}),r.jsx("div",{className:"stat-card-value",children:(a==null?void 0:a.total_picks)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Avg Accuracy"}),r.jsxs("div",{className:"stat-card-value",children:[((h=(v=c==null?void 0:c.overall)==null?void 0:v.avg_accuracy)==null?void 0:h.toFixed(1))||0,"%"]})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:p.map(j=>r.jsxs("button",{className:`filter-btn ${t===j.id?"active":""}`,onClick:()=>e(j.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:j.icon}),j.label]},j.id))})}),!s&&!d&&n.length>0&&y(),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Insider Strategy picks..."}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:d}):x()}),c&&c.overall&&r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Performance Metrics"}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Total Trades"}),r.jsx("div",{className:"stat-card-value",children:c.overall.total_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Winning Trades"}),r.jsx("div",{className:"stat-card-value",style:{color:"var(--success)"},children:c.overall.winning_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Losing Trades"}),r.jsx("div",{className:"stat-card-value",style:{color:"var(--danger)"},children:c.overall.losing_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Avg Return"}),r.jsxs("div",{className:"stat-card-value",style:{color:c.overall.avg_return>=0?"var(--success)":"var(--danger)"},children:[(m=c.overall.avg_return)==null?void 0:m.toFixed(2),"%"]})]})]})]})]})}const hd=window.location.origin;function zN(){var C,_,E,O,B,G;const[t,e]=w.useState("heatmap"),[s,i]=w.useState(!0),[n,l]=w.useState(null),[a,o]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState(null),[p,x]=w.useState(!1),y=[{id:"heatmap",label:"Sector Heatmap"},{id:"leaders",label:"Leaders"},{id:"laggards",label:"Laggards"},{id:"rotation",label:"Rotation"}];w.useEffect(()=>{g()},[]),w.useEffect(()=>{c&&b(c)},[c]);const g=async()=>{i(!0),l(null);try{const R=await U(`${hd}/sectors/heatmap`);o(R)}catch(R){console.error("Failed to load sector data:",R),l(R.message||"Failed to load sector data")}finally{i(!1)}},b=async R=>{x(!0);try{const K=await U(`${hd}/sectors/${R}/stocks`);f(K)}catch(K){console.error("Failed to load sector stocks:",K),f(null)}finally{x(!1)}},v=R=>R>2?"rgba(34, 197, 94, 0.4)":R>1?"rgba(34, 197, 94, 0.25)":R>0?"rgba(34, 197, 94, 0.1)":R>-1?"rgba(239, 68, 68, 0.1)":R>-2?"rgba(239, 68, 68, 0.25)":"rgba(239, 68, 68, 0.4)";if(s)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]})}),r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading sector data..."})]})]});if(n&&!a)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]})}),r.jsx("div",{className:"error-container",children:r.jsxs("div",{className:"error-message",children:[r.jsx("span",{className:"error-icon",children:""}),r.jsx("p",{children:n}),r.jsx("button",{className:"refresh-btn",onClick:g,children:"Retry"})]})})]});const h=(a==null?void 0:a.sectors)||[],m=a==null?void 0:a.benchmark,j=a==null?void 0:a.rotation,N=a==null?void 0:a.summary,S=(()=>{switch(t){case"leaders":return h.filter(R=>R.percentChange>0).slice(0,8);case"laggards":return[...h].sort((R,K)=>R.percentChange-K.percentChange).slice(0,8);default:return h}})();return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]}),r.jsx("p",{className:"section-subtitle",children:"Sector performance analysis and rotation detection"})]}),m&&r.jsxs("div",{className:"card benchmark-card",children:[r.jsxs("div",{className:"benchmark-info",children:[r.jsx("span",{className:"benchmark-label",children:"Market Benchmark"}),r.jsx("span",{className:"benchmark-name",children:m.name})]}),r.jsxs("div",{className:"benchmark-value",children:[r.jsx("span",{className:"benchmark-price",children:(C=m.lastValue)==null?void 0:C.toLocaleString("en-IN")}),r.jsxs("span",{className:`benchmark-change ${m.percentChange>=0?"positive":"negative"}`,children:[m.percentChange>=0?"+":"",(_=m.percentChange)==null?void 0:_.toFixed(2),"%"]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"view-buttons",children:y.map(R=>r.jsx("button",{className:`view-btn ${t===R.id?"active":""}`,onClick:()=>{e(R.id),u(null)},children:R.label},R.id))})}),N&&t==="heatmap"&&r.jsxs("div",{className:"dashboard-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Total Sectors"}),r.jsx("div",{className:"stat-card-value",children:N.totalSectors})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Advancing"}),r.jsx("div",{className:"stat-card-value positive",children:N.advancing})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Declining"}),r.jsx("div",{className:"stat-card-value negative",children:N.declining})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Breadth"}),r.jsxs("div",{className:`stat-card-value ${N.breadth>=50?"positive":"negative"}`,children:[N.breadth,"%"]})]})]}),t==="rotation"&&j&&r.jsxs("div",{className:"card rotation-card",children:[r.jsx("h3",{children:"Market Rotation Analysis"}),r.jsxs("div",{className:"rotation-phase",children:[r.jsx("span",{className:"phase-label",children:"Current Phase:"}),r.jsx("span",{className:`phase-badge ${(E=j.phase)==null?void 0:E.toLowerCase()}`,children:(O=j.phase)==null?void 0:O.replace("_"," ")})]}),r.jsx("p",{className:"rotation-insight",children:j.insight}),r.jsxs("div",{className:"rotation-sectors",children:[r.jsxs("div",{className:"rotation-group",children:[r.jsx("span",{className:"rotation-group-label",children:"Leading Sectors:"}),r.jsx("div",{className:"rotation-tags",children:(B=j.leaders)==null?void 0:B.map(R=>r.jsx("span",{className:"rotation-tag leader",children:R},R))})]}),r.jsxs("div",{className:"rotation-group",children:[r.jsx("span",{className:"rotation-group-label",children:"Lagging Sectors:"}),r.jsx("div",{className:"rotation-tags",children:(G=j.laggards)==null?void 0:G.map(R=>r.jsx("span",{className:"rotation-tag laggard",children:R},R))})]})]})]}),t!=="rotation"&&r.jsxs("div",{className:"card",children:[r.jsx("h3",{children:t==="heatmap"?"Sector Performance":t==="leaders"?"Top Performing Sectors":"Worst Performing Sectors"}),r.jsx("div",{className:"sector-heatmap-grid",children:S.map(R=>{var K;return r.jsxs("div",{className:`sector-heatmap-cell ${c===R.shortName?"selected":""}`,style:{backgroundColor:v(R.percentChange)},onClick:()=>u(R.shortName),children:[r.jsx("div",{className:"sector-heatmap-name",children:R.name}),r.jsxs("div",{className:`sector-heatmap-change ${R.percentChange>=0?"positive":"negative"}`,children:[R.percentChange>=0?"+":"",(K=R.percentChange)==null?void 0:K.toFixed(2),"%"]}),r.jsxs("div",{className:"sector-heatmap-rs",children:[r.jsx("span",{className:"rs-label",children:"RS:"}),r.jsxs("span",{className:`rs-value ${R.relativeStrength>=0?"positive":"negative"}`,children:[R.relativeStrength>=0?"+":"",R.relativeStrength]})]}),r.jsx("div",{className:`sector-position-badge ${R.statusColor}`,children:R.position})]},R.indexName)})})]}),c&&r.jsxs("div",{className:"card sector-stocks-card",children:[r.jsxs("div",{className:"sector-stocks-header",children:[r.jsxs("h3",{children:[(d==null?void 0:d.sectorName)||c," Stocks",r.jsxs("span",{className:"stock-count",children:["(",(d==null?void 0:d.stockCount)||0," stocks)"]})]}),r.jsx("button",{className:"close-btn",onClick:()=>{u(null),f(null)},children:""})]}),p?r.jsx("div",{className:"loading-container",style:{padding:"2rem"},children:r.jsx("div",{className:"loading-spinner"})}):d!=null&&d.stocks?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"sector-stocks-summary",children:[r.jsxs("span",{className:"advancing",children:[" ",d.advancing," Advancing"]}),r.jsxs("span",{className:"declining",children:[" ",d.declining," Declining"]})]}),r.jsx("div",{className:"sector-stocks-table",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change"}),r.jsx("th",{children:"Volume"})]})}),r.jsx("tbody",{children:d.stocks.slice(0,15).map(R=>{var K,Y;return r.jsxs("tr",{children:[r.jsx("td",{className:"stock-symbol",children:R.symbol}),r.jsx("td",{children:(K=R.lastPrice)==null?void 0:K.toLocaleString("en-IN",{maximumFractionDigits:2})}),r.jsxs("td",{className:R.percentChange>=0?"positive":"negative",children:[R.percentChange>=0?"+":"",(Y=R.percentChange)==null?void 0:Y.toFixed(2),"%"]}),r.jsxs("td",{children:[(R.volume/1e5).toFixed(2),"L"]})]},R.symbol)})})]})})]}):r.jsx("p",{className:"no-data",children:"No stocks data available"})]}),r.jsx("div",{className:"card",style:{textAlign:"center",padding:"1rem"},children:r.jsx("button",{className:"refresh-btn",onClick:g,children:"Refresh Data"})})]})}function IN(){const[t,e]=w.useState("breakouts-high"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState(null),[p,x]=w.useState(null),y=[{id:"breakouts-high",label:"52W High Breakouts",icon:""},{id:"breakouts-low",label:"52W Low Breakouts",icon:""},{id:"momentum",label:"High Momentum",icon:""}];w.useEffect(()=>{const h=async()=>{i(!0),x(null);try{const j=mn(),N="http://localhost:8000",k=await fetch(`${N}/swing-spectrum/breakouts?type=high&min_distance=0`,{headers:{Authorization:`Bearer ${j}`}});if(k.ok){const E=await k.json();l(E.breakouts||[])}const S=await fetch(`${N}/swing-spectrum/breakouts?type=low&min_distance=0`,{headers:{Authorization:`Bearer ${j}`}});if(S.ok){const E=await S.json();o(E.breakouts||[])}const C=await fetch(`${N}/swing-spectrum/momentum?min_score=70`,{headers:{Authorization:`Bearer ${j}`}});if(C.ok){const E=await C.json();u(E.stocks||[])}const _=await fetch(`${N}/swing-spectrum/stats`,{headers:{Authorization:`Bearer ${j}`}});if(_.ok){const E=await _.json();f(E)}}catch(j){console.error("Error fetching Swing Spectrum data:",j),x("Failed to load Swing Spectrum data")}finally{i(!1)}};h();const m=setInterval(h,6e4);return()=>clearInterval(m)},[]);const g=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Distance from 52W High"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Strength"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No 52-week high breakouts found"})}):n.slice(0,20).map((h,m)=>{var j,N,k,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:h.symbol}),r.jsxs("td",{children:["",(j=h.ltp)==null?void 0:j.toFixed(2)]}),r.jsxs("td",{className:h.priceChangePct>=0?"positive":"negative",children:[h.priceChangePct>=0?"+":"",(N=h.priceChangePct)==null?void 0:N.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(k=h.distanceFrom52WHigh)==null?void 0:k.toFixed(2),"%"]})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=h.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${h.breakoutStrength==="STRONG"?"badge-green":h.breakoutStrength==="MODERATE"?"badge-yellow":"badge-gray"}`,children:h.breakoutStrength})})]},m)})})]})}),b=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Distance from 52W Low"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Strength"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No 52-week low breakouts found"})}):a.slice(0,20).map((h,m)=>{var j,N,k,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:h.symbol}),r.jsxs("td",{children:["",(j=h.ltp)==null?void 0:j.toFixed(2)]}),r.jsxs("td",{className:h.priceChangePct>=0?"positive":"negative",children:[h.priceChangePct>=0?"+":"",(N=h.priceChangePct)==null?void 0:N.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-red",children:[(k=h.distanceFrom52WLow)==null?void 0:k.toFixed(2),"%"]})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=h.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${h.breakoutStrength==="STRONG"?"badge-green":h.breakoutStrength==="MODERATE"?"badge-yellow":"badge-gray"}`,children:h.breakoutStrength})})]},m)})})]})}),v=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Momentum Score"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Trend"})]})}),r.jsx("tbody",{children:c.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No high momentum stocks found"})}):c.slice(0,20).map((h,m)=>{var j,N,k,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:h.symbol}),r.jsxs("td",{children:["",(j=h.ltp)==null?void 0:j.toFixed(2)]}),r.jsxs("td",{className:h.priceChangePct>=0?"positive":"negative",children:[h.priceChangePct>=0?"+":"",(N=h.priceChangePct)==null?void 0:N.toFixed(2),"%"]}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-green",children:(k=h.momentumScore)==null?void 0:k.toFixed(0)})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=h.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${h.trend==="BULLISH"?"badge-green":"badge-red"}`,children:h.trend})})]},m)})})]})});return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Swing Spectrum"})]}),r.jsx("p",{className:"section-subtitle",children:"Stocks breaking barriers and signaling new trends for medium-term trading"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"52W High Breakouts"}),r.jsx("div",{className:"stat-card-value",children:n.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon red",children:""})}),r.jsx("div",{className:"stat-card-label",children:"52W Low Breakouts"}),r.jsx("div",{className:"stat-card-value",children:a.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"High Momentum"}),r.jsx("div",{className:"stat-card-value",children:c.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Strong Breakouts"}),r.jsx("div",{className:"stat-card-value",children:n.filter(h=>h.breakoutStrength==="STRONG").length})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:y.map(h=>r.jsxs("button",{className:`filter-btn ${t===h.id?"active":""}`,onClick:()=>e(h.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:h.icon}),h.label]},h.id))})}),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Swing Spectrum data..."}):p?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:p}):r.jsxs(r.Fragment,{children:[t==="breakouts-high"&&g(),t==="breakouts-low"&&b(),t==="momentum"&&v()]})})]})}function DN(){const{isPaused:t,isOnline:e,togglePause:s,activeCount:i}=$y(),[n,l]=w.useState(uh()),[a,o]=w.useState(dh());w.useEffect(()=>{const u=setInterval(()=>{l(uh()),o(dh())},1e3);return()=>clearInterval(u)},[]);const c=Ns();return e?r.jsxs("div",{className:"refresh-control",children:[r.jsxs("div",{className:"market-status",children:[r.jsxs("span",{className:`market-status-indicator ${c?"open":"closed"}`,children:[r.jsx("span",{className:"status-dot"}),n]}),r.jsxs("span",{className:"market-countdown",children:[a.event==="close"?"Closes":"Opens"," in ",a.countdown]})]}),c?r.jsxs("button",{className:`refresh-toggle-btn ${t?"paused":"active"}`,onClick:s,title:t?"Resume auto-refresh":"Pause auto-refresh",children:[t?r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:r.jsx("path",{d:"M3 2l10 6-10 6V2z"})}):r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:r.jsx("path",{d:"M2 2h4v12H2V2zm8 0h4v12h-4V2z"})}),r.jsx("span",{className:"refresh-toggle-text",children:t?"Paused":`Live (${i})`})]}):r.jsx("span",{className:"refresh-status-text",children:"Auto-refresh paused (market closed)"})]}):r.jsx("div",{className:"refresh-control",children:r.jsxs("div",{className:"offline-indicator",children:[r.jsx("span",{className:"offline-dot"}),r.jsx("span",{children:"Offline"})]})})}function FN(){const t=vi(),{syncThemeWithBackend:e}=Hm();localStorage.getItem("access_token");const s=localStorage.getItem("user_email")||"User",i=localStorage.getItem("user_name")||s.split("@")[0],[n,l]=w.useState("dashboard"),[a,o]=w.useState(!1),[c,u]=w.useState(!1),[d,f]=w.useState("");w.useEffect(()=>{e(),fetch("/static/version.json?t="+Date.now()).then(_=>_.json()).then(_=>f(`v${_.version}`)).catch(()=>f("v1.0.0"));const m=new URLSearchParams(window.location.search),j=m.get("s"),N=m.get("auth_code")||m.get("code"),k=m.get("id"),S=m.get("fyers_connected"),C=m.get("fyers_error");S==="true"?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):C?(alert("Fyers connection failed: "+C),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):j==="ok"&&N&&p(j,N,k)},[]);const p=async(m,j,N)=>{try{const k=await fetch(`/fyers/callback?s=${m}&code=${j}&id=${N}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),S=await k.json();k.ok?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):alert("Failed to connect Fyers: "+S.detail)}catch(k){console.error("Error handling Fyers callback:",k)}},x=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),t("/login")},y=m=>{l(m),u(!1)},[g,b]=n.split("."),v=()=>{switch(g){case"dashboard":return r.jsx(fh,{onNavigate:y});case"products":switch(b){case"option-clock":return r.jsx(ud,{});case"option-apex":return r.jsx(TN,{});case"market-pulse":return r.jsx($N,{});case"insider-strategy":return r.jsx(RN,{});case"sector-scope":return r.jsx(zN,{});case"swing-spectrum":return r.jsx(IN,{});default:return r.jsx(ud,{})}case"trading":return b==="portfolio"||b==="orders"?r.jsx(Eo,{initialTab:b==="orders"?"orders":"portfolio"}):r.jsx(Eo,{initialTab:"trade"});case"real-trading":return r.jsx(yN,{initialTab:"trade"});case"market":return b==="nifty-contributors"?r.jsx(_N,{}):b==="fii-dii"?r.jsx(LN,{}):r.jsx(jN,{subSection:b||"gainers"});case"watchlist":return r.jsx(MN,{onNavigate:y});case"settings":return r.jsx(PN,{subSection:b||"profile"});default:return r.jsx(fh,{onNavigate:y})}},h=()=>{const m={dashboard:"Dashboard",products:"TradeFinder Products","products.option-clock":"Option Clock","products.option-apex":"Option Apex","products.market-pulse":"Market Pulse","products.insider-strategy":"Insider Strategy","products.sector-scope":"Sector Scope","products.swing-spectrum":"Swing Spectrum",trading:"Market Sandbox","real-trading":"Market Connect",market:"Market Data","market.gainers":"Top Gainers","market.losers":"Top Losers","market.nifty-contributors":"Nifty Contributors","market.fii-dii":"FII / DII Activity","market.weekly":"Weekly Movers","market.bulk":"Bulk Deals",watchlist:"Watchlist",settings:"Settings","settings.profile":"Profile","settings.preferences":"Preferences"};return m[n]||m[g]||"Dashboard"};return r.jsxs(G0,{children:[r.jsx(X0,{}),r.jsxs("div",{className:"app-layout",children:[c&&r.jsx("div",{className:"mobile-overlay",onClick:()=>u(!1)}),r.jsx(Ey,{activeSection:n,onSectionChange:y,collapsed:a,onToggleCollapse:()=>o(!a),mobileOpen:c,onMobileClose:()=>u(!1)}),r.jsxs("main",{className:`main-content ${a?"sidebar-collapsed":""}`,children:[r.jsxs("header",{className:"main-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsxs("button",{className:"mobile-menu-btn",onClick:()=>u(!c),"aria-label":"Toggle menu",children:[r.jsx("span",{className:"hamburger-line"}),r.jsx("span",{className:"hamburger-line"}),r.jsx("span",{className:"hamburger-line"})]}),r.jsx("h1",{className:"page-title",children:h()}),d&&r.jsx("span",{className:"version-badge",children:d})]}),r.jsxs("div",{className:"header-right",children:[r.jsx(DN,{}),r.jsx("span",{className:"user-email",children:i}),r.jsx("button",{className:"logout-btn",onClick:x,children:"Logout"})]})]}),r.jsx("div",{className:"content-area",children:v()})]})]})]})}function ON(){const t=vi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[l,a]=w.useState(""),[o,c]=w.useState({message:"",type:""}),[u,d]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/");const g=localStorage.getItem("GOOGLE_CLIENT_ID");g&&a(g);const b=()=>{const v=localStorage.getItem("GOOGLE_CLIENT_ID");v&&window.google&&(window.google.accounts.id.initialize({client_id:v,callback:f}),window.google.accounts.id.renderButton(document.getElementById("google-signin"),{theme:"outline",size:"large",width:280}))};if(window.google)b();else{const v=setInterval(()=>{window.google&&(clearInterval(v),b())},200);return()=>clearInterval(v)}},[t]);const f=async g=>{if(!(g!=null&&g.credential)){c({message:"Google sign-in failed",type:"error"});return}d(!0),c({message:"Signing in with Google...",type:"info"});try{const b=await Yr("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:g.credential})});p(b)}catch(b){c({message:b.message,type:"error"})}finally{d(!1)}},p=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):c({message:"Unexpected response from server",type:"error"})},x=async g=>{g.preventDefault(),d(!0),c({message:"Logging in...",type:"info"});try{const b=new URLSearchParams;b.append("username",e),b.append("password",i);const v=await Yr("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.toString()});p(v)}catch(b){c({message:b.message,type:"error"})}finally{d(!1)}},y=()=>{l&&(localStorage.setItem("GOOGLE_CLIENT_ID",l),c({message:"Saved Google Client ID. Reloading...",type:"info"}),setTimeout(()=>window.location.reload(),500))};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Welcome Back"}),r.jsx("p",{className:"muted",children:"Sign in to access your dashboard"})]}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:e,onChange:g=>s(g.target.value),placeholder:"you@example.com",required:!0,disabled:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:g=>n(g.target.value),placeholder:"",required:!0,disabled:u})]}),r.jsx("button",{type:"submit",className:"primary-btn",disabled:u,children:u?"Signing in...":"Sign In"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or continue with"})}),r.jsxs("div",{className:"google-section",children:[r.jsx("div",{id:"google-signin",className:"google-placeholder",children:!localStorage.getItem("GOOGLE_CLIENT_ID")&&r.jsx("span",{className:"muted",children:"Set Google Client ID below to enable"})}),r.jsxs("div",{className:"google-config",children:[r.jsx("input",{type:"text",value:l,onChange:g=>a(g.target.value),placeholder:"Google Client ID (optional)"}),r.jsx("button",{type:"button",className:"ghost-btn",onClick:y,children:"Save"})]})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsx("span",{className:"muted",children:"Don't have an account?"}),r.jsx(xl,{to:"/signup",children:"Create one"})]}),o.message&&r.jsx("div",{className:`auth-message ${o.type}`,children:o.message})]})})}function AN(){const t=vi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[l,a]=w.useState(""),[o,c]=w.useState(""),[u,d]=w.useState({message:"",type:""}),[f,p]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/")},[t]);const x=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):d({message:"Unexpected response from server",type:"error"})},y=async g=>{if(g.preventDefault(),l!==o){d({message:"Passwords do not match",type:"error"});return}if(l.length<6){d({message:"Password must be at least 6 characters",type:"error"});return}p(!0),d({message:"Creating account...",type:"info"});try{const b=await Yr("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:l,display_name:e||i.split("@")[0]})});x(b)}catch(b){d({message:b.message,type:"error"})}finally{p(!1)}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Create Account"}),r.jsx("p",{className:"muted",children:"Join Stock Servs to start trading"})]}),r.jsxs("form",{onSubmit:y,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"displayName",children:"Display Name"}),r.jsx("input",{id:"displayName",type:"text",value:e,onChange:g=>s(g.target.value),placeholder:"John Doe",disabled:f})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:i,onChange:g=>n(g.target.value),placeholder:"you@example.com",required:!0,disabled:f})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:l,onChange:g=>a(g.target.value),placeholder:"",required:!0,disabled:f})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:g=>c(g.target.value),placeholder:"",required:!0,disabled:f})]}),r.jsx("button",{type:"submit",className:"primary-btn",disabled:f,children:f?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsx("span",{className:"muted",children:"Already have an account?"}),r.jsx(xl,{to:"/login",children:"Sign in"})]}),u.message&&r.jsx("div",{className:`auth-message ${u.type}`,children:u.message})]})})}const kl=document.createElement("script");kl.src="https://accounts.google.com/gsi/client";kl.async=!0;kl.defer=!0;document.head.appendChild(kl);function BN({children:t}){return!!localStorage.getItem("access_token")?t:r.jsx(Lc,{to:"/login",replace:!0})}function dd({children:t}){return!!localStorage.getItem("access_token")?r.jsx(Lc,{to:"/",replace:!0}):t}Ca.createRoot(document.getElementById("root")).render(r.jsx(Sr.StrictMode,{children:r.jsx(W0,{children:r.jsx(U0,{children:r.jsx($0,{children:r.jsxs(c0,{children:[r.jsx(Ri,{path:"/",element:r.jsx(BN,{children:r.jsx(FN,{})})}),r.jsx(Ri,{path:"/login",element:r.jsx(dd,{children:r.jsx(ON,{})})}),r.jsx(Ri,{path:"/signup",element:r.jsx(dd,{children:r.jsx(AN,{})})}),r.jsx(Ri,{path:"*",element:r.jsx(Lc,{to:"/",replace:!0})})]})})})})}));
