(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();function Yp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jd={exports:{}},al={},Cd={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=Symbol.for("react.element"),Jp=Symbol.for("react.portal"),Zp=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),ng=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),lg=Symbol.for("react.memo"),og=Symbol.for("react.lazy"),ou=Symbol.iterator;function ag(t){return t===null||typeof t!="object"?null:(t=ou&&t[ou]||t["@@iterator"],typeof t=="function"?t:null)}var kd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ed=Object.assign,_d={};function xn(t,e,s){this.props=t,this.context=e,this.refs=_d,this.updater=s||kd}xn.prototype.isReactComponent={};xn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Md(){}Md.prototype=xn.prototype;function Ba(t,e,s){this.props=t,this.context=e,this.refs=_d,this.updater=s||kd}var Aa=Ba.prototype=new Md;Aa.constructor=Ba;Ed(Aa,xn.prototype);Aa.isPureReactComponent=!0;var au=Array.isArray,Ld=Object.prototype.hasOwnProperty,Wa={current:null},Pd={key:!0,ref:!0,__self:!0,__source:!0};function Td(t,e,s){var n,i={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Ld.call(e,n)&&!Pd.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=s;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:_i,type:t,key:r,ref:o,props:i,_owner:Wa.current}}function cg(t,e){return{$$typeof:_i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ua(t){return typeof t=="object"&&t!==null&&t.$$typeof===_i}function ug(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var cu=/\/+/g;function Vl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ug(""+t.key):e.toString(36)}function yr(t,e,s,n,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _i:case Jp:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Vl(o,0):n,au(i)?(s="",t!=null&&(s=t.replace(cu,"$&/")+"/"),yr(i,e,s,"",function(u){return u})):i!=null&&(Ua(i)&&(i=cg(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cu,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",au(t))for(var a=0;a<t.length;a++){r=t[a];var c=n+Vl(r,a);o+=yr(r,e,s,c,i)}else if(c=ag(t),typeof c=="function")for(t=c.call(t),a=0;!(r=t.next()).done;)r=r.value,c=n+Vl(r,a++),o+=yr(r,e,s,c,i);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vi(t,e,s){if(t==null)return t;var n=[],i=0;return yr(t,n,"","",function(r){return e.call(s,r,i++)}),n}function hg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Oe={current:null},xr={transition:null},dg={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:xr,ReactCurrentOwner:Wa};function $d(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Vi,forEach:function(t,e,s){Vi(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Vi(t,function(){e++}),e},toArray:function(t){return Vi(t,function(e){return e})||[]},only:function(t){if(!Ua(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=xn;X.Fragment=Zp;X.Profiler=tg;X.PureComponent=Ba;X.StrictMode=eg;X.Suspense=rg;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dg;X.act=$d;X.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ed({},t.props),i=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Wa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Ld.call(e,c)&&!Pd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:_i,type:t.type,key:i,ref:r,props:n,_owner:o}};X.createContext=function(t){return t={$$typeof:ng,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sg,_context:t},t.Consumer=t};X.createElement=Td;X.createFactory=function(t){var e=Td.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:ig,render:t}};X.isValidElement=Ua;X.lazy=function(t){return{$$typeof:og,_payload:{_status:-1,_result:t},_init:hg}};X.memo=function(t,e){return{$$typeof:lg,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=xr.transition;xr.transition={};try{t()}finally{xr.transition=e}};X.unstable_act=$d;X.useCallback=function(t,e){return Oe.current.useCallback(t,e)};X.useContext=function(t){return Oe.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return Oe.current.useDeferredValue(t)};X.useEffect=function(t,e){return Oe.current.useEffect(t,e)};X.useId=function(){return Oe.current.useId()};X.useImperativeHandle=function(t,e,s){return Oe.current.useImperativeHandle(t,e,s)};X.useInsertionEffect=function(t,e){return Oe.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return Oe.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return Oe.current.useMemo(t,e)};X.useReducer=function(t,e,s){return Oe.current.useReducer(t,e,s)};X.useRef=function(t){return Oe.current.useRef(t)};X.useState=function(t){return Oe.current.useState(t)};X.useSyncExternalStore=function(t,e,s){return Oe.current.useSyncExternalStore(t,e,s)};X.useTransition=function(){return Oe.current.useTransition()};X.version="18.3.1";Cd.exports=X;var x=Cd.exports;const cl=Yp(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=x,mg=Symbol.for("react.element"),pg=Symbol.for("react.fragment"),gg=Object.prototype.hasOwnProperty,vg=fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yg={key:!0,ref:!0,__self:!0,__source:!0};function zd(t,e,s){var n,i={},r=null,o=null;s!==void 0&&(r=""+s),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)gg.call(e,n)&&!yg.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:mg,type:t,key:r,ref:o,props:i,_owner:vg.current}}al.Fragment=pg;al.jsx=zd;al.jsxs=zd;jd.exports=al;var l=jd.exports,Oo={},Rd={exports:{}},Ze={},Id={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,P){var T=z.length;z.push(P);e:for(;0<T;){var H=T-1>>>1,ee=z[H];if(0<i(ee,P))z[H]=P,z[T]=ee,T=H;else break e}}function s(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var P=z[0],T=z.pop();if(T!==P){z[0]=T;e:for(var H=0,ee=z.length,Ge=ee>>>1;H<Ge;){var Me=2*(H+1)-1,Ut=z[Me],ne=Me+1,qe=z[ne];if(0>i(Ut,T))ne<ee&&0>i(qe,Ut)?(z[H]=qe,z[ne]=T,H=ne):(z[H]=Ut,z[Me]=T,H=Me);else if(ne<ee&&0>i(qe,T))z[H]=qe,z[ne]=T,H=ne;else break e}}return P}function i(z,P){var T=z.sortIndex-P.sortIndex;return T!==0?T:z.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var P=s(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=z)n(u),P.sortIndex=P.expirationTime,e(c,P);else break;P=s(u)}}function S(z){if(v=!1,w(z),!m)if(s(c)!==null)m=!0,W(C);else{var P=s(u);P!==null&&G(S,P.startTime-z)}}function C(z,P){m=!1,v&&(v=!1,y(j),j=-1),p=!0;var T=f;try{for(w(P),d=s(c);d!==null&&(!(d.expirationTime>P)||z&&!L());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var ee=H(d.expirationTime<=P);P=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===s(c)&&n(c),w(P)}else n(c);d=s(c)}if(d!==null)var Ge=!0;else{var Me=s(u);Me!==null&&G(S,Me.startTime-P),Ge=!1}return Ge}finally{d=null,f=T,p=!1}}var E=!1,N=null,j=-1,M=5,_=-1;function L(){return!(t.unstable_now()-_<M)}function O(){if(N!==null){var z=t.unstable_now();_=z;var P=!0;try{P=N(!0,z)}finally{P?$():(E=!1,N=null)}}else E=!1}var $;if(typeof g=="function")$=function(){g(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,A=V.port2;V.port1.onmessage=O,$=function(){A.postMessage(null)}}else $=function(){b(O,0)};function W(z){N=z,E||(E=!0,$())}function G(z,P){j=b(function(){z(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,W(C))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var T=f;f=P;try{return z()}finally{f=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,P){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var T=f;f=z;try{return P()}finally{f=T}},t.unstable_scheduleCallback=function(z,P,T){var H=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?H+T:H):T=H,z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=T+ee,z={id:h++,callback:P,priorityLevel:z,startTime:T,expirationTime:ee,sortIndex:-1},T>H?(z.sortIndex=T,e(u,z),s(c)===null&&z===s(u)&&(v?(y(j),j=-1):v=!0,G(S,T-H))):(z.sortIndex=ee,e(c,z),m||p||(m=!0,W(C))),z},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(z){var P=f;return function(){var T=f;f=P;try{return z.apply(this,arguments)}finally{f=T}}}})(Dd);Id.exports=Dd;var xg=Id.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg=x,Je=xg;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fd=new Set,ri={};function Is(t,e){un(t,e),un(t+"Capture",e)}function un(t,e){for(ri[t]=e,t=0;t<e.length;t++)Fd.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=Object.prototype.hasOwnProperty,Sg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uu={},hu={};function bg(t){return Vo.call(hu,t)?!0:Vo.call(uu,t)?!1:Sg.test(t)?hu[t]=!0:(uu[t]=!0,!1)}function Ng(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jg(t,e,s,n){if(e===null||typeof e>"u"||Ng(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,s,n,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_e[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_e[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_e[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_e[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_e[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_e[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_e[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_e[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_e[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ha=/[\-:]([a-z])/g;function Ka(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ha,Ka);_e[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ha,Ka);_e[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ha,Ka);_e[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_e[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_e[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ga(t,e,s,n){var i=_e.hasOwnProperty(e)?_e[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jg(e,s,i,n)&&(s=null),n||i===null?bg(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Wt=wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bi=Symbol.for("react.element"),As=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),qa=Symbol.for("react.strict_mode"),Bo=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Vd=Symbol.for("react.context"),Xa=Symbol.for("react.forward_ref"),Ao=Symbol.for("react.suspense"),Wo=Symbol.for("react.suspense_list"),Qa=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),Bd=Symbol.for("react.offscreen"),du=Symbol.iterator;function Mn(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,Bl;function Vn(t){if(Bl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Bl=e&&e[1]||""}return`
`+Bl+t}var Al=!1;function Wl(t,e){if(!t||Al)return"";Al=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Al=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Vn(t):""}function Cg(t){switch(t.tag){case 5:return Vn(t.type);case 16:return Vn("Lazy");case 13:return Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function Uo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case As:return"Portal";case Bo:return"Profiler";case qa:return"StrictMode";case Ao:return"Suspense";case Wo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Vd:return(t.displayName||"Context")+".Consumer";case Od:return(t._context.displayName||"Context")+".Provider";case Xa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qa:return e=t.displayName||null,e!==null?e:Uo(t.type)||"Memo";case qt:e=t._payload,t=t._init;try{return Uo(t(e))}catch{}}return null}function kg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uo(e);case 8:return e===qa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ad(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Eg(t){var e=Ad(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ai(t){t._valueTracker||(t._valueTracker=Eg(t))}function Wd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=Ad(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function $r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ho(t,e){var s=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function fu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=as(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ud(t,e){e=e.checked,e!=null&&Ga(t,"checked",e,!1)}function Ko(t,e){Ud(t,e);var s=as(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Go(t,e.type,s):e.hasOwnProperty("defaultValue")&&Go(t,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Go(t,e,s){(e!=="number"||$r(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Bn=Array.isArray;function sn(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+as(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(I(92));if(Bn(s)){if(1<s.length)throw Error(I(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:as(s)}}function Hd(t,e){var s=as(e.value),n=as(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function gu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wi,Gd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wi=Wi||document.createElement("div"),Wi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function li(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_g=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(t){_g.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hn[e]=Hn[t]})});function qd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Hn.hasOwnProperty(t)&&Hn[t]?(""+e).trim():e+"px"}function Xd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=qd(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var Mg=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qo(t,e){if(e){if(Mg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Yo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function Ya(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zo=null,nn=null,rn=null;function vu(t){if(t=Pi(t)){if(typeof Zo!="function")throw Error(I(280));var e=t.stateNode;e&&(e=ml(e),Zo(t.stateNode,t.type,e))}}function Qd(t){nn?rn?rn.push(t):rn=[t]:nn=t}function Yd(){if(nn){var t=nn,e=rn;if(rn=nn=null,vu(t),e)for(t=0;t<e.length;t++)vu(e[t])}}function Jd(t,e){return t(e)}function Zd(){}var Ul=!1;function ef(t,e,s){if(Ul)return t(e,s);Ul=!0;try{return Jd(t,e,s)}finally{Ul=!1,(nn!==null||rn!==null)&&(Zd(),Yd())}}function oi(t,e){var s=t.stateNode;if(s===null)return null;var n=ml(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(I(231,e,typeof s));return s}var ea=!1;if(Ft)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){ea=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{ea=!1}function Lg(t,e,s,n,i,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(h){this.onError(h)}}var Kn=!1,zr=null,Rr=!1,ta=null,Pg={onError:function(t){Kn=!0,zr=t}};function Tg(t,e,s,n,i,r,o,a,c){Kn=!1,zr=null,Lg.apply(Pg,arguments)}function $g(t,e,s,n,i,r,o,a,c){if(Tg.apply(this,arguments),Kn){if(Kn){var u=zr;Kn=!1,zr=null}else throw Error(I(198));Rr||(Rr=!0,ta=u)}}function Ds(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function tf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yu(t){if(Ds(t)!==t)throw Error(I(188))}function zg(t){var e=t.alternate;if(!e){if(e=Ds(t),e===null)throw Error(I(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===s)return yu(i),t;if(r===n)return yu(i),e;r=r.sibling}throw Error(I(188))}if(s.return!==n.return)s=i,n=r;else{for(var o=!1,a=i.child;a;){if(a===s){o=!0,s=i,n=r;break}if(a===n){o=!0,n=i,s=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===s){o=!0,s=r,n=i;break}if(a===n){o=!0,n=r,s=i;break}a=a.sibling}if(!o)throw Error(I(189))}}if(s.alternate!==n)throw Error(I(190))}if(s.tag!==3)throw Error(I(188));return s.stateNode.current===s?t:e}function sf(t){return t=zg(t),t!==null?nf(t):null}function nf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nf(t);if(e!==null)return e;t=t.sibling}return null}var rf=Je.unstable_scheduleCallback,xu=Je.unstable_cancelCallback,Rg=Je.unstable_shouldYield,Ig=Je.unstable_requestPaint,ge=Je.unstable_now,Dg=Je.unstable_getCurrentPriorityLevel,Ja=Je.unstable_ImmediatePriority,lf=Je.unstable_UserBlockingPriority,Ir=Je.unstable_NormalPriority,Fg=Je.unstable_LowPriority,of=Je.unstable_IdlePriority,ul=null,kt=null;function Og(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(ul,t,void 0,(t.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:Ag,Vg=Math.log,Bg=Math.LN2;function Ag(t){return t>>>=0,t===0?32:31-(Vg(t)/Bg|0)|0}var Ui=64,Hi=4194304;function An(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dr(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,r=t.pingedLanes,o=s&268435455;if(o!==0){var a=o&~i;a!==0?n=An(a):(r&=o,r!==0&&(n=An(r)))}else o=s&~i,o!==0?n=An(o):r!==0&&(n=An(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-pt(e),i=1<<s,n|=t[s],e&=~i;return n}function Wg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ug(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-pt(r),a=1<<o,c=i[o];c===-1?(!(a&s)||a&n)&&(i[o]=Wg(a,e)):c<=e&&(t.expiredLanes|=a),r&=~a}}function sa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function af(){var t=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),t}function Hl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Mi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pt(e),t[e]=s}function Hg(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-pt(s),r=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~r}}function Za(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-pt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var J=0;function cf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uf,ec,hf,df,ff,na=!1,Ki=[],es=null,ts=null,ss=null,ai=new Map,ci=new Map,Qt=[],Kg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(e.pointerId)}}function Pn(t,e,s,n,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Pi(e),e!==null&&ec(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Gg(t,e,s,n,i){switch(e){case"focusin":return es=Pn(es,t,e,s,n,i),!0;case"dragenter":return ts=Pn(ts,t,e,s,n,i),!0;case"mouseover":return ss=Pn(ss,t,e,s,n,i),!0;case"pointerover":var r=i.pointerId;return ai.set(r,Pn(ai.get(r)||null,t,e,s,n,i)),!0;case"gotpointercapture":return r=i.pointerId,ci.set(r,Pn(ci.get(r)||null,t,e,s,n,i)),!0}return!1}function mf(t){var e=ws(t.target);if(e!==null){var s=Ds(e);if(s!==null){if(e=s.tag,e===13){if(e=tf(s),e!==null){t.blockedOn=e,ff(t.priority,function(){hf(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=ia(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Jo=n,s.target.dispatchEvent(n),Jo=null}else return e=Pi(s),e!==null&&ec(e),t.blockedOn=s,!1;e.shift()}return!0}function Su(t,e,s){wr(t)&&s.delete(e)}function qg(){na=!1,es!==null&&wr(es)&&(es=null),ts!==null&&wr(ts)&&(ts=null),ss!==null&&wr(ss)&&(ss=null),ai.forEach(Su),ci.forEach(Su)}function Tn(t,e){t.blockedOn===e&&(t.blockedOn=null,na||(na=!0,Je.unstable_scheduleCallback(Je.unstable_NormalPriority,qg)))}function ui(t){function e(i){return Tn(i,t)}if(0<Ki.length){Tn(Ki[0],t);for(var s=1;s<Ki.length;s++){var n=Ki[s];n.blockedOn===t&&(n.blockedOn=null)}}for(es!==null&&Tn(es,t),ts!==null&&Tn(ts,t),ss!==null&&Tn(ss,t),ai.forEach(e),ci.forEach(e),s=0;s<Qt.length;s++)n=Qt[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Qt.length&&(s=Qt[0],s.blockedOn===null);)mf(s),s.blockedOn===null&&Qt.shift()}var ln=Wt.ReactCurrentBatchConfig,Fr=!0;function Xg(t,e,s,n){var i=J,r=ln.transition;ln.transition=null;try{J=1,tc(t,e,s,n)}finally{J=i,ln.transition=r}}function Qg(t,e,s,n){var i=J,r=ln.transition;ln.transition=null;try{J=4,tc(t,e,s,n)}finally{J=i,ln.transition=r}}function tc(t,e,s,n){if(Fr){var i=ia(t,e,s,n);if(i===null)to(t,e,n,Or,s),wu(t,n);else if(Gg(i,t,e,s,n))n.stopPropagation();else if(wu(t,n),e&4&&-1<Kg.indexOf(t)){for(;i!==null;){var r=Pi(i);if(r!==null&&uf(r),r=ia(t,e,s,n),r===null&&to(t,e,n,Or,s),r===i)break;i=r}i!==null&&n.stopPropagation()}else to(t,e,n,null,s)}}var Or=null;function ia(t,e,s,n){if(Or=null,t=Ya(n),t=ws(t),t!==null)if(e=Ds(t),e===null)t=null;else if(s=e.tag,s===13){if(t=tf(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Or=t,null}function pf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dg()){case Ja:return 1;case lf:return 4;case Ir:case Fg:return 16;case of:return 536870912;default:return 16}default:return 16}}var Jt=null,sc=null,Sr=null;function gf(){if(Sr)return Sr;var t,e=sc,s=e.length,n,i="value"in Jt?Jt.value:Jt.textContent,r=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===i[r-n];n++);return Sr=i.slice(t,1<n?1-n:void 0)}function br(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function bu(){return!1}function et(t){function e(s,n,i,r,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(s=t[a],this[a]=s?s(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Gi:bu,this.isPropagationStopped=bu,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),e}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=et(wn),Li=me({},wn,{view:0,detail:0}),Yg=et(Li),Kl,Gl,$n,hl=me({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$n&&($n&&t.type==="mousemove"?(Kl=t.screenX-$n.screenX,Gl=t.screenY-$n.screenY):Gl=Kl=0,$n=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:Gl}}),Nu=et(hl),Jg=me({},hl,{dataTransfer:0}),Zg=et(Jg),ev=me({},Li,{relatedTarget:0}),ql=et(ev),tv=me({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),sv=et(tv),nv=me({},wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iv=et(nv),rv=me({},wn,{data:0}),ju=et(rv),lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ov={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},av={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=av[t])?!!e[t]:!1}function ic(){return cv}var uv=me({},Li,{key:function(t){if(t.key){var e=lv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=br(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ov[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(t){return t.type==="keypress"?br(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?br(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hv=et(uv),dv=me({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=et(dv),fv=me({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),mv=et(fv),pv=me({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),gv=et(pv),vv=me({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yv=et(vv),xv=[9,13,27,32],rc=Ft&&"CompositionEvent"in window,Gn=null;Ft&&"documentMode"in document&&(Gn=document.documentMode);var wv=Ft&&"TextEvent"in window&&!Gn,vf=Ft&&(!rc||Gn&&8<Gn&&11>=Gn),ku=" ",Eu=!1;function yf(t,e){switch(t){case"keyup":return xv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function Sv(t,e){switch(t){case"compositionend":return xf(e);case"keypress":return e.which!==32?null:(Eu=!0,ku);case"textInput":return t=e.data,t===ku&&Eu?null:t;default:return null}}function bv(t,e){if(Us)return t==="compositionend"||!rc&&yf(t,e)?(t=gf(),Sr=sc=Jt=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vf&&e.locale!=="ko"?null:e.data;default:return null}}var Nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nv[t.type]:e==="textarea"}function wf(t,e,s,n){Qd(n),e=Vr(e,"onChange"),0<e.length&&(s=new nc("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var qn=null,hi=null;function jv(t){Pf(t,0)}function dl(t){var e=Gs(t);if(Wd(e))return t}function Cv(t,e){if(t==="change")return e}var Sf=!1;if(Ft){var Xl;if(Ft){var Ql="oninput"in document;if(!Ql){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),Ql=typeof Mu.oninput=="function"}Xl=Ql}else Xl=!1;Sf=Xl&&(!document.documentMode||9<document.documentMode)}function Lu(){qn&&(qn.detachEvent("onpropertychange",bf),hi=qn=null)}function bf(t){if(t.propertyName==="value"&&dl(hi)){var e=[];wf(e,hi,t,Ya(t)),ef(jv,e)}}function kv(t,e,s){t==="focusin"?(Lu(),qn=e,hi=s,qn.attachEvent("onpropertychange",bf)):t==="focusout"&&Lu()}function Ev(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(hi)}function _v(t,e){if(t==="click")return dl(e)}function Mv(t,e){if(t==="input"||t==="change")return dl(e)}function Lv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:Lv;function di(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Vo.call(e,i)||!vt(t[i],e[i]))return!1}return!0}function Pu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tu(t,e){var s=Pu(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Pu(s)}}function Nf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jf(){for(var t=window,e=$r();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=$r(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pv(t){var e=jf(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Nf(s.ownerDocument.documentElement,s)){if(n!==null&&lc(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!t.extend&&r>n&&(i=n,n=r,r=i),i=Tu(s,r);var o=Tu(s,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),r>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tv=Ft&&"documentMode"in document&&11>=document.documentMode,Hs=null,ra=null,Xn=null,la=!1;function $u(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;la||Hs==null||Hs!==$r(n)||(n=Hs,"selectionStart"in n&&lc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xn&&di(Xn,n)||(Xn=n,n=Vr(ra,"onSelect"),0<n.length&&(e=new nc("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Hs)))}function qi(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Ks={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Yl={},Cf={};Ft&&(Cf=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function fl(t){if(Yl[t])return Yl[t];if(!Ks[t])return t;var e=Ks[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Cf)return Yl[t]=e[s];return t}var kf=fl("animationend"),Ef=fl("animationiteration"),_f=fl("animationstart"),Mf=fl("transitionend"),Lf=new Map,zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){Lf.set(t,e),Is(e,[t])}for(var Jl=0;Jl<zu.length;Jl++){var Zl=zu[Jl],$v=Zl.toLowerCase(),zv=Zl[0].toUpperCase()+Zl.slice(1);hs($v,"on"+zv)}hs(kf,"onAnimationEnd");hs(Ef,"onAnimationIteration");hs(_f,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(Mf,"onTransitionEnd");un("onMouseEnter",["mouseout","mouseover"]);un("onMouseLeave",["mouseout","mouseover"]);un("onPointerEnter",["pointerout","pointerover"]);un("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wn));function Ru(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,$g(n,e,void 0,t),t.currentTarget=null}function Pf(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&i.isPropagationStopped())break e;Ru(i,a,u),r=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&i.isPropagationStopped())break e;Ru(i,a,u),r=c}}}if(Rr)throw t=ta,Rr=!1,ta=null,t}function ie(t,e){var s=e[ha];s===void 0&&(s=e[ha]=new Set);var n=t+"__bubble";s.has(n)||(Tf(e,t,2,!1),s.add(n))}function eo(t,e,s){var n=0;e&&(n|=4),Tf(s,t,n,e)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function fi(t){if(!t[Xi]){t[Xi]=!0,Fd.forEach(function(s){s!=="selectionchange"&&(Rv.has(s)||eo(s,!1,t),eo(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xi]||(e[Xi]=!0,eo("selectionchange",!1,e))}}function Tf(t,e,s,n){switch(pf(e)){case 1:var i=Xg;break;case 4:i=Qg;break;default:i=tc}s=i.bind(null,e,s,t),i=void 0,!ea||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function to(t,e,s,n,i){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ws(a),o===null)return;if(c=o.tag,c===5||c===6){n=r=o;continue e}a=a.parentNode}}n=n.return}ef(function(){var u=r,h=Ya(s),d=[];e:{var f=Lf.get(t);if(f!==void 0){var p=nc,m=t;switch(t){case"keypress":if(br(s)===0)break e;case"keydown":case"keyup":p=hv;break;case"focusin":m="focus",p=ql;break;case"focusout":m="blur",p=ql;break;case"beforeblur":case"afterblur":p=ql;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Zg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mv;break;case kf:case Ef:case _f:p=sv;break;case Mf:p=gv;break;case"scroll":p=Yg;break;case"wheel":p=yv;break;case"copy":case"cut":case"paste":p=iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cu}var v=(e&4)!==0,b=!v&&t==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,w;g!==null;){w=g;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=oi(g,y),S!=null&&v.push(mi(g,S,w)))),b)break;g=g.return}0<v.length&&(f=new p(f,m,null,s,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&s!==Jo&&(m=s.relatedTarget||s.fromElement)&&(ws(m)||m[Ot]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=s.relatedTarget||s.toElement,p=u,m=m?ws(m):null,m!==null&&(b=Ds(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Nu,S="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Cu,S="onPointerLeave",y="onPointerEnter",g="pointer"),b=p==null?f:Gs(p),w=m==null?f:Gs(m),f=new v(S,g+"leave",p,s,h),f.target=b,f.relatedTarget=w,S=null,ws(h)===u&&(v=new v(y,g+"enter",m,s,h),v.target=w,v.relatedTarget=b,S=v),b=S,p&&m)t:{for(v=p,y=m,g=0,w=v;w;w=Vs(w))g++;for(w=0,S=y;S;S=Vs(S))w++;for(;0<g-w;)v=Vs(v),g--;for(;0<w-g;)y=Vs(y),w--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Vs(v),y=Vs(y)}v=null}else v=null;p!==null&&Iu(d,f,p,v,!1),m!==null&&b!==null&&Iu(d,b,m,v,!0)}}e:{if(f=u?Gs(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Cv;else if(_u(f))if(Sf)C=Mv;else{C=Ev;var E=kv}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=_v);if(C&&(C=C(t,u))){wf(d,C,s,h);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Go(f,"number",f.value)}switch(E=u?Gs(u):window,t){case"focusin":(_u(E)||E.contentEditable==="true")&&(Hs=E,ra=u,Xn=null);break;case"focusout":Xn=ra=Hs=null;break;case"mousedown":la=!0;break;case"contextmenu":case"mouseup":case"dragend":la=!1,$u(d,s,h);break;case"selectionchange":if(Tv)break;case"keydown":case"keyup":$u(d,s,h)}var N;if(rc)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Us?yf(t,s)&&(j="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(j="onCompositionStart");j&&(vf&&s.locale!=="ko"&&(Us||j!=="onCompositionStart"?j==="onCompositionEnd"&&Us&&(N=gf()):(Jt=h,sc="value"in Jt?Jt.value:Jt.textContent,Us=!0)),E=Vr(u,j),0<E.length&&(j=new ju(j,t,null,s,h),d.push({event:j,listeners:E}),N?j.data=N:(N=xf(s),N!==null&&(j.data=N)))),(N=wv?Sv(t,s):bv(t,s))&&(u=Vr(u,"onBeforeInput"),0<u.length&&(h=new ju("onBeforeInput","beforeinput",null,s,h),d.push({event:h,listeners:u}),h.data=N))}Pf(d,e)})}function mi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Vr(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=oi(t,s),r!=null&&n.unshift(mi(t,r,i)),r=oi(t,e),r!=null&&n.push(mi(t,r,i))),t=t.return}return n}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iu(t,e,s,n,i){for(var r=e._reactName,o=[];s!==null&&s!==n;){var a=s,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,i?(c=oi(s,r),c!=null&&o.unshift(mi(s,c,a))):i||(c=oi(s,r),c!=null&&o.push(mi(s,c,a)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var Iv=/\r\n?/g,Dv=/\u0000|\uFFFD/g;function Du(t){return(typeof t=="string"?t:""+t).replace(Iv,`
`).replace(Dv,"")}function Qi(t,e,s){if(e=Du(e),Du(t)!==e&&s)throw Error(I(425))}function Br(){}var oa=null,aa=null;function ca(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ua=typeof setTimeout=="function"?setTimeout:void 0,Fv=typeof clearTimeout=="function"?clearTimeout:void 0,Fu=typeof Promise=="function"?Promise:void 0,Ov=typeof queueMicrotask=="function"?queueMicrotask:typeof Fu<"u"?function(t){return Fu.resolve(null).then(t).catch(Vv)}:ua;function Vv(t){setTimeout(function(){throw t})}function so(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),ui(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);ui(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ou(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),jt="__reactFiber$"+Sn,pi="__reactProps$"+Sn,Ot="__reactContainer$"+Sn,ha="__reactEvents$"+Sn,Bv="__reactListeners$"+Sn,Av="__reactHandles$"+Sn;function ws(t){var e=t[jt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Ot]||s[jt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Ou(t);t!==null;){if(s=t[jt])return s;t=Ou(t)}return e}t=s,s=t.parentNode}return null}function Pi(t){return t=t[jt]||t[Ot],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function ml(t){return t[pi]||null}var da=[],qs=-1;function ds(t){return{current:t}}function le(t){0>qs||(t.current=da[qs],da[qs]=null,qs--)}function se(t,e){qs++,da[qs]=t.current,t.current=e}var cs={},Re=ds(cs),We=ds(!1),ks=cs;function hn(t,e){var s=t.type.contextTypes;if(!s)return cs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in s)i[r]=e[r];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function Ar(){le(We),le(Re)}function Vu(t,e,s){if(Re.current!==cs)throw Error(I(168));se(Re,e),se(We,s)}function $f(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(I(108,kg(t)||"Unknown",i));return me({},s,n)}function Wr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,ks=Re.current,se(Re,t),se(We,We.current),!0}function Bu(t,e,s){var n=t.stateNode;if(!n)throw Error(I(169));s?(t=$f(t,e,ks),n.__reactInternalMemoizedMergedChildContext=t,le(We),le(Re),se(Re,t)):le(We),se(We,s)}var Pt=null,pl=!1,no=!1;function zf(t){Pt===null?Pt=[t]:Pt.push(t)}function Wv(t){pl=!0,zf(t)}function fs(){if(!no&&Pt!==null){no=!0;var t=0,e=J;try{var s=Pt;for(J=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Pt=null,pl=!1}catch(i){throw Pt!==null&&(Pt=Pt.slice(t+1)),rf(Ja,fs),i}finally{J=e,no=!1}}return null}var Xs=[],Qs=0,Ur=null,Hr=0,nt=[],it=0,Es=null,Tt=1,$t="";function ys(t,e){Xs[Qs++]=Hr,Xs[Qs++]=Ur,Ur=t,Hr=e}function Rf(t,e,s){nt[it++]=Tt,nt[it++]=$t,nt[it++]=Es,Es=t;var n=Tt;t=$t;var i=32-pt(n)-1;n&=~(1<<i),s+=1;var r=32-pt(e)+i;if(30<r){var o=i-i%5;r=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Tt=1<<32-pt(e)+i|s<<i|n,$t=r+t}else Tt=1<<r|s<<i|n,$t=t}function oc(t){t.return!==null&&(ys(t,1),Rf(t,1,0))}function ac(t){for(;t===Ur;)Ur=Xs[--Qs],Xs[Qs]=null,Hr=Xs[--Qs],Xs[Qs]=null;for(;t===Es;)Es=nt[--it],nt[it]=null,$t=nt[--it],nt[it]=null,Tt=nt[--it],nt[it]=null}var Ye=null,Qe=null,ce=!1,mt=null;function If(t,e){var s=rt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Au(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Qe=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Es!==null?{id:Tt,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=rt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ye=t,Qe=null,!0):!1;default:return!1}}function fa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ma(t){if(ce){var e=Qe;if(e){var s=e;if(!Au(t,e)){if(fa(t))throw Error(I(418));e=ns(s.nextSibling);var n=Ye;e&&Au(t,e)?If(n,s):(t.flags=t.flags&-4097|2,ce=!1,Ye=t)}}else{if(fa(t))throw Error(I(418));t.flags=t.flags&-4097|2,ce=!1,Ye=t}}}function Wu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function Yi(t){if(t!==Ye)return!1;if(!ce)return Wu(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ca(t.type,t.memoizedProps)),e&&(e=Qe)){if(fa(t))throw Df(),Error(I(418));for(;e;)If(t,e),e=ns(e.nextSibling)}if(Wu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Qe=ns(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Qe=null}}else Qe=Ye?ns(t.stateNode.nextSibling):null;return!0}function Df(){for(var t=Qe;t;)t=ns(t.nextSibling)}function dn(){Qe=Ye=null,ce=!1}function cc(t){mt===null?mt=[t]:mt.push(t)}var Uv=Wt.ReactCurrentBatchConfig;function zn(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(I(309));var n=s.stateNode}if(!n)throw Error(I(147,t));var i=n,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(I(284));if(!s._owner)throw Error(I(290,t))}return t}function Ji(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uu(t){var e=t._init;return e(t._payload)}function Ff(t){function e(y,g){if(t){var w=y.deletions;w===null?(y.deletions=[g],y.flags|=16):w.push(g)}}function s(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=os(y,g),y.index=0,y.sibling=null,y}function r(y,g,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<g?(y.flags|=2,g):w):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,w,S){return g===null||g.tag!==6?(g=uo(w,y.mode,S),g.return=y,g):(g=i(g,w),g.return=y,g)}function c(y,g,w,S){var C=w.type;return C===Ws?h(y,g,w.props.children,S,w.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===qt&&Uu(C)===g.type)?(S=i(g,w.props),S.ref=zn(y,g,w),S.return=y,S):(S=Mr(w.type,w.key,w.props,null,y.mode,S),S.ref=zn(y,g,w),S.return=y,S)}function u(y,g,w,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=ho(w,y.mode,S),g.return=y,g):(g=i(g,w.children||[]),g.return=y,g)}function h(y,g,w,S,C){return g===null||g.tag!==7?(g=js(w,y.mode,S,C),g.return=y,g):(g=i(g,w),g.return=y,g)}function d(y,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=uo(""+g,y.mode,w),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bi:return w=Mr(g.type,g.key,g.props,null,y.mode,w),w.ref=zn(y,null,g),w.return=y,w;case As:return g=ho(g,y.mode,w),g.return=y,g;case qt:var S=g._init;return d(y,S(g._payload),w)}if(Bn(g)||Mn(g))return g=js(g,y.mode,w,null),g.return=y,g;Ji(y,g)}return null}function f(y,g,w,S){var C=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(y,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bi:return w.key===C?c(y,g,w,S):null;case As:return w.key===C?u(y,g,w,S):null;case qt:return C=w._init,f(y,g,C(w._payload),S)}if(Bn(w)||Mn(w))return C!==null?null:h(y,g,w,S,null);Ji(y,w)}return null}function p(y,g,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,a(g,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bi:return y=y.get(S.key===null?w:S.key)||null,c(g,y,S,C);case As:return y=y.get(S.key===null?w:S.key)||null,u(g,y,S,C);case qt:var E=S._init;return p(y,g,w,E(S._payload),C)}if(Bn(S)||Mn(S))return y=y.get(w)||null,h(g,y,S,C,null);Ji(g,S)}return null}function m(y,g,w,S){for(var C=null,E=null,N=g,j=g=0,M=null;N!==null&&j<w.length;j++){N.index>j?(M=N,N=null):M=N.sibling;var _=f(y,N,w[j],S);if(_===null){N===null&&(N=M);break}t&&N&&_.alternate===null&&e(y,N),g=r(_,g,j),E===null?C=_:E.sibling=_,E=_,N=M}if(j===w.length)return s(y,N),ce&&ys(y,j),C;if(N===null){for(;j<w.length;j++)N=d(y,w[j],S),N!==null&&(g=r(N,g,j),E===null?C=N:E.sibling=N,E=N);return ce&&ys(y,j),C}for(N=n(y,N);j<w.length;j++)M=p(N,y,j,w[j],S),M!==null&&(t&&M.alternate!==null&&N.delete(M.key===null?j:M.key),g=r(M,g,j),E===null?C=M:E.sibling=M,E=M);return t&&N.forEach(function(L){return e(y,L)}),ce&&ys(y,j),C}function v(y,g,w,S){var C=Mn(w);if(typeof C!="function")throw Error(I(150));if(w=C.call(w),w==null)throw Error(I(151));for(var E=C=null,N=g,j=g=0,M=null,_=w.next();N!==null&&!_.done;j++,_=w.next()){N.index>j?(M=N,N=null):M=N.sibling;var L=f(y,N,_.value,S);if(L===null){N===null&&(N=M);break}t&&N&&L.alternate===null&&e(y,N),g=r(L,g,j),E===null?C=L:E.sibling=L,E=L,N=M}if(_.done)return s(y,N),ce&&ys(y,j),C;if(N===null){for(;!_.done;j++,_=w.next())_=d(y,_.value,S),_!==null&&(g=r(_,g,j),E===null?C=_:E.sibling=_,E=_);return ce&&ys(y,j),C}for(N=n(y,N);!_.done;j++,_=w.next())_=p(N,y,j,_.value,S),_!==null&&(t&&_.alternate!==null&&N.delete(_.key===null?j:_.key),g=r(_,g,j),E===null?C=_:E.sibling=_,E=_);return t&&N.forEach(function(O){return e(y,O)}),ce&&ys(y,j),C}function b(y,g,w,S){if(typeof w=="object"&&w!==null&&w.type===Ws&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Bi:e:{for(var C=w.key,E=g;E!==null;){if(E.key===C){if(C=w.type,C===Ws){if(E.tag===7){s(y,E.sibling),g=i(E,w.props.children),g.return=y,y=g;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===qt&&Uu(C)===E.type){s(y,E.sibling),g=i(E,w.props),g.ref=zn(y,E,w),g.return=y,y=g;break e}s(y,E);break}else e(y,E);E=E.sibling}w.type===Ws?(g=js(w.props.children,y.mode,S,w.key),g.return=y,y=g):(S=Mr(w.type,w.key,w.props,null,y.mode,S),S.ref=zn(y,g,w),S.return=y,y=S)}return o(y);case As:e:{for(E=w.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){s(y,g.sibling),g=i(g,w.children||[]),g.return=y,y=g;break e}else{s(y,g);break}else e(y,g);g=g.sibling}g=ho(w,y.mode,S),g.return=y,y=g}return o(y);case qt:return E=w._init,b(y,g,E(w._payload),S)}if(Bn(w))return m(y,g,w,S);if(Mn(w))return v(y,g,w,S);Ji(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(s(y,g.sibling),g=i(g,w),g.return=y,y=g):(s(y,g),g=uo(w,y.mode,S),g.return=y,y=g),o(y)):s(y,g)}return b}var fn=Ff(!0),Of=Ff(!1),Kr=ds(null),Gr=null,Ys=null,uc=null;function hc(){uc=Ys=Gr=null}function dc(t){var e=Kr.current;le(Kr),t._currentValue=e}function pa(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function on(t,e){Gr=t,uc=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(uc!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(Gr===null)throw Error(I(308));Ys=t,Gr.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var Ss=null;function fc(t){Ss===null?Ss=[t]:Ss.push(t)}function Vf(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,fc(e)):(s.next=i.next,i.next=s),e.interleaved=s,Vt(t,n)}function Vt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Xt=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Y&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Vt(t,s)}return i=n.interleaved,i===null?(e.next=e,fc(n)):(e.next=i.next,i.next=e),n.interleaved=e,Vt(t,s)}function Nr(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Za(t,s)}}function Hu(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};r===null?i=r=o:r=r.next=o,s=s.next}while(s!==null);r===null?i=r=e:r=r.next=e}else i=r=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function qr(t,e,s,n){var i=t.updateQueue;Xt=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,p=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(f=e,p=s,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=me({},d,f);break e;case 2:Xt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Ms|=o,t.lanes=o,t.memoizedState=d}}function Ku(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(I(191,i));i.call(n)}}}var Ti={},Et=ds(Ti),gi=ds(Ti),vi=ds(Ti);function bs(t){if(t===Ti)throw Error(I(174));return t}function pc(t,e){switch(se(vi,e),se(gi,t),se(Et,Ti),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xo(e,t)}le(Et),se(Et,e)}function mn(){le(Et),le(gi),le(vi)}function Af(t){bs(vi.current);var e=bs(Et.current),s=Xo(e,t.type);e!==s&&(se(gi,t),se(Et,s))}function gc(t){gi.current===t&&(le(Et),le(gi))}var de=ds(0);function Xr(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var io=[];function vc(){for(var t=0;t<io.length;t++)io[t]._workInProgressVersionPrimary=null;io.length=0}var jr=Wt.ReactCurrentDispatcher,ro=Wt.ReactCurrentBatchConfig,_s=0,fe=null,we=null,be=null,Qr=!1,Qn=!1,yi=0,Hv=0;function Pe(){throw Error(I(321))}function yc(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!vt(t[s],e[s]))return!1;return!0}function xc(t,e,s,n,i,r){if(_s=r,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jr.current=t===null||t.memoizedState===null?Xv:Qv,t=s(n,i),Qn){r=0;do{if(Qn=!1,yi=0,25<=r)throw Error(I(301));r+=1,be=we=null,e.updateQueue=null,jr.current=Yv,t=s(n,i)}while(Qn)}if(jr.current=Yr,e=we!==null&&we.next!==null,_s=0,be=we=fe=null,Qr=!1,e)throw Error(I(300));return t}function wc(){var t=yi!==0;return yi=0,t}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?fe.memoizedState=be=t:be=be.next=t,be}function at(){if(we===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=be===null?fe.memoizedState:be.next;if(e!==null)be=e,we=t;else{if(t===null)throw Error(I(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},be===null?fe.memoizedState=be=t:be=be.next=t}return be}function xi(t,e){return typeof e=="function"?e(t):e}function lo(t){var e=at(),s=e.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=t;var n=we,i=n.baseQueue,r=s.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}n.baseQueue=i=r,s.pending=null}if(i!==null){r=i.next,n=n.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((_s&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,fe.lanes|=h,Ms|=h}u=u.next}while(u!==null&&u!==r);c===null?o=n:c.next=a,vt(n,e.memoizedState)||(Ae=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do r=i.lane,fe.lanes|=r,Ms|=r,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function oo(t){var e=at(),s=e.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,r=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do r=t(r,o.action),o=o.next;while(o!==i);vt(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),s.lastRenderedState=r}return[r,n]}function Wf(){}function Uf(t,e){var s=fe,n=at(),i=e(),r=!vt(n.memoizedState,i);if(r&&(n.memoizedState=i,Ae=!0),n=n.queue,Sc(Gf.bind(null,s,n,t),[t]),n.getSnapshot!==e||r||be!==null&&be.memoizedState.tag&1){if(s.flags|=2048,wi(9,Kf.bind(null,s,n,i,e),void 0,null),Ne===null)throw Error(I(349));_s&30||Hf(s,e,i)}return i}function Hf(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Kf(t,e,s,n){e.value=s,e.getSnapshot=n,qf(e)&&Xf(t)}function Gf(t,e,s){return s(function(){qf(e)&&Xf(t)})}function qf(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!vt(t,s)}catch{return!0}}function Xf(t){var e=Vt(t,1);e!==null&&gt(e,t,1,-1)}function Gu(t){var e=Nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},e.queue=t,t=t.dispatch=qv.bind(null,fe,t),[e.memoizedState,t]}function wi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Qf(){return at().memoizedState}function Cr(t,e,s,n){var i=Nt();fe.flags|=t,i.memoizedState=wi(1|e,s,void 0,n===void 0?null:n)}function gl(t,e,s,n){var i=at();n=n===void 0?null:n;var r=void 0;if(we!==null){var o=we.memoizedState;if(r=o.destroy,n!==null&&yc(n,o.deps)){i.memoizedState=wi(e,s,r,n);return}}fe.flags|=t,i.memoizedState=wi(1|e,s,r,n)}function qu(t,e){return Cr(8390656,8,t,e)}function Sc(t,e){return gl(2048,8,t,e)}function Yf(t,e){return gl(4,2,t,e)}function Jf(t,e){return gl(4,4,t,e)}function Zf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function em(t,e,s){return s=s!=null?s.concat([t]):null,gl(4,4,Zf.bind(null,e,t),s)}function bc(){}function tm(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&yc(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function sm(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&yc(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function nm(t,e,s){return _s&21?(vt(s,e)||(s=af(),fe.lanes|=s,Ms|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=s)}function Kv(t,e){var s=J;J=s!==0&&4>s?s:4,t(!0);var n=ro.transition;ro.transition={};try{t(!1),e()}finally{J=s,ro.transition=n}}function im(){return at().memoizedState}function Gv(t,e,s){var n=ls(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},rm(t))lm(e,s);else if(s=Vf(t,e,s,n),s!==null){var i=De();gt(s,t,n,i),om(s,e,n)}}function qv(t,e,s){var n=ls(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(rm(t))lm(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,s);if(i.hasEagerState=!0,i.eagerState=a,vt(a,o)){var c=e.interleaved;c===null?(i.next=i,fc(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=Vf(t,e,i,n),s!==null&&(i=De(),gt(s,t,n,i),om(s,e,n))}}function rm(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function lm(t,e){Qn=Qr=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function om(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Za(t,s)}}var Yr={readContext:ot,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Xv={readContext:ot,useCallback:function(t,e){return Nt().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:qu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Cr(4194308,4,Zf.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Cr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cr(4,2,t,e)},useMemo:function(t,e){var s=Nt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Nt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gv.bind(null,fe,t),[n.memoizedState,t]},useRef:function(t){var e=Nt();return t={current:t},e.memoizedState=t},useState:Gu,useDebugValue:bc,useDeferredValue:function(t){return Nt().memoizedState=t},useTransition:function(){var t=Gu(!1),e=t[0];return t=Kv.bind(null,t[1]),Nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=fe,i=Nt();if(ce){if(s===void 0)throw Error(I(407));s=s()}else{if(s=e(),Ne===null)throw Error(I(349));_s&30||Hf(n,e,s)}i.memoizedState=s;var r={value:s,getSnapshot:e};return i.queue=r,qu(Gf.bind(null,n,r,t),[t]),n.flags|=2048,wi(9,Kf.bind(null,n,r,s,e),void 0,null),s},useId:function(){var t=Nt(),e=Ne.identifierPrefix;if(ce){var s=$t,n=Tt;s=(n&~(1<<32-pt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=yi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Hv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qv={readContext:ot,useCallback:tm,useContext:ot,useEffect:Sc,useImperativeHandle:em,useInsertionEffect:Yf,useLayoutEffect:Jf,useMemo:sm,useReducer:lo,useRef:Qf,useState:function(){return lo(xi)},useDebugValue:bc,useDeferredValue:function(t){var e=at();return nm(e,we.memoizedState,t)},useTransition:function(){var t=lo(xi)[0],e=at().memoizedState;return[t,e]},useMutableSource:Wf,useSyncExternalStore:Uf,useId:im,unstable_isNewReconciler:!1},Yv={readContext:ot,useCallback:tm,useContext:ot,useEffect:Sc,useImperativeHandle:em,useInsertionEffect:Yf,useLayoutEffect:Jf,useMemo:sm,useReducer:oo,useRef:Qf,useState:function(){return oo(xi)},useDebugValue:bc,useDeferredValue:function(t){var e=at();return we===null?e.memoizedState=t:nm(e,we.memoizedState,t)},useTransition:function(){var t=oo(xi)[0],e=at().memoizedState;return[t,e]},useMutableSource:Wf,useSyncExternalStore:Uf,useId:im,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function ga(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:me({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var vl={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=De(),i=ls(t),r=It(n,i);r.payload=e,s!=null&&(r.callback=s),e=is(t,r,i),e!==null&&(gt(e,t,i,n),Nr(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=De(),i=ls(t),r=It(n,i);r.tag=1,r.payload=e,s!=null&&(r.callback=s),e=is(t,r,i),e!==null&&(gt(e,t,i,n),Nr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=De(),n=ls(t),i=It(s,n);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,n),e!==null&&(gt(e,t,n,s),Nr(e,t,n))}};function Xu(t,e,s,n,i,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!di(s,n)||!di(i,r):!0}function am(t,e,s){var n=!1,i=cs,r=e.contextType;return typeof r=="object"&&r!==null?r=ot(r):(i=Ue(e)?ks:Re.current,n=e.contextTypes,r=(n=n!=null)?hn(t,i):cs),e=new e(s,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function Qu(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&vl.enqueueReplaceState(e,e.state,null)}function va(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},mc(t);var r=e.contextType;typeof r=="object"&&r!==null?i.context=ot(r):(r=Ue(e)?ks:Re.current,i.context=hn(t,r)),i.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(ga(t,e,r,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vl.enqueueReplaceState(i,i.state,null),qr(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pn(t,e){try{var s="",n=e;do s+=Cg(n),n=n.return;while(n);var i=s}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:i,digest:null}}function ao(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function ya(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Jv=typeof WeakMap=="function"?WeakMap:Map;function cm(t,e,s){s=It(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Zr||(Zr=!0,_a=n),ya(t,e)},s}function um(t,e,s){s=It(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){ya(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(s.callback=function(){ya(t,e),typeof n!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Yu(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Jv;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=d0.bind(null,t,e,s),e.then(t,t))}function Ju(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zu(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=It(-1,1),e.tag=2,is(s,e,1))),s.lanes|=1),t)}var Zv=Wt.ReactCurrentOwner,Ae=!1;function Ie(t,e,s,n){e.child=t===null?Of(e,null,s,n):fn(e,t.child,s,n)}function eh(t,e,s,n,i){s=s.render;var r=e.ref;return on(e,i),n=xc(t,e,s,n,r,i),s=wc(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ce&&s&&oc(e),e.flags|=1,Ie(t,e,n,i),e.child)}function th(t,e,s,n,i){if(t===null){var r=s.type;return typeof r=="function"&&!Lc(r)&&r.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=r,hm(t,e,r,n,i)):(t=Mr(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&i)){var o=r.memoizedProps;if(s=s.compare,s=s!==null?s:di,s(o,n)&&t.ref===e.ref)return Bt(t,e,i)}return e.flags|=1,t=os(r,n),t.ref=e.ref,t.return=e,e.child=t}function hm(t,e,s,n,i){if(t!==null){var r=t.memoizedProps;if(di(r,n)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=n=r,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Bt(t,e,i)}return xa(t,e,s,n,i)}function dm(t,e,s){var n=e.pendingProps,i=n.children,r=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Zs,Xe),Xe|=s;else{if(!(s&1073741824))return t=r!==null?r.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(Zs,Xe),Xe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:s,se(Zs,Xe),Xe|=n}else r!==null?(n=r.baseLanes|s,e.memoizedState=null):n=s,se(Zs,Xe),Xe|=n;return Ie(t,e,i,s),e.child}function fm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function xa(t,e,s,n,i){var r=Ue(s)?ks:Re.current;return r=hn(e,r),on(e,i),s=xc(t,e,s,n,r,i),n=wc(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ce&&n&&oc(e),e.flags|=1,Ie(t,e,s,i),e.child)}function sh(t,e,s,n,i){if(Ue(s)){var r=!0;Wr(e)}else r=!1;if(on(e,i),e.stateNode===null)kr(t,e),am(e,s,n),va(e,s,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=Ue(s)?ks:Re.current,u=hn(e,u));var h=s.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&Qu(e,o,n,u),Xt=!1;var f=e.memoizedState;o.state=f,qr(e,n,o,i),c=e.memoizedState,a!==n||f!==c||We.current||Xt?(typeof h=="function"&&(ga(e,s,h,n),c=e.memoizedState),(a=Xt||Xu(e,s,a,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Bf(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:dt(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=Ue(s)?ks:Re.current,c=hn(e,c));var p=s.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Qu(e,o,n,c),Xt=!1,f=e.memoizedState,o.state=f,qr(e,n,o,i);var m=e.memoizedState;a!==d||f!==m||We.current||Xt?(typeof p=="function"&&(ga(e,s,p,n),m=e.memoizedState),(u=Xt||Xu(e,s,u,n,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return wa(t,e,s,n,r,i)}function wa(t,e,s,n,i,r){fm(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Bu(e,s,!1),Bt(t,e,r);n=e.stateNode,Zv.current=e;var a=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=fn(e,t.child,null,r),e.child=fn(e,null,a,r)):Ie(t,e,a,r),e.memoizedState=n.state,i&&Bu(e,s,!0),e.child}function mm(t){var e=t.stateNode;e.pendingContext?Vu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vu(t,e.context,!1),pc(t,e.containerInfo)}function nh(t,e,s,n,i){return dn(),cc(i),e.flags|=256,Ie(t,e,s,n),e.child}var Sa={dehydrated:null,treeContext:null,retryLane:0};function ba(t){return{baseLanes:t,cachePool:null,transitions:null}}function pm(t,e,s){var n=e.pendingProps,i=de.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(de,i&1),t===null)return ma(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=wl(o,n,0,null),t=js(t,n,s,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=ba(s),e.memoizedState=Sa,t):Nc(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return e0(t,e,o,n,a,i,s);if(r){r=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=os(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=os(a,r):(r=js(r,o,s,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=t.child.memoizedState,o=o===null?ba(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~s,e.memoizedState=Sa,n}return r=t.child,t=r.sibling,n=os(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Nc(t,e){return e=wl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zi(t,e,s,n){return n!==null&&cc(n),fn(e,t.child,null,s),t=Nc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e0(t,e,s,n,i,r,o){if(s)return e.flags&256?(e.flags&=-257,n=ao(Error(I(422))),Zi(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=n.fallback,i=e.mode,n=wl({mode:"visible",children:n.children},i,0,null),r=js(r,i,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&fn(e,t.child,null,o),e.child.memoizedState=ba(o),e.memoizedState=Sa,r);if(!(e.mode&1))return Zi(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(I(419)),n=ao(r,n,void 0),Zi(t,e,o,n)}if(a=(o&t.childLanes)!==0,Ae||a){if(n=Ne,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Vt(t,i),gt(n,t,i,-1))}return Mc(),n=ao(Error(I(421))),Zi(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=f0.bind(null,t),i._reactRetry=e,null):(t=r.treeContext,Qe=ns(i.nextSibling),Ye=e,ce=!0,mt=null,t!==null&&(nt[it++]=Tt,nt[it++]=$t,nt[it++]=Es,Tt=t.id,$t=t.overflow,Es=e),e=Nc(e,n.children),e.flags|=4096,e)}function ih(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),pa(t.return,e,s)}function co(t,e,s,n,i){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=s,r.tailMode=i)}function gm(t,e,s){var n=e.pendingProps,i=n.revealOrder,r=n.tail;if(Ie(t,e,n.children,s),n=de.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ih(t,s,e);else if(t.tag===19)ih(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(se(de,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&Xr(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),co(e,!1,i,s,r);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xr(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}co(e,!0,s,null,r);break;case"together":co(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Ms|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,s=os(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=os(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function t0(t,e,s){switch(e.tag){case 3:mm(e),dn();break;case 5:Af(e);break;case 1:Ue(e.type)&&Wr(e);break;case 4:pc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;se(Kr,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(se(de,de.current&1),e.flags|=128,null):s&e.child.childLanes?pm(t,e,s):(se(de,de.current&1),t=Bt(t,e,s),t!==null?t.sibling:null);se(de,de.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return gm(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(de,de.current),n)break;return null;case 22:case 23:return e.lanes=0,dm(t,e,s)}return Bt(t,e,s)}var vm,Na,ym,xm;vm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Na=function(){};ym=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,bs(Et.current);var r=null;switch(s){case"input":i=Ho(t,i),n=Ho(t,n),r=[];break;case"select":i=me({},i,{value:void 0}),n=me({},n,{value:void 0}),r=[];break;case"textarea":i=qo(t,i),n=qo(t,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Br)}Qo(s,n);var o;s=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ri.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(r||(r=[]),r.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ri.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ie("scroll",t),r||a===c||(r=[])):(r=r||[]).push(u,c))}s&&(r=r||[]).push("style",s);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};xm=function(t,e,s,n){s!==n&&(e.flags|=4)};function Rn(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function s0(t,e,s){var n=e.pendingProps;switch(ac(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return Ue(e.type)&&Ar(),Te(e),null;case 3:return n=e.stateNode,mn(),le(We),le(Re),vc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Yi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(Pa(mt),mt=null))),Na(t,e),Te(e),null;case 5:gc(e);var i=bs(vi.current);if(s=e.type,t!==null&&e.stateNode!=null)ym(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(I(166));return Te(e),null}if(t=bs(Et.current),Yi(e)){n=e.stateNode,s=e.type;var r=e.memoizedProps;switch(n[jt]=e,n[pi]=r,t=(e.mode&1)!==0,s){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(i=0;i<Wn.length;i++)ie(Wn[i],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":fu(n,r),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},ie("invalid",n);break;case"textarea":pu(n,r),ie("invalid",n)}Qo(s,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&Qi(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Qi(n.textContent,a,t),i=["children",""+a]):ri.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ie("scroll",n)}switch(s){case"input":Ai(n),mu(n,r,!0);break;case"textarea":Ai(n),gu(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Br)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[jt]=e,t[pi]=n,vm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yo(s,n),s){case"dialog":ie("cancel",t),ie("close",t),i=n;break;case"iframe":case"object":case"embed":ie("load",t),i=n;break;case"video":case"audio":for(i=0;i<Wn.length;i++)ie(Wn[i],t);i=n;break;case"source":ie("error",t),i=n;break;case"img":case"image":case"link":ie("error",t),ie("load",t),i=n;break;case"details":ie("toggle",t),i=n;break;case"input":fu(t,n),i=Ho(t,n),ie("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=me({},n,{value:void 0}),ie("invalid",t);break;case"textarea":pu(t,n),i=qo(t,n),ie("invalid",t);break;default:i=n}Qo(s,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?Xd(t,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Gd(t,c)):r==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&li(t,c):typeof c=="number"&&li(t,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ri.hasOwnProperty(r)?c!=null&&r==="onScroll"&&ie("scroll",t):c!=null&&Ga(t,r,c,o))}switch(s){case"input":Ai(t),mu(t,n,!1);break;case"textarea":Ai(t),gu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+as(n.value));break;case"select":t.multiple=!!n.multiple,r=n.value,r!=null?sn(t,!!n.multiple,r,!1):n.defaultValue!=null&&sn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Br)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)xm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(I(166));if(s=bs(vi.current),bs(Et.current),Yi(e)){if(n=e.stateNode,s=e.memoizedProps,n[jt]=e,(r=n.nodeValue!==s)&&(t=Ye,t!==null))switch(t.tag){case 3:Qi(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qi(n.nodeValue,s,(t.mode&1)!==0)}r&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[jt]=e,e.stateNode=n}return Te(e),null;case 13:if(le(de),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&Qe!==null&&e.mode&1&&!(e.flags&128))Df(),dn(),e.flags|=98560,r=!1;else if(r=Yi(e),n!==null&&n.dehydrated!==null){if(t===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[jt]=e}else dn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),r=!1}else mt!==null&&(Pa(mt),mt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?Se===0&&(Se=3):Mc())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return mn(),Na(t,e),t===null&&fi(e.stateNode.containerInfo),Te(e),null;case 10:return dc(e.type._context),Te(e),null;case 17:return Ue(e.type)&&Ar(),Te(e),null;case 19:if(le(de),r=e.memoizedState,r===null)return Te(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)Rn(r,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xr(t),o!==null){for(e.flags|=128,Rn(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)r=s,t=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return se(de,de.current&1|2),e.child}t=t.sibling}r.tail!==null&&ge()>gn&&(e.flags|=128,n=!0,Rn(r,!1),e.lanes=4194304)}else{if(!n)if(t=Xr(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Rn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ce)return Te(e),null}else 2*ge()-r.renderingStartTime>gn&&s!==1073741824&&(e.flags|=128,n=!0,Rn(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(s=r.last,s!==null?s.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ge(),e.sibling=null,s=de.current,se(de,n?s&1|2:s&1),e):(Te(e),null);case 22:case 23:return _c(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Xe&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function n0(t,e){switch(ac(e),e.tag){case 1:return Ue(e.type)&&Ar(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mn(),le(We),le(Re),vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gc(e),null;case 13:if(le(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));dn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(de),null;case 4:return mn(),null;case 10:return dc(e.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var er=!1,ze=!1,i0=typeof WeakSet=="function"?WeakSet:Set,B=null;function Js(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){pe(t,e,n)}else s.current=null}function ja(t,e,s){try{s()}catch(n){pe(t,e,n)}}var rh=!1;function r0(t,e){if(oa=Fr,t=jf(),lc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==s||i!==0&&d.nodeType!==3||(a=o+i),d!==r||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===s&&++u===i&&(a=o),f===r&&++h===n&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}s=a===-1||c===-1?null:{start:a,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(aa={focusedElem:t,selectionRange:s},Fr=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:dt(e.type,v),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(S){pe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return m=rh,rh=!1,m}function Yn(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var r=i.destroy;i.destroy=void 0,r!==void 0&&ja(e,s,r)}i=i.next}while(i!==n)}}function yl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Ca(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function wm(t){var e=t.alternate;e!==null&&(t.alternate=null,wm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jt],delete e[pi],delete e[ha],delete e[Bv],delete e[Av])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sm(t){return t.tag===5||t.tag===3||t.tag===4}function lh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ka(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Br));else if(n!==4&&(t=t.child,t!==null))for(ka(t,e,s),t=t.sibling;t!==null;)ka(t,e,s),t=t.sibling}function Ea(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ea(t,e,s),t=t.sibling;t!==null;)Ea(t,e,s),t=t.sibling}var Ce=null,ft=!1;function Ht(t,e,s){for(s=s.child;s!==null;)bm(t,e,s),s=s.sibling}function bm(t,e,s){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(ul,s)}catch{}switch(s.tag){case 5:ze||Js(s,e);case 6:var n=Ce,i=ft;Ce=null,Ht(t,e,s),Ce=n,ft=i,Ce!==null&&(ft?(t=Ce,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Ce.removeChild(s.stateNode));break;case 18:Ce!==null&&(ft?(t=Ce,s=s.stateNode,t.nodeType===8?so(t.parentNode,s):t.nodeType===1&&so(t,s),ui(t)):so(Ce,s.stateNode));break;case 4:n=Ce,i=ft,Ce=s.stateNode.containerInfo,ft=!0,Ht(t,e,s),Ce=n,ft=i;break;case 0:case 11:case 14:case 15:if(!ze&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ja(s,e,o),i=i.next}while(i!==n)}Ht(t,e,s);break;case 1:if(!ze&&(Js(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(a){pe(s,e,a)}Ht(t,e,s);break;case 21:Ht(t,e,s);break;case 22:s.mode&1?(ze=(n=ze)||s.memoizedState!==null,Ht(t,e,s),ze=n):Ht(t,e,s);break;default:Ht(t,e,s)}}function oh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new i0),e.forEach(function(n){var i=m0.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function ht(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,ft=!1;break e;case 3:Ce=a.stateNode.containerInfo,ft=!0;break e;case 4:Ce=a.stateNode.containerInfo,ft=!0;break e}a=a.return}if(Ce===null)throw Error(I(160));bm(r,o,i),Ce=null,ft=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nm(e,t),e=e.sibling}function Nm(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ht(e,t),St(t),n&4){try{Yn(3,t,t.return),yl(3,t)}catch(v){pe(t,t.return,v)}try{Yn(5,t,t.return)}catch(v){pe(t,t.return,v)}}break;case 1:ht(e,t),St(t),n&512&&s!==null&&Js(s,s.return);break;case 5:if(ht(e,t),St(t),n&512&&s!==null&&Js(s,s.return),t.flags&32){var i=t.stateNode;try{li(i,"")}catch(v){pe(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var r=t.memoizedProps,o=s!==null?s.memoizedProps:r,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Ud(i,r),Yo(a,o);var u=Yo(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Xd(i,d):h==="dangerouslySetInnerHTML"?Gd(i,d):h==="children"?li(i,d):Ga(i,h,d,u)}switch(a){case"input":Ko(i,r);break;case"textarea":Hd(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?sn(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?sn(i,!!r.multiple,r.defaultValue,!0):sn(i,!!r.multiple,r.multiple?[]:"",!1))}i[pi]=r}catch(v){pe(t,t.return,v)}}break;case 6:if(ht(e,t),St(t),n&4){if(t.stateNode===null)throw Error(I(162));i=t.stateNode,r=t.memoizedProps;try{i.nodeValue=r}catch(v){pe(t,t.return,v)}}break;case 3:if(ht(e,t),St(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ui(e.containerInfo)}catch(v){pe(t,t.return,v)}break;case 4:ht(e,t),St(t);break;case 13:ht(e,t),St(t),i=t.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(kc=ge())),n&4&&oh(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(ze=(u=ze)||h,ht(e,t),ze=u):ht(e,t),St(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(B=t,h=t.child;h!==null;){for(d=B=h;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yn(4,f,f.return);break;case 1:Js(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){pe(n,s,v)}}break;case 5:Js(f,f.return);break;case 22:if(f.memoizedState!==null){ch(d);continue}}p!==null?(p.return=f,B=p):ch(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=qd("display",o))}catch(v){pe(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){pe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ht(e,t),St(t),n&4&&oh(t);break;case 21:break;default:ht(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Sm(s)){var n=s;break e}s=s.return}throw Error(I(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(li(i,""),n.flags&=-33);var r=lh(t);Ea(t,r,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=lh(t);ka(t,a,o);break;default:throw Error(I(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l0(t,e,s){B=t,jm(t)}function jm(t,e,s){for(var n=(t.mode&1)!==0;B!==null;){var i=B,r=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||er;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||ze;a=er;var u=ze;if(er=o,(ze=c)&&!u)for(B=i;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?uh(i):c!==null?(c.return=o,B=c):uh(i);for(;r!==null;)B=r,jm(r),r=r.sibling;B=i,er=a,ze=u}ah(t)}else i.subtreeFlags&8772&&r!==null?(r.return=i,B=r):ah(t)}}function ah(t){for(;B!==null;){var e=B;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||yl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ze)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:dt(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Ku(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ku(e,o,s)}break;case 5:var a=e.stateNode;if(s===null&&e.flags&4){s=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ui(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}ze||e.flags&512&&Ca(e)}catch(f){pe(e,e.return,f)}}if(e===t){B=null;break}if(s=e.sibling,s!==null){s.return=e.return,B=s;break}B=e.return}}function ch(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var s=e.sibling;if(s!==null){s.return=e.return,B=s;break}B=e.return}}function uh(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{yl(4,e)}catch(c){pe(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){pe(e,i,c)}}var r=e.return;try{Ca(e)}catch(c){pe(e,r,c)}break;case 5:var o=e.return;try{Ca(e)}catch(c){pe(e,o,c)}}}catch(c){pe(e,e.return,c)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var o0=Math.ceil,Jr=Wt.ReactCurrentDispatcher,jc=Wt.ReactCurrentOwner,lt=Wt.ReactCurrentBatchConfig,Y=0,Ne=null,xe=null,Ee=0,Xe=0,Zs=ds(0),Se=0,Si=null,Ms=0,xl=0,Cc=0,Jn=null,Be=null,kc=0,gn=1/0,Lt=null,Zr=!1,_a=null,rs=null,tr=!1,Zt=null,el=0,Zn=0,Ma=null,Er=-1,_r=0;function De(){return Y&6?ge():Er!==-1?Er:Er=ge()}function ls(t){return t.mode&1?Y&2&&Ee!==0?Ee&-Ee:Uv.transition!==null?(_r===0&&(_r=af()),_r):(t=J,t!==0||(t=window.event,t=t===void 0?16:pf(t.type)),t):1}function gt(t,e,s,n){if(50<Zn)throw Zn=0,Ma=null,Error(I(185));Mi(t,s,n),(!(Y&2)||t!==Ne)&&(t===Ne&&(!(Y&2)&&(xl|=s),Se===4&&Yt(t,Ee)),He(t,n),s===1&&Y===0&&!(e.mode&1)&&(gn=ge()+500,pl&&fs()))}function He(t,e){var s=t.callbackNode;Ug(t,e);var n=Dr(t,t===Ne?Ee:0);if(n===0)s!==null&&xu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&xu(s),e===1)t.tag===0?Wv(hh.bind(null,t)):zf(hh.bind(null,t)),Ov(function(){!(Y&6)&&fs()}),s=null;else{switch(cf(n)){case 1:s=Ja;break;case 4:s=lf;break;case 16:s=Ir;break;case 536870912:s=of;break;default:s=Ir}s=Tm(s,Cm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Cm(t,e){if(Er=-1,_r=0,Y&6)throw Error(I(327));var s=t.callbackNode;if(an()&&t.callbackNode!==s)return null;var n=Dr(t,t===Ne?Ee:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=tl(t,n);else{e=n;var i=Y;Y|=2;var r=Em();(Ne!==t||Ee!==e)&&(Lt=null,gn=ge()+500,Ns(t,e));do try{u0();break}catch(a){km(t,a)}while(!0);hc(),Jr.current=r,Y=i,xe!==null?e=0:(Ne=null,Ee=0,e=Se)}if(e!==0){if(e===2&&(i=sa(t),i!==0&&(n=i,e=La(t,i))),e===1)throw s=Si,Ns(t,0),Yt(t,n),He(t,ge()),s;if(e===6)Yt(t,n);else{if(i=t.current.alternate,!(n&30)&&!a0(i)&&(e=tl(t,n),e===2&&(r=sa(t),r!==0&&(n=r,e=La(t,r))),e===1))throw s=Si,Ns(t,0),Yt(t,n),He(t,ge()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(I(345));case 2:xs(t,Be,Lt);break;case 3:if(Yt(t,n),(n&130023424)===n&&(e=kc+500-ge(),10<e)){if(Dr(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){De(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ua(xs.bind(null,t,Be,Lt),e);break}xs(t,Be,Lt);break;case 4:if(Yt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-pt(n);r=1<<o,o=e[o],o>i&&(i=o),n&=~r}if(n=i,n=ge()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*o0(n/1960))-n,10<n){t.timeoutHandle=ua(xs.bind(null,t,Be,Lt),n);break}xs(t,Be,Lt);break;case 5:xs(t,Be,Lt);break;default:throw Error(I(329))}}}return He(t,ge()),t.callbackNode===s?Cm.bind(null,t):null}function La(t,e){var s=Jn;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),t=tl(t,e),t!==2&&(e=Be,Be=s,e!==null&&Pa(e)),t}function Pa(t){Be===null?Be=t:Be.push.apply(Be,t)}function a0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],r=i.getSnapshot;i=i.value;try{if(!vt(r(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Cc,e&=~xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-pt(e),n=1<<s;t[s]=-1,e&=~n}}function hh(t){if(Y&6)throw Error(I(327));an();var e=Dr(t,0);if(!(e&1))return He(t,ge()),null;var s=tl(t,e);if(t.tag!==0&&s===2){var n=sa(t);n!==0&&(e=n,s=La(t,n))}if(s===1)throw s=Si,Ns(t,0),Yt(t,e),He(t,ge()),s;if(s===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,Be,Lt),He(t,ge()),null}function Ec(t,e){var s=Y;Y|=1;try{return t(e)}finally{Y=s,Y===0&&(gn=ge()+500,pl&&fs())}}function Ls(t){Zt!==null&&Zt.tag===0&&!(Y&6)&&an();var e=Y;Y|=1;var s=lt.transition,n=J;try{if(lt.transition=null,J=1,t)return t()}finally{J=n,lt.transition=s,Y=e,!(Y&6)&&fs()}}function _c(){Xe=Zs.current,le(Zs)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Fv(s)),xe!==null)for(s=xe.return;s!==null;){var n=s;switch(ac(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ar();break;case 3:mn(),le(We),le(Re),vc();break;case 5:gc(n);break;case 4:mn();break;case 13:le(de);break;case 19:le(de);break;case 10:dc(n.type._context);break;case 22:case 23:_c()}s=s.return}if(Ne=t,xe=t=os(t.current,null),Ee=Xe=e,Se=0,Si=null,Cc=xl=Ms=0,Be=Jn=null,Ss!==null){for(e=0;e<Ss.length;e++)if(s=Ss[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,r=s.pending;if(r!==null){var o=r.next;r.next=i,n.next=o}s.pending=n}Ss=null}return t}function km(t,e){do{var s=xe;try{if(hc(),jr.current=Yr,Qr){for(var n=fe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qr=!1}if(_s=0,be=we=fe=null,Qn=!1,yi=0,jc.current=null,s===null||s.return===null){Se=1,Si=e,xe=null;break}e:{var r=t,o=s.return,a=s,c=e;if(e=Ee,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ju(o);if(p!==null){p.flags&=-257,Zu(p,o,a,r,e),p.mode&1&&Yu(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){Yu(r,u,e),Mc();break e}c=Error(I(426))}}else if(ce&&a.mode&1){var b=Ju(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Zu(b,o,a,r,e),cc(pn(c,a));break e}}r=c=pn(c,a),Se!==4&&(Se=2),Jn===null?Jn=[r]:Jn.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=cm(r,c,e);Hu(r,y);break e;case 1:a=c;var g=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rs===null||!rs.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=um(r,a,e);Hu(r,S);break e}}r=r.return}while(r!==null)}Mm(s)}catch(C){e=C,xe===s&&s!==null&&(xe=s=s.return);continue}break}while(!0)}function Em(){var t=Jr.current;return Jr.current=Yr,t===null?Yr:t}function Mc(){(Se===0||Se===3||Se===2)&&(Se=4),Ne===null||!(Ms&268435455)&&!(xl&268435455)||Yt(Ne,Ee)}function tl(t,e){var s=Y;Y|=2;var n=Em();(Ne!==t||Ee!==e)&&(Lt=null,Ns(t,e));do try{c0();break}catch(i){km(t,i)}while(!0);if(hc(),Y=s,Jr.current=n,xe!==null)throw Error(I(261));return Ne=null,Ee=0,Se}function c0(){for(;xe!==null;)_m(xe)}function u0(){for(;xe!==null&&!Rg();)_m(xe)}function _m(t){var e=Pm(t.alternate,t,Xe);t.memoizedProps=t.pendingProps,e===null?Mm(t):xe=e,jc.current=null}function Mm(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=n0(s,e),s!==null){s.flags&=32767,xe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,xe=null;return}}else if(s=s0(s,e,Xe),s!==null){xe=s;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Se===0&&(Se=5)}function xs(t,e,s){var n=J,i=lt.transition;try{lt.transition=null,J=1,h0(t,e,s,n)}finally{lt.transition=i,J=n}return null}function h0(t,e,s,n){do an();while(Zt!==null);if(Y&6)throw Error(I(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var r=s.lanes|s.childLanes;if(Hg(t,r),t===Ne&&(xe=Ne=null,Ee=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||tr||(tr=!0,Tm(Ir,function(){return an(),null})),r=(s.flags&15990)!==0,s.subtreeFlags&15990||r){r=lt.transition,lt.transition=null;var o=J;J=1;var a=Y;Y|=4,jc.current=null,r0(t,s),Nm(s,t),Pv(aa),Fr=!!oa,aa=oa=null,t.current=s,l0(s),Ig(),Y=a,J=o,lt.transition=r}else t.current=s;if(tr&&(tr=!1,Zt=t,el=i),r=t.pendingLanes,r===0&&(rs=null),Og(s.stateNode),He(t,ge()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Zr)throw Zr=!1,t=_a,_a=null,t;return el&1&&t.tag!==0&&an(),r=t.pendingLanes,r&1?t===Ma?Zn++:(Zn=0,Ma=t):Zn=0,fs(),null}function an(){if(Zt!==null){var t=cf(el),e=lt.transition,s=J;try{if(lt.transition=null,J=16>t?16:t,Zt===null)var n=!1;else{if(t=Zt,Zt=null,el=0,Y&6)throw Error(I(331));var i=Y;for(Y|=4,B=t.current;B!==null;){var r=B,o=r.child;if(B.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(B=u;B!==null;){var h=B;switch(h.tag){case 0:case 11:case 15:Yn(8,h,r)}var d=h.child;if(d!==null)d.return=h,B=d;else for(;B!==null;){h=B;var f=h.sibling,p=h.return;if(wm(h),h===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}B=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,B=o;else e:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Yn(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,B=y;break e}B=r.return}}var g=t.current;for(B=g;B!==null;){o=B;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,B=w;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yl(9,a)}}catch(C){pe(a,a.return,C)}if(a===o){B=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,B=S;break e}B=a.return}}if(Y=i,fs(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(ul,t)}catch{}n=!0}return n}finally{J=s,lt.transition=e}}return!1}function dh(t,e,s){e=pn(s,e),e=cm(t,e,1),t=is(t,e,1),e=De(),t!==null&&(Mi(t,1,e),He(t,e))}function pe(t,e,s){if(t.tag===3)dh(t,t,s);else for(;e!==null;){if(e.tag===3){dh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rs===null||!rs.has(n))){t=pn(s,t),t=um(e,t,1),e=is(e,t,1),t=De(),e!==null&&(Mi(e,1,t),He(e,t));break}}e=e.return}}function d0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=De(),t.pingedLanes|=t.suspendedLanes&s,Ne===t&&(Ee&s)===s&&(Se===4||Se===3&&(Ee&130023424)===Ee&&500>ge()-kc?Ns(t,0):Cc|=s),He(t,e)}function Lm(t,e){e===0&&(t.mode&1?(e=Hi,Hi<<=1,!(Hi&130023424)&&(Hi=4194304)):e=1);var s=De();t=Vt(t,e),t!==null&&(Mi(t,e,s),He(t,s))}function f0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Lm(t,s)}function m0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(e),Lm(t,s)}var Pm;Pm=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)Ae=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ae=!1,t0(t,e,s);Ae=!!(t.flags&131072)}else Ae=!1,ce&&e.flags&1048576&&Rf(e,Hr,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;kr(t,e),t=e.pendingProps;var i=hn(e,Re.current);on(e,s),i=xc(null,e,n,t,i,s);var r=wc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(n)?(r=!0,Wr(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mc(e),i.updater=vl,e.stateNode=i,i._reactInternals=e,va(e,n,t,s),e=wa(null,e,n,!0,r,s)):(e.tag=0,ce&&r&&oc(e),Ie(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(kr(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=g0(n),t=dt(n,t),i){case 0:e=xa(null,e,n,t,s);break e;case 1:e=sh(null,e,n,t,s);break e;case 11:e=eh(null,e,n,t,s);break e;case 14:e=th(null,e,n,dt(n.type,t),s);break e}throw Error(I(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dt(n,i),xa(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dt(n,i),sh(t,e,n,i,s);case 3:e:{if(mm(e),t===null)throw Error(I(387));n=e.pendingProps,r=e.memoizedState,i=r.element,Bf(t,e),qr(e,n,null,s);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=pn(Error(I(423)),e),e=nh(t,e,n,s,i);break e}else if(n!==i){i=pn(Error(I(424)),e),e=nh(t,e,n,s,i);break e}else for(Qe=ns(e.stateNode.containerInfo.firstChild),Ye=e,ce=!0,mt=null,s=Of(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(dn(),n===i){e=Bt(t,e,s);break e}Ie(t,e,n,s)}e=e.child}return e;case 5:return Af(e),t===null&&ma(e),n=e.type,i=e.pendingProps,r=t!==null?t.memoizedProps:null,o=i.children,ca(n,i)?o=null:r!==null&&ca(n,r)&&(e.flags|=32),fm(t,e),Ie(t,e,o,s),e.child;case 6:return t===null&&ma(e),null;case 13:return pm(t,e,s);case 4:return pc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=fn(e,null,n,s):Ie(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dt(n,i),eh(t,e,n,i,s);case 7:return Ie(t,e,e.pendingProps,s),e.child;case 8:return Ie(t,e,e.pendingProps.children,s),e.child;case 12:return Ie(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,se(Kr,n._currentValue),n._currentValue=o,r!==null)if(vt(r.value,o)){if(r.children===i.children&&!We.current){e=Bt(t,e,s);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=It(-1,s&-s),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=s,c=r.alternate,c!==null&&(c.lanes|=s),pa(r.return,s,e),a.lanes|=s;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=s,a=o.alternate,a!==null&&(a.lanes|=s),pa(o,s,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ie(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,on(e,s),i=ot(i),n=n(i),e.flags|=1,Ie(t,e,n,s),e.child;case 14:return n=e.type,i=dt(n,e.pendingProps),i=dt(n.type,i),th(t,e,n,i,s);case 15:return hm(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dt(n,i),kr(t,e),e.tag=1,Ue(n)?(t=!0,Wr(e)):t=!1,on(e,s),am(e,n,i),va(e,n,i,s),wa(null,e,n,!0,t,s);case 19:return gm(t,e,s);case 22:return dm(t,e,s)}throw Error(I(156,e.tag))};function Tm(t,e){return rf(t,e)}function p0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rt(t,e,s,n){return new p0(t,e,s,n)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g0(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xa)return 11;if(t===Qa)return 14}return 2}function os(t,e){var s=t.alternate;return s===null?(s=rt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Mr(t,e,s,n,i,r){var o=2;if(n=t,typeof t=="function")Lc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ws:return js(s.children,i,r,e);case qa:o=8,i|=8;break;case Bo:return t=rt(12,s,e,i|2),t.elementType=Bo,t.lanes=r,t;case Ao:return t=rt(13,s,e,i),t.elementType=Ao,t.lanes=r,t;case Wo:return t=rt(19,s,e,i),t.elementType=Wo,t.lanes=r,t;case Bd:return wl(s,i,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Od:o=10;break e;case Vd:o=9;break e;case Xa:o=11;break e;case Qa:o=14;break e;case qt:o=16,n=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=rt(o,s,e,i),e.elementType=t,e.type=n,e.lanes=r,e}function js(t,e,s,n){return t=rt(7,t,n,e),t.lanes=s,t}function wl(t,e,s,n){return t=rt(22,t,n,e),t.elementType=Bd,t.lanes=s,t.stateNode={isHidden:!1},t}function uo(t,e,s){return t=rt(6,t,null,e),t.lanes=s,t}function ho(t,e,s){return e=rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function v0(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pc(t,e,s,n,i,r,o,a,c){return t=new v0(t,e,s,a,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=rt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(r),t}function y0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function $m(t){if(!t)return cs;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var s=t.type;if(Ue(s))return $f(t,s,e)}return e}function zm(t,e,s,n,i,r,o,a,c){return t=Pc(s,n,!0,t,i,r,o,a,c),t.context=$m(null),s=t.current,n=De(),i=ls(s),r=It(n,i),r.callback=e??null,is(s,r,i),t.current.lanes=i,Mi(t,i,n),He(t,n),t}function Sl(t,e,s,n){var i=e.current,r=De(),o=ls(i);return s=$m(s),e.context===null?e.context=s:e.pendingContext=s,e=It(r,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=is(i,e,o),t!==null&&(gt(t,i,o,r),Nr(t,i,o)),o}function sl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Tc(t,e){fh(t,e),(t=t.alternate)&&fh(t,e)}function x0(){return null}var Rm=typeof reportError=="function"?reportError:function(t){console.error(t)};function $c(t){this._internalRoot=t}bl.prototype.render=$c.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));Sl(t,e,null,null)};bl.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){Sl(null,t,null,null)}),e[Ot]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=df();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Qt.length&&e!==0&&e<Qt[s].priority;s++);Qt.splice(s,0,t),s===0&&mf(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mh(){}function w0(t,e,s,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=sl(o);r.call(u)}}var o=zm(e,n,t,0,null,!1,!1,"",mh);return t._reactRootContainer=o,t[Ot]=o.current,fi(t.nodeType===8?t.parentNode:t),Ls(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=sl(c);a.call(u)}}var c=Pc(t,0,!1,null,null,!1,!1,"",mh);return t._reactRootContainer=c,t[Ot]=c.current,fi(t.nodeType===8?t.parentNode:t),Ls(function(){Sl(e,c,s,n)}),c}function jl(t,e,s,n,i){var r=s._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var c=sl(o);a.call(c)}}Sl(e,o,t,i)}else o=w0(s,e,t,i,n);return sl(o)}uf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=An(e.pendingLanes);s!==0&&(Za(e,s|1),He(e,ge()),!(Y&6)&&(gn=ge()+500,fs()))}break;case 13:Ls(function(){var n=Vt(t,1);if(n!==null){var i=De();gt(n,t,1,i)}}),Tc(t,1)}};ec=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var s=De();gt(e,t,134217728,s)}Tc(t,134217728)}};hf=function(t){if(t.tag===13){var e=ls(t),s=Vt(t,e);if(s!==null){var n=De();gt(s,t,e,n)}Tc(t,e)}};df=function(){return J};ff=function(t,e){var s=J;try{return J=t,e()}finally{J=s}};Zo=function(t,e,s){switch(e){case"input":if(Ko(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=ml(n);if(!i)throw Error(I(90));Wd(n),Ko(n,i)}}}break;case"textarea":Hd(t,s);break;case"select":e=s.value,e!=null&&sn(t,!!s.multiple,e,!1)}};Jd=Ec;Zd=Ls;var S0={usingClientEntryPoint:!1,Events:[Pi,Gs,ml,Qd,Yd,Ec]},In={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b0={bundleType:In.bundleType,version:In.version,rendererPackageName:In.rendererPackageName,rendererConfig:In.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sf(t),t===null?null:t.stateNode},findFiberByHostInstance:In.findFiberByHostInstance||x0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sr.isDisabled&&sr.supportsFiber)try{ul=sr.inject(b0),kt=sr}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0;Ze.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(e))throw Error(I(200));return y0(t,e,null,s)};Ze.createRoot=function(t,e){if(!zc(t))throw Error(I(299));var s=!1,n="",i=Rm;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pc(t,1,!1,null,null,s,!1,n,i),t[Ot]=e.current,fi(t.nodeType===8?t.parentNode:t),new $c(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=sf(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Ls(t)};Ze.hydrate=function(t,e,s){if(!Nl(e))throw Error(I(200));return jl(null,t,e,!0,s)};Ze.hydrateRoot=function(t,e,s){if(!zc(t))throw Error(I(405));var n=s!=null&&s.hydratedSources||null,i=!1,r="",o=Rm;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=zm(e,null,t,1,s??null,i,!1,r,o),t[Ot]=e.current,fi(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new bl(e)};Ze.render=function(t,e,s){if(!Nl(e))throw Error(I(200));return jl(null,t,e,!1,s)};Ze.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(I(40));return t._reactRootContainer?(Ls(function(){jl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ot]=null})}),!0):!1};Ze.unstable_batchedUpdates=Ec;Ze.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Nl(s))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return jl(t,e,s,!1,n)};Ze.version="18.3.1-next-f1338f8080-20240426";function Im(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Im)}catch(t){console.error(t)}}Im(),Rd.exports=Ze;var N0=Rd.exports,ph=N0;Oo.createRoot=ph.createRoot,Oo.hydrateRoot=ph.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gh="popstate";function j0(t={}){function e(n,i){let{pathname:r,search:o,hash:a}=n.location;return Ta("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:bi(i)}return k0(e,s,null,t)}function ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ct(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C0(){return Math.random().toString(36).substring(2,10)}function vh(t,e){return{usr:t.state,key:t.key,idx:e}}function Ta(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bn(e):e,state:s,key:e&&e.key||n||C0()}}function bi({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function bn(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function k0(t,e,s,n={}){let{window:i=document.defaultView,v5Compat:r=!1}=n,o=i.history,a="POP",c=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function d(){a="POP";let b=h(),y=b==null?null:b-u;u=b,c&&c({action:a,location:v.location,delta:y})}function f(b,y){a="PUSH";let g=Ta(v.location,b,y);u=h()+1;let w=vh(g,u),S=v.createHref(g);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(S)}r&&c&&c({action:a,location:v.location,delta:1})}function p(b,y){a="REPLACE";let g=Ta(v.location,b,y);u=h();let w=vh(g,u),S=v.createHref(g);o.replaceState(w,"",S),r&&c&&c({action:a,location:v.location,delta:0})}function m(b){return E0(b)}let v={get action(){return a},get location(){return t(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gh,d),c=b,()=>{i.removeEventListener(gh,d),c=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}function E0(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ue(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:bi(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function Dm(t,e,s="/"){return _0(t,e,s,!1)}function _0(t,e,s,n){let i=typeof e=="string"?bn(e):e,r=At(i.pathname||"/",s);if(r==null)return null;let o=Fm(t);M0(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=V0(r);a=F0(o[c],u,n)}return a}function Fm(t,e=[],s=[],n="",i=!1){let r=(o,a,c=i,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;ue(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=Dt([n,h.relativePath]),f=s.concat(h);o.children&&o.children.length>0&&(ue(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Fm(o.children,e,f,d,c)),!(o.path==null&&!o.index)&&e.push({path:d,score:I0(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,a);else for(let u of Om(o.path))r(o,a,!0,u)}),e}function Om(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),r=s.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let o=Om(n.join("/")),a=[];return a.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function M0(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:D0(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var L0=/^:[\w-]+$/,P0=3,T0=2,$0=1,z0=10,R0=-2,yh=t=>t==="*";function I0(t,e){let s=t.split("/"),n=s.length;return s.some(yh)&&(n+=R0),e&&(n+=T0),s.filter(i=>!yh(i)).reduce((i,r)=>i+(L0.test(r)?P0:r===""?$0:z0),n)}function D0(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function F0(t,e,s=!1){let{routesMeta:n}=t,i={},r="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],u=a===n.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=nl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&s&&!n[n.length-1].route.index&&(d=nl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Dt([r,d.pathname]),pathnameBase:U0(Dt([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Dt([r,d.pathnameBase]))}return o}function nl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=O0(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:d},f)=>{if(h==="*"){let m=a[f]||"";o=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:t}}function O0(t,e=!1,s=!0){ct(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function V0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ct(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function At(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}var Vm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B0=t=>Vm.test(t);function A0(t,e="/"){let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?bn(t):t,r;if(s)if(B0(s))r=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),ct(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${s}`)}s.startsWith("/")?r=xh(s.substring(1),"/"):r=xh(s,e)}else r=e;return{pathname:r,search:H0(n),hash:K0(i)}}function xh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function fo(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W0(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Rc(t){let e=W0(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function Ic(t,e,s,n=!1){let i;typeof t=="string"?i=bn(t):(i={...t},ue(!i.pathname||!i.pathname.includes("?"),fo("?","pathname","search",i)),ue(!i.pathname||!i.pathname.includes("#"),fo("#","pathname","hash",i)),ue(!i.search||!i.search.includes("#"),fo("#","search","hash",i)));let r=t===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=s;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=A0(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Dt=t=>t.join("/").replace(/\/\/+/g,"/"),U0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,G0=class{constructor(t,e,s,n=!1){this.status=t,this.statusText=e||"",this.internal=n,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function q0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function X0(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Bm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Am(t,e){let s=t;if(typeof s!="string"||!Vm.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let n=s,i=!1;if(Bm)try{let r=new URL(window.location.href),o=s.startsWith("//")?new URL(r.protocol+s):new URL(s),a=At(o.pathname,e);o.origin===r.origin&&a!=null?s=a+o.search+o.hash:i=!0}catch{ct(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Wm=["POST","PUT","PATCH","DELETE"];new Set(Wm);var Q0=["GET",...Wm];new Set(Q0);var Nn=x.createContext(null);Nn.displayName="DataRouter";var Cl=x.createContext(null);Cl.displayName="DataRouterState";var Y0=x.createContext(!1),Um=x.createContext({isTransitioning:!1});Um.displayName="ViewTransition";var J0=x.createContext(new Map);J0.displayName="Fetchers";var Z0=x.createContext(null);Z0.displayName="Await";var tt=x.createContext(null);tt.displayName="Navigation";var $i=x.createContext(null);$i.displayName="Location";var _t=x.createContext({outlet:null,matches:[],isDataRoute:!1});_t.displayName="Route";var Dc=x.createContext(null);Dc.displayName="RouteError";var Hm="REACT_ROUTER_ERROR",ey="REDIRECT",ty="ROUTE_ERROR_RESPONSE";function sy(t){if(t.startsWith(`${Hm}:${ey}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ny(t){if(t.startsWith(`${Hm}:${ty}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new G0(e.status,e.statusText,e.data)}catch{}}function iy(t,{relative:e}={}){ue(jn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=x.useContext(tt),{hash:i,pathname:r,search:o}=zi(t,{relative:e}),a=r;return s!=="/"&&(a=r==="/"?s:Dt([s,r])),n.createHref({pathname:a,search:o,hash:i})}function jn(){return x.useContext($i)!=null}function ms(){return ue(jn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext($i).location}var Km="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gm(t){x.useContext(tt).static||x.useLayoutEffect(t)}function Cn(){let{isDataRoute:t}=x.useContext(_t);return t?vy():ry()}function ry(){ue(jn(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Nn),{basename:e,navigator:s}=x.useContext(tt),{matches:n}=x.useContext(_t),{pathname:i}=ms(),r=JSON.stringify(Rc(n)),o=x.useRef(!1);return Gm(()=>{o.current=!0}),x.useCallback((c,u={})=>{if(ct(o.current,Km),!o.current)return;if(typeof c=="number"){s.go(c);return}let h=Ic(c,JSON.parse(r),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Dt([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,r,i,t])}x.createContext(null);function zi(t,{relative:e}={}){let{matches:s}=x.useContext(_t),{pathname:n}=ms(),i=JSON.stringify(Rc(s));return x.useMemo(()=>Ic(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function ly(t,e){return qm(t,e)}function qm(t,e,s,n,i){var g;ue(jn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=x.useContext(tt),{matches:o}=x.useContext(_t),a=o[o.length-1],c=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";Qm(u,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=ms(),p;if(e){let w=typeof e=="string"?bn(e):e;ue(h==="/"||((g=w.pathname)==null?void 0:g.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=f;let m=p.pathname||"/",v=m;if(h!=="/"){let w=h.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=Dm(t,{pathname:v});ct(d||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ct(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=hy(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Dt([h,r.encodeLocation?r.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Dt([h,r.encodeLocation?r.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,s,n,i);return e&&y?x.createElement($i.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function oy(){let t=gy(),e=q0(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:r},"ErrorBoundary")," or"," ",x.createElement("code",{style:r},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),s?x.createElement("pre",{style:i},s):null,o)}var ay=x.createElement(oy,null),Xm=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=ny(t.digest);s&&(t=s)}let e=t!==void 0?x.createElement(_t.Provider,{value:this.props.routeContext},x.createElement(Dc.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?x.createElement(cy,{error:t},e):e}};Xm.contextType=Y0;var mo=new WeakMap;function cy({children:t,error:e}){let{basename:s}=x.useContext(tt);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=sy(e.digest);if(n){let i=mo.get(e);if(i)throw i;let r=Am(n.location,s);if(Bm&&!mo.get(e))if(r.isExternal||n.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:n.replace}));throw mo.set(e,o),o}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return t}function uy({routeContext:t,match:e,children:s}){let n=x.useContext(Nn);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(_t.Provider,{value:t},s)}function hy(t,e=[],s=null,n=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,o=s==null?void 0:s.errors;if(o!=null){let h=r.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);ue(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let a=!1,c=-1;if(s)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:p}=s,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){a=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let u=s&&n?(h,d)=>{var f,p;n(h,{location:s.location,params:((p=(f=s.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:X0(s.matches),errorInfo:d})}:void 0;return r.reduceRight((h,d,f)=>{let p,m=!1,v=null,b=null;s&&(p=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||ay,a&&(c<0&&f===0?(Qm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):c===f&&(m=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(r.slice(0,f+1)),g=()=>{let w;return p?w=v:m?w=b:d.route.Component?w=x.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,x.createElement(uy,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:s!=null},children:w})};return s&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(Xm,{location:s.location,revalidation:s.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:u}):g()},null)}function Fc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dy(t){let e=x.useContext(Nn);return ue(e,Fc(t)),e}function fy(t){let e=x.useContext(Cl);return ue(e,Fc(t)),e}function my(t){let e=x.useContext(_t);return ue(e,Fc(t)),e}function Oc(t){let e=my(t),s=e.matches[e.matches.length-1];return ue(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function py(){return Oc("useRouteId")}function gy(){var n;let t=x.useContext(Dc),e=fy("useRouteError"),s=Oc("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function vy(){let{router:t}=dy("useNavigate"),e=Oc("useNavigate"),s=x.useRef(!1);return Gm(()=>{s.current=!0}),x.useCallback(async(i,r={})=>{ct(s.current,Km),s.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...r}))},[t,e])}var wh={};function Qm(t,e,s){!e&&!wh[t]&&(wh[t]=!0,ct(!1,s))}x.memo(yy);function yy({routes:t,future:e,state:s,onError:n}){return qm(t,void 0,s,n,e)}function Vc({to:t,replace:e,state:s,relative:n}){ue(jn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(tt);ct(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=x.useContext(_t),{pathname:o}=ms(),a=Cn(),c=Ic(t,Rc(r),o,n==="path"),u=JSON.stringify(c);return x.useEffect(()=>{a(JSON.parse(u),{replace:e,state:s,relative:n})},[a,u,n,e,s]),null}function Un(t){ue(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xy({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:i,static:r=!1,unstable_useTransitions:o}){ue(!jn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:a,navigator:i,static:r,unstable_useTransitions:o,future:{}}),[a,i,r,o]);typeof s=="string"&&(s=bn(s));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=s,m=x.useMemo(()=>{let v=At(u,a);return v==null?null:{location:{pathname:v,search:h,hash:d,state:f,key:p},navigationType:n}},[a,u,h,d,f,p,n]);return ct(m!=null,`<Router basename="${a}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:x.createElement(tt.Provider,{value:c},x.createElement($i.Provider,{children:e,value:m}))}function wy({children:t,location:e}){return ly($a(t),e)}function $a(t,e=[]){let s=[];return x.Children.forEach(t,(n,i)=>{if(!x.isValidElement(n))return;let r=[...e,i];if(n.type===x.Fragment){s.push.apply(s,$a(n.props.children,r));return}ue(n.type===Un,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ue(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$a(n.props.children,r)),s.push(o)}),s}var Lr="get",Pr="application/x-www-form-urlencoded";function kl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Sy(t){return kl(t)&&t.tagName.toLowerCase()==="button"}function by(t){return kl(t)&&t.tagName.toLowerCase()==="form"}function Ny(t){return kl(t)&&t.tagName.toLowerCase()==="input"}function jy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cy(t,e){return t.button===0&&(!e||e==="_self")&&!jy(t)}var nr=null;function ky(){if(nr===null)try{new FormData(document.createElement("form"),0),nr=!1}catch{nr=!0}return nr}var Ey=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function po(t){return t!=null&&!Ey.has(t)?(ct(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pr}"`),null):t}function _y(t,e){let s,n,i,r,o;if(by(t)){let a=t.getAttribute("action");n=a?At(a,e):null,s=t.getAttribute("method")||Lr,i=po(t.getAttribute("enctype"))||Pr,r=new FormData(t)}else if(Sy(t)||Ny(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(n=c?At(c,e):null,s=t.getAttribute("formmethod")||a.getAttribute("method")||Lr,i=po(t.getAttribute("formenctype"))||po(a.getAttribute("enctype"))||Pr,r=new FormData(a,t),!ky()){let{name:u,type:h,value:d}=t;if(h==="image"){let f=u?`${u}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else u&&r.append(u,d)}}else{if(kl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Lr,n=null,i=Pr,o=t}return r&&i==="text/plain"&&(o=r,r=void 0),{action:n,method:s.toLowerCase(),encType:i,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function My(t,e,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${s}`:e&&At(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function Ly(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Py(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ty(t,e,s){let n=await Promise.all(t.map(async i=>{let r=e.routes[i.route.id];if(r){let o=await Ly(r,s);return o.links?o.links():[]}return[]}));return Iy(n.flat(1).filter(Py).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Sh(t,e,s,n,i,r){let o=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,a=(c,u)=>{var h;return s[u].pathname!==c.pathname||((h=s[u].route.path)==null?void 0:h.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return r==="assets"?e.filter((c,u)=>o(c,u)||a(c,u)):r==="data"?e.filter((c,u)=>{var d;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=s[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function $y(t,e,{includeHydrateFallback:s}={}){return zy(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function zy(t){return[...new Set(t)]}function Ry(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function Iy(t,e){let s=new Set;return new Set(e),t.reduce((n,i)=>{let r=JSON.stringify(Ry(i));return s.has(r)||(s.add(r),n.push({key:r,link:i})),n},[])}function Ym(){let t=x.useContext(Nn);return Bc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Dy(){let t=x.useContext(Cl);return Bc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ac=x.createContext(void 0);Ac.displayName="FrameworkContext";function Jm(){let t=x.useContext(Ac);return Bc(t,"You must render this element inside a <HydratedRouter> element"),t}function Fy(t,e){let s=x.useContext(Ac),[n,i]=x.useState(!1),[r,o]=x.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,f=x.useRef(null);x.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=y=>{y.forEach(g=>{o(g.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),x.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return s?t!=="intent"?[r,f,{}]:[r,f,{onFocus:Dn(a,p),onBlur:Dn(c,m),onMouseEnter:Dn(u,p),onMouseLeave:Dn(h,m),onTouchStart:Dn(d,p)}]:[!1,f,{}]}function Dn(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function Oy({page:t,...e}){let{router:s}=Ym(),n=x.useMemo(()=>Dm(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?x.createElement(By,{page:t,matches:n,...e}):null}function Vy(t){let{manifest:e,routeModules:s}=Jm(),[n,i]=x.useState([]);return x.useEffect(()=>{let r=!1;return Ty(t,e,s).then(o=>{r||i(o)}),()=>{r=!0}},[t,e,s]),n}function By({page:t,matches:e,...s}){let n=ms(),{manifest:i,routeModules:r}=Jm(),{basename:o}=Ym(),{loaderData:a,matches:c}=Dy(),u=x.useMemo(()=>Sh(t,e,c,i,n,"data"),[t,e,c,i,n]),h=x.useMemo(()=>Sh(t,e,c,i,n,"assets"),[t,e,c,i,n]),d=x.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,v=!1;if(e.forEach(y=>{var w;let g=i.routes[y.route.id];!g||!g.hasLoader||(!u.some(S=>S.route.id===y.route.id)&&y.route.id in a&&((w=r[y.route.id])!=null&&w.shouldRevalidate)||g.hasClientLoader?v=!0:m.add(y.route.id))}),m.size===0)return[];let b=My(t,o,"data");return v&&m.size>0&&b.searchParams.set("_routes",e.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,a,n,i,u,e,t,r]),f=x.useMemo(()=>$y(h,i),[h,i]),p=Vy(h);return x.createElement(x.Fragment,null,d.map(m=>x.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...s})),f.map(m=>x.createElement("link",{key:m,rel:"modulepreload",href:m,...s})),p.map(({key:m,link:v})=>x.createElement("link",{key:m,nonce:s.nonce,...v})))}function Ay(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wy&&(window.__reactRouterVersion="7.11.0")}catch{}function Uy({basename:t,children:e,unstable_useTransitions:s,window:n}){let i=x.useRef();i.current==null&&(i.current=j0({window:n,v5Compat:!0}));let r=i.current,[o,a]=x.useState({action:r.action,location:r.location}),c=x.useCallback(u=>{s===!1?a(u):x.startTransition(()=>a(u))},[s]);return x.useLayoutEffect(()=>r.listen(c),[r,c]),x.createElement(xy,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r,unstable_useTransitions:s})}var Zm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,El=x.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:i,reloadDocument:r,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m){let{basename:v,unstable_useTransitions:b}=x.useContext(tt),y=typeof u=="string"&&Zm.test(u),g=Am(u,v);u=g.to;let w=iy(u,{relative:i}),[S,C,E]=Fy(n,p),N=qy(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:b});function j(_){e&&e(_),_.defaultPrevented||N(_)}let M=x.createElement("a",{...p,...E,href:g.absoluteURL||w,onClick:g.isExternal||r?e:j,ref:Ay(m,C),target:c,"data-discover":!y&&s==="render"?"true":void 0});return S&&!y?x.createElement(x.Fragment,null,M,x.createElement(Oy,{page:w})):M});El.displayName="Link";var Hy=x.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:i=!1,style:r,to:o,viewTransition:a,children:c,...u},h){let d=zi(o,{relative:u.relative}),f=ms(),p=x.useContext(Cl),{navigator:m,basename:v}=x.useContext(tt),b=p!=null&&Zy(d)&&a===!0,y=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,g=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(g=g.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&v&&(w=At(w,v)||w);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=g===y||!i&&g.startsWith(y)&&g.charAt(S)==="/",E=w!=null&&(w===y||!i&&w.startsWith(y)&&w.charAt(y.length)==="/"),N={isActive:C,isPending:E,isTransitioning:b},j=C?e:void 0,M;typeof n=="function"?M=n(N):M=[n,C?"active":null,E?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof r=="function"?r(N):r;return x.createElement(El,{...u,"aria-current":j,className:M,ref:h,style:_,to:o,viewTransition:a},typeof c=="function"?c(N):c)});Hy.displayName="NavLink";var Ky=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:i,state:r,method:o=Lr,action:a,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m)=>{let{unstable_useTransitions:v}=x.useContext(tt),b=Yy(),y=Jy(a,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&Zm.test(a),S=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let E=C.nativeEvent.submitter,N=(E==null?void 0:E.getAttribute("formmethod"))||o,j=()=>b(E||C.currentTarget,{fetcherKey:e,method:N,navigate:s,replace:i,state:r,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:f});v&&s!==!1?x.startTransition(()=>j()):j()};return x.createElement("form",{ref:m,method:g,action:y,onSubmit:n?c:S,...p,"data-discover":!w&&t==="render"?"true":void 0})});Ky.displayName="Form";function Gy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ep(t){let e=x.useContext(Nn);return ue(e,Gy(t)),e}function qy(t,{target:e,replace:s,state:n,preventScrollReset:i,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:c}={}){let u=Cn(),h=ms(),d=zi(t,{relative:r});return x.useCallback(f=>{if(Cy(f,e)){f.preventDefault();let p=s!==void 0?s:bi(h)===bi(d),m=()=>u(t,{replace:p,state:n,preventScrollReset:i,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:a});c?x.startTransition(()=>m()):m()}},[h,u,d,s,n,e,t,i,r,o,a,c])}var Xy=0,Qy=()=>`__${String(++Xy)}__`;function Yy(){let{router:t}=ep("useSubmit"),{basename:e}=x.useContext(tt),s=py(),n=t.fetch,i=t.navigate;return x.useCallback(async(r,o={})=>{let{action:a,method:c,encType:u,formData:h,body:d}=_y(r,e);if(o.navigate===!1){let f=o.fetcherKey||Qy();await n(f,s,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:d,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:d,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,i,e,s])}function Jy(t,{relative:e}={}){let{basename:s}=x.useContext(tt),n=x.useContext(_t);ue(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),r={...zi(t||".",{relative:e})},o=ms();if(t==null){r.search=o.search;let a=new URLSearchParams(r.search),c=a.getAll("index");if(c.some(h=>h==="")){a.delete("index"),c.filter(d=>d).forEach(d=>a.append("index",d));let h=a.toString();r.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(r.pathname=r.pathname==="/"?s:Dt([s,r.pathname])),bi(r)}function Zy(t,{relative:e}={}){let s=x.useContext(Um);ue(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ep("useViewTransitionState"),i=zi(t,{relative:e});if(!s.isTransitioning)return!1;let r=At(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=At(s.nextLocation.pathname,n)||s.nextLocation.pathname;return nl(i.pathname,o)!=null||nl(i.pathname,r)!=null}const tp=x.createContext(),Kt={DARK:"dark",LIGHT:"light",GLASS:"glass"};function ex({children:t}){const[e,s]=x.useState(()=>{const o=localStorage.getItem("theme");return Object.values(Kt).includes(o)?o:Kt.DARK}),n=async o=>{var a;if(Object.values(Kt).includes(o)){s(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o);const c=localStorage.getItem("access_token");if(c)try{const d=((a=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${c}`}})).json()).profile)==null?void 0:a.preferences)||{};await fetch("/profile/me",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({preferences:{...d,theme:o}})})}catch(u){console.error("Failed to sync theme to backend:",u)}}},i=async()=>{var a,c;const o=localStorage.getItem("access_token");if(o)try{const d=(c=(a=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${o}`}})).json()).profile)==null?void 0:a.preferences)==null?void 0:c.theme;d&&Object.values(Kt).includes(d)&&d!==e&&(s(d),localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d))}catch(u){console.error("Failed to fetch user theme:",u)}};x.useEffect(()=>{i()},[]),x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),x.useEffect(()=>{const o=a=>{a.key==="theme"&&Object.values(Kt).includes(a.newValue)&&s(a.newValue)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[]);const r={theme:e,setTheme:n,syncThemeWithBackend:i,isDark:e===Kt.DARK,isLight:e===Kt.LIGHT,isGlass:e===Kt.GLASS};return l.jsx(tp.Provider,{value:r,children:t})}function sp(){const t=x.useContext(tp);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const np=x.createContext(null);function tx({children:t}){const[e,s]=x.useState([]),n=x.useCallback((u,h="info",d=5e3)=>{const f=Date.now()+Math.random(),p={id:f,message:u,type:h,duration:d};return s(m=>[...m,p]),d>0&&setTimeout(()=>{s(m=>m.filter(v=>v.id!==f))},d),f},[]),i=x.useCallback(u=>{s(h=>h.filter(d=>d.id!==u))},[]),r=x.useCallback(u=>n(u,"error",6e3),[n]),o=x.useCallback(u=>n(u,"success",4e3),[n]),a=x.useCallback(u=>n(u,"info",4e3),[n]),c=x.useCallback(u=>n(u,"warning",5e3),[n]);return l.jsxs(np.Provider,{value:{toasts:e,addToast:n,removeToast:i,showError:r,showSuccess:o,showInfo:a,showWarning:c},children:[t,l.jsx(sx,{toasts:e,removeToast:i})]})}function sx({toasts:t,removeToast:e}){return t.length===0?null:l.jsx("div",{className:"toast-container",children:t.map(s=>l.jsxs("div",{className:`toast toast-${s.type}`,children:[l.jsxs("div",{className:"toast-icon",children:[s.type==="error"&&"",s.type==="success"&&"",s.type==="warning"&&"",s.type==="info"&&""]}),l.jsx("div",{className:"toast-message",children:s.message}),l.jsx("button",{className:"toast-close",onClick:()=>e(s.id),children:""})]},s.id))})}function nx(){const t=x.useContext(np);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const ip=x.createContext(),rp=()=>{const t=x.useContext(ip);if(!t)throw new Error("useLoading must be used within LoadingProvider");return t},ix=({children:t})=>{const[e,s]=x.useState(!1),[n,i]=x.useState(""),r=(a="Loading...")=>{i(a),s(!0)},o=()=>{s(!1),i("")};return l.jsx(ip.Provider,{value:{isLoading:e,loadingMessage:n,showLoading:r,hideLoading:o},children:t})},rx=()=>{const{isLoading:t,loadingMessage:e}=rp();return t?l.jsxs("div",{className:"loading-overlay",children:[l.jsx("div",{className:"loading-backdrop"}),l.jsxs("div",{className:"loading-content",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{className:"loading-message",children:e})]})]}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ox=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),bh=t=>{const e=ox(t);return e.charAt(0).toUpperCase()+e.slice(1)},lp=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),ax=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...a},c)=>x.createElement("svg",{ref:c,...cx,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:lp("lucide",i),...!r&&!ax(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,h])=>x.createElement(u,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=(t,e)=>{const s=x.forwardRef(({className:n,...i},r)=>x.createElement(ux,{ref:r,iconNode:e,className:lp(`lucide-${lx(bh(t))}`,`lucide-${t}`,n),...i}));return s.displayName=bh(t),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dx=Fs("activity",hx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],mx=Fs("chart-line",fx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gx=Fs("chevron-right",px);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],yx=Fs("layout-dashboard",vx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wx=Fs("settings",xx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bx=Fs("star",Sx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jx=Fs("trending-up",Nx),Cx=[{id:"dashboard",label:"Dashboard",icon:yx,subsections:[]},{id:"trading",label:"Trading",icon:jx,subsections:[]},{id:"market",label:"Market Data",icon:mx,subsections:[{id:"gainers",label:"Top Gainers"},{id:"losers",label:"Top Losers"},{id:"nifty-contributors",label:"Nifty Contributors"},{id:"fii-dii",label:"FII/DII Activity"},{id:"weekly",label:"Weekly Movers"},{id:"bulk",label:"Bulk Deals"}]},{id:"watchlist",label:"Watchlist",icon:bx,subsections:[]},{id:"documentation",label:"Platform Guide",icon:"",subsections:[]},{id:"settings",label:"Settings",icon:wx,subsections:[{id:"profile",label:"Profile"},{id:"preferences",label:"Preferences"}]}];function kx({activeSection:t,onSectionChange:e,collapsed:s,onToggleCollapse:n,mobileOpen:i,onMobileClose:r}){const[o,a]=x.useState([]),c=h=>{a(d=>d.includes(h)?[]:[h])},u=(h,d=null)=>{if(h.subsections.length>0&&!d)c(h.id);else{const f=d?`${h.id}.${d.id}`:h.id;e(f),i&&r&&r()}};return l.jsxs("aside",{className:`sidebar ${s?"collapsed":""} ${i?"mobile-open":""}`,children:[l.jsxs("div",{className:"sidebar-header",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"sidebar-brand",children:[l.jsx("span",{className:"brand-icon",children:l.jsx(dx,{size:24})}),l.jsx("span",{className:"brand-text",children:"StockServs"})]}),l.jsx("p",{className:"sidebar-tagline",children:"Smart Trading Intelligence"})]}),l.jsx("button",{className:"sidebar-toggle",onClick:n,children:s?"":""})]}),l.jsx("nav",{className:"sidebar-nav",children:Cx.map(h=>{const d=o.includes(h.id),f=t===h.id||t.startsWith(`${h.id}.`),p=h.subsections.length>0;return l.jsxs("div",{className:`nav-group ${f?"active":""}`,children:[l.jsxs("button",{className:`nav-item ${f&&!p?"active":""}`,onClick:()=>u(h),title:s?h.label:void 0,children:[l.jsx("span",{className:"nav-icon",children:cl.createElement(h.icon,{size:20})}),!s&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"nav-label",children:h.label}),p&&l.jsx("span",{className:`nav-arrow ${d?"expanded":""}`,children:l.jsx(gx,{size:16})})]})]}),!s&&p&&d&&l.jsx("div",{className:"nav-subsections",children:h.subsections.map(m=>l.jsx("button",{className:`nav-subitem ${t===`${h.id}.${m.id}`?"active":""}`,onClick:()=>u(h,m),children:m.label},m.id))})]},h.id)})}),l.jsx("div",{className:"sidebar-footer",children:!s&&l.jsxs("div",{className:"sidebar-footer-content",children:[l.jsx("span",{className:"footer-label",children:localStorage.getItem("trading_mode")==="live"?"Live Trading Mode":"Sandbox Mode"}),l.jsx("span",{className:`footer-badge ${localStorage.getItem("trading_mode")==="live"?"footer-badge-live":""}`,children:localStorage.getItem("trading_mode")==="live"?"LIVE":"DEMO"})]})})]})}const op=3e4,ir=new Map;let Nh=!1;const Ex=()=>{Nh||(Nh=!0,localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),window.location.reload())},_x=async(t,e={},s=op)=>{const n=new AbortController,i=setTimeout(()=>n.abort(),s);try{return await fetch(t,{...e,signal:n.signal})}finally{clearTimeout(i)}},il=async(t,e={})=>{const s=await _x(t,e,e.timeout||op);if(!s.ok){let n=`Request failed (${s.status})`;try{n=(await s.json()).detail||n}catch{}s.status===401&&localStorage.getItem("access_token")&&Ex();const i=new Error(n);throw i.status=s.status,i}return s.json()},Q=async(t,e={})=>{const s=localStorage.getItem("access_token");if(!s)throw new Error("Not authenticated");const n={...e.headers||{},Authorization:`Bearer ${s}`},i={...e,headers:n},r=!i.method||i.method==="GET";if(r&&ir.has(t))return ir.get(t);const o=il(t,i).finally(()=>{r&&ir.delete(t)});return r&&ir.set(t,o),o},$e=async(t,e={},s=null)=>{var n,i;try{return await Q(t,e)}catch(r){return!(r.name==="AbortError"||((n=r.message)==null?void 0:n.includes("aborted"))||((i=r.message)==null?void 0:i.includes("signal")))&&s&&typeof s=="function"&&s(r.message||"Request failed"),null}};function Wc(){return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}))}function Ps(){const t=Wc(),e=t.getDay(),s=t.getHours(),n=t.getMinutes();if(e===0||e===6)return!1;const i=s*60+n,r=9*60+15,o=15*60+30;return i>=r&&i<=o}function jh(){return Ps()?"Open":"Closed"}function Mx(){if(Ps())return 0;const t=Wc(),e=t.getDay(),s=t.getHours(),n=t.getMinutes();let i=new Date(t);return e===6?i.setDate(i.getDate()+2):e===0?i.setDate(i.getDate()+1):s>=15&&(s>15||n>30)&&(i.setDate(i.getDate()+1),i.getDay()===6&&i.setDate(i.getDate()+2)),i.setHours(9,15,0,0),i.getTime()-t.getTime()}function Lx(){if(!Ps())return 0;const t=Wc(),e=new Date(t);return e.setHours(15,30,0,0),e.getTime()-t.getTime()}function Ch(t){if(t<=0)return"Now";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),n=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}h ${s}m`:s>0?`${s}m ${n}s`:`${n}s`}function kh(){if(Ps()){const e=Lx();return{event:"close",countdown:Ch(e),ms:e}}else{const e=Mx();return{event:"open",countdown:Ch(e),ms:e}}}let rr=null;class Px{constructor(){this.subscriptions=new Map,this.timers=new Map,this.inFlight=new Map,this.isPaused=!1,this.isTabVisible=!0,this.isOnline=typeof navigator<"u"?navigator.onLine:!0,this.listeners=new Set,typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isTabVisible=!document.hidden,this.handleStateChange()}),typeof window<"u"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.handleStateChange()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.handleStateChange()}))}handleStateChange(){this.shouldRefresh()?this.resumeAll():this.pauseAll(),this.notifyListeners()}shouldRefresh(){return!this.isPaused&&this.isTabVisible&&this.isOnline&&Ps()}isMarketOpen(){return Ps()}subscribe(e,s,n=1e3){return this.subscriptions.set(e,{callback:s,interval:n}),this.shouldRefresh()&&this.startTimer(e),this.notifyListeners(),e}unsubscribe(e){this.stopTimer(e),this.subscriptions.delete(e),this.notifyListeners()}startTimer(e){const s=this.subscriptions.get(e);if(!s)return;this.stopTimer(e);const n=setInterval(async()=>{if(!this.inFlight.get(e))if(this.shouldRefresh())try{this.inFlight.set(e,!0),await s.callback()}catch(i){console.error(`Error in auto-refresh callback for ${e}:`,i)}finally{this.inFlight.delete(e)}else this.stopTimer(e)},s.interval);this.timers.set(e,n)}stopTimer(e){const s=this.timers.get(e);s&&(clearInterval(s),this.timers.delete(e))}pauseAll(){this.timers.forEach((e,s)=>{clearInterval(e)}),this.timers.clear()}resumeAll(){this.shouldRefresh()&&this.subscriptions.forEach((e,s)=>{this.timers.has(s)||this.startTimer(s)})}togglePause(){this.isPaused=!this.isPaused,this.handleStateChange()}setPaused(e){this.isPaused!==e&&(this.isPaused=e,this.handleStateChange())}getPaused(){return this.isPaused}getOnline(){return this.isOnline}getActiveCount(){return this.timers.size}getTotalCount(){return this.subscriptions.size}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(s){console.error("Error in refresh manager listener:",s)}})}checkMarketHours(){this.handleStateChange()}}function ap(){return rr||(rr=new Px,setInterval(()=>{rr.checkMarketHours()},3e4)),rr}function kn(t,e,s=1e3,n=!0){const i=ap(),r=x.useRef(e),[o,a]=x.useState(Date.now());return x.useEffect(()=>{r.current=e},[e]),x.useEffect(()=>{if(!n)return;const c=()=>{r.current(),a(Date.now())};return i.subscribe(t,c,s),()=>{i.unsubscribe(t)}},[t,s,n]),{lastUpdate:o}}function Tx(){const t=ap(),[e,s]=x.useState({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()});x.useEffect(()=>{const r=()=>{s({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()})};t.addListener(r);const o=setInterval(r,6e4);return()=>{t.removeListener(r),clearInterval(o)}},[]);const n=x.useCallback(()=>{t.togglePause()},[]),i=x.useCallback(r=>{t.setPaused(r)},[]);return{isPaused:e.isPaused,isOnline:e.isOnline,isMarketOpen:e.isMarketOpen,activeCount:e.activeCount,totalCount:e.totalCount,togglePause:n,setPaused:i}}function Ri(t){const[e,s]=x.useState("");return x.useEffect(()=>{const n=()=>{const r=Math.floor((Date.now()-t)/1e3);if(r<2)s("Just now");else if(r<60)s(`${r}s ago`);else if(r<3600){const o=Math.floor(r/60);s(`${o}m ago`)}else{const o=Math.floor(r/3600);s(`${o}h ago`)}};n();const i=setInterval(n,1e3);return()=>clearInterval(i)},[t]),e}const lr=window.location.origin;function Eh({onNavigate:t}){var L,O,$,V,A,W,G,z;const{showError:e}=nx(),[s,n]=x.useState(null),[i,r]=x.useState(!0),[o,a]=x.useState({gainers:[],losers:[]}),[c,u]=x.useState(null),h=x.useRef({message:"",time:0}),{lastUpdate:d}=kn("dashboard-market",()=>v(),1e4),f=Ri(d);x.useEffect(()=>{y()},[]);const p=P=>{const T=Date.now();h.current.message===P&&T-h.current.time<3e4||(h.current={message:P,time:T},e(P))},m=async()=>{const P=await $e(`${lr}/portfolio/summary`,{},T=>{p(`Error fetching portfolio: ${T}`)});P&&n(P)},v=async()=>{const[P,T]=await Promise.all([$e(`${lr}/nse_data/top-gainers`,{},H=>{p(`Error fetching NSE data for Top Gainers: ${H}`)}),$e(`${lr}/nse_data/top-losers`,{},H=>{p(`Error fetching NSE data for Top Losers: ${H}`)})]);a({gainers:(P==null?void 0:P.top_gainers)||[],losers:(T==null?void 0:T.top_losers)||[]})},b=async()=>{try{const P=await Q(`${lr}/nse_data/fii-dii-activity`).catch(()=>null);P&&u(P)}catch(P){console.error("Failed to load FII/DII data:",P)}},y=async()=>{r(!0);try{await Promise.all([m(),v(),b()])}catch(P){console.error("Failed to load dashboard data:",P)}finally{r(!1)}},g=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(P||0),w=P=>{if(!P&&P!==0)return"N/A";const T=Number(P);return isNaN(T)?"N/A":`${(T/100).toFixed(0)} Cr`},S=(s==null?void 0:s.wallet_balance)??1e5,C=(s==null?void 0:s.total_invested)??0,E=(s==null?void 0:s.current_value)??0,N=(s==null?void 0:s.total_pnl)??0,j=C>0?(N/C*100).toFixed(2):0,M=()=>{const P=new Date().getHours();return P<12?"Good Morning":P<17?"Good Afternoon":"Good Evening"},_=()=>{const P=new Date,T=P.getDay(),H=P.getHours(),ee=P.getMinutes(),Ge=H*60+ee;return T>=1&&T<=5&&Ge>=555&&Ge<=930};return l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-title",children:l.jsx("h2",{children:M()})}),l.jsxs("div",{className:"dash-header-right",children:[l.jsx("span",{className:`market-status-badge ${_()?"open":"closed"}`,children:_()?"Market Open":"Market Closed"}),l.jsx("button",{onClick:y,disabled:i,children:i?"Loading...":"Refresh"})]})]}),l.jsxs("div",{className:"dash-summary-bar",children:[l.jsxs("div",{className:"dash-summary-item",onClick:()=>t("wallet.balance"),children:[l.jsx("span",{className:"dash-summary-label",children:"Balance"}),l.jsx("span",{className:"dash-summary-value",children:g(S)})]}),l.jsx("div",{className:"dash-summary-divider"}),l.jsxs("div",{className:"dash-summary-item",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"dash-summary-label",children:"Invested"}),l.jsx("span",{className:"dash-summary-value",children:g(C)})]}),l.jsx("div",{className:"dash-summary-divider"}),l.jsxs("div",{className:"dash-summary-item",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"dash-summary-label",children:"Current Value"}),l.jsx("span",{className:"dash-summary-value",children:g(E)})]}),l.jsx("div",{className:"dash-summary-divider"}),l.jsxs("div",{className:"dash-summary-item",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"dash-summary-label",children:"P&L"}),l.jsxs("span",{className:`dash-summary-value ${N>=0?"positive":"negative"}`,children:[N>=0?"+":"",g(N),l.jsxs("span",{className:"dash-summary-pct",children:["(",N>=0?"+":"",j,"%)"]})]})]})]}),l.jsx("div",{className:"dashboard-actions",children:l.jsxs("div",{className:"quick-actions-grid",children:[l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.trade"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Trade Stocks"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.portfolio"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"View Portfolio"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.gainers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Gainers"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.losers"),children:[l.jsx("span",{className:"quick-action-icon",children:""}),l.jsx("span",{children:"Top Losers"})]})]})}),c&&l.jsxs("div",{className:"fii-dii-container",children:[l.jsxs("h3",{children:["FII/DII Activity ",c.date&&l.jsxs("span",{className:"fii-dii-date",children:["(",c.date,")"]})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:w((L=c.fii)==null?void 0:L.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:w((O=c.fii)==null?void 0:O.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number(($=c.fii)==null?void 0:$.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:w((V=c.fii)==null?void 0:V.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy"}),l.jsx("span",{className:"value positive",children:w((A=c.dii)==null?void 0:A.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell"}),l.jsx("span",{className:"value negative",children:w((W=c.dii)==null?void 0:W.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((G=c.dii)==null?void 0:G.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net"}),l.jsx("span",{className:"value",children:w((z=c.dii)==null?void 0:z.netValue)})]})]})]})]})]}),l.jsxs("div",{className:"last-updated",children:[l.jsxs("svg",{className:"last-updated-icon",fill:"currentColor",viewBox:"0 0 16 16",children:[l.jsx("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),l.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),l.jsxs("span",{className:"last-updated-text",children:["Market data updated ",f]})]}),l.jsxs("div",{className:"dashboard-market-grid",children:[l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Gainers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.gainers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[o.gainers.slice(0,5).map((P,T)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:P.symbol}),l.jsxs("span",{className:"market-price",children:["",Number(P.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change positive",children:["+",Number(P.pChange||0).toFixed(2),"%"]})]},P.symbol||T)),o.gainers.length===0&&l.jsx("div",{className:"loading",children:i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"loading-spinner loading-spinner-sm"}),l.jsx("span",{children:"Loading market data..."})]}):"No data available"})]})]}),l.jsxs("div",{className:"market-card",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("h3",{children:"Top Losers"}),l.jsx("button",{className:"link-btn",onClick:()=>t("market.losers"),children:"View All "})]}),l.jsxs("div",{className:"market-list",children:[o.losers.slice(0,5).map((P,T)=>l.jsxs("div",{className:"market-item",children:[l.jsxs("div",{className:"market-item-info",children:[l.jsx("span",{className:"market-symbol",children:P.symbol}),l.jsxs("span",{className:"market-price",children:["",Number(P.lastPrice||0).toLocaleString()]})]}),l.jsxs("span",{className:"market-change negative",children:[Number(P.pChange||0).toFixed(2),"%"]})]},P.symbol||T)),o.losers.length===0&&l.jsx("div",{className:"loading",children:i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"loading-spinner loading-spinner-sm"}),l.jsx("span",{children:"Loading market data..."})]}):"No data available"})]})]})]})]})}const $x=()=>{const[t,e]=x.useState([]),[s,n]=x.useState(!0),[i,r]=x.useState(!1),o=async()=>{try{const a=await Q(`${window.location.origin}/fyers/market/major-indices`);if(r(a.fyers_connected??!1),a.indices){const c=a.indices.map(u=>({symbol:u.symbol||u.identifier,exchange:"NSE",last:u.lastPrice||0,change:u.change||0,pChange:u.pChange||0,open:u.open||0,high:u.high||0,low:u.low||0,previousClose:u.previousClose||0}));e(c)}}catch(a){console.error("Failed to load major indices from Fyers",a)}finally{n(!1)}};return kn("market-status",o,1e4),x.useEffect(()=>{o()},[]),s&&t.length===0?l.jsxs("div",{className:"market-status-loading",style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("div",{className:"loading-spinner",style:{width:"16px",height:"16px",borderWidth:"2px"}}),"Loading market data..."]}):!i&&!s&&t.length===0?l.jsx("div",{className:"market-status-bar market-status-disconnected",children:l.jsx("span",{className:"connect-prompt",children:"Connect Fyers to view live indices"})}):l.jsx("div",{className:"market-status-bar",children:t.map(a=>l.jsxs("div",{className:"market-index-item",children:[l.jsxs("div",{className:"index-name",children:[a.symbol,l.jsx("span",{className:"index-exchange",children:a.exchange})]}),l.jsxs("div",{className:"index-price-group",children:[l.jsx("span",{className:"index-price",children:(a.last||0).toLocaleString("en-IN",{minimumFractionDigits:2})}),l.jsxs("span",{className:`index-change ${(a.change||0)>=0?"positive":"negative"}`,children:[(a.change||0)>=0?"+":"",(a.change||0).toFixed(2)," (",(a.pChange||0).toFixed(2),"%)"]})]})]},a.symbol))})},q={container:{padding:"1rem",color:"#e1e3e6",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},controls:{display:"flex",gap:"1rem",alignItems:"center"},select:{padding:"0.5rem",borderRadius:"6px",background:"#2d333b",border:"1px solid #444c56",color:"white"},tableContainer:{flex:1,overflow:"auto",border:"1px solid #444c56",borderRadius:"8px"},table:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},th:{position:"sticky",top:0,background:"#22272e",padding:"0.75rem",textAlign:"center",borderBottom:"1px solid #444c56",zIndex:10},td:{padding:"0.5rem",textAlign:"center",borderBottom:"1px solid #2d333b",color:"#adbac7"},strikeRow:{background:"#2d333b",fontWeight:"bold"},callBg:{background:"rgba(0, 208, 156, 0.05)"},putBg:{background:"rgba(255, 77, 77, 0.05)"}},zx=({symbol:t="NIFTY",onClose:e,onSelectToken:s})=>{var N,j,M,_,L,O;const[n,i]=x.useState(null),[r,o]=x.useState([]),[a,c]=x.useState(""),[u,h]=x.useState(!1),[d,f]=x.useState(t),[p,m]=x.useState(""),[v,b]=x.useState(""),[y,g]=x.useState(null),w=x.useRef(null),S=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","RELIANCE","HDFCBANK","INFY","TCS"],C=async($,V="")=>{h(!0),m("");try{let A=`${window.location.origin}/fyers/market/option-chain/${$}`;V&&(A+=`?expiry=${V}`);const W=await Q(A);if(!W.fyers_connected){m("Fyers not connected. Connect via Settings to view live option chain."),i(null);return}if(W.error){m(W.error),i(null);return}if(b(W.spotSource||""),W.strikeData){const G=W.expiryDates&&W.expiryDates.length>0?W.expiryDates:W.expiryDate?[W.expiryDate]:[],z={underlyingValue:W.spotPrice||0,pcr:W.pcr||0,expiryDates:G,currentExpiry:W.expiryDate,data:Object.entries(W.strikeData).map(([P,T])=>({strikePrice:parseFloat(P),expiryDate:W.expiryDate,CE:T.call_identifier?{openInterest:T.call_oi||0,totalTradedVolume:T.call_volume||0,lastPrice:T.call_ltp||0,change:T.call_change||0,pChange:T.call_pChange||0,identifier:T.call_identifier||null}:null,PE:T.put_identifier?{openInterest:T.put_oi||0,totalTradedVolume:T.put_volume||0,lastPrice:T.put_ltp||0,change:T.put_change||0,pChange:T.put_pChange||0,identifier:T.put_identifier||null}:null})).sort((P,T)=>P.strikePrice-T.strikePrice)};i(z),g(new Date),!V&&G.length>0&&(o(G),c(z.currentExpiry))}else i(W),g(new Date),!V&&W.expiryDates&&W.expiryDates.length>0&&(o(W.expiryDates),c(W.currentExpiry))}catch(A){console.error("Failed to fetch option chain from Fyers",A),m(A.message||"Failed to fetch option chain. Please try again.")}finally{h(!1)}};x.useEffect(()=>{C(d,a)},[d,a]),x.useEffect(()=>{const $=()=>{const V=new Date,A=V.getHours(),W=V.getMinutes(),G=V.getDay();if(G===0||G===6)return!1;const z=A*60+W;return z>=555&&z<=930};return w.current&&clearInterval(w.current),$()&&d&&a&&(w.current=setInterval(()=>{C(d,a)},15e3)),()=>{w.current&&clearInterval(w.current)}},[d,a]);const E=$=>{f($.target.value),c("")};return l.jsxs("div",{style:q.container,children:[l.jsxs("div",{style:q.header,children:[l.jsxs("div",{style:q.controls,children:[l.jsx("h2",{style:{margin:0},children:"Option Chain"}),l.jsx("select",{style:q.select,value:d,onChange:E,children:S.map($=>l.jsx("option",{value:$,children:$},$))}),l.jsx("select",{style:q.select,value:a,onChange:$=>c($.target.value),disabled:!r.length,children:r.map($=>l.jsx("option",{value:$,children:$},$))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[n&&l.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:["Spot: ",l.jsx("span",{style:{color:"#00d09c"},children:(N=n.underlyingValue)==null?void 0:N.toFixed(2)}),l.jsxs("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#adbac7"},children:["PCR: ",n.pcr]})]}),y&&l.jsx("span",{style:{fontSize:"0.75rem",color:"#768390"},children:y.toLocaleTimeString()}),l.jsx("button",{onClick:()=>C(d,a),disabled:u,style:{padding:"0.4rem 0.8rem",background:"#373e47",border:"1px solid #444c56",color:"#adbac7",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:u?"...":"Refresh"}),e&&l.jsx("button",{onClick:e,style:{padding:"0.5rem 1rem",background:"#373e47",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"Close"})]})]}),v==="prev_close"&&l.jsx("div",{style:{padding:"0.5rem 1rem",marginBottom:"0.5rem",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"6px",color:"#ffd700",fontSize:"0.85rem",textAlign:"center"},children:"Market closed - showing last available data"}),p&&l.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1rem",background:"rgba(255, 77, 77, 0.1)",border:"1px solid rgba(255, 77, 77, 0.3)",borderRadius:"8px",color:"#ff4d4d"},children:p}),u?l.jsx("div",{style:{textAlign:"center",marginTop:"2rem",color:"#adbac7"},children:"Loading Option Chain..."}):!p&&(!((j=n==null?void 0:n.data)!=null&&j.length)||((M=n==null?void 0:n.data)==null?void 0:M.length)>0&&!n.data.some($=>$.CE||$.PE))?l.jsxs("div",{style:{textAlign:"center",marginTop:"3rem",color:"#adbac7"},children:[l.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:((_=n==null?void 0:n.data)==null?void 0:_.length)>0?"Option data unavailable":"No option chain data available"}),l.jsx("p",{style:{fontSize:"0.85rem",color:"#768390"},children:((L=n==null?void 0:n.data)==null?void 0:L.length)>0?"Market may be closed or option quotes are unavailable. Try again during market hours.":"Select a symbol above or check your Fyers connection in Settings."})]}):!p&&l.jsx("div",{style:q.tableContainer,children:l.jsxs("table",{style:q.table,children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{colSpan:"4",style:{...q.th,...q.callBg,color:"#00d09c"},children:"CALLS"}),l.jsx("th",{style:q.th,children:"STRIKE"}),l.jsx("th",{colSpan:"4",style:{...q.th,...q.putBg,color:"#ff4d4d"},children:"PUTS"})]}),l.jsxs("tr",{children:[l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"OI"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"Price"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"Chg%"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"LTP"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"Vol"}),l.jsx("th",{style:{...q.th,top:"40px",fontSize:"0.75rem"},children:"OI"})]})]}),l.jsx("tbody",{children:(O=n==null?void 0:n.data)==null?void 0:O.map(($,V)=>{var W,G,z,P,T,H,ee,Ge,Me,Ut,ne,qe,ut,wt,Mt,Os,ps,Fi;n.atmStrike,$.strikePrice;const A=n.underlyingValue;return Math.abs($.strikePrice-A),l.jsxs("tr",{children:[l.jsx("td",{style:{...q.td,...q.callBg},children:((G=(W=$.CE)==null?void 0:W.openInterest)==null?void 0:G.toLocaleString())||"-"}),l.jsx("td",{style:{...q.td,...q.callBg},children:((P=(z=$.CE)==null?void 0:z.totalTradedVolume)==null?void 0:P.toLocaleString())||"-"}),l.jsxs("td",{style:{...q.td,...q.callBg,color:((T=$.CE)==null?void 0:T.change)>=0?"#00d09c":"#ff4d4d"},children:[((ee=(H=$.CE)==null?void 0:H.lastPrice)==null?void 0:ee.toFixed(2))||"-",$.CE&&s&&l.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>{var je,Le;return s({...$.CE,identifier:(je=$.CE)==null?void 0:je.identifier,symbol:d,expiry:$.expiryDate,strike:$.strikePrice,type:"CE",ltp:(Le=$.CE)==null?void 0:Le.lastPrice})},children:"B"}),l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>{var je,Le;return s({...$.CE,identifier:(je=$.CE)==null?void 0:je.identifier,symbol:d,expiry:$.expiryDate,strike:$.strikePrice,type:"CE",ltp:(Le=$.CE)==null?void 0:Le.lastPrice})},children:"S"})]})]}),l.jsx("td",{style:{...q.td,...q.callBg,color:((Ge=$.CE)==null?void 0:Ge.pChange)>=0?"#00d09c":"#ff4d4d"},children:$.CE?`${((Me=$.CE.pChange)==null?void 0:Me.toFixed(1))??"0.0"}%`:"-"}),l.jsx("td",{style:{...q.td,...q.strikeRow},children:$.strikePrice}),l.jsx("td",{style:{...q.td,...q.putBg,color:((Ut=$.PE)==null?void 0:Ut.pChange)>=0?"#00d09c":"#ff4d4d"},children:$.PE?`${((ne=$.PE.pChange)==null?void 0:ne.toFixed(1))??"0.0"}%`:"-"}),l.jsxs("td",{style:{...q.td,...q.putBg,color:((qe=$.PE)==null?void 0:qe.change)>=0?"#00d09c":"#ff4d4d"},children:[((wt=(ut=$.PE)==null?void 0:ut.lastPrice)==null?void 0:wt.toFixed(2))||"-",$.PE&&s&&l.jsxs("div",{style:{display:"flex",gap:"2px",justifyContent:"center",marginTop:"2px",opacity:.8},children:[l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#00d09c",border:"none",borderRadius:"2px",color:"black"},onClick:()=>{var je,Le;return s({...$.PE,identifier:(je=$.PE)==null?void 0:je.identifier,symbol:d,expiry:$.expiryDate,strike:$.strikePrice,type:"PE",ltp:(Le=$.PE)==null?void 0:Le.lastPrice})},children:"B"}),l.jsx("button",{style:{fontSize:"10px",padding:"1px 4px",cursor:"pointer",background:"#ff4d4d",border:"none",borderRadius:"2px",color:"white"},onClick:()=>{var je,Le;return s({...$.PE,identifier:(je=$.PE)==null?void 0:je.identifier,symbol:d,expiry:$.expiryDate,strike:$.strikePrice,type:"PE",ltp:(Le=$.PE)==null?void 0:Le.lastPrice})},children:"S"})]})]}),l.jsx("td",{style:{...q.td,...q.putBg},children:((Os=(Mt=$.PE)==null?void 0:Mt.totalTradedVolume)==null?void 0:Os.toLocaleString())||"-"}),l.jsx("td",{style:{...q.td,...q.putBg},children:((Fi=(ps=$.PE)==null?void 0:ps.openInterest)==null?void 0:Fi.toLocaleString())||"-"})]},V)})})]})})]})},go=window.location.origin;function Rx({subSection:t,onNavigate:e}){const[s,n]=x.useState(null),[i,r]=x.useState([]),[o,a]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const[m,v]=await Promise.all([Q(`${go}/portfolio/summary`).catch(()=>null),Q(`${go}/portfolio/orders`).catch(()=>({orders:[]}))]);n(m),r(v.orders||[])}catch(m){console.error("Failed to load wallet data:",m)}finally{a(!1)}},u=async(m,v)=>{const b=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(m),y=v==="SET"?"reset your balance to":"add";if(window.confirm(`Are you sure you want to ${y} ${b}?`)){a(!0);try{await Q(`${go}/portfolio/funds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:m,type:v})}),alert("Wallet updated successfully!"),c(),v==="SET"&&e("wallet.balance")}catch(g){console.error("Failed to update funds:",g),alert("Failed to update funds: "+g.message)}finally{a(!1)}}},h=m=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(m||0),d=m=>m?new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",f=(s==null?void 0:s.wallet_balance)??1e5,p=f+((s==null?void 0:s.current_value)??0);return t==="transactions"?l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Transactions"})]}),l.jsx("button",{onClick:c,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading transactions..."}):i.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Transactions"}),l.jsx("div",{className:"empty-state-text",children:"Start trading to see your transaction history here."}),l.jsx("button",{className:"primary-btn",onClick:()=>e("trading.trade"),children:"Start Trading"})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Type"}),l.jsx("th",{className:"text-right",children:"Amount"})]})}),l.jsx("tbody",{children:i.map((m,v)=>{var b;return l.jsxs("tr",{children:[l.jsx("td",{children:d(m.created_at)}),l.jsxs("td",{children:[m.side==="BUY"?"Bought":"Sold"," ",m.quantity," ",m.symbol]}),l.jsx("td",{children:l.jsx("span",{className:`order-side ${(b=m.side)==null?void 0:b.toLowerCase()}`,children:m.side})}),l.jsxs("td",{className:`text-right ${m.side==="BUY"?"negative":"positive"}`,children:[m.side==="BUY"?"-":"+","",Number(m.total_value||0).toLocaleString()]})]},m.id||v)})})]})})]}):t==="funds"?l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Add Funds"})]}),l.jsx("button",{onClick:()=>e("wallet.balance"),children:"Back to Wallet"})]}),l.jsxs("div",{className:"wallet-plans-section",children:[l.jsx("h3",{children:"Subscription Plans (Reset Balance)"}),l.jsx("p",{className:"section-subtitle",children:"Choose a plan to reset your sandbox capital."}),l.jsxs("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:[l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Basic Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Start Fresh"})]})]}),l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(1e6,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Standard Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"10,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Most Popular"})]})]}),l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(2e6,"SET"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Premium Plan"}),l.jsx("span",{className:"wallet-stat-value",children:"20,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Pro Trader"})]})]})]}),l.jsx("h3",{style:{marginTop:"2rem"},children:"Top Up"}),l.jsx("p",{className:"section-subtitle",children:"Add more funds to your current balance."}),l.jsx("div",{className:"wallet-stats-grid",style:{marginTop:"1rem"},children:l.jsxs("div",{className:"wallet-stat-card clickable",onClick:()=>u(5e5,"TOPUP"),children:[l.jsx("div",{className:"wallet-stat-icon",children:""}),l.jsxs("div",{className:"wallet-stat-content",children:[l.jsx("span",{className:"wallet-stat-label",children:"Top Up Pack"}),l.jsx("span",{className:"wallet-stat-value",children:"5,00,000"}),l.jsx("span",{className:"wallet-stat-change",children:"Cost: 299"})]})]})})]})]}):l.jsxs("div",{className:"wallet-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Wallet"})]}),l.jsx("button",{onClick:c,disabled:o,children:o?"Loading...":"Refresh"})]}),o?l.jsx("div",{className:"loading",children:"Loading wallet..."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"wallet-hero",children:[l.jsx("div",{className:"wallet-hero-label",children:"Available Balance"}),l.jsx("div",{className:"wallet-hero-amount",children:h(f)}),l.jsxs("div",{className:"wallet-hero-networth",children:["Net Worth: ",h(p)]}),l.jsxs("div",{className:"wallet-hero-actions",children:[l.jsx("button",{className:"wallet-hero-btn primary",onClick:()=>e("wallet.funds"),children:"Add Funds"}),l.jsx("button",{className:"wallet-hero-btn secondary",onClick:()=>e("trading.trade"),children:"Trade Now"})]})]}),l.jsxs("div",{className:"wallet-recent",children:[l.jsxs("div",{className:"wallet-recent-header",children:[l.jsx("h3",{children:"Recent Transactions"}),l.jsx("button",{className:"link-btn",onClick:()=>e("wallet.transactions"),children:"View All "})]}),i.length===0?l.jsxs("div",{className:"wallet-recent-empty",children:[l.jsx("span",{children:"No transactions yet."}),l.jsx("button",{className:"link-btn",onClick:()=>e("trading.trade"),children:"Start Trading "})]}):l.jsx("div",{className:"wallet-recent-list",children:i.slice(0,8).map((m,v)=>{var b;return l.jsxs("div",{className:"wallet-recent-item",children:[l.jsxs("div",{className:"wallet-recent-info",children:[l.jsx("span",{className:`order-side ${(b=m.side)==null?void 0:b.toLowerCase()}`,children:m.side}),l.jsxs("div",{className:"wallet-recent-details",children:[l.jsxs("span",{className:"wallet-recent-desc",children:[m.quantity," ",m.symbol]}),l.jsx("span",{className:"wallet-recent-date",children:d(m.created_at)})]})]}),l.jsxs("span",{className:`wallet-recent-amount ${m.side==="BUY"?"negative":"positive"}`,children:[m.side==="BUY"?"-":"+","",Number(m.total_value||0).toLocaleString()]})]},m.id||v)})})]})]})]})}function re(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function Cs(t,e){return t.width===e.width&&t.height===e.height}var Ix=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(i){return i!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Dx(t){return new Ix(t)}var Fx=function(){function t(e,s,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=re({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(r){return r},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return re({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=re(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;Cs(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=re(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Cs(this.bitmapSize,n)?null:n;s===null&&i===null||s!==null&&i!==null&&Cs(s,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(s,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Vx().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=_h(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Dx(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=_h(this._canvasElement);if(n!==null){var i=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Bx(r[0],i):re({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],r=re({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Ox(t,e){return new Fx(t,e.transform,e.options)}function _h(t){return t.ownerDocument.defaultView}function Vx(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Bx(t,e){return re({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Ax=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ts(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new Ax(i,s,n)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Wx={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Ux={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Hx={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Kx={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Gx={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},qx={color:"#26a69a",base:0},cp={color:"#2196f3"},up={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Mh,rl;function $s(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function hp(t,e,s,n){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(s,e+i),t.lineTo(n,e+i),t.stroke()}function us(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Fe(t){if(t===void 0)throw new Error("Value is undefined");return t}function R(t){if(t===null)throw new Error("Value is null");return t}function en(t){return R(Fe(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Mh||(Mh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(rl||(rl={}));const Lh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function st(t){return t<0?0:t>255?255:Math.round(t)||0}function dp(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const Xx=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Qx=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Yx=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Jx=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Ni(t){(t=t.toLowerCase())in Lh&&(t=Lh[t]);{const e=Jx.exec(t)||Yx.exec(t);if(e)return[st(parseInt(e[1],10)),st(parseInt(e[2],10)),st(parseInt(e[3],10)),dp(e.length<5?1:parseFloat(e[4]))]}{const e=Qx.exec(t);if(e)return[st(parseInt(e[1],16)),st(parseInt(e[2],16)),st(parseInt(e[3],16)),1]}{const e=Xx.exec(t);if(e)return[st(17*parseInt(e[1],16)),st(17*parseInt(e[2],16)),st(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function fp(t){return .199*t[0]+.687*t[1]+.114*t[2]}function _l(t){const e=Ni(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:fp(e)>160?"black":"white"}}class ve{constructor(){this.h=[]}l(e,s,n){const i={o:e,_:s,u:n===!0};this.h.push(i)}v(e){const s=this.h.findIndex(n=>e===n.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,n){const i=[...this.h];this.h=this.h.filter(r=>!r.u),i.forEach(r=>r.o(e,s,n))}M(){return this.h.length>0}S(){this.h=[]}}function yt(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:yt(t[n],s[n]));return t}function Ct(t){return typeof t=="number"&&isFinite(t)}function ji(t){return typeof t=="number"&&t%1==0}function Ii(t){return typeof t=="string"}function or(t){return typeof t=="boolean"}function zt(t){const e=t;if(!e||typeof e!="object")return e;let s,n,i;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],s[n]=i&&typeof i=="object"?zt(i):i);return s}function Zx(t){return t!==null}function Ci(t){return t===null?void 0:t}const Uc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function vn(t,e,s){return e===void 0&&(e=Uc),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class ew{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),n=this.H();return e.P===s&&e.D===n||(e.P=s,e.D=n,e.R=vn(s,n),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Hc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,n){this.Y.forEach(i=>{i.X(e,s,n)})}}class xt{X(e,s,n){e.useBitmapCoordinateSpace(i=>this.K(i,s,n))}}class tw extends xt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,r=this.G,o=Math.max(1,Math.floor(s))%2/2,a=c=>{e.beginPath();for(let u=i.to-1;u>=i.from;--u){const h=r.it[u],d=Math.round(h.nt*s)+o,f=h.st*n,p=c*n+o;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};r.et>0&&(e.fillStyle=r.rt,a(r.ht+r.et)),e.fillStyle=r.lt,a(r.ht)}}function sw(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const nw={from:0,to:1};class iw{constructor(e,s){this.ut=new Hc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(sw),this.ct=this.dt.map(n=>{const i=new tw;return i.J(n),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),n=this.vt.xt(),i=this.F.St();s.forEach((r,o)=>{var a;const c=this.dt[o],u=r.kt(n);if(e||u===null||!r.yt())return void(c.tt=null);const h=R(r.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=r.Dt().Rt(u._t,h.Vt),c.rt=(a=u.Ot)!==null&&a!==void 0?a:this.F.Bt(c.it[0].st/r.Dt().At()),c.it[0].ot=n,c.it[0].nt=i.It(n),c.tt=nw})}}class rw extends xt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=this.zt.Lt.yt,o=this.zt.Et.yt;if(!r&&!o)return;const a=Math.round(this.zt.nt*n),c=Math.round(this.zt.st*i);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,$s(e,this.zt.Lt.Nt),function(u,h,d,f){u.beginPath();const p=u.lineWidth%2?.5:0;u.moveTo(h+p,d),u.lineTo(h+p,f),u.stroke()}(e,a,0,s.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,$s(e,this.zt.Et.Nt),hp(e,c,0,s.width))}}class lw{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new rw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=R(this.jt.Ht()),n=s.$t().W().crosshair,i=this.Ft;if(n.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(s),i.Lt.yt=e&&this.jt.qt(),i.Et.et=n.horzLine.width,i.Et.Nt=n.horzLine.style,i.Et.V=n.horzLine.color,i.Lt.et=n.vertLine.width,i.Lt.Nt=n.vertLine.style,i.Lt.V=n.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function ow(t,e,s,n,i,r){t.fillRect(e+r,s,n-2*r,r),t.fillRect(e+r,s+i-r,n-2*r,r),t.fillRect(e,s,r,i),t.fillRect(e+n-r,s,r,i)}function Ml(t,e,s,n,i,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,s,n,i),t.restore()}function Ph(t,e,s,n,i,r){t.beginPath(),t.roundRect?t.roundRect(e,s,n,i,r):(t.lineTo(e+n-r[1],s),r[1]!==0&&t.arcTo(e+n,s,e+n,s+r[1],r[1]),t.lineTo(e+n,s+i-r[2]),r[2]!==0&&t.arcTo(e+n,s+i,e+n-r[2],s+i,r[2]),t.lineTo(e+r[3],s+i),r[3]!==0&&t.arcTo(e,s+i,e,s+i-r[3],r[3]),t.lineTo(e,s+r[0]),r[0]!==0&&t.arcTo(e,s,e+r[0],s,r[0]))}function Th(t,e,s,n,i,r,o=0,a=[0,0,0,0],c=""){if(t.save(),!o||!c||c===r)return Ph(t,e,s,n,i,a),t.fillStyle=r,t.fill(),void t.restore();const u=o/2;var h;Ph(t,e+u,s+u,n-o,i-o,(h=-u,a.map(d=>d===0?d:d+h))),r!=="transparent"&&(t.fillStyle=r,t.fill()),c!=="transparent"&&(t.lineWidth=o,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function mp(t,e,s,n,i,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,i);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,s,n,i),t.restore()}class $h{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,n,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const r=this.zt.V,o=this.Xt.t,a=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const h=this.Gt(c,s,n,i),d=h.Jt;return h.Qt?Th(u,d.ti,d.ii,d.ni,d.si,o,d.ei,[d.ht,0,0,d.ht],o):Th(u,d.ri,d.ii,d.ni,d.si,o,d.ei,[0,d.ht,d.ht,0],o),this.zt.hi&&(u.fillStyle=r,u.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(h.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=a.di;c.font=s.R,c.textAlign=a.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=r,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,n,i){var r;const{context:o,bitmapSize:a,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:h}=e,d=this.zt.hi||!this.zt.mi?s.T:0,f=this.zt.bi?s.C:0,p=s.L+this.Xt.wi,m=s.B+this.Xt.gi,v=s.A,b=s.I,y=this.zt.Kt,g=s.P,w=n.Mi(o,y),S=Math.ceil(n.xi(o,y)),C=g+p+m,E=s.C+v+b+S+d,N=Math.max(1,Math.floor(h));let j=Math.round(C*h);j%2!=N%2&&(j+=1);const M=f>0?Math.max(1,Math.floor(f*u)):0,_=Math.round(E*u),L=Math.round(d*u),O=(r=this.Xt.Si)!==null&&r!==void 0?r:this.Xt.ki,$=Math.round(O*h)-Math.floor(.5*h),V=Math.floor($+N/2-j/2),A=V+j,W=i==="right",G=W?c.width-f:f,z=W?a.width-M:M;let P,T,H;return W?(P=z-_,T=z-L,H=G-d-v-f):(P=z+_,T=z+L,H=G+d+v),{Qt:W,Jt:{ii:V,li:$,ci:A,ni:_,si:j,ht:2*u,ei:M,ti:P,ri:z,ai:T,oi:N,ui:a.width},di:{ii:V/h,ci:A/h,fi:H,pi:w}}}}class Ll{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||$h)(this.Ci,this.yi),this.Ri=new(e||$h)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class aw extends Ll{constructor(e,s,n){super(),this.jt=e,this.Li=s,this.Ei=n}zi(e,s,n){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const r=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||r===null)return;const o=_l(i.labelBackgroundColor);n.t=o.t,e.V=o.i;const a=2/12*this.Li.P();n.wi=a,n.gi=a;const c=this.Ei(this.Li);n.ki=c.ki,e.Kt=this.Li.Fi(c._t,r),e.yt=!0}}const cw=/[1-9]/g;class pp{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=s.R,Math.round(s.Wi.xi(f,R(this.zt).Kt,cw))));if(n<=0)return;const i=s.ji,r=n+2*i,o=r/2,a=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-o)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-o)+.5):u+r>a&&(c-=Math.abs(a-(u+r)),u=Math.floor(c-o)+.5);const h=u+r,d=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const v=R(this.zt);f.fillStyle=v.t;const b=Math.round(u*p),y=Math.round(0*m),g=Math.round(h*p),w=Math.round(d*m),S=Math.round(2*p);if(f.beginPath(),f.moveTo(b,y),f.lineTo(b,w-S),f.arcTo(b,w,b+S,w,S),f.lineTo(g-S,w),f.arcTo(g,w,g,w-S,S),f.lineTo(g,y),f.fill(),v.hi){const C=Math.round(v.ki*p),E=y,N=Math.round((E+s.T)*m);f.fillStyle=v.V;const j=Math.max(1,Math.floor(p)),M=Math.floor(.5*p);f.fillRect(C-M,E,j,N-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=R(this.zt),m=0+s.C+s.T+s.L+s.P/2;f.font=s.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.V;const v=s.Wi.Mi(f,"Apr0");f.translate(u+i,m+v),f.fillText(p.Kt,0,0)})}}class uw{constructor(e,s,n){this.ft=!0,this.Wt=new pp,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const r=n.Ui(this.vt.xt());e.Kt=n.qi(R(r)),e.yt=!0;const o=_l(s.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=n.W().ticksVisible}}class Kc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var ei;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(ei||(ei={}));class hw extends Kc{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new iw(e,this),this.fn=((i,r)=>o=>{const a=r(),c=i();if(o===R(this.tn).vn())return{_t:c,ki:a};{const u=R(o.Ct());return{_t:o.pn(a,u),ki:a}}})(()=>this.nn,()=>this.an);const n=((i,r)=>()=>{const o=this.$i.St().mn(i()),a=r();return o&&Number.isFinite(a)?{ot:o,ki:a}:null})(()=>this.sn,()=>this.Yt());this.bn=new uw(this,e,n),this.wn=new lw(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,s,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,n){this.Bn(e,s,n)&&this.Vn()}Bn(e,s,n){const i=this.ln,r=this.an,o=this.nn,a=this.sn,c=this.tn,u=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const h=u!==null?u.Ct():null;return u!==null&&h!==null?(this.nn=s,this.an=u.Rt(s,h)):(this.nn=NaN,this.an=NaN),i!==this.ln||r!==this.an||a!==this.sn||o!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(Zx),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,n){let i=e.get(s);return i===void 0&&(i=new aw(this,s,n),e.set(s,i)),i}}function Pl(t){return t==="left"||t==="right"}class ke{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const n=function(i,r){return i===void 0?r:{Fn:Math.max(i.Fn,r.Fn),Wn:i.Wn||r.Wn}}(this.zn.get(e),s);this.zn.set(e,n)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,n)=>{this.Nn(n,s)})}static ss(){return new ke(2)}static es(){return new ke(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const zh=".";function Rt(t,e){if(!Ct(t))return"n/a";if(!ji(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Tl{constructor(e,s){if(s||(s=1),Ct(e)&&ji(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let n=Math.floor(e),i="";const r=this._s!==void 0?this._s:NaN;if(s>1){let o=+(Math.round(e*s)-n*s).toFixed(this._s);o>=s&&(o-=s,n+=1),i=zh+Rt(+o.toFixed(this._s)*this.rs,r)}else n=Math.round(n*s)/s,r>0&&(i=zh+Rt(0,r));return n.toFixed(0)+i}}class gp extends Tl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class dw{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const n=Math.pow(10,this.us);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(i,r)=>r)}}function vp(t,e,s,n,i,r,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[n.from];let d=r(t,h),f=h;if(n.to-n.from<2){const p=i/2;a.beginPath();const m={nt:h.nt-p,st:h.st},v={nt:h.nt+p,st:h.st};a.moveTo(m.nt*c,m.st*u),a.lineTo(v.nt*c,v.st*u),o(t,d,m,v)}else{const p=(v,b)=>{o(t,d,f,b),a.beginPath(),d=v,f=b};let m=f;a.beginPath(),a.moveTo(h.nt*c,h.st*u);for(let v=n.from+1;v<n.to;++v){m=e[v];const b=r(t,m);switch(s){case 0:a.lineTo(m.nt*c,m.st*u);break;case 1:a.lineTo(m.nt*c,e[v-1].st*u),b!==d&&(p(b,m),a.lineTo(m.nt*c,e[v-1].st*u)),a.lineTo(m.nt*c,m.st*u);break;case 2:{const[y,g]=fw(e,v-1,v);a.bezierCurveTo(y.nt*c,y.st*u,g.nt*c,g.st*u,m.nt*c,m.st*u);break}}s!==1&&b!==d&&(p(b,m),a.moveTo(m.nt*c,m.st*u))}(f!==m||f===m&&s===1)&&o(t,d,f,m)}}const Rh=6;function vo(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Ih(t,e){return{nt:t.nt/e,st:t.st/e}}function fw(t,e,s){const n=Math.max(0,e-1),i=Math.min(t.length-1,s+1);var r,o;return[(r=t[e],o=Ih(vo(t[s],t[n]),Rh),{nt:r.nt+o.nt,st:r.st+o.st}),vo(t[s],Ih(vo(t[i],t[e]),Rh))]}function mw(t,e,s,n,i){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=e;r.lineTo(i.nt*o,t*a),r.lineTo(n.nt*o,t*a),r.closePath(),r.fillStyle=s,r.fill()}class yp extends xt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:n,tt:i,ds:r,et:o,Nt:a,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=o,$s(h,a),h.lineWidth=1,vp(e,n,c,i,r,this.bs.bind(this),mw.bind(null,u))}}function za(t,e,s){return Math.min(Math.max(t,e),s)}function ar(t,e,s){return e-t<=s}function xp(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Gc{ws(e,s){const n=this.gs,{Ms:i,xs:r,Ss:o,ks:a,ys:c,vs:u}=s;if(this.Cs===void 0||n===void 0||n.Ms!==i||n.xs!==r||n.Ss!==o||n.ks!==a||n.vs!==u||n.ys!==c){const h=e.context.createLinearGradient(0,0,0,c);if(h.addColorStop(0,i),u!=null){const d=za(u*e.verticalPixelRatio/c,0,1);h.addColorStop(d,r),h.addColorStop(d,o)}h.addColorStop(1,a),this.Cs=h,this.gs=s}return this.Cs}}class pw extends yp{constructor(){super(...arguments),this.Ts=new Gc}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function gw(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class wp extends xt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:n,ds:i,fs:r,et:o,Nt:a,Ds:c}=this.G;if(n===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=o*e.verticalPixelRatio,$s(u,a),u.lineJoin="round";const h=this.Vs.bind(this);r!==void 0&&vp(e,s,r,n,i,h,gw),c&&function(d,f,p,m,v){const{horizontalPixelRatio:b,verticalPixelRatio:y,context:g}=d;let w=null;const S=Math.max(1,Math.floor(b))%2/2,C=p*y+S;for(let E=m.to-1;E>=m.from;--E){const N=f[E];if(N){const j=v(d,N);j!==w&&(g.beginPath(),w!==null&&g.fill(),g.fillStyle=j,w=j);const M=Math.round(N.nt*b)+S,_=N.st*y;g.moveTo(M,_),g.arc(M,_,C,0,2*Math.PI)}}g.fill()}(e,s,c,n,h)}}class Sp extends wp{Vs(e,s){return s.lt}}function bp(t,e,s,n,i=0,r=e.length){let o=r-i;for(;0<o;){const a=o>>1,c=i+a;n(e[c],s)===t?(i=c+1,o-=a+1):o=a}return i}const Di=bp.bind(null,!0),Np=bp.bind(null,!1);function vw(t,e){return t.ot<e}function yw(t,e){return e<t.ot}function jp(t,e,s){const n=e.Os(),i=e.ui(),r=Di(t,n,vw),o=Np(t,i,yw);if(!s)return{from:r,to:o};let a=r,c=o;return r>0&&r<t.length&&t[r].ot>=n&&(a=r-1),o>0&&o<t.length&&t[o-1].ot<=i&&(c=o+1),{from:a,to:c}}class qc{constructor(e,s,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const n=s.Xs();if(n===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=jp(this.zs,n,this.Fs),this.Gs(e,s,i.Vt),this.Js())}}class $l extends qc{constructor(e,s){super(e,s,!0)}Gs(e,s,n){s.Qs(this.zs,Ci(this.Ls)),e.te(this.zs,n,Ci(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const n=s.Vt[3];return this.se(s.ee,n,e)})}}class xw extends $l{constructor(e,s){super(e,s),this.js=new Hc,this.re=new pw,this.he=new Sp,this.js.Z([this.re,this.he])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class ww extends xt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let i=null;const r=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.In[o];i!==a.ce&&(e.fillStyle=a.ce,i=a.ce);const c=Math.floor(.5*this.oe),u=Math.round(a.nt*s),h=u-c,d=this.oe,f=h+d-1,p=Math.min(a.de,a.fe),m=Math.max(a.de,a.fe),v=Math.round(p*n)-c,b=Math.round(m*n)+c,y=Math.max(b-v,this.oe);e.fillRect(h,v,d,y);const g=Math.ceil(1.5*this.ae);if(r){if(this.zt.ve){const E=u-g;let N=Math.max(v,Math.round(a.pe*n)-c),j=N+d-1;j>v+y-1&&(j=v+y-1,N=j-d+1),e.fillRect(E,N,h-E,j-N+1)}const w=u+g;let S=Math.max(v,Math.round(a.me*n)-c),C=S+d-1;C>v+y-1&&(C=v+y-1,S=C-d+1),e.fillRect(f+1,S,w-f,C-S+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(n,i){return Math.floor(.3*n*i)}(R(this.zt).le,e)))}}class Cp extends qc{constructor(e,s){super(e,s,!1)}Gs(e,s,n){s.Qs(this.zs,Ci(this.Ls)),e.be(this.zs,n,Ci(this.Ls))}we(e,s,n){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class Sw extends Cp{constructor(){super(...arguments),this.js=new ww}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class bw extends yp{constructor(){super(...arguments),this.Ts=new Gc}bs(e,s){const n=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:n.vs})}}class Nw extends wp{constructor(){super(...arguments),this.Pe=new Gc}Vs(e,s){const n=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:n.vs})}}class jw extends $l{constructor(e,s){super(e,s),this.js=new Hc,this.Ve=new bw,this.Oe=new Nw,this.js.Z([this.Ve,this.Oe])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),n=this.Es.Dt().Rt(s.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:n,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:i})}}class Cw extends xt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),c=Math.floor(r*a*o),u=Math.floor(r*o),h=Math.min(c,u);return Math.max(Math.floor(o),h)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const i=this.ze(s);(!this.zt._i||this.ae>2*i)&&this.Le(e,n,this.zt.tt)}Ae(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",c=Math.min(Math.floor(r),Math.floor(this.zt.le*r));c=Math.max(Math.floor(r),Math.min(c,this.ae));const u=Math.floor(.5*c);let h=null;for(let d=n.from;d<n.to;d++){const f=s[d];f.Ee!==a&&(i.fillStyle=f.Ee,a=f.Ee);const p=Math.round(Math.min(f.pe,f.me)*o),m=Math.round(Math.max(f.pe,f.me)*o),v=Math.round(f.de*o),b=Math.round(f.fe*o);let y=Math.round(r*f.nt)-u;const g=y+c-1;h!==null&&(y=Math.max(h+1,y),y=Math.min(y,g));const w=g-y+1;i.fillRect(y,v,w,p-v),i.fillRect(y,m+1,w,b-m),h=g}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),s);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const c=this.ze(r);let u=null;for(let h=n.from;h<n.to;h++){const d=s[h];d.Ne!==a&&(i.fillStyle=d.Ne,a=d.Ne);let f=Math.round(d.nt*r)-Math.floor(.5*this.ae);const p=f+this.ae-1,m=Math.round(Math.min(d.pe,d.me)*o),v=Math.round(Math.max(d.pe,d.me)*o);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,p)),this.zt.le*r>2*c)ow(i,f,m,p-f+1,v-m+1,c);else{const b=p-f+1;i.fillRect(f,m,b,v-m+1)}u=p}}Le(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const c=this.ze(r);for(let u=n.from;u<n.to;u++){const h=s[u];let d=Math.round(Math.min(h.pe,h.me)*o),f=Math.round(Math.max(h.pe,h.me)*o),p=Math.round(h.nt*r)-Math.floor(.5*this.ae),m=p+this.ae-1;if(h.ce!==a){const v=h.ce;i.fillStyle=v,a=v}this.zt._i&&(p+=c,d+=c,m-=c,f-=c),d>f||i.fillRect(p,d,m-p+1,f-d+1)}}}class kw extends Cp{constructor(){super(...arguments),this.js=new Cw}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class Ew{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,n){this.Fe.draw(e,this.Li,s,n)}}class yo extends qc{constructor(e,s,n){super(e,s,!1),this.wn=n,this.js=new Ew(this.wn.renderer(),i=>{const r=e.Ct();return r===null?null:e.Dt().Rt(i,r.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,Ci(this.Ls))}Js(){this.wn.update({bars:this.zs.map(_w),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function _w(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class Mw extends xt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const i=Math.max(1,Math.floor(n)),r=Math.round(this.zt.Ye*n)-Math.floor(i/2),o=r+i;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const c=this.zt.it[a],u=this.Ue[a-this.zt.tt.from],h=Math.round(c.st*n);let d,f;e.fillStyle=c.ce,h<=r?(d=h,f=o):(d=r,f=h-Math.floor(i/2)+i),e.fillRect(u.Os,d,u.ui-u.Os+1,f-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.zt.it[r],a=Math.round(o.nt*e);let c,u;if(n%2){const h=(n-1)/2;c=a-h,u=a+h}else{const h=n/2;c=a-h,u=a+h-1}this.Ue[r-this.zt.tt.from]={Os:c,ui:u,Ze:a,Xe:o.nt*e,ot:o.ot}}for(let r=this.zt.tt.from+1;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from],a=this.Ue[r-this.zt.tt.from-1];o.ot===a.ot+1&&o.Os-a.ui!==s+1&&(a.Ze>a.Xe?a.ui=o.Os-s-1:o.Os=a.ui+s+1)}let i=Math.ceil(this.zt.le*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const a=o.ui-o.Os+1;i=Math.min(a,i)}if(s>0&&i<4)for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class Lw extends $l{constructor(){super(...arguments),this.js=new Mw}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,R(this.Es.Ct()).Vt)};this.js.J(e)}}class Pw extends $l{constructor(){super(...arguments),this.js=new Sp}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const Tw=/[2-9]/g;class ki{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,n){return this.sr(e,s,n).width}Mi(e,s,n){const i=this.sr(e,s,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,s,n){const i=n||Tw,r=String(s).replace(i,"0");if(this.tr.has(r))return Fe(this.tr.get(r)).er;if(this.Ke===this.ir){const a=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(a),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&s.length||(this.tr.set(r,{er:o,rr:this.Ge}),this.Qe[this.Ge]=r,this.Ke++,this.Ge++),o}}class $w{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,n){this.hr=e,this.k=s,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class kp{constructor(e,s,n){this.ur=e,this.ar=new ki(50),this.cr=s,this.F=n,this.j=-1,this.Wt=new $w(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const n=e.mr(s);if(n==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,n),this.Wt}}class zw extends xt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:i,et:r,gr:o}=this.zt;return s>=i-r-7&&s<=i+r+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const r=Math.round(this.zt.st*i);r<0||r>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),$s(e,this.zt.Nt),hp(e,r,0,s.width))}}class Xc{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new zw,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class Rw extends Xc{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class Iw extends xt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const i=this.zt;if(i===null)return;const r=Math.max(1,Math.floor(s)),o=r%2/2,a=Math.round(i.Xe.x*s)+o,c=i.Xe.y*n;e.fillStyle=i.Tr,e.beginPath();const u=Math.max(2,1.5*i.Pr)*s;e.arc(a,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(a,c,i.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=i.Dr,e.beginPath(),e.arc(a,c,i.ht*s+r/2,0,2*Math.PI,!1),e.stroke()}}const Dw=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Dh(t,e,s,n){return function(i,r){if(i==="transparent")return i;const o=Ni(i),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*a})`}(t,s+(n-s)*e)}function Fh(t,e){const s=t%2600/2600;let n;for(const c of Dw)if(s>=c.Vr&&s<=c.Or){n=c;break}us(n!==void 0,"Last price animation internal logic error");const i=(s-n.Vr)/(n.Or-n.Vr);return{Rr:Dh(e,i,n.Ir,n.zr),Dr:Dh(e,i,n.Lr,n.Er),ht:(r=i,o=n.Br,a=n.Ar,o+(a-o)*r)};var r,o,a}class Fw{constructor(e){this.Wt=new Iw,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),n=this.jr.Ct();if(s===null||n===null)return;const i=this.jr.Zr(!0);if(i.Xr||!s.Kr(i.ee))return;const r={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,n.Vt)},o=i.V,a=this.jr.W().lineWidth,c=Fh(this.Gr(),o);this.Wt.J({Tr:o,Pr:a,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:r})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Fh(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function ti(t,e){return xp(Math.min(Math.max(t,12),30)*e)}function Ei(t,e){switch(t){case"arrowDown":case"arrowUp":return ti(e,1);case"circle":return ti(e,.8);case"square":return ti(e,.7)}}function Ep(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(ti(t,1))}function Oh(t){return Math.max(ti(t,.1),3)}function Vh(t,e,s){return e?t:s?Math.ceil(t/2):0}function _p(t,e,s,n,i){const r=Ei("square",s),o=(r-1)/2,a=t-o,c=e-o;return n>=a&&n<=a+r&&i>=c&&i<=c+r}function Bh(t,e,s,n){const i=(Ei("arrowUp",n)-1)/2*s.Jr,r=(xp(n/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st-i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st+i),e.lineTo(s.nt-r,s.st+i),e.lineTo(s.nt-r,s.st)):(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st+i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+r,s.st-i),e.lineTo(s.nt-r,s.st-i),e.lineTo(s.nt-r,s.st)),e.fill()}function Ow(t,e,s,n,i,r){return _p(e,s,n,i,r)}class Vw extends xt{constructor(){super(...arguments),this.zt=null,this.ar=new ki,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=vn(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const i=this.zt.it[n];if(Aw(i,e,s))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n},i,r){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Kt!==void 0&&(a.Kt.Hi=this.ar.xi(e,a.Kt.ih),a.Kt.At=this.j,a.Kt.nt=a.nt-a.Kt.Hi/2),Bw(a,e,s,n)}}}}function Bw(t,e,s,n){e.fillStyle=t.V,t.Kt!==void 0&&function(i,r,o,a,c,u){i.save(),i.scale(c,u),i.fillText(r,o,a),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,n),function(i,r,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void Bh(!1,r,o,i.Ks);case"arrowUp":return void Bh(!0,r,o,i.Ks);case"circle":return void function(a,c,u){const h=(Ei("circle",u)-1)/2;a.beginPath(),a.arc(c.nt,c.st,h*c.Jr,0,2*Math.PI,!1),a.fill()}(r,o,i.Ks);case"square":return void function(a,c,u){const h=Ei("square",u),d=(h-1)*c.Jr/2,f=c.nt-d,p=c.st-d;a.fillRect(f,p,h*c.Jr,h*c.Jr)}(r,o,i.Ks)}i.nh}}(t,e,function(i,r,o){const a=Math.max(1,Math.floor(r))%2/2;return{nt:Math.round(i.nt*r)+a,st:i.st*o,Jr:r}}(t,s,n))}function Aw(t,e,s){return!(t.Kt===void 0||!function(n,i,r,o,a,c){const u=o/2;return a>=n&&a<=n+r&&c>=i-u&&c<=i+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(n,i,r){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return Ow(0,n.nt,n.st,n.Ks,i,r);case"circle":return function(o,a,c,u,h){const d=2+Ei("circle",c)/2,f=o-u,p=a-h;return Math.sqrt(f*f+p*p)<=d}(n.nt,n.st,n.Ks,i,r);case"square":return _p(n.nt,n.st,n.Ks,i,r)}}(t,e,s)}function Ww(t,e,s,n,i,r,o,a,c){const u=Ct(s)?s:s.Se,h=Ct(s)?s:s.Me,d=Ct(s)?s:s.xe,f=Ct(e.size)?Math.max(e.size,0):1,p=Ep(a.le())*f,m=p/2;switch(t.Ks=p,e.position){case"inBar":return t.st=o.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+m+r+.6*i));case"aboveBar":return t.st=o.Rt(h,c)-m-n.sh,t.Kt!==void 0&&(t.Kt.st=t.st-m-.6*i,n.sh+=1.2*i),void(n.sh+=p+r);case"belowBar":return t.st=o.Rt(d,c)+m+n.eh,t.Kt!==void 0&&(t.Kt.st=t.st+m+r+.6*i,n.eh+=1.2*i),void(n.eh+=p+r)}e.position}class Uw{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new Vw,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=Oh(e),n=1.5*Ep(e)+2*s,i=this.fh();this.ah={above:Vh(n,i.aboveBar,i.inBar),below:Vh(n,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const r=s.Xs();if(r===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const c=Oh(s.le()),u={sh:c,eh:c};this.zt.tt=jp(this.zt.it,r,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=n[h];d.time!==a&&(u.sh=c,u.eh=c,a=d.time);const f=this.zt.it[h];f.nt=s.It(d.time),d.text!==void 0&&d.text.length>0&&(f.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const p=this.jr.ph(d.time);p!==null&&Ww(f,d,p,u,i.fontSize,c,e,s,o.Vt)}this.ft=!1}}class Hw extends Xc{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(s.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class Kw extends Ll{constructor(e){super(),this.jt=e}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.jt;if(!i.yt())return;const r=i.W(),o=r.lastValueVisible,a=i.bh()!=="",c=r.seriesLastValueMode===0,u=i.Zr(!1);if(u.Xr)return;o&&(e.Kt=this.wh(u,o,c),e.yt=e.Kt.length!==0),(a||c)&&(s.Kt=this.gh(u,o,a,c),s.yt=s.Kt.length>0);const h=i.mh(u.V),d=_l(h);n.t=d.t,n.ki=u.ki,s.Ot=i.$t().Bt(u.ki/i.Dt().At()),e.Ot=h,e.V=d.i,s.V=d.i}gh(e,s,n,i){let r="";const o=this.jt.bh();return n&&o.length!==0&&(r+=`${o} `),s&&i&&(r+=this.jt.Dt().Mh()?e.xh:e.Sh),r.trim()}wh(e,s,n){return s?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Ah(t,e,s,n){const i=Number.isFinite(e),r=Number.isFinite(s);return i&&r?t(e,s):i||r?i?e:s:n}class Ke{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Ke(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Ke(Ah(Math.min,this.Ph(),e.Ph(),-1/0),Ah(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Ct(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let n=this.yh-s,i=this.kh-s;n*=e,i*=e,this.yh=s+n,this.kh=s+i}Oh(e){Ct(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Ke(e.minValue,e.maxValue)}}class ll{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new ll(Ke.Ah(e.priceRange),e.margins)}}class Gw extends Xc{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class qw extends Ll{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.Nh.W(),r=i.axisLabelVisible,o=i.title!=="",a=this.jr;if(!r||!a.yt())return;const c=this.Nh.Fh();if(c===null)return;o&&(s.Kt=i.title,s.yt=!0),s.Ot=a.$t().Bt(c/a.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const u=_l(i.axisLabelColor||i.color);n.t=u.t;const h=i.axisLabelTextColor||u.i;e.V=h,s.V=h,n.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class Xw{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Gw(e,this),this.ur=new qw(e,this),this.Hh=new kp(this.ur,e,e.$t())}$h(e){yt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const n=e.Ct();return n===null?null:s.Rt(this.cn.price,n.Vt)}}class Qw extends Kc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Yw={Bar:(t,e,s,n)=>{var i;const r=e.upColor,o=e.downColor,a=R(t(s,n)),c=en(a.Vt[0])<=en(a.Vt[3]);return{ce:(i=a.V)!==null&&i!==void 0?i:c?r:o}},Candlestick:(t,e,s,n)=>{var i,r,o;const a=e.upColor,c=e.downColor,u=e.borderUpColor,h=e.borderDownColor,d=e.wickUpColor,f=e.wickDownColor,p=R(t(s,n)),m=en(p.Vt[0])<=en(p.Vt[3]);return{ce:(i=p.V)!==null&&i!==void 0?i:m?a:c,Ne:(r=p.Ot)!==null&&r!==void 0?r:m?u:h,Ee:(o=p.Xh)!==null&&o!==void 0?o:m?d:f}},Custom:(t,e,s,n)=>{var i;return{ce:(i=R(t(s,n)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,s,n)=>{var i,r,o,a;const c=R(t(s,n));return{ce:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,lt:(r=c.lt)!==null&&r!==void 0?r:e.lineColor,Ps:(o=c.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(a=c.Rs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(t,e,s,n)=>{var i,r,o,a,c,u;const h=R(t(s,n));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=h.Re)!==null&&i!==void 0?i:e.topLineColor,De:(r=h.De)!==null&&r!==void 0?r:e.bottomLineColor,ke:(o=h.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(a=h.ye)!==null&&a!==void 0?a:e.topFillColor2,Ce:(c=h.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=h.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,n)=>{var i,r;const o=R(t(s,n));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(r=o.V)!==null&&r!==void 0?r:e.color}},Histogram:(t,e,s,n)=>{var i;return{ce:(i=R(t(s,n)).V)!==null&&i!==void 0?i:e.color}}};class Jw{constructor(e){this.Kh=(s,n)=>n!==void 0?n.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=Yw[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var Wh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Wh||(Wh={}));const Gt=30;class Zw{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const n=this.hl(e,s);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,s,n){if(this.Ni())return null;let i=null;for(const r of n)i=cr(i,this._l(e,s,r));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const n=this.ul(e);if(n===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return Di(this.tl,e,(s,n)=>s.ee<n)}vl(e){return Np(this.tl,e,(s,n)=>s.ee>n)}pl(e,s,n){let i=null;for(let r=e;r<s;r++){const o=this.tl[r].Vt[n];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,s,n){if(this.Ni())return null;let i=null;const r=R(this.el()),o=R(this.An()),a=Math.max(e,r),c=Math.min(s,o),u=Math.ceil(a/Gt)*Gt,h=Math.max(u,Math.floor(c/Gt)*Gt);{const f=this.fl(a),p=this.vl(Math.min(c,u,s));i=cr(i,this.pl(f,p,n))}let d=this.il.get(n);d===void 0&&(d=new Map,this.il.set(n,d));for(let f=Math.max(u+1,a);f<h;f+=Gt){const p=Math.floor(f/Gt);let m=d.get(p);if(m===void 0){const v=this.fl(p*Gt),b=this.vl((p+1)*Gt-1);m=this.pl(v,b,n),d.set(p,m)}i=cr(i,m)}{const f=this.fl(h),p=this.vl(c);i=cr(i,this.pl(f,p,n))}return i}}function cr(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class e1{constructor(e){this.wl=e}X(e,s,n){this.wl.draw(e)}gl(e,s,n){var i,r;(r=(i=this.wl).drawBackground)===null||r===void 0||r.call(i,e)}}class xo{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const n=new e1(s);return this.tr={Ml:s,xl:n},n}Sl(){var e,s,n;return(n=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:"normal"}}function Mp(t){var e,s,n,i,r;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(n=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||n===void 0||n,hi:(r=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||r===void 0||r}}class t1{constructor(e,s){this.Wt=new pp,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Mp(this.kl))),this.Wt}}class s1 extends Ll{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,n){const i=Mp(this.kl);n.t=i.t,e.V=i.V;const r=2/12*this.Li.P();n.wi=r,n.gi=r,n.ki=i.ki,n.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class n1{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,n,i;const r=(n=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===r)return this.Cl.xl;const o=r.map(a=>new xo(a));return this.Cl={Ml:r,xl:o},o}Qi(){var e,s,n,i;const r=(n=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===r)return this.Tl.xl;const o=this.jr.$t().St(),a=r.map(c=>new t1(c,o));return this.Tl={Ml:r,xl:a},a}Rn(){var e,s,n,i;const r=(n=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===r)return this.Pl.xl;const o=this.jr.Dt(),a=r.map(c=>new s1(c,o));return this.Pl={Ml:r,xl:a},a}Bl(){var e,s,n,i;const r=(n=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===r)return this.Rl.xl;const o=r.map(a=>new xo(a));return this.Rl={Ml:r,xl:o},o}Al(){var e,s,n,i;const r=(n=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===r)return this.Dl.xl;const o=r.map(a=>new xo(a));return this.Dl={Ml:r,xl:o},o}Il(e,s){var n,i,r;return(r=(i=(n=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(n,e,s))!==null&&r!==void 0?r:null}wr(e,s){var n,i,r;return(r=(i=(n=this.Vl).hitTest)===null||i===void 0?void 0:i.call(n,e,s))!==null&&r!==void 0?r:null}}function wo(t,e,s,n){t.forEach(i=>{e(i).forEach(r=>{r.Sl()===s&&n.push(r)})})}function So(t){return t.Pn()}function i1(t){return t.Bl()}function r1(t){return t.Al()}class Qc extends Qw{constructor(e,s,n,i,r){super(e),this.zt=new Zw,this.jh=new Hw(this),this.zl=[],this.Ll=new Rw(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=n;const o=new Kw(this);this.rn=[o],this.Hh=new kp(o,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new Fw(this)),this.Ul(),this.ql(r)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;const i=this.$t().St().Xs(),r=this.Ct();if(i===null||r===null)return s;let o,a;if(e){const d=this.zt.sl();if(d===null)return s;o=d,a=d.ee}else{const d=this.zt.ll(i.ui(),-1);if(d===null||(o=this.zt.Gh(d.ee),o===null))return s;a=d.ee}const c=o.Vt[3],u=this.Us().$s(a,{Vt:o}),h=n.Rt(c,r.Vt);return{Xr:!1,_t:c,Kt:n.Fi(c,r.Vt),xh:n.Yl(c),Sh:n.Zl(c,r.Vt),V:u.ce,ki:h,ee:a}}Us(){return this.Nl!==null||(this.Nl=new Jw(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),yt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new Xw(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];wo(this.Hl,So,"top",s);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),s.unshift(n)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(n=>n.qh());return e.push(...s),wo(this.Hl,So,"normal",e),e}ua(){return this.ca(So,"bottom")}da(e){return this.ca(i1,e)}fa(e){return this.ca(r1,e)}va(e,s){return this.Hl.map(n=>n.wr(e,s)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const i of this.zl)n.push(i.Zh());return this.Hl.forEach(i=>{n.push(...i.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,s);return i===null?null:i.Bh()});return ll.Ah(n)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return R(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new n1(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof yo)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof yo)return e=>this.wn.je(e)}_a(){return!Pl(this.Dt().Pa())}pa(e,s){if(!ji(e)||!ji(s)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,s,n);let r=i!==null?new Ke(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const a=this.cn.base,c=new Ke(a,a);r=r!==null?r.ts(c):c}let o=this.dn.uh();return this.Hl.forEach(a=>{const c=a.Il(e,s);if(c!=null&&c.priceRange){const p=new Ke(c.priceRange.minValue,c.priceRange.maxValue);r=r!==null?r.ts(p):p}var u,h,d,f;c!=null&&c.margins&&(u=o,h=c.margins,o={above:Math.max((d=u==null?void 0:u.above)!==null&&d!==void 0?d:0,h.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,h.below)})}),new ll(r,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new dw(this.cn.priceFormat.precision);break;case"percent":this.wa=new gp(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Tl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=R(this.zt.el());this.Wl=this.Fl.map((n,i)=>{const r=R(e.Va(n.time,!0)),o=r<s?1:-1;return{time:R(this.zt.ll(r,o)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:i,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new Uw(this,this.$t()),this.$l){case"Bar":this.wn=new Sw(this,this.$t());break;case"Candlestick":this.wn=new kw(this,this.$t());break;case"Line":this.wn=new Pw(this,this.$t());break;case"Custom":this.wn=new yo(this,this.$t(),Fe(e));break;case"Area":this.wn=new xw(this,this.$t());break;case"Baseline":this.wn=new jw(this,this.$t());break;case"Histogram":this.wn=new Lw(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const n=[];return wo(this.Hl,e,s,n),n}}class l1{constructor(e){this.cn=e}Oa(e,s,n){let i=e;if(this.cn.mode===0)return i;const r=n.vn(),o=r.Ct();if(o===null)return i;const a=r.Rt(e,o),c=n.Ba().filter(h=>h instanceof Qc).reduce((h,d)=>{if(n.vr(d)||!d.yt())return h;const f=d.Dt(),p=d.In();if(f.Ni()||!p.Kr(s))return h;const m=p.Gh(s);if(m===null)return h;const v=en(d.Ct());return h.concat([f.Rt(m.Vt[3],v.Vt)])},[]);if(c.length===0)return i;c.sort((h,d)=>Math.abs(h-a)-Math.abs(d-a));const u=c[0];return i=r.pn(u,o),i}}class o1 extends xt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=Math.max(1,Math.floor(n));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=R(this.zt);if(o.Aa){e.strokeStyle=o.Ia,$s(e,o.za),e.beginPath();for(const a of o.La){const c=Math.round(a.Ea*n);e.moveTo(c,-r),e.lineTo(c,s.height+r)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,$s(e,o.Wa),e.beginPath();for(const a of o.ja){const c=Math.round(a.Ea*i);e.moveTo(-r,c),e.lineTo(s.width+r,c)}e.stroke()}})}}class a1{constructor(e){this.Wt=new o1,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class c1{constructor(e){this.wn=new a1(e)}qh(){return this.wn}}const bo={$a:4,Ua:1e-4};function tn(t,e){const s=100*(t-e)/e;return e<0?-s:s}function u1(t,e){const s=tn(t.Ph(),e),n=tn(t.Rh(),e);return new Ke(s,n)}function si(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function h1(t,e){const s=si(t.Ph(),e),n=si(t.Rh(),e);return new Ke(s,n)}function ol(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ua)+e.$a;return t<0?-n:n}function ni(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.$a)-e.Ua;return t<0?-n:n}function Fn(t,e){if(t===null)return null;const s=ol(t.Ph(),e),n=ol(t.Rh(),e);return new Ke(s,n)}function ur(t,e){if(t===null)return null;const s=ni(t.Ph(),e),n=ni(t.Rh(),e);return new Ke(s,n)}function No(t){if(t===null)return bo;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return bo;const s=Math.ceil(Math.abs(Math.log10(e))),n=bo.$a+s;return{$a:n,Ua:1/Math.pow(10,n)}}class jo{constructor(e,s){if(this.qa=e,this.Ya=s,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,n){const i=this.qa===0?0:1/this.qa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),o=0,a=this.Ya[0];for(;;){const d=ar(r,i,1e-14)&&r>i+1e-14,f=ar(r,n*a,1e-14),p=ar(r,1,1e-14);if(!(d&&f&&p))break;r/=a,a=this.Ya[++o%this.Ya.length]}if(r<=i+1e-14&&(r=i),r=Math.max(1,r),this.Za.length>0&&(c=r,u=1,h=1e-14,Math.abs(c-u)<h))for(o=0,a=this.Za[0];ar(r,n*a,1e-14)&&r>i+1e-14;)r/=a,a=this.Za[++o%this.Za.length];var c,u,h;return r}}class Uh{constructor(e,s,n,i){this.Ka=[],this.Li=e,this.qa=s,this.Ga=n,this.Ja=i}Xa(e,s){if(e<s)throw new Error("high < low");const n=this.Li.At(),i=(e-s)*this.Qa()/n,r=new jo(this.qa,[2,2.5,2]),o=new jo(this.qa,[2,2,2.5]),a=new jo(this.qa,[2.5,2,2]),c=[];return c.push(r.Xa(e,s,i),o.Xa(e,s,i),a.Xa(e,s,i)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const n=e.At(),i=this.Ga(n-1,s),r=this.Ga(0,s),o=this.Li.W().entireTextOnly?this.no()/2:0,a=o,c=n-1-o,u=Math.max(i,r),h=Math.min(i,r);if(u===h)return void(this.Ka=[]);let d=this.Xa(u,h),f=u%d;f+=f<0?d:0;const p=u>=h?1:-1;let m=null,v=0;for(let b=u-f;b>h;b-=d){const y=this.Ja(b,s,!0);m!==null&&Math.abs(y-m)<this.Qa()||y<a||y>c||(v<this.Ka.length?(this.Ka[v].Ea=y,this.Ka[v].so=e.eo(b)):this.Ka.push({Ea:y,so:e.eo(b)}),v++,m=y,e.ro()&&(d=this.Xa(b*p,h)))}this.Ka.length=v}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function Lp(t){return t.slice().sort((e,s)=>R(e.Xi())-R(s.Xi()))}var Hh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Hh||(Hh={}));const Kh=new gp,Gh=new Tl(100,1);class d1{constructor(e,s,n,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ve,this.vo=new ve,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Gh,this.xo=No(null),this.So=e,this.cn=s,this.ko=n,this.yo=i,this.Co=new Uh(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(yt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Fe(e.scaleMargins.top),n=Fe(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(r,o){if(r===null)return!1;const a=ni(r.Ph(),o),c=ni(r.Rh(),o);return isFinite(a)&&isFinite(c)}(this.Ih,this.xo)?(n=ur(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(n=Fn(this.Ih,this.xo),n!==null&&this.Ao(n));const i=s.Cr!==this.cn.mode;i&&(s.Cr===2||this.Mh())&&this.Ra(),i&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const n=this.Ih;(s||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=tn(e,s):this.Oo()&&(e=si(e,s)),this.Po(e,s)}te(e,s,n){this.Wo();const i=this.Fo(),r=R(this.Lh()),o=r.Ph(),a=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(a-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,p=this.Ho();for(let m=d;m<f;m++){const v=e[m],b=v._t;if(isNaN(b))continue;let y=b;p!==null&&(y=p(v._t,s));const g=i+h*(y-o),w=u?g:this.ho-1-g;v.st=w}}be(e,s,n){this.Wo();const i=this.Fo(),r=R(this.Lh()),o=r.Ph(),a=r.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(a-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,p=this.Ho();for(let m=d;m<f;m++){const v=e[m];let b=v.ge,y=v.Me,g=v.xe,w=v.Se;p!==null&&(b=p(v.ge,s),y=p(v.Me,s),g=p(v.xe,s),w=p(v.Se,s));let S=i+h*(b-o),C=u?S:this.ho-1-S;v.pe=C,S=i+h*(y-o),C=u?S:this.ho-1-S,v.de=C,S=i+h*(g-o),C=u?S:this.ho-1-S,v.fe=C,S=i+h*(w-o),C=u?S:this.ho-1-S,v.me=C}}pn(e,s){const n=this.To(e,s);return this.$o(n,s)}$o(e,s){let n=e;return this.Mh()?n=function(i,r){return r<0&&(i=-i),i/100*r+r}(n,s):this.Oo()&&(n=function(i,r){return i-=100,r<0&&(i=-i),i/100*r+r}(n,s)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const n=this.po[s];n.Xi()===null&&n.Ki(s+1),e.push(n)}return e=Lp(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const n=s.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=R(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=R(this.ao).Th();s=Math.max(s,.1),n.Vh(s),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=R(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=R(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const i=n*s,r=R(this.ao).Th();r.Oh(i),this.Ao(r,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(tn(e,s));case 3:return this.ba().format(si(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,R(this.e_()).ba())}Zl(e,s){return e=tn(e,s),this.s_(e,Kh)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=Gh,this.Mh()?(this.wa=Kh,s=100):this.Oo()?(this.wa=new Tl(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new Uh(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?ol(e,this.xo):e;const n=R(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(i)}To(e,s){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),i=R(this.Lh()),r=i.Ph()+i.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?ni(r,this.xo):r}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const n=this.r_();let i=0,r=0;for(const c of n){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const h=c.Il(e.Os(),e.ui());let d=h&&h.Lh();if(d!==null){switch(this.cn.mode){case 1:d=Fn(d,this.xo);break;case 2:d=u1(d,u.Vt);break;case 3:d=h1(d,u.Vt)}if(s=s===null?d:s.ts(R(d)),h!==null){const f=h.Eh();f!==null&&(i=Math.max(i,f.above),r=Math.max(r,f.below))}}}if(i===this.co&&r===this.do||(this.co=i,this.do=r,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=ur(s,this.xo)),s=new Ke(s.Ph()-u,s.Rh()+u),this.ro()&&(s=Fn(s,this.xo))}if(this.ro()){const c=ur(s,this.xo),u=No(c);if(o=u,a=this.xo,o.$a!==a.$a||o.Ua!==a.Ua){const h=this.ao!==null?ur(this.ao,this.xo):null;this.xo=u,s=Fn(c,u),h!==null&&(this.ao=Fn(h,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Ke(-.5,.5)),this.xo=No(null));var o,a;this.oo._o=!0}Ho(){return this.Mh()?tn:this.Oo()?si:this.ro()?e=>ol(e,this.xo):null}a_(e,s,n){return s===void 0?(n===void 0&&(n=this.ba()),n.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class f1{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ve,this.yl=e,this.$i=s,this.d_=new c1(this);const n=s.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const n of s){const i=R(n[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Fe(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const n=s.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,n){const i=n!==void 0?n:this.C_().y_+1;this.T_(e,s,i)}Zo(e){const s=this.po.indexOf(e);us(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const n=R(e.Dt()).Pa();if(this.o_.has(n)){const r=Fe(this.o_.get(n)),o=r.indexOf(e);o!==-1&&(r.splice(o,1),r.length===0&&this.o_.delete(n))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=Lp(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,n=0;for(let i=0;i<e.length;i++){const r=e[i].Xi();r!==null&&(r<s&&(s=r),r>n&&(n=r))}return{H_:s,y_:n}}T_(e,s,n){let i=this.w_(s);if(i===null&&(i=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!Pl(s)){const r=this.o_.get(s)||[];r.push(e),this.o_.set(s,r)}i.qo(e),e.Gi(i),e.Ki(n),this.P_(i),this.mo=null}m_(e,s,n){s.Cr!==n.Cr&&this.L_(e)}v_(e,s){const n=Object.assign({visible:!0,autoScale:!0},zt(s)),i=new d1(e,n,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class m1{constructor(e,s,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=n}Y_(e){const s=e.time,n=this.q_.cacheKey(s),i=this.tr.get(n);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Fe(o)),this.Je++,this.Ke--}const r=this.U_(e);return this.tr.set(n,{Z_:r,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,r}}class ii{constructor(e,s){us(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function qh(t,e){return t===null||e===null?t===e:t.Ch(e)}class p1{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let n=s;n<e.length;++n){const i=e[n];let r=this.J_.get(i.timeWeight);r===void 0&&(r=[],this.J_.set(i.timeWeight,r)),r.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,s){const n=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((n,i)=>{e<=n[0].index?s.push(i):n.splice(Di(n,e,r=>r.index<e),1/0)});for(const n of s)this.J_.delete(n)}ru(e){let s=[];for(const n of Array.from(this.J_.keys()).sort((i,r)=>r-i)){if(!this.J_.get(n))continue;const i=s;s=[];const r=i.length;let o=0;const a=Fe(this.J_.get(n)),c=a.length;let u=1/0,h=-1/0;for(let d=0;d<c;d++){const f=a[d],p=f.index;for(;o<r;){const m=i[o],v=m.index;if(!(v<p)){u=v;break}o++,s.push(m),h=v,u=1/0}if(u-p>=e&&p-h>=e)s.push(f),h=p;else if(this.Q_)return i}for(;o<r;o++)s.push(i[o])}return s}}class cn{constructor(e){this.hu=e}lu(){return this.hu===null?null:new ii(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new cn(null)}}function g1(t,e){return t.weight>e.weight?t:e}class v1{constructor(e,s,n,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new p1,this.du=new Map,this.fu=cn.ou(),this.vu=!0,this.pu=new ve,this.mu=new ve,this.bu=new ve,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=n,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){yt(this.yo,e),this.Cu(),this.ku()}$h(e,s){var n;yt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,n;return(n=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&n!==void 0?n:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const n=Di(this.uu,this.q_.key(e),(i,r)=>this.q_.key(i.time)<r);return this.q_.key(e)<this.q_.key(this.uu[n].time)?s?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),n=Math.round(e.to),i=R(this.Bu()),r=R(this.Au());return{from:R(this.Ui(Math.max(i,s))),to:R(this.Ui(Math.min(r,n)))}}Iu(e){return{from:R(this.Va(e.from,!0)),to:R(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const i=this.Su*e/n;this.Su=i}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const i=n-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!ji(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const n=this.Eu(),i=s===void 0?0:s.from,r=s===void 0?e.length:s.to;for(let o=i;o<r;o++){const a=e[o].ot,c=n+this.xu-a,u=this.__-(c+.5)*this.Su-1;e[o].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(s/e),i=R(this.Xs()),r=Math.max(i.Os(),i.Os()-n),o=Math.max(i.ui(),i.ui()-n),a=this.cu.su(e,s),c=this.Bu()+n,u=this.Au()-n,h=this.$u(),d=this.cn.fixLeftEdge||h,f=this.cn.fixRightEdge||h;let p=0;for(const m of a){if(!(r<=m.index&&m.index<=o))continue;let v;p<this.Mu.length?(v=this.Mu[p],v.coord=this.It(m.index),v.label=this.Uu(m),v.weight=m.weight):(v={needAlignCoordinate:!1,coord:this.It(m.index),label:this.Uu(m),weight:m.weight},this.Mu.push(v)),this.Su>s/2&&!h?v.needAlignCoordinate=!1:v.needAlignCoordinate=d&&m.index<=c||f&&m.index>=u,p++}return this.Mu.length=p,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const n=this.Fu(e),i=this.le(),r=i+s*(i/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=za(this.__-e,0,this.__),n=za(this.__-R(this.wo),0,this.__);s!==0&&n!==0&&this.Gn(this.wu.le*s/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=R(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,i=performance.now();this.$i.Zn({Qu:r=>(r-i)/s>=1,tc:r=>{const o=(r-i)/s;return o>=1?e:n+(e-n)*o}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new ii(e,s+this.cn.rightOffset))}lc(e){const s=new ii(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),n=this.Eu()+this.xu-s;return Math.round(1e6*n)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(cn.ou());const e=this.Eu(),s=this.__/this.Su,n=this.xu+e,i=new ii(n-s+1,n);this._c(new cn(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new m1(n=>this.fc(n),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,qh(s.lu(),this.fu.lu())||this.pu.m(),qh(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const n=s.Os()-e;if(n<0){const i=this.xu-n-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class y1{X(e,s,n){e.useMediaCoordinateSpace(i=>this.K(i,s,n))}gl(e,s,n){e.useMediaCoordinateSpace(i=>this.vc(i,s,n))}vc(e,s,n){}}class x1 extends y1{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:n}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;s.font=o.R;const a=this.wc(s,o.Kt);a>n.width?o.Zu=n.width/a:o.Zu=1,i+=o.gc*o.Zu}let r=0;switch(this.zt.Mc){case"top":r=0;break;case"center":r=Math.max((n.height-i)/2,0);break;case"bottom":r=Math.max(n.height-i,0)}s.fillStyle=this.zt.V;for(const o of this.zt.bc){s.save();let a=0;switch(this.zt.xc){case"left":s.textAlign="left",a=o.gc/2;break;case"center":s.textAlign="center",a=n.width/2;break;case"right":s.textAlign="right",a=n.width-1-o.gc/2}s.translate(a,r),s.textBaseline="top",s.font=o.R,s.scale(o.Zu,o.Zu),s.fillText(o.Kt,0,o.Sc),s.restore(),r+=o.gc*o.Zu}}wc(e,s){const n=this.kc(e.font);let i=n.get(s);return i===void 0&&(i=e.measureText(s).width,n.set(s,i)),i}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class w1{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new x1(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:vn(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class S1 extends Kc{constructor(e,s){super(),this.cn=s,this.wn=new w1(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Xh,Qh,Yh,Jh,Zh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Xh||(Xh={}));class b1{constructor(e,s,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ve,this.Rc=new ve,this.Dc=null,this.Vc=e,this.cn=s,this.q_=n,this.Oc=new ew(this),this.yl=new v1(this,s.timeScale,this.cn.localization,n),this.vt=new hw(this,s.crosshair),this.Bc=new l1(s.crosshair),this.Ac=new S1(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(ke.es())}Uh(){this.Nc(ke.ss())}oa(){this.Nc(new ke(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){yt(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const n=this.Uc(e);n!==null&&(n.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const n=s.w_(e);if(n!==null)return{Ht:s,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new f1(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const n=e===void 0?this.yc.length-1:e,i=ke.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Nc(i),s}V_(e,s,n){e.V_(s,n)}O_(e,s,n){e.O_(s,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,n){s.Vo()||e.A_(s,n)}I_(e,s,n){s.Vo()||(e.I_(s,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const n=this.St();if(n.Ni()||s===0)return;const i=n.Hi();e=Math.max(1,Math.min(e,i)),n.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,n,i,r){this.vt.gn(e,s);let o=NaN,a=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(a=Math.min(Math.max(c.Os(),a),c.ui()));const u=i.vn(),h=u.Ct();h!==null&&(o=u.pn(s,h)),o=this.Bc.Oa(o,a,i),this.vt.kn(a,o,i),this.oa(),r||this.Rc.m(this.vt.xt(),{x:e,y:s},n)}ad(e,s,n){const i=n.vn(),r=i.Ct(),o=i.Rt(e,R(r)),a=this.yl.Va(s,!0),c=this.yl.It(R(a));this.ld(c,o,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),n=this.vt.Sn();this.ld(s,n,null,e)}this.vt.Vn()}_d(e,s,n){const i=this.yl.mn(0);s!==void 0&&n!==void 0&&this.yl.bt(s,n);const r=this.yl.mn(0),o=this.yl.Eu(),a=this.yl.Xs();if(a!==null&&i!==null&&r!==null){const c=a.Kr(o),u=this.q_.key(i)>this.q_.key(r),h=e!==null&&e>o&&!u,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(n!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!f){const p=e-o;this.yl.Jn(this.yl.Hu()-p)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(n=>n.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,n){const i=this.yc[0],r=this.fd(s,e,i,n);return this.Cc.push(r),this.Cc.length===1?this.Kl():this.Uh(),r}vd(e){const s=this.dr(e),n=this.Cc.indexOf(e);us(n!==-1,"Series not found"),this.Cc.splice(n,1),R(s).Zo(e),e.S&&e.S()}Xl(e,s){const n=R(this.dr(e));n.Zo(e);const i=this.Uc(s);if(i===null){const r=e.Xi();n.qo(e,s,r)}else{const r=i.Ht===n?e.Xi():void 0;i.Ht.qo(e,s,r)}}hc(){const e=ke.ss();e.$n(),this.Nc(e)}pd(e){const s=ke.ss();s.Yn(e),this.Nc(s)}Kn(){const e=ke.ss();e.Kn(),this.Nc(e)}Gn(e){const s=ke.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=ke.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=ke.ss();s.Zn(e),this.Nc(s)}Un(){const e=ke.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,n=this.zc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==s)this.Dc={Ps:n,Rs:s,wd:new Map};else{const r=this.Dc.wd.get(e);if(r!==void 0)return r}const i=function(r,o,a){const[c,u,h,d]=Ni(r),[f,p,m,v]=Ni(o),b=[st(c+a*(f-c)),st(u+a*(p-u)),st(h+a*(m-h)),dp(d+a*(v-d))];return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${b[3]})`}(n,s,e/100);return this.Dc.wd.set(e,i),i}Gc(e,s){const n=new ke(s);if(e!==null){const i=this.yc.indexOf(e);n.Nn(i,{Fn:s})}return n}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,n,i){const r=new Qc(this,e,s,n,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(r,o),Pl(o)||r.$h(e),r}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function Ra(t){return!Ct(t)&&!Ii(t)}function Pp(t){return Ct(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Qh||(Qh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Yh||(Yh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Jh||(Jh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Zh||(Zh={}));const ed=t=>t.getUTCFullYear();function N1(t,e,s){return e.replace(/yyyy/g,(n=>Rt(ed(n),4))(t)).replace(/yy/g,(n=>Rt(ed(n)%100,2))(t)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,s)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,s)).replace(/MM/g,(n=>Rt((i=>i.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>Rt((i=>i.getUTCDate())(n),2))(t))}class Tp{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return N1(e,this.gd,this.Md)}}class j1{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Rt(e.getUTCHours(),2)).replace("%m",Rt(e.getUTCMinutes(),2)).replace("%s",Rt(e.getUTCSeconds(),2))}}const C1={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class k1{constructor(e={}){const s=Object.assign(Object.assign({},C1),e);this.Td=new Tp(s.Sd,s.Cd),this.Pd=new j1(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function hr(t){return 60*t*60*1e3}function Co(t){return 60*t*1e3}const dr=[{Dd:(td=1,1e3*td),Vd:10},{Dd:Co(1),Vd:20},{Dd:Co(5),Vd:21},{Dd:Co(30),Vd:22},{Dd:hr(1),Vd:30},{Dd:hr(3),Vd:31},{Dd:hr(6),Vd:32},{Dd:hr(12),Vd:33}];var td;function sd(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=dr.length-1;s>=0;--s)if(Math.floor(e.getTime()/dr[s].Dd)!==Math.floor(t.getTime()/dr[s].Dd))return dr[s].Vd;return 0}function ko(t){let e=t;if(Ii(t)&&(e=Yc(t)),!Ra(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function nd(t){if(!Pp(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Yc(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function id(t){Ii(t.time)&&(t.time=Yc(t.time))}class rd{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(id)}(e):id(e)}createConverterToInternalObj(e){return R(function(s){return s.length===0?null:Ra(s[0].time)||Ii(s[0].time)?ko:nd}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return Pp(s=e)?nd(s):Ra(s)?ko(s):ko(Yc(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new k1({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Tp(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const n=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const r=i.tickMarkFormatter(e.originalTime,n,s.locale);if(r!==null)return r}return function(r,o,a){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=r.Bd===void 0?new Date(1e3*r.Od):new Date(Date.UTC(r.Bd.year,r.Bd.month-1,r.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(a,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(g1,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,i=0){if(n.length===0)return;let r=i===0?null:n[i-1].time.Od,o=r!==null?new Date(1e3*r):null,a=0;for(let c=i;c<n.length;++c){const u=n[c],h=new Date(1e3*u.time.Od);o!==null&&(u.timeWeight=sd(h,o)),a+=u.time.Od-(r||u.time.Od),r=u.time.Od,o=h}if(i===0&&n.length>1){const c=Math.ceil(a/(n.length-1)),u=new Date(1e3*(n[0].time.Od-c));n[0].timeWeight=sd(new Date(1e3*n[0].time.Od),u)}})(e,s)}static Id(e){return yt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const yn=typeof window<"u";function ld(){return!!yn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Eo(){return!!yn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ia(t){return t+t%2}function _o(t,e){return t.zd-e.zd}function Mo(t,e,s){const n=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),s)}class E1{constructor(e,s,n,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=n,this.rs=i}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let n=0;const i=Mo(this.Ld,this.Ed,this.Ud),r=_o(this.Ld,this.Ed),o=[i],a=[r];if(n+=r,this.Nd!==null){const u=Mo(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(i)){const h=_o(this.Ed,this.Nd);if(o.push(u),a.push(h),n+=h,this.Fd!==null){const d=Mo(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(i)){const f=_o(this.Nd,this.Fd);o.push(d),a.push(f),n+=f}}}}let c=0;for(let u=0;u<o.length;++u)c+=a[u]/n*o[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.qd))}tc(e){const s=R(this.Wd),n=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-R(this.Wd).ot;return Math.min(s,this.jd)}}class _1{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return fp(Ni(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function zs(t,e){const s=R(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=Ox(s,{options:{allowResizeObserver:!1},transform:(i,r)=>({width:Math.max(i.width,r.width),height:Math.max(i.height,r.height)})});return n.resizeCanvasElement(e),n}function Rs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Da(t,e,s,n){t.gl&&t.gl(e,s,n)}function Tr(t,e,s,n){t.X(e,s,n)}function Fa(t,e,s,n){const i=t(s,n);for(const r of i){const o=r.gt();o!==null&&e(o)}}function M1(t){yn&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Jc{constructor(e,s,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Eo(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const r=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(bt(i),this.cf);o<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}}else{const r=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(bt(i),this.af);o<5&&!this.bf&&this.Uf(r,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=Lo(e.changedTouches,R(this.Of));if(s===null||(this.Vf=fr(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(bt(s),R(this.pf)),{nv:i,sv:r,Nf:o}=n;if(this.mf||!(o<5)){if(!this.mf){const a=.5*i,c=r>=a&&!this.cn.ev(),u=a>r&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const a=this.Ef(e,s);this.Wf(a,this.Hf.hv),Bs(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(bt(e),R(this.vf)),{Nf:n}=s;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,s){const n=Math.abs(s.nt-e.nt),i=Math.abs(s.st-e.st);return{nv:n,sv:i,Nf:n+i}}ov(e){let s=Lo(e.changedTouches,R(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=fr(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,s);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(bt(s),this.cf);i<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&Bs(e));this._f===0&&Bs(e),e.touches.length===0&&this.ff&&(this.ff=!1,Bs(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),ld()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(bt(e),this.af);n<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=fr(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=bt(s),this.yf&&(this.yf(),this.yf=null);{const r=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",r),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",r,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,s);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=bt(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;ld()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=bt(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),r=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",r)},s.addEventListener("mousemove",i),s.addEventListener("mouseup",r)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=bt(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}Eo()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),M1(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=od(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),Bs(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=od(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!Eo()}vv(e){const s=Lo(e.touches,R(this.Of));if(s===null)return;const n=this.Ef(e,s);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:fr(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const n=s||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Bs(e)}}}}function od(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function Bs(t){t.cancelable&&t.preventDefault()}function bt(t){return{nt:t.pageX,st:t.pageY}}function fr(t){return t.timeStamp||performance.now()}function Lo(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function mr(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function L1(t,e,s){for(const n of t){const i=n.gt();if(i!==null&&i.wr){const r=i.wr(e,s);if(r!==null)return{Bv:n,Iv:r}}}return null}function Po(t,e){return s=>{var n,i,r,o;return((i=(n=s.Dt())===null||n===void 0?void 0:n.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(r=s.da)===null||r===void 0?void 0:r.call(s,t))!==null&&o!==void 0?o:[]}}function ad(t,e,s,n){if(!t.length)return;let i=0;const r=s/2,o=t[0].At(n,!0);let a=e===1?r-(t[0].Vi()-o/2):t[0].Vi()-o/2-r;a=Math.max(0,a);for(let c=1;c<t.length;c++){const u=t[c],h=t[c-1],d=h.At(n,!1),f=u.Vi(),p=h.Vi();if(e===1?f>p-d:f<p+d){const m=p-d*e;u.Oi(m);const v=m-e*d/2;if((e===1?v<0:v>s)&&a>0){const b=e===1?-1-v:v-s,y=Math.min(b,a);for(let g=i;g<t.length;g++)t[g].Oi(t[g].Vi()+e*y);a-=y}}else i=c,a=e===1?p-d-f:f-(p+d)}}class cd{constructor(e,s,n,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new ki(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=n,this.qv=i==="left",this.Yv=Po("normal",i),this.Zv=Po("top",i),this.Xv=Po("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=zs(this.Kv,re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=zs(this.Kv,re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Jc(this.Jv.canvasElement,a,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Rs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Rs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),n=R(this.Gv.canvasElement.getContext("2d"));n.save();const i=this.Li.Ha();n.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(n,i[0].so),this.Fv.xi(n,i[i.length-1].so)));const r=this.up();for(let u=r.length;u--;){const h=this.Fv.xi(n,r[u].Kt());h>e&&(e=h)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(a=this.cn.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const u=this.Li.pn(1,o),h=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(u,h))+.11111111111111,o)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(u,h))-.11111111111111,o)))}var a;n.restore();const c=e||34;return Ia(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&Cs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return R(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,R(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=Ts(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const s=Ts(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,s.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp(),i=this.Li;s.O_(n,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,s.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(n=>{for(let i=0;i<n.length;++i){const r=n[i].Rn(this.tn.fp(),s);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,r=this.tn.fp().$t(),o=r.q(),a=r.bd();o===a?Ml(e,0,0,n,i,o):mp(e,0,0,n,i,o,a)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*n));let r;r=this.qv?s.width-i:0,e.fillRect(r,0,i,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),n=this.Li.W(),i=this.ap(),r=this.qv?this.Ev.width-i.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:c})=>{o.fillStyle=n.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(i.T*a);o.beginPath();for(const f of s)o.rect(Math.floor(r*a),Math.round(f.Ea*c)-h,d,u);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this._p(),o.fillStyle=(a=n.textColor)!==null&&a!==void 0?a:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const c=this.qv?Math.round(r-i.A):Math.round(r+i.T+i.A),u=s.map(h=>this.Fv.Mi(o,h.so));for(let h=s.length;h--;){const d=s[h];o.fillText(d.so,c,d.Ea+u[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),n=this.tn.fp(),i=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(o=>{n.vr(o)&&s.push(o)});const r=this.Li;s.forEach(o=>{o.Rn(n,r).forEach(a=>{a.Oi(null),a.Bi()&&e.push(a)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,s){if(this.Ev===null)return;const n=this.Ev.height/2,i=e.filter(o=>o.ki()<=n),r=e.filter(o=>o.ki()>n);i.sort((o,a)=>a.ki()-o.ki()),r.sort((o,a)=>o.ki()-a.ki());for(const o of e){const a=Math.floor(o.At(s)/2),c=o.ki();c>-a&&c<a&&o.Oi(a),c>this.Ev.height-a&&c<this.Ev.height+a&&o.Oi(this.Ev.height-a)}ad(i,1,this.Ev.height,s),ad(r,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),n=this.ap(),i=this.qv?"right":"left";s.forEach(r=>{r.Ai()&&r.gt(R(this.Li)).X(e,n,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),n=[],i=this.tn.fp(),r=s.Zc().Rn(i,this.Li);r.length&&n.push(r);const o=this.ap(),a=this.qv?"right":"left";n.forEach(c=>{c.forEach(u=>{u.gt(R(this.Li)).X(e,o,this.Fv,a)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return vn(this.ko.fontSize,this.ko.fontFamily)}}function P1(t,e){var s,n;return(n=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function pr(t,e){var s,n;return(n=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function T1(t,e){var s,n;return(n=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function $1(t,e){var s,n;return(n=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}class Zc{constructor(e,s){this.Ev=re({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ve,this.Op=new ve,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=zs(n,re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=zs(n,re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Jc(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Rs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Rs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return R(this.Np)}qp(e){var s,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Zc.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new _1(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(R(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(R(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,n=e.localY;this.Gp(s,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const n=e.localX,i=e.localY;this.Gp(n,i,e);const r=this.wr(n,i);this.Qd.Qp((s=r==null?void 0:r.Lv)!==null&&s!==void 0?s:null),this.$i().jc(r&&{Hc:r.Hc,Iv:r.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const n=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=R(this.Lp),r=i.x+(s-this.Ip.x),o=i.y+(n-this.Ip.y);this.Gp(r,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const n=this.Np;return n===null?null:function(i,r,o){const a=i.Uo(),c=function(u,h,d){var f,p;let m,v;for(const g of u){const w=(p=(f=g.va)===null||f===void 0?void 0:f.call(g,h,d))!==null&&p!==void 0?p:[];for(const S of w)b=S.zOrder,(!(y=m==null?void 0:m.zOrder)||b==="top"&&y!=="top"||b==="normal"&&y==="bottom")&&(m=S,v=g)}var b,y;return m&&v?{zv:m,Hc:v}:null}(a,r,o);if((c==null?void 0:c.zv.zOrder)==="top")return mr(c);for(const u of a){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return mr(c);const h=L1(u.Pn(i),r,o);if(h!==null)return{Hc:u,Bv:h.Bv,Iv:h.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return mr(c)}return c!=null&&c.zv?mr(c):null}(n,e,s)}_m(e,s){R(s==="left"?this.Cp:this.Tp).cp(re({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Cs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=R(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const n=s.Dt();n!==null&&e.P_(n),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=Ts(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(n,P1),this.vm(n),this.pm(n),this.fm(n,pr),this.fm(n,T1)))}this.Jv.applySuggestedBitmapSize();const s=Ts(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.bm(s),this.fm(s,$1))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const n=s.localX,i=s.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:i},s)}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,r=this.$i(),o=r.q(),a=r.bd();o===a?Ml(e,0,0,n,i,a):mp(e,0,0,n,i,o,a)}vm(e){const s=R(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,pr,Da,s),this.Mm(e,pr,Tr,s)}bm(e){this.Mm(e,pr,Tr,this.$i().Zc())}fm(e,s){const n=R(this.Np).Uo();for(const i of n)this.Mm(e,s,Da,i);for(const i of n)this.Mm(e,s,Tr,i)}Mm(e,s,n,i){const r=R(this.Np),o=r.$t().Wc(),a=o!==null&&o.Hc===i,c=o!==null&&a&&o.Iv!==void 0?o.Iv.Mr:void 0;Fa(s,u=>n(u,e,a,c),i,r)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,n=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();s&&this.Cp===null&&(this.Cp=new cd(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new cd(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,n){this.$i().ld(this.Sm(e),this.km(s),n,R(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,n){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,n);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),n=this.fp();if(s.z_(n,n.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const i=performance.now(),r=s.St();this.Ep.Vr(r.Hu(),i),this.Ep.Qu(i)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)R(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),n=s.St();if(n.Ni())return;const i=this.Qd.W(),r=i.handleScroll,o=i.kineticScroll;if((!r.pressedMouseMove||e.Dv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Dv))return;const a=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const u=n.le();this.Ep=new E1(.2/u,7/u,.997,15/u),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;a.Ni()||s.A_(this.Np,a,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(a.Ni()||s.I_(this.Np,a,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),c))}}class ud{constructor(e,s,n,i,r){this.ft=!0,this.Ev=re({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=s,this.Tm=i,this.Pm=r,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=zs(this.Kv,re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Rs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Cs(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Ts(this.Gv);s!==null&&s.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Oc.W().C*n),o=Math.floor(this.Oc.W().C*i),a=this.qv?s.width-r:0;e.fillRect(a,0,r,o)}mp({context:e,bitmapSize:s}){Ml(e,0,0,s.width,s.height,this.Pm())}}function eu(t){return e=>{var s,n;return(n=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&n!==void 0?n:[]}}const z1=eu("normal"),R1=eu("top"),I1=eu("bottom");class D1{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=re({width:0,height:0}),this.Om=new ve,this.Fv=new ki(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=zs(this.Im,re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=zs(this.Im,re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Jc(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Rs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Rs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,n){Cs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(re({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(re({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=Ts(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(n,I1)}),this.wp(n),this.$m(n,z1)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Ts(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,R1))}$m(e,s){const n=this.Qd.$t().wt();for(const i of n)Fa(s,r=>Da(r,e,!1,void 0),i,void 0);for(const i of n)Fa(s,r=>Tr(r,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:s}){Ml(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,s.width,i)}}wp(e){const s=this.Qd.$t().St(),n=s.Ha();if(!n||n.length===0)return;const i=this.q_.maxTickMarkWeight(n),r=this.jm(),o=s.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:c,verticalPixelRatio:u})=>{a.strokeStyle=this.qm(),a.fillStyle=this.qm();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);a.beginPath();const f=Math.round(r.T*u);for(let p=n.length;p--;){const m=Math.round(n[p].coord*c);a.rect(m-d,0,h,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const c=r.C+r.T+r.L+r.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this._p();for(const u of n)if(u.weight<i){const h=u.needAlignCoordinate?this.Ym(a,u.coord,u.label):u.coord;a.fillText(u.label,h,c)}this.Qd.W().timeScale.allowBoldLabels&&(a.font=this.Zm());for(const u of n)if(u.weight>=i){const h=u.needAlignCoordinate?this.Ym(a,u.coord,u.label):u.coord;a.fillText(u.label,h,c)}})}Ym(e,s,n){const i=this.Fv.xi(e,n),r=i/2,o=Math.floor(s-r)+.5;return o<0?s+=Math.abs(0-o):o+i>this.Ev.width&&(s-=Math.abs(this.Ev.width-(o+i))),s}Um(e,s){const n=this.jm();for(const i of e)for(const r of i.Qi())r.gt().X(s,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return vn(this.j(),this.cn.fontFamily)}Zm(){return vn(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new ki,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const n=this.j();e.P=n,e.R=s,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},i=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,r=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new ud("left",s,n,i,r),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new ud("right",s,n,i,r),this.Am.appendChild(this.Dm.lp()))}}const F1=!!yn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!yn&&(!((To=navigator==null?void 0:navigator.userAgentData)===null||To===void 0)&&To.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var To;class O1{constructor(e,s,n){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ve,this.Op=new ve,this.Rc=new ve,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),$o(this.cn)&&this.hb(!0),this.$i=new b1(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new D1(this,this.q_),this.sb.appendChild(this.ab.lp());const r=s.autoSize&&this.ob();let o=this.cn.width,a=this.cn.height;if(r||o===0||a===0){const c=e.getBoundingClientRect();o=o||c.width,a=a||c.height}this._b(o,a),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],R(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,n=!1){if(this.ho===s&&this.__===e)return;const i=function(a){const c=Math.floor(a.width),u=Math.floor(a.height);return re({width:c-c%2,height:u-u%2})}(re({width:e,height:s}));this.ho=i.height,this.__=i.width;const r=this.ho+"px",o=this.__+"px";R(this.Xd).style.height=r,R(this.Xd).style.width=o,this.sb.style.height=r,this.sb.style.width=o,n?this.mb(ke.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=ke.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=$o(this.cn);this.$i.$h(e);const n=$o(this.cn);n!==s&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=R(s.getContext("2d"));return this.gb(n),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:R(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Fe(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,n=0;const i=this.Xm[0],r=(a,c)=>{let u=0;for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],f=R(a==="left"?d.wm():d.gm()),p=f.xp();e!==null&&f.Sp(e,c,u),u+=p.height}};this.xb()&&(r("left",0),s+=R(i.wm()).xp().width);for(let a=0;a<this.Xm.length;a++){const c=this.Xm[a],u=c.xp();e!==null&&c.Sp(e,s,n),n+=u.height}s+=i.xp().width,this.Sb()&&(r("right",s),s+=R(i.gm()).xp().width);const o=(a,c,u)=>{R(a==="left"?this.ab.Lm():this.ab.Em()).Sp(R(e),c,u)};if(this.cn.timeScale.visible){const a=this.ab.xp();if(e!==null){let c=0;this.xb()&&(o("left",c,n),c=R(i.wm()).xp().width),this.ab.Sp(e,c,n),c+=a.width,this.Sb()&&o("right",c,n)}n+=a.height}return re({width:s,height:n})}Pb(){let e=0,s=0,n=0;for(const m of this.Xm)this.xb()&&(s=Math.max(s,R(m.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,R(m.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=m.M_();s=Ia(s),n=Ia(n);const i=this.__,r=this.ho,o=Math.max(i-s-n,0),a=this.cn.timeScale.visible;let c=a?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const h=0+c,d=r<h?0:r-h,f=d/e;let p=0;for(let m=0;m<this.Xm.length;++m){const v=this.Xm[m];v.qp(this.$i.qc()[m]);let b=0,y=0;y=m===this.Xm.length-1?d-p:Math.round(v.M_()*f),b=Math.max(y,2),p+=b,v.cp(re({width:o,height:b})),this.xb()&&v._m(s,"left"),this.Sb()&&v._m(n,"right"),v.fp()&&this.$i.Kc(v.fp(),b)}this.ab.Fm(re({width:a?o:0,height:c}),a?s:0,a?n:0),this.$i.S_(o),this.Gm!==s&&(this.Gm=s),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return F1?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),n=s*e.deltaX/100,i=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,r)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,s){var n;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(r=>{r.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const n of e.Qn())this.ns(n,s)}Vb(e){const s=this.$i.qc();for(let n=0;n<s.length;n++)e.Hn(n).Wn&&s[n].N_()}ns(e,s){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(s)||n.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,s);for(const i of n.Qn())if(i.qn===5&&!i.Vt.Qu(s)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,n=this.Xm.length;for(let i=s;i<n;i++){const r=Fe(this.Xm.pop());this.sb.removeChild(r.lp()),r.lm().p(this),r.am().p(this),r.S()}for(let i=n;i<s;i++){const r=new Zc(this,e[i]);r.lm().l(this.Bb.bind(this),this),r.am().l(this.Ab.bind(this),this),this.Xm.push(r),this.sb.insertBefore(r.lp(),this.ab.lp())}for(let i=0;i<s;i++){const r=e[i],o=this.Xm[i];o.fp()!==r?o.qp(r):o.Up()}this.cb(),this.Pb()}Ib(e,s,n){var i;const r=new Map;e!==null&&this.$i.wt().forEach(h=>{const d=h.In().ll(e);d!==null&&r.set(h,d)});let o;if(e!==null){const h=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;h!==void 0&&(o=h)}const a=this.$t().Wc(),c=a!==null&&a.Hc instanceof Qc?a.Hc:void 0,u=a!==null&&a.Iv!==void 0?a.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:r,Fb:u,Wb:n??void 0}}Bb(e,s,n){this.Vp.m(()=>this.Ib(e,s,n))}Ab(e,s,n){this.Op.m(()=>this.Ib(e,s,n))}lb(e,s,n){this.Rc.m(()=>this.Ib(e,s,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(n=>n.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function $o(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function V1(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function $p(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}function hd(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.color!==void 0&&(r.V=s.color),r}function B1(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.lineColor!==void 0&&(r.lt=s.lineColor),s.topColor!==void 0&&(r.Ps=s.topColor),s.bottomColor!==void 0&&(r.Rs=s.bottomColor),r}function A1(t,e,s,n){const i=s.value,r={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.topLineColor!==void 0&&(r.Re=s.topLineColor),s.bottomLineColor!==void 0&&(r.De=s.bottomLineColor),s.topFillColor1!==void 0&&(r.ke=s.topFillColor1),s.topFillColor2!==void 0&&(r.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(r.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(r.Te=s.bottomFillColor2),r}function W1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),i}function U1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),s.borderColor!==void 0&&(i.Ot=s.borderColor),s.wickColor!==void 0&&(i.Xh=s.wickColor),i}function H1(t,e,s,n,i){const r=Fe(i)(s),o=Math.max(...r),a=Math.min(...r),c=r[r.length-1],u=[c,o,a,c],h=s,{time:d,color:f}=h;return{ee:e,ot:t,Vt:u,zb:n,$e:$p(h,["time","color"]),V:f}}function gr(t){return t.Vt!==void 0}function dd(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function vs(t){return(e,s,n,i,r,o)=>function(a,c){return c?c(a):(u=a).open===void 0&&u.value===void 0;var u}(n,o)?dd({ot:e,ee:s,zb:i},n):dd(t(e,s,n,i,r),n)}function fd(t){return{Candlestick:vs(U1),Bar:vs(W1),Area:vs(B1),Baseline:vs(A1),Histogram:vs(hd),Line:vs(hd),Custom:vs(H1)}[t]}function md(t){return{ee:0,Hb:new Map,la:t}}function pd(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function gd(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Fe(e)}class K1{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let n=this.qb.size!==0,i=!1;const r=this.Yb.get(e);if(r!==void 0)if(this.Yb.size===1)n=!1,i=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(i=!0);let o=[];if(s.length!==0){const c=s.map(p=>p.time),u=this.q_.createConverterToInternalObj(s),h=fd(e.Qh()),d=e.Ca(),f=e.Ta();o=s.map((p,m)=>{const v=u(p.time),b=this.q_.key(v);let y=this.qb.get(b);y===void 0&&(y=md(v),this.qb.set(b,y),i=!0);const g=h(v,y.ee,p,c[m],d,f);return y.Hb.set(e,g),g})}n&&this.Gb(),this.Jb(e,o);let a=-1;if(i){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:gd(u.Hb)})}),c.sort((u,h)=>this.q_.key(u.time)-this.q_.key(h.time)),a=this.Qb(c)}return this.tw(e,a,function(c,u,h){const d=pd(c,h),f=pd(u,h);if(d!==void 0&&f!==void 0)return{ta:d.Ub>=f.Ub&&d.$b>=f.$b}}(this.Yb.get(e),r,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const n=s;(function(v){v.zb===void 0&&(v.zb=v.time)})(n),this.q_.preprocessData(s);const i=this.q_.createConverterToInternalObj([s])(s.time),r=this.Zb.get(e);if(r!==void 0&&this.q_.key(i)<this.q_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const a=o===void 0;o===void 0&&(o=md(i),this.qb.set(this.q_.key(i),o));const c=fd(e.Qh()),u=e.Ca(),h=e.Ta(),d=c(i,o.ee,s,n.zb,u,h);o.Hb.set(e,d),this.nw(e,d);const f={ta:gr(d)};if(!a)return this.tw(e,-1,f);const p={timeWeight:0,time:o.la,pointData:o,originalTime:gd(o.Hb)},m=Di(this.Xb,this.q_.key(p.time),(v,b)=>this.q_.key(v.time)<b);this.Xb.splice(m,0,p);for(let v=m;v<this.Xb.length;++v)zo(this.Xb[v].pointData,v);return this.q_.fillWeightsForPoints(this.Xb,m),this.tw(e,m,f)}nw(e,s){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.q_.key(s.ot)>this.q_.key(i.ot)?gr(s)&&n.push(s):gr(s)?n[n.length-1]=s:n.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(gr)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const i=this.Xb[n],r=e[n];if(this.q_.key(i.time)!==this.q_.key(r.time)){s=n;break}r.timeWeight=i.timeWeight,zo(r.pointData,n)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)zo(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,n){const i={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((r,o)=>{i.ew.set(o,{$e:r,rw:o===e?n:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:n}),i.St.hw=this.Xb,i.St.lw=s;else{const r=this.Yb.get(e);i.ew.set(e,{$e:r||[],rw:n})}return i}}function zo(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function tu(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function vd(t){const e=tu(t);return t.V!==void 0&&(e.color=t.V),e}function G1(t){const e=tu(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function q1(t){const e=tu(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function zp(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function X1(t){const e=zp(t);return t.V!==void 0&&(e.color=t.V),e}function Q1(t){const e=zp(t),{V:s,Ot:n,Xh:i}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function Oa(t){return{Area:G1,Line:vd,Baseline:q1,Histogram:vd,Bar:X1,Candlestick:Q1,Custom:Y1}[t]}function Y1(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const J1={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Z1={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},eS={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Uc,attributionLogo:!0},Ro={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},tS={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},sS={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Uc,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function yd(){return{width:0,height:0,autoSize:!1,layout:eS,crosshair:J1,grid:Z1,overlayPriceScales:Object.assign({},Ro),leftPriceScale:Object.assign(Object.assign({},Ro),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ro),{visible:!0}),timeScale:tS,watermark:sS,localization:{locale:yn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class nS{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Pl(this.ow)?this.aw.Mb(this.ow):0}Li(){return R(this.aw.$t().Uc(this.ow)).Dt}}function xd(t,e,s){const n=$p(t,["time","originalTime"]),i=Object.assign({time:e},n);return s!==void 0&&(i.originalTime=s),i}const iS={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class rS{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class lS{constructor(e,s,n,i,r){this.uw=new ve,this.Es=e,this.cw=s,this.dw=n,this.q_=r,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new cn(new ii(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const i=n.ll(s.Os(),1),r=n.ll(s.ui(),-1),o=R(n.el()),a=R(n.An());if(i!==null&&r!==null&&i.ee>r.ee)return{barsBefore:e.from-o,barsAfter:a-e.to};const c={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:r===null||r.ee===a?a-e.to:a-r.ee};return i!==null&&r!==null&&(c.from=i.zb,c.to=r.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const n=this.Es.In().ll(e,s);return n===null?null:Oa(this.seriesType())(n)}data(){const e=Oa(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(n=>xd(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>xd(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return zt(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=yt(zt(iS),e),n=this.Es.ea(s);return new rS(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class oS{constructor(e,s,n){this.ww=new ve,this.mu=new ve,this.Om=new ve,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(s);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){us(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(s,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const s=this.$i.St(),n=s.Nu(e),i=s.Ui(n);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},zt(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function aS(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(s);if(Math.abs(i-s)<1e-8)return n;s*=10}return n}(e.minMove))}function wd(t){return function(e){if(or(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;or(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),or(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const s=e.handleScroll;or(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class cS{constructor(e,s,n){this.Sw=new Map,this.kw=new Map,this.yw=new ve,this.Cw=new ve,this.Tw=new ve,this.Pw=new K1(s);const i=n===void 0?zt(yd()):yt(zt(yd()),wd(n));this.q_=s,this.aw=new O1(e,i,s),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const r=this.aw.$t();this.Dw=new oS(r,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,n){this.autoSizeActive()||this.aw._b(e,s,n)}addCustomSeries(e,s){const n=en(e),i=Object.assign(Object.assign({},cp),n.defaultOptions());return this.Vw("Custom",i,s,n)}addAreaSeries(e){return this.Vw("Area",Kx,e)}addBaselineSeries(e){return this.Vw("Baseline",Gx,e)}addBarSeries(e){return this.Vw("Bar",Ux,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",Wx,e)}addHistogramSeries(e){return this.Vw("Histogram",qx,e)}addLineSeries(e){return this.Vw("Line",Hx,e)}removeSeries(e){const s=Fe(this.Sw.get(e)),n=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(n),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new nS(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(wd(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,n){const i=this.Sw.get(n);if(i===void 0)return;const r=this.aw.$t().dr(i);r!==null&&this.aw.$t().ad(e,s,r)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,n={},i){aS(n.priceFormat);const r=yt(zt(up),zt(s),n),o=this.aw.$t().dd(e,r,i),a=new lS(o,this,this,this,this.q_);return this.Sw.set(a,o),this.kw.set(o,a),a}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,i)=>i.J(n.$e,n.rw)),s.Wu()}Bw(e){return Fe(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((i,r)=>{const o=r.Qh(),a=Oa(o)(i);if(o!=="Custom")us(V1(a));else{const c=r.Ta();us(!c||c(a)===!1)}s.set(this.Bw(r),a)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function uS(t,e,s){let n;if(Ii(t)){const r=document.getElementById(t);us(r!==null,`Cannot find element in DOM with id=${t}`),n=r}else n=t;const i=new cS(n,e,s);return e.setOptions(i.options()),i}function Io(t,e){return uS(t,new rd,rd.Id(e))}Object.assign(Object.assign({},up),cp);const hS=[{label:"5m",interval:"5m",period:"5d"},{label:"15m",interval:"15m",period:"1mo"},{label:"1D",interval:"1d",period:"6mo"}];function dS({isOpen:t,onClose:e,stock:s,API_BASE_URL:n}){var S,C;const[i,r]=x.useState({interval:"5m",period:"5d"}),[o,a]=x.useState({loading:!1,error:""}),[c,u]=x.useState({sma:!1,ema:!1,rsi:!1}),h=x.useRef(null),d=x.useRef(null),f=x.useRef(null),p=x.useRef({chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null});x.useEffect(()=>(t?document.body.style.overflow="hidden":(document.body.style.overflow="",r({interval:"5m",period:"5d"})),()=>{document.body.style.overflow=""}),[t]),x.useEffect(()=>{if(!t||!s)return;const E=b();E&&y();const N=setInterval(()=>{E&&y()},6e4);return()=>clearInterval(N)},[t,s,i]),x.useEffect(()=>{if(!t)return;const E=()=>v();return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[t]),x.useEffect(()=>()=>m(),[]);const m=()=>{p.current.chart&&p.current.chart.remove(),p.current.volumeChart&&p.current.volumeChart.remove(),p.current.rsiChart&&p.current.rsiChart.remove(),p.current={chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}},v=()=>{const{chart:E,volumeChart:N,rsiChart:j}=p.current,M=h.current,_=d.current,L=f.current;E&&M&&E.applyOptions({width:M.clientWidth,height:M.clientHeight}),N&&_&&N.applyOptions({width:_.clientWidth,height:_.clientHeight}),j&&L&&j.applyOptions({width:L.clientWidth,height:L.clientHeight})},b=()=>{if(p.current.chart&&p.current.volumeChart)return v(),!0;const E=h.current;if(!E)return!1;const N=d.current,j=f.current;return p.current.chart=Io(E,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:ei.Normal}}),p.current.candleSeries=p.current.chart.addCandlestickSeries({upColor:"#00d09c",downColor:"#ff4d4d",wickUpColor:"#00d09c",wickDownColor:"#ff4d4d",borderVisible:!1}),p.current.smaSeries=p.current.chart.addLineSeries({color:"#f5c542",lineWidth:2,priceLineVisible:!1}),p.current.emaSeries=p.current.chart.addLineSeries({color:"#4f9cf7",lineWidth:2,priceLineVisible:!1}),N&&(p.current.volumeChart=Io(N,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!1,visible:!1},crosshair:{mode:ei.Normal}}),p.current.volumeSeries=p.current.volumeChart.addHistogramSeries({priceFormat:{type:"volume"},color:"#26a69a",priceScaleId:""}),p.current.chart.timeScale().subscribeVisibleLogicalRangeChange(M=>{M&&p.current.volumeChart&&p.current.volumeChart.timeScale().setVisibleLogicalRange(M),M&&p.current.rsiChart&&p.current.rsiChart.timeScale().setVisibleLogicalRange(M)})),j&&(p.current.rsiChart=Io(j,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:ei.Normal}}),p.current.rsiSeries=p.current.rsiChart.addLineSeries({color:"#9b74ff",lineWidth:2,priceLineVisible:!1}),p.current.rsiChart.priceScale("right").applyOptions({minValue:0,maxValue:100}),p.current.rsiSeries.createPriceLine({price:70,color:"#4f9cf7",lineWidth:1,lineStyle:rl.Dashed}),p.current.rsiSeries.createPriceLine({price:30,color:"#ff4d4d",lineWidth:1,lineStyle:rl.Dashed})),v(),!0},y=async()=>{if(s){a({loading:!0,error:""});try{const E=`${n}/fyers/market/candles?symbol=${encodeURIComponent(s.symbol)}&interval=${i.interval}&period=${i.period}`,N=await Q(E);if(!N.fyers_connected){a({loading:!1,error:"Connect Fyers to view charts"});return}if(N.error){a({loading:!1,error:N.error});return}g(N),a({loading:!1,error:""})}catch(E){a({loading:!1,error:E.message||"Failed to load chart"})}}},g=E=>{var A,W,G,z;if(!E)return;const{candleSeries:N,volumeSeries:j,smaSeries:M,emaSeries:_,rsiSeries:L,chart:O,rsiChart:$}=p.current;N&&N.setData(E.candles||[]),j&&j.setData(E.volume||[]);const V=((A=E.indicators)==null?void 0:A.rsi14)||((W=E.indicators)==null?void 0:W.rsi)||[];M&&M.setData(c.sma?((G=E.indicators)==null?void 0:G.sma20)||[]:[]),_&&_.setData(c.ema?((z=E.indicators)==null?void 0:z.ema20)||[]:[]),L&&L.setData(c.rsi?V:[]),O&&O.timeScale().fitContent(),$&&$.timeScale().fitContent()},w=E=>{u(N=>{const j={...N,[E]:!N[E]};return setTimeout(y,0),j})};return!t||!s?null:l.jsx("div",{className:"stock-modal-overlay show",children:l.jsxs("div",{className:"stock-modal-content chart-mode",children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:s.symbol}),l.jsxs("span",{className:"stock-price",children:["",(S=s.lastPrice)==null?void 0:S.toFixed(2)]}),l.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(C=s.pChange)==null?void 0:C.toFixed(2),"%"]})]}),l.jsxs("div",{className:"chart-controls",children:[l.jsxs("div",{className:"chart-toggles",children:[l.jsx("button",{className:`chart-toggle ${c.sma?"active":""}`,onClick:()=>w("sma"),children:"SMA 20"}),l.jsx("button",{className:`chart-toggle ${c.ema?"active":""}`,onClick:()=>w("ema"),children:"EMA 20"}),l.jsx("button",{className:`chart-toggle ${c.rsi?"active":""}`,onClick:()=>w("rsi"),children:"RSI"})]}),l.jsx("div",{className:"chart-ranges",children:hS.map(E=>l.jsx("button",{className:`range-btn ${i.label===E.label?"active":""}`,onClick:()=>r(E),children:E.label},E.label))})]})]}),l.jsxs("div",{className:"chart-container-wrapper",children:[o.loading&&l.jsx("div",{className:"chart-loading",children:"Loading Chart..."}),o.error&&l.jsx("div",{className:"chart-error",children:o.error}),l.jsx("div",{className:"main-chart",ref:h}),l.jsx("div",{className:"volume-chart",ref:d}),l.jsx("div",{className:"rsi-chart",ref:f})]})]})})}function fS({isOpen:t,onClose:e,stock:s,walletBalance:n,onTrade:i,isSubmitting:r,mode:o="virtual"}){var y;const a=o==="real",[c,u]=x.useState({quantity:1,price:"",orderType:"market",broker:a?"fyers":"virtual"});if(x.useEffect(()=>{s&&u(g=>({...g,price:s.lastPrice?s.lastPrice.toFixed(2):"",quantity:s.quantity||1,broker:a?"fyers":g.broker}))},[s,a]),!t||!s)return null;const h=parseFloat(c.price)||0,d=parseInt(c.quantity)||0,f=h*d,p=s.displayName||s.symbol,m=s.lastPrice&&s.lastPrice>0,v=s.isFno||!1,b=g=>{i(g,c)};return l.jsx("div",{className:"stock-modal-overlay show",style:{zIndex:1e4},children:l.jsxs("div",{className:"stock-modal-content trade-modal",children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:p}),s.displayName&&s.displayName!==s.symbol&&l.jsx("span",{className:"modal-subtitle",children:s.symbol}),l.jsxs("div",{className:"stock-price-info",children:[l.jsx("span",{className:"stock-price",children:m?`${s.lastPrice.toFixed(2)}`:" --"}),m&&l.jsxs("span",{className:`stock-change ${s.pChange>=0?"positive":"negative"}`,children:[s.pChange>=0?"+":"",(y=s.pChange)==null?void 0:y.toFixed(2),"%"]})]}),v&&l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[l.jsx("span",{style:{padding:"2px 8px",background:"rgba(255, 165, 0, 0.2)",color:"#ffa500",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:"F&O"}),s.quantity>1&&l.jsxs("span",{style:{fontSize:"0.8rem",color:"#768390"},children:["Lot size: ",s.quantity]})]})]}),!m&&l.jsx("div",{className:"trade-warning",children:"Market closed  enter price manually or wait for market hours"}),l.jsxs("div",{className:"trade-form",children:[!a&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Broker"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{className:`toggle-btn ${c.broker==="virtual"?"active":""}`,onClick:()=>u({...c,broker:"virtual"}),children:"Virtual"}),l.jsx("button",{className:`toggle-btn ${c.broker==="fyers"?"active":""}`,onClick:()=>u({...c,broker:"fyers"}),children:"Fyers Live"})]})]}),a&&l.jsx("div",{className:"trade-modal-live-banner",children:"Fyers Live Order"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Order Type"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{className:`toggle-btn ${c.orderType==="market"?"active":""}`,onClick:()=>u({...c,orderType:"market"}),children:"Market"}),l.jsx("button",{className:`toggle-btn ${c.orderType==="limit"?"active":""}`,onClick:()=>u({...c,orderType:"limit"}),children:"Limit"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Quantity"}),l.jsx("input",{type:"number",min:"1",value:c.quantity,onChange:g=>u({...c,quantity:g.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Price"}),l.jsx("input",{type:"number",step:"0.05",value:c.price,onChange:g=>u({...c,price:g.target.value}),disabled:c.orderType==="market"&&m,placeholder:m?"":"Enter price"})]})]}),l.jsxs("div",{className:"trade-summary",children:[l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:"Total Value"}),l.jsxs("span",{children:["",f.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.broker==="virtual"&&l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:"Available Balance"}),l.jsxs("span",{children:["",n==null?void 0:n.toLocaleString("en-IN")]})]})]}),l.jsxs("div",{className:"trade-actions",children:[l.jsx("button",{className:"trade-btn buy-btn",onClick:()=>b("BUY"),disabled:r,children:r?"Processing...":"BUY"}),l.jsx("button",{className:"trade-btn sell-btn",onClick:()=>b("SELL"),disabled:r,children:r?"Processing...":"SELL"})]})]})]})})}function mS({placeholder:t="Search stocks...",onSelect:e,fetchSuggestions:s,minChars:n=1,debounceMs:i=300,maxResults:r=8}){const[o,a]=x.useState(""),[c,u]=x.useState([]),[h,d]=x.useState(!1),[f,p]=x.useState(!1),[m,v]=x.useState(-1),b=x.useRef(null),y=x.useRef(null),g=x.useRef(null),w=x.useCallback(async M=>{if(M.length<n){u([]),d(!1);return}p(!0);try{const _=await s(M);u(_.slice(0,r)),d(!0),v(-1)}catch(_){console.error("Search failed:",_),u([])}finally{p(!1)}},[s,n,r]),S=M=>{const _=M.target.value;a(_),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{w(_)},i)},C=M=>{if(h)switch(M.key){case"ArrowDown":M.preventDefault(),v(_=>_<c.length-1?_+1:_);break;case"ArrowUp":M.preventDefault(),v(_=>_>0?_-1:-1);break;case"Enter":M.preventDefault(),m>=0&&c[m]&&E(c[m]);break;case"Escape":M.preventDefault(),d(!1),v(-1);break}},E=M=>{a(""),d(!1),v(-1),u([]),e(M)};x.useEffect(()=>{const M=_=>{y.current&&!y.current.contains(_.target)&&!b.current.contains(_.target)&&(d(!1),v(-1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]),x.useEffect(()=>{if(m>=0&&y.current){const M=y.current.children[m];M&&M.scrollIntoView({block:"nearest",behavior:"smooth"})}},[m]);const N=(M,_)=>{if(!_.trim())return M;const L=new RegExp(`(${_})`,"gi");return M.split(L).map(($,V)=>L.test($)?l.jsx("mark",{className:"highlight",children:$},V):$)},j=M=>{const _=M.symbol||M.identifier||M.tradingSymbol||"";if(/CE|PE/.test(_)){let L=_.match(/^([A-Z]+)(\d{2})([A-Z]{3})(\d{2})(\d+)(CE|PE)$/);if(L||(L=_.match(/^([A-Z]+)\s+(\d{2})\s+([A-Z]{3})\s+(\d{2})\s+(\d+)\s+(CE|PE)$/)),!L&&M.display)return{displayName:M.display,underlying:M.underlying||_.split(/\d/)[0],typeLabel:/CE/.test(_)?"Options CALL":"Options PUT",isOption:!0};if(L){const[,O,$,V,A,W,G]=L,z=`20${A}`;return{displayName:`${O} ${$} ${V} ${z} ${G} ${W}`,underlying:O,typeLabel:G==="CE"?"Options CALL":"Options PUT",isOption:!0}}}return M.display?{displayName:M.display,underlying:null,typeLabel:null,isOption:!1}:{displayName:_,underlying:null,typeLabel:null,isOption:!1}};return l.jsxs("div",{className:"search-autocomplete",children:[l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx("input",{ref:b,type:"text",className:"search-input",placeholder:t,value:o,onChange:S,onKeyDown:C,onFocus:()=>o.length>=n&&d(!0),autoComplete:"off","aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":h,"aria-activedescendant":m>=0?`suggestion-${m}`:void 0}),f&&l.jsx("div",{className:"search-spinner"})]}),h&&l.jsx("div",{ref:y,id:"search-suggestions",className:"search-dropdown",role:"listbox",children:c.length===0?l.jsx("div",{className:"no-results",children:"No results found"}):c.map((M,_)=>{var O;const L=j(M);return l.jsxs("div",{id:`suggestion-${_}`,className:`suggestion-item ${m===_?"selected":""}`,role:"option","aria-selected":m===_,onClick:()=>E(M),onMouseEnter:()=>v(_),children:[l.jsxs("div",{className:"suggestion-main",children:[l.jsx("div",{className:"suggestion-symbol",children:N(L.displayName,o)}),L.isOption&&l.jsxs("div",{className:"suggestion-meta",children:[l.jsx("span",{className:"suggestion-underlying",children:L.underlying}),l.jsxs("span",{className:"suggestion-type-label",children:["(",L.typeLabel,")"]})]}),!L.isOption&&M.lastPrice>0&&l.jsxs("div",{className:`suggestion-price ${M.pChange>=0?"positive":"negative"}`,children:["",(O=M.lastPrice)==null?void 0:O.toFixed(2)]}),!L.isOption&&M.lastPrice===0&&l.jsx("div",{className:"suggestion-price",style:{opacity:.5,fontSize:"0.75rem"},children:"Price on selection"})]}),M.pChange!==0&&l.jsxs("div",{className:`suggestion-change ${M.pChange>=0?"positive":"negative"}`,children:[M.pChange>=0?"":""," ",Math.abs(M.pChange||0).toFixed(2),"%"]})]},`${M.symbol}-${_}`)})})]})}const pS=cl.memo(({stock:t,onSelectStock:e,onOpenChart:s,onRemoveStock:n,activeWatchlist:i,searchQuery:r,isLast:o,lastStockElementRef:a})=>l.jsxs("div",{ref:o?a:null,className:"stock-card",onClick:()=>e(t),children:[l.jsxs("div",{className:"stock-card-header",children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:t.symbol}),l.jsxs("span",{className:`stock-price ${t.pChange>=0?"positive":"negative"}`,children:["",Math.abs(t.lastPrice||0).toFixed(2)]})]}),l.jsxs("div",{className:"stock-actions",children:[l.jsx("button",{className:"chart-btn",onClick:c=>{c.stopPropagation(),e(t),s()},children:""}),i&&!r.trim()&&l.jsx("button",{className:"remove-btn",onClick:c=>{c.stopPropagation(),n(t.symbol)},children:""})]})]}),l.jsx("div",{className:"stock-card-body",children:l.jsxs("div",{className:`change-pill ${t.pChange>=0?"positive":"negative"}`,children:[t.pChange>=0?"":""," ",Math.abs(t.pChange||0).toFixed(2),"%"]})})]}));function gS({stocks:t,loading:e,onSelectStock:s,onOpenChart:n,searchQuery:i,setSearchQuery:r,watchlists:o,activeWatchlist:a,setActiveWatchlist:c,onCreateWatchlist:u,onDeleteWatchlist:h,onRemoveStock:d,onShowAddStock:f,hasMore:p,onLoadMore:m,onSearch:v}){const b=x.useRef(),y=x.useCallback(g=>{e||(b.current&&b.current.disconnect(),b.current=new IntersectionObserver(w=>{w[0].isIntersecting&&p&&m()}),g&&b.current.observe(g))},[e,p,m]);return l.jsxs("div",{className:"virtual-trading-container",children:[l.jsxs("div",{className:"market-header",children:[l.jsx(mS,{placeholder:"Search stocks (e.g. RELIANCE, NIFTY 25JAN...)",onSelect:s,fetchSuggestions:v,minChars:1,debounceMs:300,maxResults:15}),l.jsxs("div",{className:"watchlist-tabs",children:[o.map(g=>l.jsxs("div",{className:`watchlist-tab ${(a==null?void 0:a.id)===g.id?"active":""}`,onClick:()=>c(g),children:[l.jsx("span",{className:"watchlist-name",children:g.name}),(a==null?void 0:a.id)===g.id&&!g.is_default&&l.jsx("button",{className:"delete-watchlist-btn",onClick:w=>{w.stopPropagation(),h(g.id)},title:"Delete Watchlist",children:""})]},g.id)),o.length<15&&l.jsx("button",{className:"new-watchlist-btn",onClick:u,children:"+"})]}),a&&l.jsx("div",{className:"watchlist-actions",children:l.jsx("button",{className:"add-stock-btn",onClick:f,children:"+ Add Stock"})})]}),l.jsx("div",{className:"stocks-grid",children:e?l.jsxs("div",{className:"empty-state",style:{opacity:.9},children:[l.jsx("div",{className:"loading-spinner",style:{width:"40px",height:"40px",marginBottom:"1rem"}}),l.jsx("div",{className:"empty-state-title",children:"Loading stocks..."}),l.jsx("div",{className:"empty-state-text",style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Fetching watchlist data"})]}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No stocks yet"}),l.jsx("div",{className:"empty-state-text",children:'Click "+ Add Stock" to add stocks to this watchlist'})]}):t.map((g,w)=>l.jsx(pS,{stock:g,onSelectStock:s,onOpenChart:n,onRemoveStock:d,activeWatchlist:a,searchQuery:i,isLast:w===t.length-1,lastStockElementRef:y},g.symbol))})]})}function vS(t){const e=(t||"").toUpperCase(),s=e.match(/^(?:NSE:)?([A-Z]+?)(\d{2})(\w)(\d{2})(\d+)(CE|PE)$/);if(s){const[,i,,,,r,o]=s;return{display:`${i} ${r} ${o}`,isFno:!0,underlying:i,strike:r,type:o}}const n=e.match(/^(?:NSE:)?([A-Z]+?)(\d{2})(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(\d+)(CE|PE)$/);if(n){const[,i,,r,o,a]=n;return{display:`${i} ${o} ${a} (${r})`,isFno:!0,underlying:i,strike:o,type:a}}if((e.endsWith("CE")||e.endsWith("PE"))&&/\d/.test(e)){const i=e.slice(-2),r=e.replace(/^NSE:/,"");return{display:r,isFno:!0,underlying:r,strike:"",type:i}}return{display:t,isFno:!1}}function yS({portfolio:t,loading:e,onSelectHolding:s}){const n=t.every(a=>a.ltp!=null&&a.ltp>0),i=t.reduce((a,c)=>{const u=c.ltp!=null&&c.ltp>0?c.ltp:c.average_price;return a+c.quantity*u},0),r=t.reduce((a,c)=>a+c.quantity*c.average_price,0),o=i-r;return l.jsxs("div",{className:"portfolio-container",children:[l.jsxs("div",{className:"portfolio-summary",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Current Value"}),l.jsx("span",{className:"value",children:n?`${i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:""})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"label",children:"Invested"}),l.jsxs("span",{className:"value",children:["",r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:`summary-card ${n?o>=0?"positive":"negative":""}`,children:[l.jsx("span",{className:"label",children:"Total P&L"}),l.jsx("span",{className:"value",children:n?`${o>=0?"+":"-"}${Math.abs(o).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:""})]})]}),l.jsx("div",{className:"portfolio-list",children:e?l.jsx("div",{className:"loading-state",children:"Loading portfolio..."}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"Your portfolio is empty"}),l.jsx("p",{children:"Start trading to build your portfolio"})]}):l.jsxs("table",{className:"portfolio-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Avg. Price"}),l.jsx("th",{className:"text-right",children:"LTP"}),l.jsx("th",{className:"text-right",children:"Cur. Value"}),l.jsx("th",{className:"text-right",children:"P&L"})]})}),l.jsx("tbody",{children:t.map((a,c)=>{const u=a.ltp!=null&&a.ltp>0,h=u?a.quantity*a.ltp:null,d=a.quantity*a.average_price,f=h!=null?h-d:null,p=f!=null&&d>0?f/d*100:null,m=vS(a.symbol);return l.jsxs("tr",{onClick:()=>s(a),className:"clickable-row",children:[l.jsxs("td",{className:"font-medium",children:[m.display,m.isFno&&l.jsx("span",{style:{marginLeft:"6px",padding:"1px 5px",background:"rgba(255, 165, 0, 0.15)",color:"#ffa500",borderRadius:"3px",fontSize:"0.65rem",fontWeight:600,verticalAlign:"middle"},children:"F&O"})]}),l.jsx("td",{className:"text-right",children:a.quantity}),l.jsxs("td",{className:"text-right",children:["",a.average_price.toFixed(2)]}),l.jsx("td",{className:"text-right",children:u?`${a.ltp.toFixed(2)}`:"-"}),l.jsx("td",{className:"text-right",children:h!=null?`${h.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"-"}),l.jsx("td",{className:`text-right ${f!=null?f>=0?"positive":"negative":""}`,children:f!=null?l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[f>=0?"+":"-","",Math.abs(f).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsxs("div",{className:"sub-text",children:["(",p>=0?"+":"-",Math.abs(p).toFixed(2),"%)"]})]}):l.jsx("div",{children:"-"})})]},c)})})]})})]})}function xS({orders:t,loading:e}){return e?l.jsx("div",{className:"loading-state",children:"Loading orders..."}):t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"No orders yet"}),l.jsx("p",{children:"Your trade history will appear here"})]}):l.jsx("div",{className:"orders-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Type"}),l.jsx("th",{children:"Side"}),l.jsx("th",{className:"text-right",children:"Qty"}),l.jsx("th",{className:"text-right",children:"Price"}),l.jsx("th",{className:"text-right",children:"Status"})]})}),l.jsx("tbody",{children:t.map((s,n)=>{var i;return l.jsxs("tr",{children:[l.jsx("td",{children:new Date(s.created_at).toLocaleString("en-IN")}),l.jsx("td",{className:"font-medium",children:s.symbol}),l.jsx("td",{children:s.order_type||"MARKET"}),l.jsx("td",{children:l.jsx("span",{className:`badge ${s.side==="BUY"?"bg-green":"bg-red"}`,children:s.side})}),l.jsx("td",{className:"text-right",children:s.quantity}),l.jsxs("td",{className:"text-right",children:["",(i=s.price)==null?void 0:i.toFixed(2)]}),l.jsxs("td",{className:"text-right status-cell",children:[l.jsx("span",{className:"status-dot success"})," Executed"]})]},s.id||n)})})]})})}const te=window.location.origin,Do=({initialTab:t="trade"})=>{const[e,s]=x.useState(()=>localStorage.getItem("trading_mode")||"sandbox"),n=e==="live",[i,r]=x.useState({connected:!1,loading:!0}),[o,a]=x.useState(!1),c=k=>{s(k),localStorage.setItem("trading_mode",k)},u=()=>{switch(t){case"trade":return"stocks";case"portfolio":return"portfolio";case"orders":return"orders";case"fno":return"fno";case"wallet":return"wallet";default:return"stocks"}},[h,d]=x.useState(u()),{showLoading:f,hideLoading:p}=rp(),[m,v]=x.useState([]),[b,y]=x.useState([]),[g,w]=x.useState([]),[S,C]=x.useState([]),[E,N]=x.useState(1e5),[j,M]=x.useState([]),[_,L]=x.useState({stocks:!0,portfolio:!1,trade:!1,wallet:!1,fyers:!1,watchlists:!0}),[O,$]=x.useState(1),[V,A]=x.useState(!1),[W,G]=x.useState({message:"",type:"",show:!1}),[z,P]=x.useState("balance"),[T,H]=x.useState(null),[ee,Ge]=x.useState(!1),[Me,Ut]=x.useState([]),[ne,qe]=x.useState(null),[ut,wt]=x.useState([]),[Mt,Os]=x.useState(!1),[ps,Fi]=x.useState([]),[je,Le]=x.useState(""),Rl=x.useRef({}),[su,En]=x.useState(!1),[_n,nu]=x.useState(!1),{lastUpdate:Ip}=kn("trading-stocks",()=>Op(),1e4);Ri(Ip),x.useEffect(()=>{iu(),Dl(),Fl(),Q(`${te}/fyers/status`).then(k=>{En(k.connected),r({connected:k.connected,loading:!1})}).catch(()=>{r({connected:!1,loading:!1})})},[]);const Dp=async()=>{a(!0);try{const k=await Q(`${te}/fyers/auth-url`);k.url?window.location.href=k.url:oe("Failed to get Fyers auth URL","error")}catch(k){oe("Error: "+(k.message||"Failed to connect to Fyers"),"error")}finally{a(!1)}},Fp=async()=>{if(confirm("Disconnect your Fyers account?"))try{await Q(`${te}/fyers/disconnect`,{method:"DELETE"}),En(!1),r({connected:!1,loading:!1}),c("sandbox"),oe("Fyers disconnected","info")}catch{oe("Error disconnecting Fyers","error")}};x.useEffect(()=>{h==="orders"&&ru()},[h]);const Op=async()=>{if(!ne)return;const k=ut.map(U=>U.symbol)||[],D=g.map(U=>U.symbol)||[],F=[...new Set([...k,...D])];if(F.length!==0)try{const U=F.slice(0,50).join(","),K=await $e(`${te}/fyers/market/quotes?symbols=${encodeURIComponent(U)}`);if((K==null?void 0:K.fyers_connected)!==void 0&&En(K.fyers_connected),K!=null&&K.quotes&&K.fyers_connected){const he=ut.map(Z=>{const ye=K.quotes[Z.symbol];return ye?{...Z,lastPrice:ye.lastPrice,pChange:ye.pChange,change:ye.change,high:ye.high,low:ye.low,volume:ye.volume}:Z});if(he.some((Z,ye)=>{var gs,Oi;return Z.lastPrice!==((gs=ut[ye])==null?void 0:gs.lastPrice)||Z.pChange!==((Oi=ut[ye])==null?void 0:Oi.pChange)})&&(wt(he),g.length>0)){const Z=g.map(ye=>{const gs=K.quotes[ye.symbol];return gs?{...ye,ltp:gs.lastPrice}:ye});w(Z)}}}catch(U){console.error("Failed to refresh watchlist stocks",U)}},oe=(k,D="info")=>{G({message:k,type:D,show:!0}),setTimeout(()=>G({message:"",type:"",show:!1}),3e3)},Il=async k=>{if(!k||k.length===0)return k;try{const D=k.map(U=>U.symbol).slice(0,50).join(","),F=await $e(`${te}/fyers/market/quotes?symbols=${encodeURIComponent(D)}`);if(F!=null&&F.quotes&&F.fyers_connected)return k.map(U=>{const K=F.quotes[U.symbol];return K?{...U,ltp:K.lastPrice}:U})}catch(D){console.error("Failed to enrich portfolio prices via Fyers",D)}return k},iu=async()=>{L(k=>({...k,portfolio:!0}));try{const k=await Q(`${te}/portfolio/summary`);N(k.wallet_balance||1e5);const D=await Il(k.holdings||[]);w(D)}catch(k){console.error("Failed to load portfolio",k);try{const D=await Q(`${te}/portfolio`),F=await Il(D.holdings||[]);w(F)}catch{oe("Failed to load portfolio","error")}}finally{L(k=>({...k,portfolio:!1}))}},ru=async()=>{L(k=>({...k,orders:!0}));try{const k=await Q(`${te}/portfolio/orders?limit=20`);C(k.orders||[])}catch(k){console.error("Failed to load orders",k)}finally{L(k=>({...k,orders:!1}))}},Dl=async()=>{try{const k=await Q(`${te}/fyers/status`);if(En(k.connected),k.connected&&_n){L(F=>({...F,fyers:!0}));const D=await Q(`${te}/fyers/holdings`);M(D.holdings||[]),L(F=>({...F,fyers:!1}))}}catch(k){console.error("Failed to fetch Fyers data",k),L(D=>({...D,fyers:!1}))}},Fl=async(k=null)=>{L(D=>({...D,watchlists:!0}));try{const F=(await Q(`${te}/watchlist`)).watchlists||[];if(Ut(F),F.length===0){qe(null),wt([]),L(U=>({...U,stocks:!1}));return}if(k){const U=F.find(K=>K.id===k);if(U){qe(U),Ol(U.id);return}}if(ne&&F.some(U=>U.id===ne.id)){L(U=>({...U,stocks:!1}));return}qe(F[0]),Ol(F[0].id)}catch(D){console.error("Failed to load watchlists",D),oe("Failed to load watchlists","error"),L(F=>({...F,stocks:!1}))}finally{L(D=>({...D,watchlists:!1}))}},Ol=async k=>{L(D=>({...D,stocks:!0}));try{const F=(await Q(`${te}/watchlist/${k}/stocks`)).stocks||[];let U=F;if(F.length>0)try{const K=F.map(ae=>ae.symbol).slice(0,50).join(","),he=await $e(`${te}/fyers/market/quotes?symbols=${encodeURIComponent(K)}`);(he==null?void 0:he.fyers_connected)!==void 0&&En(he.fyers_connected),he!=null&&he.quotes&&he.fyers_connected&&(U=F.map(ae=>{const Z=he.quotes[ae.symbol];return Z?{...ae,lastPrice:Z.lastPrice,pChange:Z.pChange,change:Z.change,high:Z.high,low:Z.low,volume:Z.volume}:ae})),he&&!he.fyers_connected&&oe("Connect Fyers for live market prices","info")}catch(K){console.error("Failed to fetch initial prices",K)}wt(U),Rl.current[k]=U}catch(D){console.error("Failed to load watchlist stocks",D),oe("Failed to load stocks","error")}finally{L(D=>({...D,stocks:!1}))}},Vp=async()=>{if(Me.length>=15){oe("Maximum 15 watchlists allowed","error");return}if(_.watchlists)return;L(D=>({...D,watchlists:!0}));const k=`Watchlist ${Me.length+1}`;try{const D=await Q(`${te}/watchlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k,position:Me.length})});oe(`Created ${k}`,"success"),await Fl(D.id)}catch{oe("Failed to create watchlist","error")}finally{L(D=>({...D,watchlists:!1}))}},Bp=async k=>{const D=Me.find(F=>F.id===k);if(D!=null&&D.is_default){oe("Cannot delete the default watchlist","error");return}if(!_.watchlists){L(F=>({...F,watchlists:!0}));try{await Q(`${te}/watchlist/${k}`,{method:"DELETE"}),oe("Watchlist deleted","success"),(ne==null?void 0:ne.id)===k&&qe(null),await Fl()}catch{oe("Failed to delete","error")}finally{L(F=>({...F,watchlists:!1}))}}},Ap=async k=>{if(ne)try{await Q(`${te}/watchlist/${ne.id}/stocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:k})}),oe(`Added ${k}`,"success"),wt(D=>[...D,{symbol:k,ltp:null,change:null,pChange:null}]),$e(`${te}/fyers/market/quotes?symbols=${encodeURIComponent(k)}`).then(D=>{D!=null&&D.quotes&&D.quotes[k]&&wt(F=>F.map(U=>U.symbol===k?{...U,...D.quotes[k],lastPrice:D.quotes[k].lastPrice}:U))})}catch{oe("Failed to add stock","error")}},Wp=async k=>{if(ne)try{await Q(`${te}/watchlist/${ne.id}/stocks/${encodeURIComponent(k)}`,{method:"DELETE"}),oe(`Removed ${k}`,"success"),wt(D=>D.filter(F=>F.symbol!==k))}catch{oe("Failed to remove stock","error")}},Up=async()=>{try{const k=await Q(`${te}/fyers/market/all-stocks`);Fi(k.stocks||[]),k.fyers_connected||console.log("[VirtualTrading] Fyers not connected - showing stocks without live prices")}catch(k){console.error("Failed to load stocks for search",k)}},Hp=async()=>{if(_.stocks||!V)return;const k=O+1,D=je.toUpperCase();L(F=>({...F,stocks:!0}));try{const F=await $e(`${te}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=${k}&limit=20`);if(F.results){const U=F.results.map(K=>({...K,symbol:K.identifier,lastPrice:K.ltp,pChange:K.pChange,isFno:!0}));y(K=>[...K,...U]),$(k),A(U.length===20&&F.total>k*20)}}catch(F){console.error("Load more failed",F)}finally{L(F=>({...F,stocks:!1}))}};x.useEffect(()=>{Mt&&ps.length===0&&Up()},[Mt]),x.useEffect(()=>{if(!Mt)return;if(!je.trim()){y(ps.slice(0,50));return}return Kp(je)},[je,ps,Mt]);const Kp=k=>{const D=k.toUpperCase(),F=ps.filter(he=>he.symbol.includes(D)).slice(0,20),K=setTimeout(async()=>{L(Z=>({...Z,stocks:!0})),$(1),A(!1);let he=[];if(/\d/.test(D)||/CE|PE|CALL|PUT/i.test(D)||/NIFTY|BANK/i.test(D))try{const Z=await $e(`${te}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=1&limit=20`);Z.results&&(A(Z.results.length===20&&Z.total>20),he=Z.results.map(ye=>({...ye,symbol:ye.identifier,lastPrice:ye.ltp,pChange:ye.pChange,isFno:!0})))}catch(Z){console.error("F&O Search failed",Z)}const ae=he.length>0?[...he,...F]:F;y(ae),L(Z=>({...Z,stocks:!1}))},300);return()=>clearTimeout(K)},Gp=async k=>{const D=k.toUpperCase();try{const F=await $e(`${te}/nse_data/fno/search?query=${encodeURIComponent(D)}&page=1&limit=20`);if(F.results&&F.results.length>0){const U=F.results.map(ae=>({...ae,symbol:ae.identifier,display:ae.display||ae.identifier,lastPrice:ae.ltp||0,pChange:ae.pChange||0,strike:ae.strike,expiry:ae.expiry,type:ae.type,isFno:!0})),K=new Set;return U.filter(ae=>K.has(ae.symbol)?!1:(K.add(ae.symbol),!0)).slice(0,15)}}catch(F){console.error("Autocomplete search failed",F)}return[]},qp=async(k,D)=>{if(T){if(!D.quantity||D.quantity<=0)return oe("Enter valid quantity","error");if(!D.price||parseFloat(D.price)<=0)return oe("Enter valid price","error");L(F=>({...F,trade:!0})),f(`Executing ${k} order...`);try{if(D.broker==="fyers"){const F={symbol:`NSE:${T.symbol}-EQ`,qty:parseInt(D.quantity),type:D.orderType==="market"?2:1,side:k==="BUY"?1:-1,productType:"CNC",limitPrice:D.orderType==="limit"?parseFloat(D.price):0,stopPrice:0,validity:"DAY",offlineOrder:!1};T.isFno&&(F.symbol=T.symbol||T.identifier,F.productType="MARGIN");const U=await Q(`${te}/fyers/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});U&&U.s==="ok"?oe(`Live ${k} Order Placed: ${U.id}`,"success"):oe(`Fyers Error: ${(U==null?void 0:U.message)||"Order failed"}`,"error")}else{const F={symbol:T.symbol,quantity:parseInt(D.quantity),price:parseFloat(D.price),side:k,order_type:D.orderType.toUpperCase(),limit_price:D.orderType==="limit"?parseFloat(D.price):null},U=await Q(`${te}/portfolio/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});U.wallet_balance!==void 0&&N(U.wallet_balance);const K=await Il(U.holdings||[]);w(K),oe(`${k} ${D.quantity} ${T.symbol} Success`,"success")}setTimeout(()=>H(null),500)}catch(F){oe(F.message||"Trade failed","error")}finally{L(F=>({...F,trade:!1})),p()}}},lu=async k=>{if(H(k),!k.lastPrice||k.lastPrice===0)try{const D=k.identifier||k.symbol,F=await $e(`${te}/fyers/market/quotes?symbols=${encodeURIComponent(D)}`);if(F!=null&&F.quotes&&F.fyers_connected){const U=F.quotes[D];U&&H(K=>K&&K.symbol===k.symbol?{...K,lastPrice:U.lastPrice,pChange:U.pChange,change:U.change}:K)}}catch{}},Xp=x.useCallback(k=>{qe(k),Rl.current[k.id]&&wt(Rl.current[k.id]),Ol(k.id)},[]);return l.jsxs("div",{className:"virtual-trading",children:[W.show&&l.jsx("div",{className:`virtual-toast ${W.type}`,children:W.message}),l.jsxs("div",{className:"trading-mode-bar",children:[l.jsxs("div",{className:"mode-toggle",children:[l.jsx("button",{className:`mode-toggle-btn ${n?"":"active sandbox"}`,onClick:()=>c("sandbox"),children:"Sandbox"}),l.jsx("button",{className:`mode-toggle-btn ${n?"active live":""}`,onClick:()=>c("live"),children:"Live"})]}),n&&i.connected&&l.jsxs("div",{className:"fyers-connected-indicator",children:[l.jsx("span",{className:"connected-dot"}),l.jsx("span",{children:"Fyers Connected"}),l.jsx("button",{className:"disconnect-link",onClick:Fp,children:"Disconnect"})]})]}),n&&!i.loading&&!i.connected&&l.jsx("div",{className:"fyers-connect-prompt",children:l.jsxs("div",{className:"connect-prompt-content",children:[l.jsx("span",{className:"connect-icon-small",children:""}),l.jsxs("div",{children:[l.jsx("strong",{children:"Connect your broker to enable live trading"}),l.jsx("p",{children:"Your credentials are handled securely through Fyers' official OAuth flow."})]}),l.jsxs("div",{className:"connect-actions",children:[l.jsx("button",{className:"connect-btn-primary",onClick:Dp,disabled:o,children:o?"Connecting...":"Connect Fyers"}),l.jsx("button",{className:"connect-btn-secondary",onClick:()=>c("sandbox"),children:"Back to Sandbox"})]})]})}),l.jsx("div",{className:"section-tabs",style:{marginBottom:"1rem",display:"flex",gap:"8px",borderBottom:`1px solid ${n?"#5c4a1e":"#444c56"}`,paddingBottom:"8px",overflowX:"auto",alignItems:"center"},children:["stocks","portfolio","orders","fno",...n?[]:["wallet"]].map(k=>l.jsx("button",{className:`virtual-tab ${h===k?"active":""} ${n?"live-mode-tab":""}`,onClick:()=>d(k),disabled:n&&!i.connected,children:k==="stocks"?"Trade":k==="fno"?"Option Chain":k.charAt(0).toUpperCase()+k.slice(1)},k))}),h==="stocks"&&l.jsxs("div",{className:"virtual-stocks-container",children:[l.jsx($x,{}),!su&&!_.stocks&&ut.length>0&&l.jsx("div",{style:{padding:"8px 12px",background:"#2d1f00",border:"1px solid #5c4a1e",borderRadius:"6px",color:"#ffb347",fontSize:"0.8rem",marginBottom:"8px"},children:"Fyers not connected  prices may be unavailable"}),l.jsx(gS,{stocks:ut,loading:_.stocks&&ut.length===0,searchQuery:"",setSearchQuery:()=>{},watchlists:Me,activeWatchlist:ne,setActiveWatchlist:Xp,onCreateWatchlist:Vp,onDeleteWatchlist:Bp,onRemoveStock:Wp,onShowAddStock:()=>{Le(""),Os(!0)},onSelectStock:lu,onOpenChart:()=>Ge(!0),onSearch:Gp,hasMore:!1})]}),h==="portfolio"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsxs("div",{children:[l.jsx("h2",{children:"Portfolio"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[l.jsx("button",{className:`virtual-tab mini ${_n?"":"active"}`,onClick:()=>nu(!1),children:"Virtual"}),su&&l.jsx("button",{className:`virtual-tab mini ${_n?"active":""}`,onClick:()=>{nu(!0),Dl()},children:"Fyers Real"})]})]}),l.jsx("button",{className:"ghost-btn",onClick:()=>_n?Dl():iu(),children:"Refresh"})]}),l.jsx(yS,{portfolio:_n?j.map(k=>({symbol:k.symbol,quantity:k.quantity,average_price:k.costPrice,ltp:k.lp})):g,loading:_.portfolio||_.fyers,onSelectHolding:k=>{const D={symbol:k.symbol,lastPrice:k.ltp||k.average_price,pChange:0,quantity:k.quantity};H(D)}})]}),h==="orders"&&l.jsxs("div",{className:"portfolio-section",children:[l.jsxs("div",{className:"portfolio-header",children:[l.jsx("h2",{children:"Order History"}),l.jsx("button",{className:"ghost-btn",onClick:ru,children:"Refresh"})]}),l.jsx(xS,{orders:S,loading:_.orders})]}),h==="fno"&&l.jsx(zx,{symbol:"NIFTY",onClose:()=>d("stocks"),onSelectToken:k=>{var ae;const D=k.expiry?k.expiry.replace(/^(\d{4})-(\d{2})-(\d{2})$/,(Z,ye,gs,Oi)=>{const Qp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${parseInt(Oi)} ${Qp[parseInt(gs)-1]}`}):"",F=`${k.symbol} ${k.strike} ${k.type}${D?` (${D})`:""}`,K={NIFTY:75,BANKNIFTY:15,FINNIFTY:25,MIDCPNIFTY:50}[k.symbol]||1,he={symbol:k.identifier||`NSE:${k.symbol}${(ae=k.expiry)==null?void 0:ae.replace(/-/g,"")}${k.strike}${k.type}`,displayName:F,lastPrice:k.ltp||0,pChange:k.pChange||0,quantity:K,isFno:!0};lu(he)}}),h==="wallet"&&l.jsxs("div",{className:"wallet-container",style:{height:"100%",display:"flex",flexDirection:"column"},children:[l.jsx("div",{className:"wallet-nav",style:{display:"flex",gap:"1rem",padding:"0.5rem 0",marginBottom:"1rem"},children:["balance","funds","transactions"].map(k=>l.jsx("button",{className:`secondary-btn ${z===k?"active-sub":""}`,style:{borderColor:z===k?"#00d09c":"#444c56"},onClick:()=>P(k),children:k.charAt(0).toUpperCase()+k.slice(1)},k))}),l.jsx(Rx,{subSection:z,onNavigate:k=>{k&&k.includes("funds")?P("funds"):k&&k.includes("transactions")?P("transactions"):P("balance")}})]}),l.jsx(fS,{isOpen:!!T&&!Mt&&!ee,onClose:()=>H(null),stock:T,walletBalance:E,onTrade:qp,isSubmitting:_.trade,mode:n?"real":"virtual"}),ee&&T&&l.jsx(dS,{isOpen:ee,onClose:()=>Ge(!1),stock:T,API_BASE_URL:te}),Mt&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>{Os(!1),Le(""),y([])},children:l.jsxs("div",{className:"stock-trade-shell",onClick:k=>k.stopPropagation(),style:{maxWidth:"800px",width:"90%",height:"80vh",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("h3",{children:["Add Stock to ",ne==null?void 0:ne.name]}),l.jsx("button",{className:"icon-button",onClick:()=>{Os(!1),Le(""),y([])},children:""})]}),l.jsxs("div",{className:"stock-trade-content",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1},children:[l.jsx("div",{className:"search-row",children:l.jsx("input",{type:"text",placeholder:"Search NSE stocks...",value:je,onChange:k=>Le(k.target.value),className:"search-input",autoFocus:!0})}),l.jsxs("div",{className:"add-stock-list",style:{overflowY:"auto",flex:1,paddingRight:"4px"},children:[b.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):b.map((k,D)=>{const F=ut.some(U=>U.symbol.toUpperCase()===(k.identifier||k.symbol).toUpperCase());return l.jsxs("div",{className:`add-stock-item ${F?"disabled":""}`,onClick:()=>!F&&Ap(k.symbol),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:k.display||k.symbol}),l.jsxs("span",{className:"stock-price",children:["",Number(k.lastPrice||0).toFixed(2)]})]}),F?l.jsx("span",{className:"added-badge",children:" Added"}):l.jsx("button",{className:"add-btn-small",children:"+ Add"})]},k.identifier||k.symbol||D)}),V&&l.jsx("button",{className:"load-more-btn",onClick:Hp,children:_.stocks?"Loading":"Load More"})]})]})]})})]})},wS=window.location.origin;function SS({subSection:t}){var m,v,b,y,g,w,S,C,E;const[e,s]=x.useState([]),[n,i]=x.useState(null),[r,o]=x.useState(null),[a,c]=x.useState(!0);x.useEffect(()=>{u()},[t]);const u=async()=>{c(!0);try{let N="";switch(t){case"gainers":N="/nse_data/top-gainers";break;case"losers":N="/nse_data/top-losers";break;case"bulk":N="/nse_data/bulk-deals";break;case"weekly":N="/nse_data/weekly-gainers?days=5";break;case"fii-dii":N="/nse_data/fii-dii-activity";break;default:N="/nse_data/top-gainers"}const j=await Q(`${wS}${N}`);t==="weekly"?i(j):t==="bulk"?s(j.bulk_deals||[]):t==="fii-dii"?o(j):s(j.top_gainers||j.top_losers||[])}catch(N){console.error("Failed to load market data:",N)}finally{c(!1)}},h=N=>{if(!N&&N!==0)return"N/A";const j=Number(N);return isNaN(j)?"N/A":`${(j/100).toFixed(0)} Cr`},d=()=>{switch(t){case"gainers":return"Top Gainers";case"losers":return"Top Losers";case"bulk":return"Bulk Deals";case"weekly":return"Weekly Movers";case"fii-dii":return"FII/DII Activity";default:return"Market Data"}},f=()=>{switch(t){case"gainers":return"";case"losers":return"";case"bulk":return"";case"weekly":return"";case"fii-dii":return"";default:return""}};if(t==="fii-dii")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading FII/DII data..."}):r?l.jsxs("div",{className:"fii-dii-container",children:[r.date&&l.jsxs("div",{className:"fii-dii-date-header",children:["Data as of: ",l.jsx("strong",{children:r.date})]}),l.jsxs("div",{className:"fii-dii-row",children:[l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"FII (Foreign Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((m=r.fii)==null?void 0:m.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((v=r.fii)==null?void 0:v.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((b=r.fii)==null?void 0:b.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((y=r.fii)==null?void 0:y.netValue)})]})]})]}),l.jsxs("div",{className:"fii-dii-block",children:[l.jsx("div",{className:"fii-dii-title",children:"DII (Domestic Institutional Investors)"}),l.jsxs("div",{className:"fii-dii-stats",children:[l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Buy Value"}),l.jsx("span",{className:"value positive",children:h((g=r.dii)==null?void 0:g.buyValue)})]}),l.jsxs("div",{className:"fii-dii-stat",children:[l.jsx("span",{className:"label",children:"Sell Value"}),l.jsx("span",{className:"value negative",children:h((w=r.dii)==null?void 0:w.sellValue)})]}),l.jsxs("div",{className:`fii-dii-stat net ${Number((S=r.dii)==null?void 0:S.netValue)>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"label",children:"Net Value"}),l.jsx("span",{className:"value",children:h((C=r.dii)==null?void 0:C.netValue)})]})]})]})]})]}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No FII/DII Data"}),l.jsx("div",{className:"empty-state-text",children:"FII/DII activity data is not available at this time."})]})]});if(t==="weekly")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading weekly data..."}):(E=n==null?void 0:n.weeklyData)!=null&&E.length?l.jsx("div",{className:"weekly-container",children:n.weeklyData.map(N=>l.jsxs("div",{className:"weekly-column",children:[l.jsxs("div",{className:"weekly-header",children:[l.jsx("div",{children:N.dayName}),l.jsx("span",{className:"muted",children:N.date})]}),l.jsxs("div",{className:"weekly-block",children:[l.jsx("div",{className:"section-label positive",children:"Top Gainers"}),(N.topGainers||[]).slice(0,5).map(j=>{var M;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:j.symbol}),l.jsxs("span",{className:"text-right positive",children:[(M=j.pChange)==null?void 0:M.toFixed(2),"%"]})]},`g-${j.symbol}`)}),l.jsx("div",{className:"section-label negative",children:"Top Losers"}),(N.topLosers||[]).slice(0,5).map(j=>{var M;return l.jsxs("div",{className:"mini-row",children:[l.jsx("span",{children:j.symbol}),l.jsxs("span",{className:"text-right negative",children:[(M=j.pChange)==null?void 0:M.toFixed(2),"%"]})]},`l-${j.symbol}`)})]})]},N.dayName+N.date))}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Weekly Data"}),l.jsx("div",{className:"empty-state-text",children:"Weekly movers data is not available."})]})]});if(t==="bulk")return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading bulk deals..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Bulk Deals"}),l.jsx("div",{className:"empty-state-text",children:"Bulk deals data is not available."})]}):l.jsx("div",{className:"orders-table-container",children:l.jsxs("table",{className:"orders-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Symbol"}),l.jsx("th",{children:"Client"}),l.jsx("th",{className:"text-right",children:"Quantity"}),l.jsx("th",{className:"text-right",children:"Price"})]})}),l.jsx("tbody",{children:e.map((N,j)=>l.jsxs("tr",{children:[l.jsx("td",{className:"order-symbol",children:N.symbol||N.BD_SYMBOL||"N/A"}),l.jsx("td",{children:N.clientName||N.client_name||N.BD_CLIENT_NAME||"N/A"}),l.jsx("td",{className:"text-right",children:(N.quantity||N.quantityTraded||N.BD_QTY_TRD||0).toLocaleString()}),l.jsxs("td",{className:"text-right",children:["",Number(N.tradePrice||N.price||N.BD_TP_WATP||0).toFixed(2)]})]},`${N.symbol}-${j}`))})]})})]});const p=t==="gainers";return l.jsxs("div",{className:"market-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:f()}),l.jsx("h2",{children:d()})]}),l.jsx("button",{onClick:u,disabled:a,children:a?"Loading...":"Refresh"})]}),a?l.jsx("div",{className:"loading",children:"Loading market data..."}):e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:f()}),l.jsx("div",{className:"empty-state-title",children:"No Data Available"}),l.jsx("div",{className:"empty-state-text",children:"Market data is not available at this time."})]}):l.jsx("div",{className:"market-grid",children:e.map((N,j)=>l.jsxs("div",{className:"market-card-item",children:[l.jsxs("div",{className:"market-card-header",children:[l.jsx("span",{className:"market-symbol",children:N.symbol}),l.jsxs("span",{className:`market-change-badge ${p?"positive":"negative"}`,children:[p?"+":"",Number(N.pChange||0).toFixed(2),"%"]})]}),l.jsxs("div",{className:"market-card-body",children:[l.jsxs("div",{className:"market-price-main",children:["",Number(N.lastPrice||0).toLocaleString()]}),l.jsxs("div",{className:"market-stats",children:[l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Open"}),l.jsxs("span",{children:["",Number(N.open||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"High"}),l.jsxs("span",{children:["",Number(N.dayHigh||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Low"}),l.jsxs("span",{children:["",Number(N.dayLow||0).toLocaleString()]})]}),l.jsxs("div",{className:"market-stat",children:[l.jsx("span",{className:"market-stat-label",children:"Prev Close"}),l.jsxs("span",{children:["",Number(N.previousClose||0).toLocaleString()]})]})]})]})]},N.symbol||j))})]})}const Va={HDFCBANK:12.96,RELIANCE:9.87,ICICIBANK:7.68,INFY:6.12,ITC:4.48,TCS:4.02,LT:3.89,BHARTIARTL:3.71,AXISBANK:3.01,SBIN:2.91,KOTAKBANK:2.62,BAJFINANCE:2.29,HINDUNILVR:2.25,MARUTI:1.68,ASIANPAINT:1.63,SUNPHARMA:1.6,TITAN:1.59,HCLTECH:1.54,NTPC:1.49,BAJAJFINSV:1.48,POWERGRID:1.44,"M&M":1.43,TATAMOTORS:1.38,ULTRACEMCO:1.36,ONGC:1.28,TECHM:1.15,NESTLEIND:1.14,TATASTEEL:1.09,WIPRO:1.05,ADANIENT:1.02,JSWSTEEL:.98,COALINDIA:.95,INDUSINDBK:.94,ADANIPORTS:.92,GRASIM:.88,HINDALCO:.85,BPCL:.82,DRREDDY:.78,BRITANNIA:.75,DIVISLAB:.72,CIPLA:.68,APOLLOHOSP:.65,HEROMOTOCO:.62,EICHERMOT:.58,TATACONSUM:.55,SBILIFE:.52,HDFCLIFE:.48,"BAJAJ-AUTO":.45,UPL:.42,LTIM:.38},Rp=24500;function bS(t,e,s,n=Rp){const i=Va[t]||0;if(!i||!s||s===0)return 0;const r=e/s*i*(n/100);return Math.round(r*100)/100}const Sd={LONG_BUILDUP:{signal:"LONG_BUILDUP",label:"Long Buildup",emoji:"",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",description:"Fresh Buying - Trust this move"},SHORT_COVERING:{signal:"SHORT_COVERING",label:"Short Covering",emoji:"",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.15)",description:"Sellers Exiting - Weak move, be careful"},SHORT_BUILDUP:{signal:"SHORT_BUILDUP",label:"Short Buildup",emoji:"",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",description:"Fresh Selling - Trust the fall"},LONG_UNWINDING:{signal:"LONG_UNWINDING",label:"Long Unwinding",emoji:"",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",description:"Profit Booking - Just a dip"}};function NS(t,e){const s=t>0,n=e>0;return s&&n?"LONG_BUILDUP":s&&!n?"SHORT_COVERING":!s&&n?"SHORT_BUILDUP":"LONG_UNWINDING"}function jS(t,e=Rp){if(!t||!Array.isArray(t))return{movers:[],draggers:[],totalPositive:0,totalNegative:0};const n=[...t.filter(c=>Va[c.symbol]).map(c=>{const u=(c.lastPrice||c.ltp||0)-(c.previousClose||c.prevClose||0),h=bS(c.symbol,u,c.previousClose||c.prevClose||0,e),d=c.oiChange||0,f=c.oiChangePct||0;return{symbol:c.symbol,ltp:c.lastPrice||c.ltp||0,prevClose:c.previousClose||c.prevClose||0,priceChange:u,priceChangePct:c.pChange||u/(c.previousClose||1)*100,weight:Va[c.symbol]||0,contributionPoints:h,oiChange:d,oiChangePct:f,oiSignal:NS(u,d),dayHigh:c.dayHigh||0,dayLow:c.dayLow||0}})].sort((c,u)=>Math.abs(u.contributionPoints)-Math.abs(c.contributionPoints)),i=n.filter(c=>c.contributionPoints>0),r=n.filter(c=>c.contributionPoints<0),o=i.reduce((c,u)=>c+u.contributionPoints,0),a=r.reduce((c,u)=>c+u.contributionPoints,0);return{movers:i.slice(0,10),draggers:r.slice(0,10),totalPositive:Math.round(o*100)/100,totalNegative:Math.round(a*100)/100,netContribution:Math.round((o+a)*100)/100}}function CS(t){if(!t||t.length===0)return{strength:"neutral",message:"No data available",color:"text-gray-400 bg-gray-500/20",longBuildupCount:0,shortCoveringCount:0};const e=t.slice(0,3),s=e.filter(a=>a.oiSignal==="LONG_BUILDUP").length,n=e.filter(a=>a.oiSignal==="SHORT_COVERING").length;let i,r,o;return s>=2?(i="strong",r="Strong Trend - Fresh buying in top movers",o="strength-strong"):n>=2?(i="weak",r="Weak Rally - Mostly short covering",o="strength-weak"):(i="neutral",r="Mixed Signals - Watch carefully",o="strength-neutral"),{strength:i,message:r,color:o,longBuildupCount:s,shortCoveringCount:n}}function bd({stock:t,rank:e,type:s}){const n=Sd[t.oiSignal]||Sd.LONG_BUILDUP,i=s==="mover";return l.jsxs("div",{className:`contributor-card ${i?"contributor-mover":"contributor-dragger"}`,children:[l.jsxs("div",{className:"contributor-left",children:[l.jsx("span",{className:`contributor-rank ${i?"rank-positive":"rank-negative"}`,children:e}),l.jsxs("div",{className:"contributor-info",children:[l.jsx("div",{className:"contributor-symbol",children:t.symbol}),l.jsxs("div",{className:"contributor-price",children:["",Number(t.ltp).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),l.jsxs("div",{className:"oi-signal-badge",style:{backgroundColor:n.bgColor,color:n.color,borderColor:n.color+"40"},title:n.description,children:[l.jsx("span",{className:"oi-signal-emoji",children:n.emoji}),l.jsx("span",{className:"oi-signal-label",children:n.label}),t.oiChangePct!==0&&l.jsxs("span",{className:"oi-signal-pct",children:["(",t.oiChangePct>0?"+":"",t.oiChangePct.toFixed(1),"%)"]})]}),l.jsxs("div",{className:"contributor-right",children:[l.jsxs("div",{className:`contribution-points ${i?"points-positive":"points-negative"}`,children:[t.contributionPoints>0?"+":"",t.contributionPoints.toFixed(1)," pts"]}),l.jsxs("div",{className:"contribution-pct",children:[t.priceChangePct>0?"+":"",Number(t.priceChangePct).toFixed(2),"%"]})]})]})}function kS({movers:t}){const e=CS(t),s=()=>{switch(e.strength){case"strong":return"";case"weak":return"";default:return""}};return l.jsxs("div",{className:`market-strength-indicator ${e.color}`,children:[l.jsxs("div",{className:"strength-message",children:[l.jsx("span",{className:"strength-icon",children:s()}),l.jsx("span",{className:"strength-text",children:e.message})]}),l.jsxs("div",{className:"strength-details",children:["Top 3: ",e.longBuildupCount," Long Buildup, ",e.shortCoveringCount," Short Covering"]})]})}const Fo=window.location.origin;function ES(){const[t,e]=x.useState([]),[s,n]=x.useState(24500),[i,r]=x.useState(!0),[o,a]=x.useState(null),c=x.useRef(!0),{lastUpdate:u}=kn("nifty-contributors",()=>f(),5e3),h=Ri(u);x.useEffect(()=>{d()},[]);const d=async()=>{r(!0),a(null);try{const[m,v]=await Promise.all([Q(`${Fo}/nse_data/nifty-contributors`),Q(`${Fo}/nse_data/indices`).catch(()=>null)]);if(m!=null&&m.stocks&&e(m.stocks),v!=null&&v.indices){const b=v.indices.find(y=>y.index==="NIFTY 50"||y.indexSymbol==="NIFTY 50");(b!=null&&b.last||b!=null&&b.lastPrice)&&n(b.last||b.lastPrice)}}catch(m){console.error("Failed to load Nifty contributors:",m),a(m.message||"Failed to load data")}finally{r(!1),c.current=!1}},f=async()=>{const m=await $e(`${Fo}/nse_data/nifty-contributors`);m!=null&&m.stocks&&e(m.stocks)},p=x.useMemo(()=>jS(t,s),[t,s]);return i&&c.current?l.jsxs("div",{className:"nifty-contributors-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading Nifty contributors..."})]}):o&&t.length===0?l.jsxs("div",{className:"nifty-contributors-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:o}),l.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]}):l.jsxs("div",{className:"nifty-contributors",children:[l.jsxs("div",{className:"contributors-header",children:[l.jsxs("div",{className:"contributors-title-section",children:[l.jsxs("h2",{className:"contributors-title",children:[l.jsx("span",{className:"contributors-icon",children:""}),"Nifty Index Contributors"]}),l.jsx("p",{className:"contributors-subtitle",children:"Who's lifting vs dragging the index - Sorted by Points, not %"})]}),l.jsxs("div",{className:"contributors-header-right",children:[l.jsx(kS,{movers:p.movers}),l.jsx("button",{onClick:d,disabled:i,className:"refresh-btn",children:i?"Loading...":"Refresh"})]})]}),l.jsxs("div",{className:"contribution-summary",children:[l.jsxs("div",{className:"summary-item summary-positive",children:[l.jsx("span",{className:"summary-label",children:"Total Positive"}),l.jsxs("span",{className:"summary-value",children:["+",p.totalPositive.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-net",children:[l.jsx("span",{className:"summary-label",children:"Net Contribution"}),l.jsxs("span",{className:`summary-value ${p.netContribution>=0?"positive":"negative"}`,children:[p.netContribution>=0?"+":"",p.netContribution.toFixed(1)," pts"]})]}),l.jsxs("div",{className:"summary-item summary-negative",children:[l.jsx("span",{className:"summary-label",children:"Total Negative"}),l.jsxs("span",{className:"summary-value",children:[p.totalNegative.toFixed(1)," pts"]})]})]}),l.jsxs("div",{className:"contributors-grid",children:[l.jsxs("div",{className:"contributors-column movers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title movers-title",children:[l.jsx("span",{children:""})," Index Movers"]}),l.jsxs("span",{className:"column-total positive",children:["+",p.totalPositive.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:p.movers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No positive contributors"})}):p.movers.map((m,v)=>l.jsx(bd,{stock:m,rank:v+1,type:"mover"},m.symbol))})]}),l.jsxs("div",{className:"contributors-column draggers-column",children:[l.jsxs("div",{className:"column-header",children:[l.jsxs("h3",{className:"column-title draggers-title",children:[l.jsx("span",{children:""})," Index Draggers"]}),l.jsxs("span",{className:"column-total negative",children:[p.totalNegative.toFixed(1)," pts"]})]}),l.jsx("div",{className:"contributors-list",children:p.draggers.length===0?l.jsx("div",{className:"empty-contributors",children:l.jsx("p",{children:"No negative contributors"})}):p.draggers.map((m,v)=>l.jsx(bd,{stock:m,rank:v+1,type:"dragger"},m.symbol))})]})]}),l.jsxs("div",{className:"oi-legend",children:[l.jsx("div",{className:"legend-title",children:"OI Signal Guide:"}),l.jsxs("div",{className:"legend-items",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh buying - trust the move"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Covering"}),l.jsx("span",{className:"legend-desc",children:"Weak move - be careful"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Short Buildup"}),l.jsx("span",{className:"legend-desc",children:"Fresh selling - trust the fall"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-emoji",children:""}),l.jsx("span",{className:"legend-label",children:"Long Unwinding"}),l.jsx("span",{className:"legend-desc",children:"Profit booking - just a dip"})]})]})]}),u&&l.jsx("div",{className:"contributors-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const vr=window.location.origin,_S=({data:t})=>{const e=[...t].reverse();if(!e.length)return null;const s=e.flatMap(d=>[d.fii_net_value,d.dii_net_value].filter(f=>f!==null)),i=(Math.max(...s.map(d=>Math.abs(d)))||1e3)*1.1,r=220,o={top:20,bottom:30},a=r-o.top-o.bottom,c=o.top+a/2,u=d=>{const f=d/i*(a/2);return c-f},h=d=>Math.abs(d/100).toFixed(0)+"Cr";return l.jsxs("div",{className:"fii-dii-chart-container",children:[l.jsx("h3",{className:"history-title",children:"Institutional Flow Trend"}),l.jsxs("div",{className:"chart-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color fii"})," FII"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color dii"})," DII"]})]}),l.jsx("div",{className:"fii-dii-chart-scroll",children:l.jsxs("svg",{viewBox:`0 0 ${e.length*60} ${r}`,preserveAspectRatio:"xMidYMid meet",className:"fii-dii-svg-content",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"gradGreen",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--accent-green)",stopOpacity:"0.8"}),l.jsx("stop",{offset:"100%",stopColor:"var(--accent-green)",stopOpacity:"0.4"})]}),l.jsxs("linearGradient",{id:"gradRed",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--accent-red)",stopOpacity:"0.8"}),l.jsx("stop",{offset:"100%",stopColor:"var(--accent-red)",stopOpacity:"0.4"})]})]}),l.jsx("line",{x1:"0",y1:c,x2:"100%",y2:c,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),l.jsxs("text",{x:"5",y:o.top+10,fontSize:"10",fill:"var(--text-secondary)",children:["+",h(i)]}),l.jsxs("text",{x:"5",y:r-o.bottom-5,fontSize:"10",fill:"var(--text-secondary)",children:["-",h(i)]}),e.map((d,f)=>{const m=f*60+30,v=12,b=4,y=d.fii_net_value||0,g=d.dii_net_value||0,w=u(y),S=u(g),C=Math.abs(w-c),E=Math.abs(S-c),N=y>=0?w:c,j=g>=0?S:c,M=new Date(d.trade_date),_=`${M.getDate()} ${M.toLocaleString("default",{month:"short"}).slice(0,3)}`;return l.jsxs("g",{children:[l.jsx("text",{x:m,y:r-5,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",children:_}),l.jsx("title",{children:`${_}
FII: ${h(y*100)}
DII: ${h(g*100)}`}),l.jsx("rect",{x:m-v-b/2,y:N,width:v,height:C||1,fill:y>=0?"url(#gradGreen)":"url(#gradRed)",rx:"2"}),l.jsx("rect",{x:m+b/2,y:j,width:v,height:E||1,fill:g>=0?"var(--accent-green)":"var(--accent-red)",opacity:"0.5",rx:"2",stroke:g>=0?"var(--accent-green)":"var(--accent-red)",strokeWidth:"0.5"})]},f)})]})})]})};function MS(){const[t,e]=x.useState(null),[s,n]=x.useState([]),[i,r]=x.useState([]),[o,a]=x.useState(!0),[c,u]=x.useState(null),h=x.useRef(!0),[d,f]=x.useState(0),[p,m]=x.useState(0),v=10,{lastUpdate:b}=kn("fii-dii",()=>C(),6e4),y=Ri(b);x.useEffect(()=>{g()},[]),x.useEffect(()=>{(async()=>{const A=await $e(`${vr}/nse_data/fii-dii-history?limit=30&offset=0`);A!=null&&A.records&&r(A.records)})()},[]);const g=async V=>{var W;const A=V!==void 0?V:d;a(!0),u(null);try{const G=A*v,[z,P]=await Promise.allSettled([Q(`${vr}/nse_data/fii-dii-activity`),Q(`${vr}/nse_data/fii-dii-history?limit=${v}&offset=${G}`)]);if(z.status==="fulfilled"&&e(z.value),P.status==="fulfilled"){const T=P.value;n((T==null?void 0:T.records)||[]),m((T==null?void 0:T.total)||0)}else console.error("Failed to load history:",P.reason);z.status==="rejected"&&P.status==="rejected"&&u(((W=z.reason)==null?void 0:W.message)||"Failed to load data")}catch(G){console.error("Failed to load FII/DII data:",G),u(G.message||"Failed to load data")}finally{a(!1),h.current=!1}},w=V=>{f(V),g(V)},S=Math.ceil(p/v)||1,C=async()=>{const V=await $e(`${vr}/nse_data/fii-dii-activity`);V&&e(V)},E=V=>{if(V==null)return"";const A=V/100;return`${Math.abs(A).toFixed(2)} Cr`},N=V=>{if(V==null)return"";const A=V/100;return`${A>=0?"+":""}${A.toFixed(2)} Cr`},j=V=>V==null?"neutral":V>=0?"bullish":"bearish",_=(()=>{if(!s.length)return{fiiTotal:0,diiTotal:0,days:0};let V=0,A=0,W=0;return s.forEach(G=>{G.fii_net_value!==null&&(V+=G.fii_net_value,W++),G.dii_net_value!==null&&(A+=G.dii_net_value)}),{fiiTotal:V,diiTotal:A,days:W}})();if(o&&h.current)return l.jsxs("div",{className:"fii-dii-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading FII/DII activity..."})]});if(c&&!t)return l.jsxs("div",{className:"fii-dii-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:c}),l.jsx("button",{onClick:g,className:"retry-btn",children:"Retry"})]});const L=t==null?void 0:t.fii,O=t==null?void 0:t.dii,$=t==null?void 0:t.date;return l.jsxs("div",{className:"fii-dii-activity",children:[l.jsxs("div",{className:"fii-dii-header",children:[l.jsxs("div",{className:"fii-dii-title-section",children:[l.jsxs("h2",{className:"fii-dii-title",children:[l.jsx("span",{className:"fii-dii-icon",children:""}),"FII / DII Activity"]}),l.jsxs("p",{className:"fii-dii-subtitle",children:["Foreign & Domestic Institutional Investor flows",$&&l.jsxs("span",{className:"trade-date",children:["  ",$]})]})]}),l.jsx("button",{onClick:g,disabled:o,className:"refresh-btn",children:o?"Loading...":"Refresh"})]}),l.jsxs("div",{className:"fii-dii-cards",children:[l.jsxs("div",{className:`institutional-card fii-card ${j(L==null?void 0:L.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"FII (Foreign)"})]}),l.jsx("div",{className:`net-badge ${j(L==null?void 0:L.netValue)}`,children:(L==null?void 0:L.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${j(L==null?void 0:L.netValue)}`,children:N(L==null?void 0:L.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:E(L==null?void 0:L.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:E(L==null?void 0:L.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card dii-card ${j(O==null?void 0:O.netValue)}`,children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"DII (Domestic)"})]}),l.jsx("div",{className:`net-badge ${j(O==null?void 0:O.netValue)}`,children:(O==null?void 0:O.netValue)>=0?"Net Buyer":"Net Seller"})]}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${j(O==null?void 0:O.netValue)}`,children:N(O==null?void 0:O.netValue)})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Buy Value"}),l.jsx("span",{className:"detail-value buy",children:E(O==null?void 0:O.buyValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Sell Value"}),l.jsx("span",{className:"detail-value sell",children:E(O==null?void 0:O.sellValue)})]})]})]}),l.jsxs("div",{className:`institutional-card combined-card ${j(((L==null?void 0:L.netValue)||0)+((O==null?void 0:O.netValue)||0))}`,children:[l.jsx("div",{className:"card-header",children:l.jsxs("div",{className:"card-title",children:[l.jsx("span",{className:"card-icon",children:""}),l.jsx("span",{children:"Combined Flow"})]})}),l.jsx("div",{className:"card-net-value",children:l.jsx("span",{className:`net-amount ${j(((L==null?void 0:L.netValue)||0)+((O==null?void 0:O.netValue)||0))}`,children:N(((L==null?void 0:L.netValue)||0)+((O==null?void 0:O.netValue)||0))})}),l.jsxs("div",{className:"card-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"FII Net"}),l.jsx("span",{className:`detail-value ${j(L==null?void 0:L.netValue)}`,children:N(L==null?void 0:L.netValue)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"DII Net"}),l.jsx("span",{className:`detail-value ${j(O==null?void 0:O.netValue)}`,children:N(O==null?void 0:O.netValue)})]})]})]})]}),s.length>0&&l.jsxs("div",{className:"fii-dii-history",children:[l.jsxs("h3",{className:"history-title",children:["History (",p," Trading Days)"]}),l.jsxs("div",{className:"history-summary",children:[l.jsxs("div",{className:`summary-card ${j(_.fiiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"FII Cumulative"}),l.jsx("div",{className:`summary-value ${j(_.fiiTotal)}`,children:N(_.fiiTotal)})]}),l.jsxs("div",{className:`summary-card ${j(_.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"DII Cumulative"}),l.jsx("div",{className:`summary-value ${j(_.diiTotal)}`,children:N(_.diiTotal)})]}),l.jsxs("div",{className:`summary-card ${j(_.fiiTotal+_.diiTotal)}`,children:[l.jsx("div",{className:"summary-label",children:"Total Institutional"}),l.jsx("div",{className:`summary-value ${j(_.fiiTotal+_.diiTotal)}`,children:N(_.fiiTotal+_.diiTotal)})]})]}),l.jsx("div",{className:"history-table-container",children:l.jsxs("table",{className:"history-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{className:"text-right",children:"FII Net"}),l.jsx("th",{className:"text-right",children:"DII Net"}),l.jsx("th",{className:"text-right",children:"Total"})]})}),l.jsx("tbody",{children:s.map((V,A)=>{const W=(V.fii_net_value||0)+(V.dii_net_value||0);return l.jsxs("tr",{children:[l.jsx("td",{className:"date-cell",children:V.trade_date?new Date(V.trade_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""}),l.jsx("td",{className:`text-right ${j(V.fii_net_value)}`,children:N(V.fii_net_value)}),l.jsx("td",{className:`text-right ${j(V.dii_net_value)}`,children:N(V.dii_net_value)}),l.jsx("td",{className:`text-right ${j(W)}`,children:N(W)})]},V.trade_date||A)})})]})}),S>1&&l.jsxs("div",{className:"pagination-controls",children:[l.jsx("button",{className:"pagination-btn",onClick:()=>w(d-1),disabled:d===0,children:"<"}),Array.from({length:S},(V,A)=>{const W=A===0||A===S-1||Math.abs(A-d)<=2;return!W&&(A===1||A===S-2)?l.jsx("span",{className:"pagination-ellipsis",children:"..."},A):W?l.jsx("button",{className:`pagination-num ${A===d?"active":""}`,onClick:()=>w(A),children:A+1},A):null}),l.jsx("button",{className:"pagination-btn",onClick:()=>w(d+1),disabled:d>=S-1,children:">"})]}),l.jsx(_S,{data:i})]}),l.jsxs("div",{className:"fii-dii-insight",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("div",{className:"insight-title",children:"Market Insight"}),l.jsx("div",{className:"insight-text",children:(()=>{const V=(L==null?void 0:L.netValue)||0,A=(O==null?void 0:O.netValue)||0;return V>0&&A>0?"Both FII & DII are buying - Strong bullish sentiment with institutional support.":V<0&&A<0?"Both FII & DII are selling - Bearish sentiment, institutions are risk-off.":V<0&&A>0?"FII selling, DII buying - DIIs absorbing FII selling pressure. Watch for support levels.":V>0&&A<0?"FII buying, DII selling - Foreign interest increasing. DIIs may be booking profits.":"Mixed institutional activity. Monitor for clearer directional signals."})()})]})]}),b&&l.jsx("div",{className:"fii-dii-footer",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",y]})})]})}const On=window.location.origin;function LS({onNavigate:t}){const[e,s]=x.useState([]),[n,i]=x.useState([]),[r,o]=x.useState(!0),[a,c]=x.useState(""),[u,h]=x.useState(!1),[d,f]=x.useState(""),{lastUpdate:p}=kn("watchlist-prices",()=>b(),5e3);Ri(p),x.useEffect(()=>{m(),v()},[]);const m=async()=>{const S=localStorage.getItem("watchlist");S&&s(JSON.parse(S))},v=async()=>{o(!0);try{const S=await Q(`${On}/fyers/market/all-stocks`);if(i(S.stocks||[]),!S.fyers_connected||S.stocks&&S.stocks.length===0){console.log("[Watchlist] Fyers not connected, falling back to NSE"),f("nse");const C=await Q(`${On}/nse_data/all-stocks`);i(C.stocks||[])}else f("fyers")}catch(S){console.error("Failed to load stocks:",S);try{f("nse");const C=await Q(`${On}/nse_data/all-stocks`);i(C.stocks||[])}catch(C){console.error("NSE fallback also failed:",C)}}finally{o(!1)}},b=async()=>{var N;const S=localStorage.getItem("watchlist");if(!S)return;const C=JSON.parse(S);if(C.length===0)return;const E=C.map(j=>j.symbol).filter(Boolean);if(E.length!==0)try{const j=E.slice(0,50).join(","),M=await $e(`${On}/fyers/market/quotes?symbols=${encodeURIComponent(j)}`);if(M!=null&&M.quotes&&M.fyers_connected){f("fyers");const _=C.map(O=>{const $=M.quotes[O.symbol];return $?{...O,lastPrice:$.lastPrice,pChange:$.pChange,change:$.change,dayHigh:$.high,dayLow:$.low,volume:$.volume}:O});s(_);const L=n.map(O=>{const $=M.quotes[O.symbol];return $?{...O,...$}:O});i(L)}else{f("nse");const _=await $e(`${On}/nse_data/all-stocks`);if(((N=_==null?void 0:_.stocks)==null?void 0:N.length)>0){i(_.stocks);const L=C.map(O=>_.stocks.find(V=>V.symbol===O.symbol)||O);s(L)}}}catch(j){console.error("Failed to refresh watchlist prices",j)}},y=S=>{if(!e.find(E=>E.symbol===S.symbol)){const E=[...e,S];s(E),localStorage.setItem("watchlist",JSON.stringify(E))}h(!1),c("")},g=S=>{const C=e.filter(E=>E.symbol!==S);s(C),localStorage.setItem("watchlist",JSON.stringify(C))},w=n.filter(S=>{var C,E;return((C=S.symbol)==null?void 0:C.toLowerCase().includes(a.toLowerCase()))||((E=S.identifier)==null?void 0:E.toLowerCase().includes(a.toLowerCase()))});return l.jsxs("div",{className:"watchlist-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Watchlist"}),d&&l.jsx("span",{style:{fontSize:"0.75rem",color:d==="fyers"?"#00d09c":"#ffa657",marginLeft:"0.5rem",padding:"0.125rem 0.5rem",borderRadius:"0.25rem",background:"rgba(255,255,255,0.1)"},children:d==="fyers"?" Fyers Live":" NSE Data"})]}),l.jsxs("div",{className:"section-actions",children:[l.jsx("button",{onClick:()=>h(!0),children:"+ Add Stock"}),l.jsx("button",{onClick:v,disabled:r,children:r?"Loading...":"Refresh"})]})]}),e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No Stocks in Watchlist"}),l.jsx("div",{className:"empty-state-text",children:"Add stocks to your watchlist to track them easily."}),l.jsx("button",{className:"primary-btn",onClick:()=>h(!0),children:"Add Your First Stock"})]}):l.jsx("div",{className:"watchlist-grid",children:e.map(S=>{const C=n.find(j=>j.symbol===S.symbol),E=(C==null?void 0:C.lastPrice)||S.lastPrice||0,N=(C==null?void 0:C.pChange)||S.pChange||0;return l.jsxs("div",{className:"watchlist-item",children:[l.jsxs("div",{className:"watchlist-info",children:[l.jsx("span",{className:"watchlist-symbol",children:S.symbol}),l.jsx("span",{className:"watchlist-name",children:S.identifier||"Equity"})]}),l.jsxs("div",{className:"watchlist-price-info",children:[l.jsx("div",{className:"watchlist-price",children:E>0?`${Number(E).toLocaleString()}`:"N/A"}),l.jsx("div",{className:`watchlist-change ${N>=0?"positive":"negative"}`,children:E>0?`${N>=0?"+":""}${Number(N).toFixed(2)}%`:"-"})]}),l.jsxs("div",{className:"watchlist-actions",children:[l.jsx("button",{className:"watchlist-action-btn",onClick:()=>t("trading.trade"),title:"Trade",children:""}),l.jsx("button",{className:"watchlist-action-btn remove",onClick:()=>g(S.symbol),title:"Remove",children:""})]})]},S.symbol)})}),u&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>h(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:"Add to Watchlist"}),l.jsx("p",{className:"muted",children:"Search and add stocks to your watchlist"})]}),l.jsx("button",{className:"icon-button",onClick:()=>h(!1),children:""})]}),l.jsx("input",{type:"text",className:"search-input",placeholder:"Search stocks by symbol or name...",value:a,onChange:S=>c(S.target.value),autoFocus:!0}),l.jsx("div",{className:"stock-list",style:{maxHeight:"400px"},children:r?l.jsx("div",{className:"loading",children:"Loading stocks..."}):w.length===0?l.jsx("div",{className:"loading",children:"No stocks found"}):w.slice(0,20).map(S=>{const C=e.find(E=>E.symbol===S.symbol);return l.jsxs("div",{className:`stock-item ${C?"selected":""}`,onClick:()=>!C&&y(S),children:[l.jsxs("div",{className:"stock-info",children:[l.jsx("span",{className:"stock-symbol",children:S.symbol}),l.jsx("span",{className:"stock-price",children:S.identifier||"Equity"})]}),l.jsx("div",{className:"stock-change",children:C?l.jsx("span",{className:"muted",children:"Added "}):S.lastPrice?l.jsxs("span",{className:S.pChange>=0?"positive":"negative",children:["",Number(S.lastPrice).toLocaleString()]}):l.jsx("span",{className:"muted",children:"-"})})]},S.symbol)})})]})})]})}const PS=window.location.origin;function TS({subSection:t}){const e=Cn(),{theme:s,setTheme:n}=sp(),i=localStorage.getItem("user_email")||"User",r=localStorage.getItem("user_name")||i.split("@")[0],[o,a]=x.useState(r),[c,u]=x.useState(localStorage.getItem("profile_pic")||""),[h,d]=x.useState(!1),[f,p]=x.useState(!1),[m,v]=x.useState(!1),b=x.useRef(null);cl.useEffect(()=>{y()},[t]);const y=async()=>{try{const j=await Q(`${PS}/fyers/status`);p(j.connected)}catch(j){console.error("Error checking Fyers status:",j)}},g=async()=>{v(!0);try{const M=await(await fetch("/fyers/auth-url",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();M.url&&(window.location.href=M.url)}catch(j){console.error("Error getting Fyers auth URL:",j),alert("Failed to connect to Fyers. Please try again later.")}finally{v(!1)}},w=async()=>{if(confirm("Are you sure you want to disconnect your Fyers account?"))try{await fetch("/fyers/disconnect",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),p(!1)}catch(j){console.error("Error disconnecting Fyers:",j)}},S=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),e("/login")},C=()=>{d(!1),alert("Wallet reset feature coming soon!")},E=j=>{var _;const M=(_=j.target.files)==null?void 0:_[0];if(M){const L=new FileReader;L.onloadend=()=>{const O=L.result;u(O),localStorage.setItem("profile_pic",O)},L.readAsDataURL(M)}},N=()=>{localStorage.setItem("user_name",o),alert("Display name saved!")};return t==="preferences"?l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Preferences"})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Display Settings"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Theme"}),l.jsx("span",{className:"settings-item-desc",children:"Choose your preferred theme"})]}),l.jsxs("select",{className:"settings-select",value:s,onChange:j=>{n(j.target.value)},children:[l.jsx("option",{value:"dark",children:"Dark Mode"}),l.jsx("option",{value:"light",children:"Light Mode"}),l.jsx("option",{value:"glass",children:"Glass Mode"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Currency Format"}),l.jsx("span",{className:"settings-item-desc",children:"Display currency format"})]}),l.jsx("select",{className:"settings-select",defaultValue:"inr",children:l.jsx("option",{value:"inr",children:" INR (Indian Rupee)"})})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Chart Default Interval"}),l.jsx("span",{className:"settings-item-desc",children:"Default time interval for charts"})]}),l.jsxs("select",{className:"settings-select",defaultValue:"1d",children:[l.jsx("option",{value:"1m",children:"1 Minute"}),l.jsx("option",{value:"5m",children:"5 Minutes"}),l.jsx("option",{value:"15m",children:"15 Minutes"}),l.jsx("option",{value:"1h",children:"1 Hour"}),l.jsx("option",{value:"1d",children:"1 Day"})]})]})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Notifications"}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Trade Notifications"}),l.jsx("span",{className:"settings-item-desc",children:"Get notified when trades are executed"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Price Alerts"}),l.jsx("span",{className:"settings-item-desc",children:"Receive alerts when stocks hit target prices"})]}),l.jsxs("label",{className:"settings-toggle",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0}),l.jsx("span",{className:"toggle-slider"})]})]})]})]})]}):l.jsxs("div",{className:"settings-section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Profile"})]})}),l.jsx("div",{className:"settings-card",children:l.jsxs("div",{className:"profile-header",children:[l.jsxs("div",{className:"profile-avatar clickable",onClick:()=>{var j;return(j=b.current)==null?void 0:j.click()},title:"Click to change profile picture",style:c?{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[!c&&o.charAt(0).toUpperCase(),l.jsx("div",{className:"avatar-overlay",children:""})]}),l.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:E,style:{display:"none"}}),l.jsxs("div",{className:"profile-info",children:[l.jsx("h3",{children:o}),l.jsx("span",{className:"profile-email",children:i}),l.jsx("span",{className:"profile-badge",children:"Paper Trading Account"})]})]})}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Personal Information"}),l.jsx("div",{className:"settings-list",children:l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Display Name"}),l.jsx("span",{className:"settings-item-desc",children:"This name will be shown in the app"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsx("input",{type:"text",className:"settings-input",value:o,onChange:j=>a(j.target.value),placeholder:"Enter your name"}),l.jsx("button",{className:"settings-action-link primary",onClick:N,children:"Save"})]})]})})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Broker Connections"}),l.jsx("p",{className:"settings-desc",children:"Connect your real broker accounts to view holdings and place real trades."}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"settings-item",children:[l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Fyers"}),l.jsx("span",{className:"settings-item-desc",children:"Trade with your Fyers account"})]})]})}),f?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("span",{className:"badge-connected",children:"Connected"}),l.jsx("button",{className:"settings-action-link danger",onClick:w,children:"Disconnect"})]}):l.jsx("button",{className:"settings-action-link primary",onClick:g,disabled:m,children:m?"Connecting...":"Connect"})]}),l.jsx("div",{className:"settings-item disabled",children:l.jsx("div",{className:"settings-item-info",children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("span",{className:"settings-item-label",children:"Zerodha"}),l.jsx("span",{className:"settings-item-desc",children:"Coming Soon"})]})]})})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Information"}),l.jsxs("div",{className:"settings-list",children:[l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Email"}),l.jsx("span",{className:"settings-item-value",children:i})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Account Type"}),l.jsx("span",{className:"settings-item-value",children:"Market Sandbox (Demo)"})]})}),l.jsx("div",{className:"settings-item",children:l.jsxs("div",{className:"settings-item-info",children:[l.jsx("span",{className:"settings-item-label",children:"Starting Balance"}),l.jsx("span",{className:"settings-item-value",children:"1,00,000"})]})})]})]}),l.jsxs("div",{className:"settings-card",children:[l.jsx("h3",{children:"Account Actions"}),l.jsxs("div",{className:"settings-actions",children:[l.jsxs("button",{className:"settings-action-btn warning",onClick:()=>d(!0),children:[l.jsx("span",{children:""}),"Reset Wallet"]}),l.jsxs("button",{className:"settings-action-btn danger",onClick:S,children:[l.jsx("span",{children:""}),"Logout"]})]})]}),h&&l.jsx("div",{className:"stock-trade-modal",onClick:()=>d(!1),children:l.jsxs("div",{className:"stock-trade-shell",onClick:j=>j.stopPropagation(),style:{maxWidth:"400px"},children:[l.jsxs("div",{className:"stock-trade-header",children:[l.jsx("div",{children:l.jsx("h3",{children:"Reset Wallet?"})}),l.jsx("button",{className:"icon-button",onClick:()=>d(!1),children:""})]}),l.jsx("p",{style:{marginBottom:"1.5rem"},children:"This will reset your wallet balance to 1,00,000 and clear all your holdings and order history. This action cannot be undone."}),l.jsxs("div",{className:"stock-trade-actions",style:{gridTemplateColumns:"1fr 1fr"},children:[l.jsx("button",{className:"chart-btn",onClick:()=>d(!1),children:"Cancel"}),l.jsx("button",{className:"sell-btn",onClick:C,children:"Reset Wallet"})]})]})})]})}function $S(){return l.jsxs("div",{className:"product-section",style:{maxWidth:"900px",margin:"0 auto"},children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title",children:[l.jsx("span",{className:"section-title-icon",children:""}),l.jsx("h2",{children:"Platform Guide"})]}),l.jsx("p",{className:"section-subtitle",children:"Quick reference for all trading tools and features"})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Virtual Trading"}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Paper Trading"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"What it does:"})," Simulated trading with virtual money (1,00,000 starting balance).",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Testing strategies without risking real capital.",l.jsx("br",{}),l.jsx("strong",{children:"Features:"})," Buy/Sell stocks, track P&L, view portfolio performance."]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Watchlist"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"What it does:"})," Track stocks you're interested in.",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Monitoring potential trades before entry."]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Real Trading"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"Broker Integration:"})," Connect your Zerodha or Fyers account for live trading.",l.jsx("br",{}),l.jsx("strong",{children:"Features:"})," Real portfolio sync, live order placement, P&L tracking.",l.jsx("br",{}),l.jsx("strong",{children:"Setup:"})," Authenticate through broker OAuth flow from settings."]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.75rem"},children:"Market Data"}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("h4",{style:{color:"var(--info)",marginBottom:"0.5rem"},children:"Top Gainers / Losers"}),l.jsx("p",{style:{opacity:.9,lineHeight:1.6},children:"Real-time list of best and worst performing stocks in NIFTY 50."})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("h4",{style:{color:"var(--info)",marginBottom:"0.5rem"},children:"FII/DII Activity"}),l.jsxs("p",{style:{opacity:.9,lineHeight:1.6},children:[l.jsx("strong",{children:"FII (Foreign):"})," Net buying/selling by foreign institutions.",l.jsx("br",{}),l.jsx("strong",{children:"DII (Domestic):"})," Net buying/selling by mutual funds, insurance companies.",l.jsx("br",{}),l.jsx("strong",{children:"Use for:"})," Understanding institutional money flow direction."]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem",background:"var(--card-bg-hover)"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Quick Tips"}),l.jsxs("ul",{style:{opacity:.9,lineHeight:1.8,paddingLeft:"1.5rem"},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Green badge"})," = Bullish / Positive / Strong signal"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Red badge"})," = Bearish / Negative / Weak signal"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Blue badge"})," = Neutral / Informational"]}),l.jsx("li",{children:"Data auto-refreshes every 30-60 seconds"}),l.jsx("li",{children:"Market hours: 9:15 AM - 3:30 PM IST"}),l.jsx("li",{children:"Best results during market hours when live data flows"})]})]})]})}function zS(){const{isPaused:t,isOnline:e,togglePause:s,activeCount:n}=Tx(),[i,r]=x.useState(jh()),[o,a]=x.useState(kh());x.useEffect(()=>{const u=setInterval(()=>{r(jh()),a(kh())},1e3);return()=>clearInterval(u)},[]);const c=Ps();return e?l.jsxs("div",{className:"refresh-control",children:[l.jsxs("div",{className:"market-status",children:[l.jsxs("span",{className:`market-status-indicator ${c?"open":"closed"}`,children:[l.jsx("span",{className:"status-dot"}),i]}),l.jsxs("span",{className:"market-countdown",children:[o.event==="close"?"Closes":"Opens"," in ",o.countdown]})]}),c?l.jsxs("button",{className:`refresh-toggle-btn ${t?"paused":"active"}`,onClick:s,title:t?"Resume auto-refresh":"Pause auto-refresh",children:[t?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M3 2l10 6-10 6V2z"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M2 2h4v12H2V2zm8 0h4v12h-4V2z"})}),l.jsx("span",{className:"refresh-toggle-text",children:t?"Paused":`Live (${n})`})]}):l.jsx("span",{className:"refresh-status-text",children:"Auto-refresh paused (market closed)"})]}):l.jsx("div",{className:"refresh-control",children:l.jsxs("div",{className:"offline-indicator",children:[l.jsx("span",{className:"offline-dot"}),l.jsx("span",{children:"Offline"})]})})}function RS(){const t=Cn();sp(),localStorage.getItem("access_token");const e=localStorage.getItem("user_email")||"User",s=localStorage.getItem("user_name")||e.split("@")[0],[n,i]=x.useState("dashboard"),[r,o]=x.useState(!1),[a,c]=x.useState(!1),[u,h]=x.useState("");x.useEffect(()=>{fetch("/static/version.json?t="+Date.now()).then(j=>j.json()).then(j=>h(`v${j.version}`)).catch(()=>h("v1.0.0"));const g=new URLSearchParams(window.location.search),w=g.get("s"),S=g.get("auth_code")||g.get("code"),C=g.get("id"),E=g.get("fyers_connected"),N=g.get("fyers_error");E==="true"?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):N?(alert("Fyers connection failed: "+N),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):w==="ok"&&S&&d(w,S,C)},[]);const d=async(g,w,S)=>{try{const C=await fetch(`/fyers/callback?s=${g}&code=${w}&id=${S}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),E=await C.json();C.ok?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),i("settings.profile")):alert("Failed to connect Fyers: "+E.detail)}catch(C){console.error("Error handling Fyers callback:",C)}},f=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),t("/login")},p=g=>{i(g),c(!1)},[m,v]=n.split("."),b=()=>{switch(m){case"dashboard":return l.jsx(Eh,{onNavigate:p});case"trading":return v==="portfolio"||v==="orders"?l.jsx(Do,{initialTab:v==="orders"?"orders":"portfolio"}):l.jsx(Do,{initialTab:"trade"});case"real-trading":return l.jsx(Do,{initialTab:"trade"});case"market":return v==="nifty-contributors"?l.jsx(ES,{}):v==="fii-dii"?l.jsx(MS,{}):l.jsx(SS,{subSection:v||"gainers"});case"watchlist":return l.jsx(LS,{onNavigate:p});case"settings":return l.jsx(TS,{subSection:v||"profile"});case"documentation":return l.jsx($S,{});default:return l.jsx(Eh,{onNavigate:p})}},y=()=>{const g={dashboard:"Dashboard",trading:"Trading","real-trading":"Trading",market:"Market Data","market.gainers":"Top Gainers","market.losers":"Top Losers","market.nifty-contributors":"Nifty Contributors","market.fii-dii":"FII / DII Activity","market.weekly":"Weekly Movers","market.bulk":"Bulk Deals",watchlist:"Watchlist",settings:"Settings","settings.profile":"Profile","settings.preferences":"Preferences",documentation:"Platform Guide"};return g[n]||g[m]||"Dashboard"};return l.jsxs(ix,{children:[l.jsx(rx,{}),l.jsxs("div",{className:"app-layout",children:[a&&l.jsx("div",{className:"mobile-overlay",onClick:()=>c(!1)}),l.jsx(kx,{activeSection:n,onSectionChange:p,collapsed:r,onToggleCollapse:()=>o(!r),mobileOpen:a,onMobileClose:()=>c(!1)}),l.jsxs("main",{className:`main-content ${r?"sidebar-collapsed":""}`,children:[l.jsxs("header",{className:"main-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsxs("button",{className:"mobile-menu-btn",onClick:()=>c(!a),"aria-label":"Toggle menu",children:[l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"}),l.jsx("span",{className:"hamburger-line"})]}),l.jsx("h1",{className:"page-title",children:y()}),u&&l.jsx("span",{className:"version-badge",children:u})]}),l.jsxs("div",{className:"header-right",children:[l.jsx(zS,{}),l.jsx("span",{className:"user-email",children:s}),l.jsx("button",{className:"logout-btn",onClick:f,children:"Logout"})]})]}),l.jsx("div",{className:"content-area",children:b()})]})]})]})}function IS(){const t=Cn(),[e,s]=x.useState(""),[n,i]=x.useState(""),[r,o]=x.useState(""),[a,c]=x.useState({message:"",type:""}),[u,h]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("access_token")&&t("/");const v=localStorage.getItem("GOOGLE_CLIENT_ID");v&&o(v);const b=()=>{const y=localStorage.getItem("GOOGLE_CLIENT_ID");y&&window.google&&(window.google.accounts.id.initialize({client_id:y,callback:d}),window.google.accounts.id.renderButton(document.getElementById("google-signin"),{theme:"outline",size:"large",width:280}))};if(window.google)b();else{const y=setInterval(()=>{window.google&&(clearInterval(y),b())},200);return()=>clearInterval(y)}},[t]);const d=async v=>{if(!(v!=null&&v.credential)){c({message:"Google sign-in failed",type:"error"});return}h(!0),c({message:"Signing in with Google...",type:"info"});try{const b=await il("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:v.credential})});f(b)}catch(b){c({message:b.message,type:"error"})}finally{h(!1)}},f=v=>{v!=null&&v.access_token&&(v!=null&&v.user)?(localStorage.setItem("access_token",v.access_token),localStorage.setItem("user_email",v.user.email||""),t("/")):c({message:"Unexpected response from server",type:"error"})},p=async v=>{v.preventDefault(),h(!0),c({message:"Logging in...",type:"info"});try{const b=new URLSearchParams;b.append("username",e),b.append("password",n);const y=await il("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.toString()});f(y)}catch(b){c({message:b.message,type:"error"})}finally{h(!1)}},m=()=>{r&&(localStorage.setItem("GOOGLE_CLIENT_ID",r),c({message:"Saved Google Client ID. Reloading...",type:"info"}),setTimeout(()=>window.location.reload(),500))};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Welcome Back"}),l.jsx("p",{className:"muted",children:"Sign in to access your dashboard"})]}),l.jsxs("form",{onSubmit:p,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:v=>s(v.target.value),placeholder:"you@example.com",required:!0,disabled:u})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:n,onChange:v=>i(v.target.value),placeholder:"",required:!0,disabled:u})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:u,children:u?"Signing in...":"Sign In"})]}),l.jsx("div",{className:"auth-divider",children:l.jsx("span",{children:"or continue with"})}),l.jsxs("div",{className:"google-section",children:[l.jsx("div",{id:"google-signin",className:"google-placeholder",children:!localStorage.getItem("GOOGLE_CLIENT_ID")&&l.jsx("span",{className:"muted",children:"Set Google Client ID below to enable"})}),l.jsxs("div",{className:"google-config",children:[l.jsx("input",{type:"text",value:r,onChange:v=>o(v.target.value),placeholder:"Google Client ID (optional)"}),l.jsx("button",{type:"button",className:"ghost-btn",onClick:m,children:"Save"})]})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Don't have an account?"}),l.jsx(El,{to:"/signup",children:"Create one"})]}),a.message&&l.jsx("div",{className:`auth-message ${a.type}`,children:a.message})]})})}function DS(){const t=Cn(),[e,s]=x.useState(""),[n,i]=x.useState(""),[r,o]=x.useState(""),[a,c]=x.useState(""),[u,h]=x.useState({message:"",type:""}),[d,f]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("access_token")&&t("/")},[t]);const p=v=>{v!=null&&v.access_token&&(v!=null&&v.user)?(localStorage.setItem("access_token",v.access_token),localStorage.setItem("user_email",v.user.email||""),t("/")):h({message:"Unexpected response from server",type:"error"})},m=async v=>{if(v.preventDefault(),r!==a){h({message:"Passwords do not match",type:"error"});return}if(r.length<6){h({message:"Password must be at least 6 characters",type:"error"});return}f(!0),h({message:"Creating account...",type:"info"});try{const b=await il("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r,display_name:e||n.split("@")[0]})});p(b)}catch(b){h({message:b.message,type:"error"})}finally{f(!1)}};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Create Account"}),l.jsx("p",{className:"muted",children:"Join Stock Servs to start trading"})]}),l.jsxs("form",{onSubmit:m,className:"auth-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"displayName",children:"Display Name"}),l.jsx("input",{id:"displayName",type:"text",value:e,onChange:v=>s(v.target.value),placeholder:"John Doe",disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:n,onChange:v=>i(v.target.value),placeholder:"you@example.com",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:r,onChange:v=>o(v.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:"password",value:a,onChange:v=>c(v.target.value),placeholder:"",required:!0,disabled:d})]}),l.jsx("button",{type:"submit",className:"primary-btn",disabled:d,children:d?"Creating Account...":"Create Account"})]}),l.jsxs("div",{className:"auth-footer",children:[l.jsx("span",{className:"muted",children:"Already have an account?"}),l.jsx(El,{to:"/login",children:"Sign in"})]}),u.message&&l.jsx("div",{className:`auth-message ${u.type}`,children:u.message})]})})}const zl=document.createElement("script");zl.src="https://accounts.google.com/gsi/client";zl.async=!0;zl.defer=!0;document.head.appendChild(zl);function FS({children:t}){return!!localStorage.getItem("access_token")?t:l.jsx(Vc,{to:"/login",replace:!0})}function Nd({children:t}){return!!localStorage.getItem("access_token")?l.jsx(Vc,{to:"/",replace:!0}):t}Oo.createRoot(document.getElementById("root")).render(l.jsx(cl.StrictMode,{children:l.jsx(ex,{children:l.jsx(tx,{children:l.jsx(Uy,{children:l.jsxs(wy,{children:[l.jsx(Un,{path:"/",element:l.jsx(FS,{children:l.jsx(RS,{})})}),l.jsx(Un,{path:"/login",element:l.jsx(Nd,{children:l.jsx(IS,{})})}),l.jsx(Un,{path:"/signup",element:l.jsx(Nd,{children:l.jsx(DS,{})})}),l.jsx(Un,{path:"*",element:l.jsx(Vc,{to:"/",replace:!0})})]})})})})}));
