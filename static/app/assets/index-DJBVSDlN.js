(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ld={exports:{}},Jr={},Md={exports:{}},A={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=Symbol.for("react.element"),Yp=Symbol.for("react.portal"),qp=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),ev=Symbol.for("react.profiler"),tv=Symbol.for("react.provider"),sv=Symbol.for("react.context"),iv=Symbol.for("react.forward_ref"),nv=Symbol.for("react.suspense"),rv=Symbol.for("react.memo"),lv=Symbol.for("react.lazy"),uu=Symbol.iterator;function av(t){return t===null||typeof t!="object"?null:(t=uu&&t[uu]||t["@@iterator"],typeof t=="function"?t:null)}var Td={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pd=Object.assign,Rd={};function oi(t,e,s){this.props=t,this.context=e,this.refs=Rd,this.updater=s||Td}oi.prototype.isReactComponent={};oi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $d(){}$d.prototype=oi.prototype;function zo(t,e,s){this.props=t,this.context=e,this.refs=Rd,this.updater=s||Td}var Io=zo.prototype=new $d;Io.constructor=zo;Pd(Io,oi.prototype);Io.isPureReactComponent=!0;var hu=Array.isArray,zd=Object.prototype.hasOwnProperty,Do={current:null},Id={key:!0,ref:!0,__self:!0,__source:!0};function Dd(t,e,s){var i,n={},l=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(l=""+e.key),e)zd.call(e,i)&&!Id.hasOwnProperty(i)&&(n[i]=e[i]);var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:yn,type:t,key:l,ref:a,props:n,_owner:Do.current}}function ov(t,e){return{$$typeof:yn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fo(t){return typeof t=="object"&&t!==null&&t.$$typeof===yn}function cv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var du=/\/+/g;function Pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cv(""+t.key):e.toString(36)}function lr(t,e,s,i,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yn:case Yp:a=!0}}if(a)return a=t,n=n(a),t=i===""?"."+Pl(a,0):i,hu(n)?(s="",t!=null&&(s=t.replace(du,"$&/")+"/"),lr(n,e,s,"",function(u){return u})):n!=null&&(Fo(n)&&(n=ov(n,s+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(du,"$&/")+"/")+t)),e.push(n)),1;if(a=0,i=i===""?".":i+":",hu(t))for(var o=0;o<t.length;o++){l=t[o];var c=i+Pl(l,o);a+=lr(l,e,s,c,n)}else if(c=av(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=i+Pl(l,o++),a+=lr(l,e,s,c,n);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function En(t,e,s){if(t==null)return t;var i=[],n=0;return lr(t,i,"","",function(l){return e.call(s,l,n++)}),i}function uv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},ar={transition:null},hv={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ar,ReactCurrentOwner:Do};function Fd(){throw Error("act(...) is not supported in production builds of React.")}A.Children={map:En,forEach:function(t,e,s){En(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return En(t,function(){e++}),e},toArray:function(t){return En(t,function(e){return e})||[]},only:function(t){if(!Fo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};A.Component=oi;A.Fragment=qp;A.Profiler=ev;A.PureComponent=zo;A.StrictMode=Zp;A.Suspense=nv;A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hv;A.act=Fd;A.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Pd({},t.props),n=t.key,l=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,a=Do.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)zd.call(e,c)&&!Id.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:yn,type:t.type,key:n,ref:l,props:i,_owner:a}};A.createContext=function(t){return t={$$typeof:sv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tv,_context:t},t.Consumer=t};A.createElement=Dd;A.createFactory=function(t){var e=Dd.bind(null,t);return e.type=t,e};A.createRef=function(){return{current:null}};A.forwardRef=function(t){return{$$typeof:iv,render:t}};A.isValidElement=Fo;A.lazy=function(t){return{$$typeof:lv,_payload:{_status:-1,_result:t},_init:uv}};A.memo=function(t,e){return{$$typeof:rv,type:t,compare:e===void 0?null:e}};A.startTransition=function(t){var e=ar.transition;ar.transition={};try{t()}finally{ar.transition=e}};A.unstable_act=Fd;A.useCallback=function(t,e){return Pe.current.useCallback(t,e)};A.useContext=function(t){return Pe.current.useContext(t)};A.useDebugValue=function(){};A.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};A.useEffect=function(t,e){return Pe.current.useEffect(t,e)};A.useId=function(){return Pe.current.useId()};A.useImperativeHandle=function(t,e,s){return Pe.current.useImperativeHandle(t,e,s)};A.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};A.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};A.useMemo=function(t,e){return Pe.current.useMemo(t,e)};A.useReducer=function(t,e,s){return Pe.current.useReducer(t,e,s)};A.useRef=function(t){return Pe.current.useRef(t)};A.useState=function(t){return Pe.current.useState(t)};A.useSyncExternalStore=function(t,e,s){return Pe.current.useSyncExternalStore(t,e,s)};A.useTransition=function(){return Pe.current.useTransition()};A.version="18.3.1";Md.exports=A;var w=Md.exports;const Ma=Jp(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=w,fv=Symbol.for("react.element"),mv=Symbol.for("react.fragment"),pv=Object.prototype.hasOwnProperty,vv=dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gv={key:!0,ref:!0,__self:!0,__source:!0};function Od(t,e,s){var i,n={},l=null,a=null;s!==void 0&&(l=""+s),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)pv.call(e,i)&&!gv.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:fv,type:t,key:l,ref:a,props:n,_owner:vv.current}}Jr.Fragment=mv;Jr.jsx=Od;Jr.jsxs=Od;Ld.exports=Jr;var r=Ld.exports,Ta={},Vd={exports:{}},Ue={},Bd={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,D){var F=E.length;E.push(D);e:for(;0<F;){var H=F-1>>>1,J=E[H];if(0<n(J,D))E[H]=D,E[F]=J,F=H;else break e}}function s(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var D=E[0],F=E.pop();if(F!==D){E[0]=F;e:for(var H=0,J=E.length,ut=J>>>1;H<ut;){var Ee=2*(H+1)-1,_s=E[Ee],ye=Ee+1,Es=E[ye];if(0>n(_s,F))ye<J&&0>n(Es,_s)?(E[H]=Es,E[ye]=F,H=ye):(E[H]=_s,E[Ee]=F,H=Ee);else if(ye<J&&0>n(Es,F))E[H]=Es,E[ye]=F,H=ye;else break e}}return D}function n(E,D){var F=E.sortIndex-D.sortIndex;return F!==0?F:E.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,m=3,y=!1,x=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(E){for(var D=s(u);D!==null;){if(D.callback===null)i(u);else if(D.startTime<=E)i(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=s(u)}}function N(E){if(g=!1,p(E),!x)if(s(c)!==null)x=!0,V(b);else{var D=s(u);D!==null&&L(N,D.startTime-E)}}function b(E,D){x=!1,g&&(g=!1,v(_),_=-1),y=!0;var F=m;try{for(p(D),d=s(c);d!==null&&(!(d.expirationTime>D)||E&&!K());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var J=H(d.expirationTime<=D);D=t.unstable_now(),typeof J=="function"?d.callback=J:d===s(c)&&i(c),p(D)}else i(c);d=s(c)}if(d!==null)var ut=!0;else{var Ee=s(u);Ee!==null&&L(N,Ee.startTime-D),ut=!1}return ut}finally{d=null,m=F,y=!1}}var C=!1,S=null,_=-1,$=5,R=-1;function K(){return!(t.unstable_now()-R<$)}function X(){if(S!==null){var E=t.unstable_now();R=E;var D=!0;try{D=S(!0,E)}finally{D?de():(C=!1,S=null)}}else C=!1}var de;if(typeof f=="function")de=function(){f(X)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,se=z.port2;z.port1.onmessage=X,de=function(){se.postMessage(null)}}else de=function(){j(X,0)};function V(E){S=E,C||(C=!0,de())}function L(E,D){_=j(function(){E(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,V(b))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(E){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var F=m;m=D;try{return E()}finally{m=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,D){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=m;m=E;try{return D()}finally{m=F}},t.unstable_scheduleCallback=function(E,D,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,E){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,E={id:h++,callback:D,priorityLevel:E,startTime:F,expirationTime:J,sortIndex:-1},F>H?(E.sortIndex=F,e(u,E),s(c)===null&&E===s(u)&&(g?(v(_),_=-1):g=!0,L(N,F-H))):(E.sortIndex=J,e(c,E),x||y||(x=!0,V(b))),E},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(E){var D=m;return function(){var F=m;m=D;try{return E.apply(this,arguments)}finally{m=F}}}})(Ad);Bd.exports=Ad;var xv=Bd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=w,We=xv;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wd=new Set,Xi={};function ks(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Xi[t]=e,t=0;t<e.length;t++)Wd.add(e[t])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=Object.prototype.hasOwnProperty,wv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fu={},mu={};function Nv(t){return Pa.call(mu,t)?!0:Pa.call(fu,t)?!1:wv.test(t)?mu[t]=!0:(fu[t]=!0,!1)}function jv(t,e,s,i){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bv(t,e,s,i){if(e===null||typeof e>"u"||jv(t,e,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,s,i,n,l,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=a}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){be[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];be[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){be[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){be[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){be[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){be[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){be[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){be[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){be[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oo=/[\-:]([a-z])/g;function Vo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oo,Vo);be[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oo,Vo);be[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oo,Vo);be[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){be[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});be.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){be[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bo(t,e,s,i){var n=be.hasOwnProperty(e)?be[e]:null;(n!==null?n.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bv(e,s,n,i)&&(s=null),i||n===null?Nv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(e=n.attributeName,i=n.attributeNamespace,s===null?t.removeAttribute(e):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,i?t.setAttributeNS(i,e,s):t.setAttribute(e,s))))}var Rt=yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ln=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Ao=Symbol.for("react.strict_mode"),Ra=Symbol.for("react.profiler"),Ud=Symbol.for("react.provider"),Hd=Symbol.for("react.context"),Wo=Symbol.for("react.forward_ref"),$a=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),Uo=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Kd=Symbol.for("react.offscreen"),pu=Symbol.iterator;function yi(t){return t===null||typeof t!="object"?null:(t=pu&&t[pu]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,Rl;function Li(t){if(Rl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var $l=!1;function zl(t,e){if(!t||$l)return"";$l=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),l=i.stack.split(`
`),a=n.length-1,o=l.length-1;1<=a&&0<=o&&n[a]!==l[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==l[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==l[o]){var c=`
`+n[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{$l=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Li(t):""}function Sv(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function Ia(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ps:return"Portal";case Ra:return"Profiler";case Ao:return"StrictMode";case $a:return"Suspense";case za:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hd:return(t.displayName||"Context")+".Consumer";case Ud:return(t._context.displayName||"Context")+".Provider";case Wo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uo:return e=t.displayName||null,e!==null?e:Ia(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return Ia(t(e))}catch{}}return null}function kv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ia(e);case 8:return e===Ao?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cv(t){var e=Gd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,l.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mn(t){t._valueTracker||(t._valueTracker=Cv(t))}function Xd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),i="";return t&&(i=Gd(t)?t.checked?"true":"false":t.value),t=i,t!==s?(e.setValue(t),!0):!1}function Nr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Da(t,e){var s=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function vu(t,e){var s=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;s=Zt(e.value!=null?e.value:s),t._wrapperState={initialChecked:i,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qd(t,e){e=e.checked,e!=null&&Bo(t,"checked",e,!1)}function Fa(t,e){Qd(t,e);var s=Zt(e.value),i=e.type;if(s!=null)i==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oa(t,e.type,s):e.hasOwnProperty("defaultValue")&&Oa(t,e.type,Zt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Oa(t,e,s){(e!=="number"||Nr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Mi=Array.isArray;function Ks(t,e,s,i){if(t=t.options,e){e={};for(var n=0;n<s.length;n++)e["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=e.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&i&&(t[s].defaultSelected=!0)}else{for(s=""+Zt(s),e=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,i&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Va(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(T(92));if(Mi(s)){if(1<s.length)throw Error(T(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Zt(s)}}function Jd(t,e){var s=Zt(e.value),i=Zt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),i!=null&&(t.defaultValue=""+i)}function yu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ba(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tn,qd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,i,n){MSApp.execUnsafeLocalFunction(function(){return t(e,s,i,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tn=Tn||document.createElement("div"),Tn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_v=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(t){_v.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$i[e]=$i[t]})});function Zd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||$i.hasOwnProperty(t)&&$i[t]?(""+e).trim():e+"px"}function ef(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var i=s.indexOf("--")===0,n=Zd(s,e[s],i);s==="float"&&(s="cssFloat"),i?t.setProperty(s,n):t[s]=n}}var Ev=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(t,e){if(e){if(Ev[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Wa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function Ho(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ha=null,Gs=null,Xs=null;function wu(t){if(t=jn(t)){if(typeof Ha!="function")throw Error(T(280));var e=t.stateNode;e&&(e=tl(e),Ha(t.stateNode,t.type,e))}}function tf(t){Gs?Xs?Xs.push(t):Xs=[t]:Gs=t}function sf(){if(Gs){var t=Gs,e=Xs;if(Xs=Gs=null,wu(t),e)for(t=0;t<e.length;t++)wu(e[t])}}function nf(t,e){return t(e)}function rf(){}var Il=!1;function lf(t,e,s){if(Il)return t(e,s);Il=!0;try{return nf(t,e,s)}finally{Il=!1,(Gs!==null||Xs!==null)&&(rf(),sf())}}function Ji(t,e){var s=t.stateNode;if(s===null)return null;var i=tl(s);if(i===null)return null;s=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(T(231,e,typeof s));return s}var Ka=!1;if(Et)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{Ka=!1}function Lv(t,e,s,i,n,l,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(h){this.onError(h)}}var zi=!1,jr=null,br=!1,Ga=null,Mv={onError:function(t){zi=!0,jr=t}};function Tv(t,e,s,i,n,l,a,o,c){zi=!1,jr=null,Lv.apply(Mv,arguments)}function Pv(t,e,s,i,n,l,a,o,c){if(Tv.apply(this,arguments),zi){if(zi){var u=jr;zi=!1,jr=null}else throw Error(T(198));br||(br=!0,Ga=u)}}function Cs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function af(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nu(t){if(Cs(t)!==t)throw Error(T(188))}function Rv(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(T(188));return e!==t?null:t}for(var s=t,i=e;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(i=n.return,i!==null){s=i;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Nu(n),t;if(l===i)return Nu(n),e;l=l.sibling}throw Error(T(188))}if(s.return!==i.return)s=n,i=l;else{for(var a=!1,o=n.child;o;){if(o===s){a=!0,s=n,i=l;break}if(o===i){a=!0,i=n,s=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===s){a=!0,s=l,i=n;break}if(o===i){a=!0,i=l,s=n;break}o=o.sibling}if(!a)throw Error(T(189))}}if(s.alternate!==i)throw Error(T(190))}if(s.tag!==3)throw Error(T(188));return s.stateNode.current===s?t:e}function of(t){return t=Rv(t),t!==null?cf(t):null}function cf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cf(t);if(e!==null)return e;t=t.sibling}return null}var uf=We.unstable_scheduleCallback,ju=We.unstable_cancelCallback,$v=We.unstable_shouldYield,zv=We.unstable_requestPaint,ue=We.unstable_now,Iv=We.unstable_getCurrentPriorityLevel,Ko=We.unstable_ImmediatePriority,hf=We.unstable_UserBlockingPriority,Sr=We.unstable_NormalPriority,Dv=We.unstable_LowPriority,df=We.unstable_IdlePriority,Yr=null,gt=null;function Fv(t){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Yr,t,void 0,(t.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:Bv,Ov=Math.log,Vv=Math.LN2;function Bv(t){return t>>>=0,t===0?32:31-(Ov(t)/Vv|0)|0}var Pn=64,Rn=4194304;function Ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kr(t,e){var s=t.pendingLanes;if(s===0)return 0;var i=0,n=t.suspendedLanes,l=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~n;o!==0?i=Ti(o):(l&=a,l!==0&&(i=Ti(l)))}else a=s&~n,a!==0?i=Ti(a):l!==0&&(i=Ti(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&n)&&(n=i&-i,l=e&-e,n>=l||n===16&&(l&4194240)!==0))return e;if(i&4&&(i|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)s=31-rt(e),n=1<<s,i|=t[s],e&=~n;return i}function Av(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wv(t,e){for(var s=t.suspendedLanes,i=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var a=31-rt(l),o=1<<a,c=n[a];c===-1?(!(o&s)||o&i)&&(n[a]=Av(o,e)):c<=e&&(t.expiredLanes|=o),l&=~o}}function Xa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ff(){var t=Pn;return Pn<<=1,!(Pn&4194240)&&(Pn=64),t}function Dl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function wn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rt(e),t[e]=s}function Uv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-rt(s),l=1<<n;e[n]=0,i[n]=-1,t[n]=-1,s&=~l}}function Go(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var i=31-rt(s),n=1<<i;n&e|t[i]&e&&(t[i]|=e),s&=~n}}var Q=0;function mf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pf,Xo,vf,gf,xf,Qa=!1,$n=[],Ut=null,Ht=null,Kt=null,Yi=new Map,qi=new Map,Vt=[],Hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bu(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(e.pointerId)}}function Ni(t,e,s,i,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:s,eventSystemFlags:i,nativeEvent:l,targetContainers:[n]},e!==null&&(e=jn(e),e!==null&&Xo(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function Kv(t,e,s,i,n){switch(e){case"focusin":return Ut=Ni(Ut,t,e,s,i,n),!0;case"dragenter":return Ht=Ni(Ht,t,e,s,i,n),!0;case"mouseover":return Kt=Ni(Kt,t,e,s,i,n),!0;case"pointerover":var l=n.pointerId;return Yi.set(l,Ni(Yi.get(l)||null,t,e,s,i,n)),!0;case"gotpointercapture":return l=n.pointerId,qi.set(l,Ni(qi.get(l)||null,t,e,s,i,n)),!0}return!1}function yf(t){var e=cs(t.target);if(e!==null){var s=Cs(e);if(s!==null){if(e=s.tag,e===13){if(e=af(s),e!==null){t.blockedOn=e,xf(t.priority,function(){vf(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function or(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ja(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var i=new s.constructor(s.type,s);Ua=i,s.target.dispatchEvent(i),Ua=null}else return e=jn(s),e!==null&&Xo(e),t.blockedOn=s,!1;e.shift()}return!0}function Su(t,e,s){or(t)&&s.delete(e)}function Gv(){Qa=!1,Ut!==null&&or(Ut)&&(Ut=null),Ht!==null&&or(Ht)&&(Ht=null),Kt!==null&&or(Kt)&&(Kt=null),Yi.forEach(Su),qi.forEach(Su)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,Qa||(Qa=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,Gv)))}function Zi(t){function e(n){return ji(n,t)}if(0<$n.length){ji($n[0],t);for(var s=1;s<$n.length;s++){var i=$n[s];i.blockedOn===t&&(i.blockedOn=null)}}for(Ut!==null&&ji(Ut,t),Ht!==null&&ji(Ht,t),Kt!==null&&ji(Kt,t),Yi.forEach(e),qi.forEach(e),s=0;s<Vt.length;s++)i=Vt[s],i.blockedOn===t&&(i.blockedOn=null);for(;0<Vt.length&&(s=Vt[0],s.blockedOn===null);)yf(s),s.blockedOn===null&&Vt.shift()}var Qs=Rt.ReactCurrentBatchConfig,Cr=!0;function Xv(t,e,s,i){var n=Q,l=Qs.transition;Qs.transition=null;try{Q=1,Qo(t,e,s,i)}finally{Q=n,Qs.transition=l}}function Qv(t,e,s,i){var n=Q,l=Qs.transition;Qs.transition=null;try{Q=4,Qo(t,e,s,i)}finally{Q=n,Qs.transition=l}}function Qo(t,e,s,i){if(Cr){var n=Ja(t,e,s,i);if(n===null)Gl(t,e,i,_r,s),bu(t,i);else if(Kv(n,t,e,s,i))i.stopPropagation();else if(bu(t,i),e&4&&-1<Hv.indexOf(t)){for(;n!==null;){var l=jn(n);if(l!==null&&pf(l),l=Ja(t,e,s,i),l===null&&Gl(t,e,i,_r,s),l===n)break;n=l}n!==null&&i.stopPropagation()}else Gl(t,e,i,null,s)}}var _r=null;function Ja(t,e,s,i){if(_r=null,t=Ho(i),t=cs(t),t!==null)if(e=Cs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=af(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _r=t,null}function wf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iv()){case Ko:return 1;case hf:return 4;case Sr:case Dv:return 16;case df:return 536870912;default:return 16}default:return 16}}var At=null,Jo=null,cr=null;function Nf(){if(cr)return cr;var t,e=Jo,s=e.length,i,n="value"in At?At.value:At.textContent,l=n.length;for(t=0;t<s&&e[t]===n[t];t++);var a=s-t;for(i=1;i<=a&&e[s-i]===n[l-i];i++);return cr=n.slice(t,1<i?1-i:void 0)}function ur(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zn(){return!0}function ku(){return!1}function He(t){function e(s,i,n,l,a){this._reactName=s,this._targetInst=n,this.type=i,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?zn:ku,this.isPropagationStopped=ku,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=He(ci),Nn=ae({},ci,{view:0,detail:0}),Jv=He(Nn),Fl,Ol,bi,qr=ae({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(Fl=t.screenX-bi.screenX,Ol=t.screenY-bi.screenY):Ol=Fl=0,bi=t),Fl)},movementY:function(t){return"movementY"in t?t.movementY:Ol}}),Cu=He(qr),Yv=ae({},qr,{dataTransfer:0}),qv=He(Yv),Zv=ae({},Nn,{relatedTarget:0}),Vl=He(Zv),eg=ae({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),tg=He(eg),sg=ae({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ig=He(sg),ng=ae({},ci,{data:0}),_u=He(ng),rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ag[t])?!!e[t]:!1}function qo(){return og}var cg=ae({},Nn,{key:function(t){if(t.key){var e=rg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(t){return t.type==="keypress"?ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ug=He(cg),hg=ae({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=He(hg),dg=ae({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),fg=He(dg),mg=ae({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=He(mg),vg=ae({},qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gg=He(vg),xg=[9,13,27,32],Zo=Et&&"CompositionEvent"in window,Ii=null;Et&&"documentMode"in document&&(Ii=document.documentMode);var yg=Et&&"TextEvent"in window&&!Ii,jf=Et&&(!Zo||Ii&&8<Ii&&11>=Ii),Lu=" ",Mu=!1;function bf(t,e){switch(t){case"keyup":return xg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function wg(t,e){switch(t){case"compositionend":return Sf(e);case"keypress":return e.which!==32?null:(Mu=!0,Lu);case"textInput":return t=e.data,t===Lu&&Mu?null:t;default:return null}}function Ng(t,e){if($s)return t==="compositionend"||!Zo&&bf(t,e)?(t=Nf(),cr=Jo=At=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jf&&e.locale!=="ko"?null:e.data;default:return null}}var jg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jg[t.type]:e==="textarea"}function kf(t,e,s,i){tf(i),e=Er(e,"onChange"),0<e.length&&(s=new Yo("onChange","change",null,s,i),t.push({event:s,listeners:e}))}var Di=null,en=null;function bg(t){If(t,0)}function Zr(t){var e=Ds(t);if(Xd(e))return t}function Sg(t,e){if(t==="change")return e}var Cf=!1;if(Et){var Bl;if(Et){var Al="oninput"in document;if(!Al){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Al=typeof Pu.oninput=="function"}Bl=Al}else Bl=!1;Cf=Bl&&(!document.documentMode||9<document.documentMode)}function Ru(){Di&&(Di.detachEvent("onpropertychange",_f),en=Di=null)}function _f(t){if(t.propertyName==="value"&&Zr(en)){var e=[];kf(e,en,t,Ho(t)),lf(bg,e)}}function kg(t,e,s){t==="focusin"?(Ru(),Di=e,en=s,Di.attachEvent("onpropertychange",_f)):t==="focusout"&&Ru()}function Cg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zr(en)}function _g(t,e){if(t==="click")return Zr(e)}function Eg(t,e){if(t==="input"||t==="change")return Zr(e)}function Lg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:Lg;function tn(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),i=Object.keys(e);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var n=s[i];if(!Pa.call(e,n)||!at(t[n],e[n]))return!1}return!0}function $u(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zu(t,e){var s=$u(t);t=0;for(var i;s;){if(s.nodeType===3){if(i=t+s.textContent.length,t<=e&&i>=e)return{node:s,offset:e-t};t=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$u(s)}}function Ef(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ef(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lf(){for(var t=window,e=Nr();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Nr(t.document)}return e}function ec(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mg(t){var e=Lf(),s=t.focusedElem,i=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Ef(s.ownerDocument.documentElement,s)){if(i!==null&&ec(s)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,l=Math.min(i.start,n);i=i.end===void 0?l:Math.min(i.end,n),!t.extend&&l>i&&(n=i,i=l,l=n),n=zu(s,l);var a=zu(s,i);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tg=Et&&"documentMode"in document&&11>=document.documentMode,zs=null,Ya=null,Fi=null,qa=!1;function Iu(t,e,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qa||zs==null||zs!==Nr(i)||(i=zs,"selectionStart"in i&&ec(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fi&&tn(Fi,i)||(Fi=i,i=Er(Ya,"onSelect"),0<i.length&&(e=new Yo("onSelect","select",null,e,s),t.push({event:e,listeners:i}),e.target=zs)))}function In(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Is={animationend:In("Animation","AnimationEnd"),animationiteration:In("Animation","AnimationIteration"),animationstart:In("Animation","AnimationStart"),transitionend:In("Transition","TransitionEnd")},Wl={},Mf={};Et&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function el(t){if(Wl[t])return Wl[t];if(!Is[t])return t;var e=Is[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Mf)return Wl[t]=e[s];return t}var Tf=el("animationend"),Pf=el("animationiteration"),Rf=el("animationstart"),$f=el("transitionend"),zf=new Map,Du="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){zf.set(t,e),ks(e,[t])}for(var Ul=0;Ul<Du.length;Ul++){var Hl=Du[Ul],Pg=Hl.toLowerCase(),Rg=Hl[0].toUpperCase()+Hl.slice(1);ss(Pg,"on"+Rg)}ss(Tf,"onAnimationEnd");ss(Pf,"onAnimationIteration");ss(Rf,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss($f,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$g=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Fu(t,e,s){var i=t.type||"unknown-event";t.currentTarget=s,Pv(i,e,void 0,t),t.currentTarget=null}function If(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var i=t[s],n=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==l&&n.isPropagationStopped())break e;Fu(n,o,u),l=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==l&&n.isPropagationStopped())break e;Fu(n,o,u),l=c}}}if(br)throw t=Ga,br=!1,Ga=null,t}function Z(t,e){var s=e[io];s===void 0&&(s=e[io]=new Set);var i=t+"__bubble";s.has(i)||(Df(e,t,2,!1),s.add(i))}function Kl(t,e,s){var i=0;e&&(i|=4),Df(s,t,i,e)}var Dn="_reactListening"+Math.random().toString(36).slice(2);function sn(t){if(!t[Dn]){t[Dn]=!0,Wd.forEach(function(s){s!=="selectionchange"&&($g.has(s)||Kl(s,!1,t),Kl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dn]||(e[Dn]=!0,Kl("selectionchange",!1,e))}}function Df(t,e,s,i){switch(wf(e)){case 1:var n=Xv;break;case 4:n=Qv;break;default:n=Qo}s=n.bind(null,e,s,t),n=void 0,!Ka||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),i?n!==void 0?t.addEventListener(e,s,{capture:!0,passive:n}):t.addEventListener(e,s,!0):n!==void 0?t.addEventListener(e,s,{passive:n}):t.addEventListener(e,s,!1)}function Gl(t,e,s,i,n){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=cs(o),a===null)return;if(c=a.tag,c===5||c===6){i=l=a;continue e}o=o.parentNode}}i=i.return}lf(function(){var u=l,h=Ho(s),d=[];e:{var m=zf.get(t);if(m!==void 0){var y=Yo,x=t;switch(t){case"keypress":if(ur(s)===0)break e;case"keydown":case"keyup":y=ug;break;case"focusin":x="focus",y=Vl;break;case"focusout":x="blur",y=Vl;break;case"beforeblur":case"afterblur":y=Vl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=qv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=fg;break;case Tf:case Pf:case Rf:y=tg;break;case $f:y=pg;break;case"scroll":y=Jv;break;case"wheel":y=gg;break;case"copy":case"cut":case"paste":y=ig;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Eu}var g=(e&4)!==0,j=!g&&t==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var f=u,p;f!==null;){p=f;var N=p.stateNode;if(p.tag===5&&N!==null&&(p=N,v!==null&&(N=Ji(f,v),N!=null&&g.push(nn(f,N,p)))),j)break;f=f.return}0<g.length&&(m=new y(m,x,null,s,h),d.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&s!==Ua&&(x=s.relatedTarget||s.fromElement)&&(cs(x)||x[Lt]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=s.relatedTarget||s.toElement,y=u,x=x?cs(x):null,x!==null&&(j=Cs(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(g=Cu,N="onMouseLeave",v="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(g=Eu,N="onPointerLeave",v="onPointerEnter",f="pointer"),j=y==null?m:Ds(y),p=x==null?m:Ds(x),m=new g(N,f+"leave",y,s,h),m.target=j,m.relatedTarget=p,N=null,cs(h)===u&&(g=new g(v,f+"enter",x,s,h),g.target=p,g.relatedTarget=j,N=g),j=N,y&&x)t:{for(g=y,v=x,f=0,p=g;p;p=Ms(p))f++;for(p=0,N=v;N;N=Ms(N))p++;for(;0<f-p;)g=Ms(g),f--;for(;0<p-f;)v=Ms(v),p--;for(;f--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ms(g),v=Ms(v)}g=null}else g=null;y!==null&&Ou(d,m,y,g,!1),x!==null&&j!==null&&Ou(d,j,x,g,!0)}}e:{if(m=u?Ds(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var b=Sg;else if(Tu(m))if(Cf)b=Eg;else{b=Cg;var C=kg}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=_g);if(b&&(b=b(t,u))){kf(d,b,s,h);break e}C&&C(t,m,u),t==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Oa(m,"number",m.value)}switch(C=u?Ds(u):window,t){case"focusin":(Tu(C)||C.contentEditable==="true")&&(zs=C,Ya=u,Fi=null);break;case"focusout":Fi=Ya=zs=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,Iu(d,s,h);break;case"selectionchange":if(Tg)break;case"keydown":case"keyup":Iu(d,s,h)}var S;if(Zo)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else $s?bf(t,s)&&(_="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(jf&&s.locale!=="ko"&&($s||_!=="onCompositionStart"?_==="onCompositionEnd"&&$s&&(S=Nf()):(At=h,Jo="value"in At?At.value:At.textContent,$s=!0)),C=Er(u,_),0<C.length&&(_=new _u(_,t,null,s,h),d.push({event:_,listeners:C}),S?_.data=S:(S=Sf(s),S!==null&&(_.data=S)))),(S=yg?wg(t,s):Ng(t,s))&&(u=Er(u,"onBeforeInput"),0<u.length&&(h=new _u("onBeforeInput","beforeinput",null,s,h),d.push({event:h,listeners:u}),h.data=S))}If(d,e)})}function nn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Er(t,e){for(var s=e+"Capture",i=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Ji(t,s),l!=null&&i.unshift(nn(t,l,n)),l=Ji(t,e),l!=null&&i.push(nn(t,l,n))),t=t.return}return i}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ou(t,e,s,i,n){for(var l=e._reactName,a=[];s!==null&&s!==i;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,n?(c=Ji(s,l),c!=null&&a.unshift(nn(s,c,o))):n||(c=Ji(s,l),c!=null&&a.push(nn(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var zg=/\r\n?/g,Ig=/\u0000|\uFFFD/g;function Vu(t){return(typeof t=="string"?t:""+t).replace(zg,`
`).replace(Ig,"")}function Fn(t,e,s){if(e=Vu(e),Vu(t)!==e&&s)throw Error(T(425))}function Lr(){}var Za=null,eo=null;function to(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var so=typeof setTimeout=="function"?setTimeout:void 0,Dg=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(t){return Bu.resolve(null).then(t).catch(Og)}:so;function Og(t){setTimeout(function(){throw t})}function Xl(t,e){var s=e,i=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(i===0){t.removeChild(n),Zi(e);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=n}while(s);Zi(e)}function Gt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Au(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),pt="__reactFiber$"+ui,rn="__reactProps$"+ui,Lt="__reactContainer$"+ui,io="__reactEvents$"+ui,Vg="__reactListeners$"+ui,Bg="__reactHandles$"+ui;function cs(t){var e=t[pt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Lt]||s[pt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Au(t);t!==null;){if(s=t[pt])return s;t=Au(t)}return e}t=s,s=t.parentNode}return null}function jn(t){return t=t[pt]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function tl(t){return t[rn]||null}var no=[],Fs=-1;function is(t){return{current:t}}function te(t){0>Fs||(t.current=no[Fs],no[Fs]=null,Fs--)}function Y(t,e){Fs++,no[Fs]=t.current,t.current=e}var es={},_e=is(es),Ie=is(!1),ps=es;function ei(t,e){var s=t.type.contextTypes;if(!s)return es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function De(t){return t=t.childContextTypes,t!=null}function Mr(){te(Ie),te(_e)}function Wu(t,e,s){if(_e.current!==es)throw Error(T(168));Y(_e,e),Y(Ie,s)}function Ff(t,e,s){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(T(108,kv(t)||"Unknown",n));return ae({},s,i)}function Tr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,ps=_e.current,Y(_e,t),Y(Ie,Ie.current),!0}function Uu(t,e,s){var i=t.stateNode;if(!i)throw Error(T(169));s?(t=Ff(t,e,ps),i.__reactInternalMemoizedMergedChildContext=t,te(Ie),te(_e),Y(_e,t)):te(Ie),Y(Ie,s)}var Nt=null,sl=!1,Ql=!1;function Of(t){Nt===null?Nt=[t]:Nt.push(t)}function Ag(t){sl=!0,Of(t)}function ns(){if(!Ql&&Nt!==null){Ql=!0;var t=0,e=Q;try{var s=Nt;for(Q=1;t<s.length;t++){var i=s[t];do i=i(!0);while(i!==null)}Nt=null,sl=!1}catch(n){throw Nt!==null&&(Nt=Nt.slice(t+1)),uf(Ko,ns),n}finally{Q=e,Ql=!1}}return null}var Os=[],Vs=0,Pr=null,Rr=0,Xe=[],Qe=0,vs=null,jt=1,bt="";function as(t,e){Os[Vs++]=Rr,Os[Vs++]=Pr,Pr=t,Rr=e}function Vf(t,e,s){Xe[Qe++]=jt,Xe[Qe++]=bt,Xe[Qe++]=vs,vs=t;var i=jt;t=bt;var n=32-rt(i)-1;i&=~(1<<n),s+=1;var l=32-rt(e)+n;if(30<l){var a=n-n%5;l=(i&(1<<a)-1).toString(32),i>>=a,n-=a,jt=1<<32-rt(e)+n|s<<n|i,bt=l+t}else jt=1<<l|s<<n|i,bt=t}function tc(t){t.return!==null&&(as(t,1),Vf(t,1,0))}function sc(t){for(;t===Pr;)Pr=Os[--Vs],Os[Vs]=null,Rr=Os[--Vs],Os[Vs]=null;for(;t===vs;)vs=Xe[--Qe],Xe[Qe]=null,bt=Xe[--Qe],Xe[Qe]=null,jt=Xe[--Qe],Xe[Qe]=null}var Ae=null,Be=null,ie=!1,nt=null;function Bf(t,e){var s=Je(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Hu(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ae=t,Be=Gt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ae=t,Be=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=vs!==null?{id:jt,overflow:bt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Je(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ae=t,Be=null,!0):!1;default:return!1}}function ro(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lo(t){if(ie){var e=Be;if(e){var s=e;if(!Hu(t,e)){if(ro(t))throw Error(T(418));e=Gt(s.nextSibling);var i=Ae;e&&Hu(t,e)?Bf(i,s):(t.flags=t.flags&-4097|2,ie=!1,Ae=t)}}else{if(ro(t))throw Error(T(418));t.flags=t.flags&-4097|2,ie=!1,Ae=t}}}function Ku(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ae=t}function On(t){if(t!==Ae)return!1;if(!ie)return Ku(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!to(t.type,t.memoizedProps)),e&&(e=Be)){if(ro(t))throw Af(),Error(T(418));for(;e;)Bf(t,e),e=Gt(e.nextSibling)}if(Ku(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Be=Gt(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Be=null}}else Be=Ae?Gt(t.stateNode.nextSibling):null;return!0}function Af(){for(var t=Be;t;)t=Gt(t.nextSibling)}function ti(){Be=Ae=null,ie=!1}function ic(t){nt===null?nt=[t]:nt.push(t)}var Wg=Rt.ReactCurrentBatchConfig;function Si(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(T(309));var i=s.stateNode}if(!i)throw Error(T(147,t));var n=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(a){var o=n.refs;a===null?delete o[l]:o[l]=a},e._stringRef=l,e)}if(typeof t!="string")throw Error(T(284));if(!s._owner)throw Error(T(290,t))}return t}function Vn(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gu(t){var e=t._init;return e(t._payload)}function Wf(t){function e(v,f){if(t){var p=v.deletions;p===null?(v.deletions=[f],v.flags|=16):p.push(f)}}function s(v,f){if(!t)return null;for(;f!==null;)e(v,f),f=f.sibling;return null}function i(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function n(v,f){return v=Yt(v,f),v.index=0,v.sibling=null,v}function l(v,f,p){return v.index=p,t?(p=v.alternate,p!==null?(p=p.index,p<f?(v.flags|=2,f):p):(v.flags|=2,f)):(v.flags|=1048576,f)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,f,p,N){return f===null||f.tag!==6?(f=sa(p,v.mode,N),f.return=v,f):(f=n(f,p),f.return=v,f)}function c(v,f,p,N){var b=p.type;return b===Rs?h(v,f,p.props.children,N,p.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ft&&Gu(b)===f.type)?(N=n(f,p.props),N.ref=Si(v,f,p),N.return=v,N):(N=gr(p.type,p.key,p.props,null,v.mode,N),N.ref=Si(v,f,p),N.return=v,N)}function u(v,f,p,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=ia(p,v.mode,N),f.return=v,f):(f=n(f,p.children||[]),f.return=v,f)}function h(v,f,p,N,b){return f===null||f.tag!==7?(f=fs(p,v.mode,N,b),f.return=v,f):(f=n(f,p),f.return=v,f)}function d(v,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=sa(""+f,v.mode,p),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ln:return p=gr(f.type,f.key,f.props,null,v.mode,p),p.ref=Si(v,null,f),p.return=v,p;case Ps:return f=ia(f,v.mode,p),f.return=v,f;case Ft:var N=f._init;return d(v,N(f._payload),p)}if(Mi(f)||yi(f))return f=fs(f,v.mode,p,null),f.return=v,f;Vn(v,f)}return null}function m(v,f,p,N){var b=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:o(v,f,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ln:return p.key===b?c(v,f,p,N):null;case Ps:return p.key===b?u(v,f,p,N):null;case Ft:return b=p._init,m(v,f,b(p._payload),N)}if(Mi(p)||yi(p))return b!==null?null:h(v,f,p,N,null);Vn(v,p)}return null}function y(v,f,p,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(p)||null,o(f,v,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ln:return v=v.get(N.key===null?p:N.key)||null,c(f,v,N,b);case Ps:return v=v.get(N.key===null?p:N.key)||null,u(f,v,N,b);case Ft:var C=N._init;return y(v,f,p,C(N._payload),b)}if(Mi(N)||yi(N))return v=v.get(p)||null,h(f,v,N,b,null);Vn(f,N)}return null}function x(v,f,p,N){for(var b=null,C=null,S=f,_=f=0,$=null;S!==null&&_<p.length;_++){S.index>_?($=S,S=null):$=S.sibling;var R=m(v,S,p[_],N);if(R===null){S===null&&(S=$);break}t&&S&&R.alternate===null&&e(v,S),f=l(R,f,_),C===null?b=R:C.sibling=R,C=R,S=$}if(_===p.length)return s(v,S),ie&&as(v,_),b;if(S===null){for(;_<p.length;_++)S=d(v,p[_],N),S!==null&&(f=l(S,f,_),C===null?b=S:C.sibling=S,C=S);return ie&&as(v,_),b}for(S=i(v,S);_<p.length;_++)$=y(S,v,_,p[_],N),$!==null&&(t&&$.alternate!==null&&S.delete($.key===null?_:$.key),f=l($,f,_),C===null?b=$:C.sibling=$,C=$);return t&&S.forEach(function(K){return e(v,K)}),ie&&as(v,_),b}function g(v,f,p,N){var b=yi(p);if(typeof b!="function")throw Error(T(150));if(p=b.call(p),p==null)throw Error(T(151));for(var C=b=null,S=f,_=f=0,$=null,R=p.next();S!==null&&!R.done;_++,R=p.next()){S.index>_?($=S,S=null):$=S.sibling;var K=m(v,S,R.value,N);if(K===null){S===null&&(S=$);break}t&&S&&K.alternate===null&&e(v,S),f=l(K,f,_),C===null?b=K:C.sibling=K,C=K,S=$}if(R.done)return s(v,S),ie&&as(v,_),b;if(S===null){for(;!R.done;_++,R=p.next())R=d(v,R.value,N),R!==null&&(f=l(R,f,_),C===null?b=R:C.sibling=R,C=R);return ie&&as(v,_),b}for(S=i(v,S);!R.done;_++,R=p.next())R=y(S,v,_,R.value,N),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?_:R.key),f=l(R,f,_),C===null?b=R:C.sibling=R,C=R);return t&&S.forEach(function(X){return e(v,X)}),ie&&as(v,_),b}function j(v,f,p,N){if(typeof p=="object"&&p!==null&&p.type===Rs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ln:e:{for(var b=p.key,C=f;C!==null;){if(C.key===b){if(b=p.type,b===Rs){if(C.tag===7){s(v,C.sibling),f=n(C,p.props.children),f.return=v,v=f;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ft&&Gu(b)===C.type){s(v,C.sibling),f=n(C,p.props),f.ref=Si(v,C,p),f.return=v,v=f;break e}s(v,C);break}else e(v,C);C=C.sibling}p.type===Rs?(f=fs(p.props.children,v.mode,N,p.key),f.return=v,v=f):(N=gr(p.type,p.key,p.props,null,v.mode,N),N.ref=Si(v,f,p),N.return=v,v=N)}return a(v);case Ps:e:{for(C=p.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){s(v,f.sibling),f=n(f,p.children||[]),f.return=v,v=f;break e}else{s(v,f);break}else e(v,f);f=f.sibling}f=ia(p,v.mode,N),f.return=v,v=f}return a(v);case Ft:return C=p._init,j(v,f,C(p._payload),N)}if(Mi(p))return x(v,f,p,N);if(yi(p))return g(v,f,p,N);Vn(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(s(v,f.sibling),f=n(f,p),f.return=v,v=f):(s(v,f),f=sa(p,v.mode,N),f.return=v,v=f),a(v)):s(v,f)}return j}var si=Wf(!0),Uf=Wf(!1),$r=is(null),zr=null,Bs=null,nc=null;function rc(){nc=Bs=zr=null}function lc(t){var e=$r.current;te($r),t._currentValue=e}function ao(t,e,s){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===s)break;t=t.return}}function Js(t,e){zr=t,nc=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(nc!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(zr===null)throw Error(T(308));Bs=t,zr.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var us=null;function ac(t){us===null?us=[t]:us.push(t)}function Hf(t,e,s,i){var n=e.interleaved;return n===null?(s.next=s,ac(e)):(s.next=n.next,n.next=s),e.interleaved=s,Mt(t,i)}function Mt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ot=!1;function oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ct(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xt(t,e,s){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,G&2){var n=i.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),i.pending=e,Mt(t,s)}return n=i.interleaved,n===null?(e.next=e,ac(i)):(e.next=n.next,n.next=e),i.interleaved=e,Mt(t,s)}function hr(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Go(t,s)}}function Xu(t,e){var s=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=a:l=l.next=a,s=s.next}while(s!==null);l===null?n=l=e:l=l.next=e}else n=l=e;s={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ir(t,e,s,i){var n=t.updateQueue;Ot=!1;var l=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(l!==null){var d=n.baseState;a=0,h=u=c=null,o=l;do{var m=o.lane,y=o.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,g=o;switch(m=e,y=s,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(y,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(y,d,m):x,m==null)break e;d=ae({},d,m);break e;case 2:Ot=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=n.effects,m===null?n.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,a|=m;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;m=o,o=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else l===null&&(n.shared.lanes=0);xs|=a,t.lanes=a,t.memoizedState=d}}function Qu(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],n=i.callback;if(n!==null){if(i.callback=null,i=s,typeof n!="function")throw Error(T(191,n));n.call(i)}}}var bn={},xt=is(bn),ln=is(bn),an=is(bn);function hs(t){if(t===bn)throw Error(T(174));return t}function cc(t,e){switch(Y(an,e),Y(ln,t),Y(xt,bn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ba(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ba(e,t)}te(xt),Y(xt,e)}function ii(){te(xt),te(ln),te(an)}function Gf(t){hs(an.current);var e=hs(xt.current),s=Ba(e,t.type);e!==s&&(Y(ln,t),Y(xt,s))}function uc(t){ln.current===t&&(te(xt),te(ln))}var re=is(0);function Dr(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jl=[];function hc(){for(var t=0;t<Jl.length;t++)Jl[t]._workInProgressVersionPrimary=null;Jl.length=0}var dr=Rt.ReactCurrentDispatcher,Yl=Rt.ReactCurrentBatchConfig,gs=0,le=null,me=null,ge=null,Fr=!1,Oi=!1,on=0,Ug=0;function Se(){throw Error(T(321))}function dc(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!at(t[s],e[s]))return!1;return!0}function fc(t,e,s,i,n,l){if(gs=l,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dr.current=t===null||t.memoizedState===null?Xg:Qg,t=s(i,n),Oi){l=0;do{if(Oi=!1,on=0,25<=l)throw Error(T(301));l+=1,ge=me=null,e.updateQueue=null,dr.current=Jg,t=s(i,n)}while(Oi)}if(dr.current=Or,e=me!==null&&me.next!==null,gs=0,ge=me=le=null,Fr=!1,e)throw Error(T(300));return t}function mc(){var t=on!==0;return on=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?le.memoizedState=ge=t:ge=ge.next=t,ge}function Ze(){if(me===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=ge===null?le.memoizedState:ge.next;if(e!==null)ge=e,me=t;else{if(t===null)throw Error(T(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ge===null?le.memoizedState=ge=t:ge=ge.next=t}return ge}function cn(t,e){return typeof e=="function"?e(t):e}function ql(t){var e=Ze(),s=e.queue;if(s===null)throw Error(T(311));s.lastRenderedReducer=t;var i=me,n=i.baseQueue,l=s.pending;if(l!==null){if(n!==null){var a=n.next;n.next=l.next,l.next=a}i.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,i=i.baseState;var o=a=null,c=null,u=l;do{var h=u.lane;if((gs&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=i):c=c.next=d,le.lanes|=h,xs|=h}u=u.next}while(u!==null&&u!==l);c===null?a=i:c.next=o,at(i,e.memoizedState)||(ze=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,s.lastRenderedState=i}if(t=s.interleaved,t!==null){n=t;do l=n.lane,le.lanes|=l,xs|=l,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Zl(t){var e=Ze(),s=e.queue;if(s===null)throw Error(T(311));s.lastRenderedReducer=t;var i=s.dispatch,n=s.pending,l=e.memoizedState;if(n!==null){s.pending=null;var a=n=n.next;do l=t(l,a.action),a=a.next;while(a!==n);at(l,e.memoizedState)||(ze=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),s.lastRenderedState=l}return[l,i]}function Xf(){}function Qf(t,e){var s=le,i=Ze(),n=e(),l=!at(i.memoizedState,n);if(l&&(i.memoizedState=n,ze=!0),i=i.queue,pc(qf.bind(null,s,i,t),[t]),i.getSnapshot!==e||l||ge!==null&&ge.memoizedState.tag&1){if(s.flags|=2048,un(9,Yf.bind(null,s,i,n,e),void 0,null),xe===null)throw Error(T(349));gs&30||Jf(s,e,n)}return n}function Jf(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Yf(t,e,s,i){e.value=s,e.getSnapshot=i,Zf(e)&&em(t)}function qf(t,e,s){return s(function(){Zf(e)&&em(t)})}function Zf(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!at(t,s)}catch{return!0}}function em(t){var e=Mt(t,1);e!==null&&lt(e,t,1,-1)}function Ju(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:t},e.queue=t,t=t.dispatch=Gg.bind(null,le,t),[e.memoizedState,t]}function un(t,e,s,i){return t={tag:t,create:e,destroy:s,deps:i,next:null},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(i=s.next,s.next=t,t.next=i,e.lastEffect=t)),t}function tm(){return Ze().memoizedState}function fr(t,e,s,i){var n=mt();le.flags|=t,n.memoizedState=un(1|e,s,void 0,i===void 0?null:i)}function il(t,e,s,i){var n=Ze();i=i===void 0?null:i;var l=void 0;if(me!==null){var a=me.memoizedState;if(l=a.destroy,i!==null&&dc(i,a.deps)){n.memoizedState=un(e,s,l,i);return}}le.flags|=t,n.memoizedState=un(1|e,s,l,i)}function Yu(t,e){return fr(8390656,8,t,e)}function pc(t,e){return il(2048,8,t,e)}function sm(t,e){return il(4,2,t,e)}function im(t,e){return il(4,4,t,e)}function nm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rm(t,e,s){return s=s!=null?s.concat([t]):null,il(4,4,nm.bind(null,e,t),s)}function vc(){}function lm(t,e){var s=Ze();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&dc(e,i[1])?i[0]:(s.memoizedState=[t,e],t)}function am(t,e){var s=Ze();e=e===void 0?null:e;var i=s.memoizedState;return i!==null&&e!==null&&dc(e,i[1])?i[0]:(t=t(),s.memoizedState=[t,e],t)}function om(t,e,s){return gs&21?(at(s,e)||(s=ff(),le.lanes|=s,xs|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=s)}function Hg(t,e){var s=Q;Q=s!==0&&4>s?s:4,t(!0);var i=Yl.transition;Yl.transition={};try{t(!1),e()}finally{Q=s,Yl.transition=i}}function cm(){return Ze().memoizedState}function Kg(t,e,s){var i=Jt(t);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},um(t))hm(e,s);else if(s=Hf(t,e,s,i),s!==null){var n=Me();lt(s,t,i,n),dm(s,e,i)}}function Gg(t,e,s){var i=Jt(t),n={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(um(t))hm(e,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var a=e.lastRenderedState,o=l(a,s);if(n.hasEagerState=!0,n.eagerState=o,at(o,a)){var c=e.interleaved;c===null?(n.next=n,ac(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}s=Hf(t,e,n,i),s!==null&&(n=Me(),lt(s,t,i,n),dm(s,e,i))}}function um(t){var e=t.alternate;return t===le||e!==null&&e===le}function hm(t,e){Oi=Fr=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function dm(t,e,s){if(s&4194240){var i=e.lanes;i&=t.pendingLanes,s|=i,e.lanes=s,Go(t,s)}}var Or={readContext:qe,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Xg={readContext:qe,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:Yu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,fr(4194308,4,nm.bind(null,e,t),s)},useLayoutEffect:function(t,e){return fr(4194308,4,t,e)},useInsertionEffect:function(t,e){return fr(4,2,t,e)},useMemo:function(t,e){var s=mt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var i=mt();return e=s!==void 0?s(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Kg.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:Ju,useDebugValue:vc,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=Ju(!1),e=t[0];return t=Hg.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var i=le,n=mt();if(ie){if(s===void 0)throw Error(T(407));s=s()}else{if(s=e(),xe===null)throw Error(T(349));gs&30||Jf(i,e,s)}n.memoizedState=s;var l={value:s,getSnapshot:e};return n.queue=l,Yu(qf.bind(null,i,l,t),[t]),i.flags|=2048,un(9,Yf.bind(null,i,l,s,e),void 0,null),s},useId:function(){var t=mt(),e=xe.identifierPrefix;if(ie){var s=bt,i=jt;s=(i&~(1<<32-rt(i)-1)).toString(32)+s,e=":"+e+"R"+s,s=on++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Ug++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qg={readContext:qe,useCallback:lm,useContext:qe,useEffect:pc,useImperativeHandle:rm,useInsertionEffect:sm,useLayoutEffect:im,useMemo:am,useReducer:ql,useRef:tm,useState:function(){return ql(cn)},useDebugValue:vc,useDeferredValue:function(t){var e=Ze();return om(e,me.memoizedState,t)},useTransition:function(){var t=ql(cn)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Xf,useSyncExternalStore:Qf,useId:cm,unstable_isNewReconciler:!1},Jg={readContext:qe,useCallback:lm,useContext:qe,useEffect:pc,useImperativeHandle:rm,useInsertionEffect:sm,useLayoutEffect:im,useMemo:am,useReducer:Zl,useRef:tm,useState:function(){return Zl(cn)},useDebugValue:vc,useDeferredValue:function(t){var e=Ze();return me===null?e.memoizedState=t:om(e,me.memoizedState,t)},useTransition:function(){var t=Zl(cn)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Xf,useSyncExternalStore:Qf,useId:cm,unstable_isNewReconciler:!1};function st(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function oo(t,e,s,i){e=t.memoizedState,s=s(i,e),s=s==null?e:ae({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var nl={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var i=Me(),n=Jt(t),l=Ct(i,n);l.payload=e,s!=null&&(l.callback=s),e=Xt(t,l,n),e!==null&&(lt(e,t,n,i),hr(e,t,n))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var i=Me(),n=Jt(t),l=Ct(i,n);l.tag=1,l.payload=e,s!=null&&(l.callback=s),e=Xt(t,l,n),e!==null&&(lt(e,t,n,i),hr(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Me(),i=Jt(t),n=Ct(s,i);n.tag=2,e!=null&&(n.callback=e),e=Xt(t,n,i),e!==null&&(lt(e,t,i,s),hr(e,t,i))}};function qu(t,e,s,i,n,l,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,a):e.prototype&&e.prototype.isPureReactComponent?!tn(s,i)||!tn(n,l):!0}function fm(t,e,s){var i=!1,n=es,l=e.contextType;return typeof l=="object"&&l!==null?l=qe(l):(n=De(e)?ps:_e.current,i=e.contextTypes,l=(i=i!=null)?ei(t,n):es),e=new e(s,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),e}function Zu(t,e,s,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,i),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function co(t,e,s,i){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},oc(t);var l=e.contextType;typeof l=="object"&&l!==null?n.context=qe(l):(l=De(e)?ps:_e.current,n.context=ei(t,l)),n.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(oo(t,e,l,s),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&nl.enqueueReplaceState(n,n.state,null),Ir(t,s,n,i),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var s="",i=e;do s+=Sv(i),i=i.return;while(i);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:n,digest:null}}function ea(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function uo(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Yg=typeof WeakMap=="function"?WeakMap:Map;function mm(t,e,s){s=Ct(-1,s),s.tag=3,s.payload={element:null};var i=e.value;return s.callback=function(){Br||(Br=!0,No=i),uo(t,e)},s}function pm(t,e,s){s=Ct(-1,s),s.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var n=e.value;s.payload=function(){return i(n)},s.callback=function(){uo(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){uo(t,e),typeof i!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function eh(t,e,s){var i=t.pingCache;if(i===null){i=t.pingCache=new Yg;var n=new Set;i.set(e,n)}else n=i.get(e),n===void 0&&(n=new Set,i.set(e,n));n.has(s)||(n.add(s),t=hx.bind(null,t,e,s),e.then(t,t))}function th(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sh(t,e,s,i,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Ct(-1,1),e.tag=2,Xt(s,e,1))),s.lanes|=1),t)}var qg=Rt.ReactCurrentOwner,ze=!1;function Le(t,e,s,i){e.child=t===null?Uf(e,null,s,i):si(e,t.child,s,i)}function ih(t,e,s,i,n){s=s.render;var l=e.ref;return Js(e,n),i=fc(t,e,s,i,l,n),s=mc(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Tt(t,e,n)):(ie&&s&&tc(e),e.flags|=1,Le(t,e,i,n),e.child)}function nh(t,e,s,i,n){if(t===null){var l=s.type;return typeof l=="function"&&!Sc(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=l,vm(t,e,l,i,n)):(t=gr(s.type,null,i,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&n)){var a=l.memoizedProps;if(s=s.compare,s=s!==null?s:tn,s(a,i)&&t.ref===e.ref)return Tt(t,e,n)}return e.flags|=1,t=Yt(l,i),t.ref=e.ref,t.return=e,e.child=t}function vm(t,e,s,i,n){if(t!==null){var l=t.memoizedProps;if(tn(l,i)&&t.ref===e.ref)if(ze=!1,e.pendingProps=i=l,(t.lanes&n)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,Tt(t,e,n)}return ho(t,e,s,i,n)}function gm(t,e,s){var i=e.pendingProps,n=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Ws,Ve),Ve|=s;else{if(!(s&1073741824))return t=l!==null?l.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Ws,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:s,Y(Ws,Ve),Ve|=i}else l!==null?(i=l.baseLanes|s,e.memoizedState=null):i=s,Y(Ws,Ve),Ve|=i;return Le(t,e,n,s),e.child}function xm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function ho(t,e,s,i,n){var l=De(s)?ps:_e.current;return l=ei(e,l),Js(e,n),s=fc(t,e,s,i,l,n),i=mc(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Tt(t,e,n)):(ie&&i&&tc(e),e.flags|=1,Le(t,e,s,n),e.child)}function rh(t,e,s,i,n){if(De(s)){var l=!0;Tr(e)}else l=!1;if(Js(e,n),e.stateNode===null)mr(t,e),fm(e,s,i),co(e,s,i,n),i=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=De(s)?ps:_e.current,u=ei(e,u));var h=s.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&Zu(e,a,i,u),Ot=!1;var m=e.memoizedState;a.state=m,Ir(e,i,a,n),c=e.memoizedState,o!==i||m!==c||Ie.current||Ot?(typeof h=="function"&&(oo(e,s,h,i),c=e.memoizedState),(o=Ot||qu(e,s,o,i,m,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Kf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:st(e.type,o),a.props=u,d=e.pendingProps,m=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=qe(c):(c=De(s)?ps:_e.current,c=ei(e,c));var y=s.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||m!==c)&&Zu(e,a,i,c),Ot=!1,m=e.memoizedState,a.state=m,Ir(e,i,a,n);var x=e.memoizedState;o!==d||m!==x||Ie.current||Ot?(typeof y=="function"&&(oo(e,s,y,i),x=e.memoizedState),(u=Ot||qu(e,s,u,i,m,x,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),a.props=i,a.state=x,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return fo(t,e,s,i,l,n)}function fo(t,e,s,i,n,l){xm(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return n&&Uu(e,s,!1),Tt(t,e,l);i=e.stateNode,qg.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=si(e,t.child,null,l),e.child=si(e,null,o,l)):Le(t,e,o,l),e.memoizedState=i.state,n&&Uu(e,s,!0),e.child}function ym(t){var e=t.stateNode;e.pendingContext?Wu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wu(t,e.context,!1),cc(t,e.containerInfo)}function lh(t,e,s,i,n){return ti(),ic(n),e.flags|=256,Le(t,e,s,i),e.child}var mo={dehydrated:null,treeContext:null,retryLane:0};function po(t){return{baseLanes:t,cachePool:null,transitions:null}}function wm(t,e,s){var i=e.pendingProps,n=re.current,l=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Y(re,n&1),t===null)return lo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,l?(i=e.mode,l=e.child,a={mode:"hidden",children:a},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=al(a,i,0,null),t=fs(t,i,s,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=po(s),e.memoizedState=mo,t):gc(e,a));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Zg(t,e,a,i,o,n,s);if(l){l=i.fallback,a=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==n?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Yt(n,c),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?l=Yt(o,l):(l=fs(l,a,s,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,a=t.child.memoizedState,a=a===null?po(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=t.childLanes&~s,e.memoizedState=mo,i}return l=t.child,t=l.sibling,i=Yt(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=s),i.return=e,i.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=i,e.memoizedState=null,i}function gc(t,e){return e=al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bn(t,e,s,i){return i!==null&&ic(i),si(e,t.child,null,s),t=gc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zg(t,e,s,i,n,l,a){if(s)return e.flags&256?(e.flags&=-257,i=ea(Error(T(422))),Bn(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,n=e.mode,i=al({mode:"visible",children:i.children},n,0,null),l=fs(l,n,a,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&si(e,t.child,null,a),e.child.memoizedState=po(a),e.memoizedState=mo,l);if(!(e.mode&1))return Bn(t,e,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,l=Error(T(419)),i=ea(l,i,void 0),Bn(t,e,a,i)}if(o=(a&t.childLanes)!==0,ze||o){if(i=xe,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Mt(t,n),lt(i,t,n,-1))}return bc(),i=ea(Error(T(421))),Bn(t,e,a,i)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=dx.bind(null,t),n._reactRetry=e,null):(t=l.treeContext,Be=Gt(n.nextSibling),Ae=e,ie=!0,nt=null,t!==null&&(Xe[Qe++]=jt,Xe[Qe++]=bt,Xe[Qe++]=vs,jt=t.id,bt=t.overflow,vs=e),e=gc(e,i.children),e.flags|=4096,e)}function ah(t,e,s){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ao(t.return,e,s)}function ta(t,e,s,i,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:n}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=s,l.tailMode=n)}function Nm(t,e,s){var i=e.pendingProps,n=i.revealOrder,l=i.tail;if(Le(t,e,i.children,s),i=re.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ah(t,s,e);else if(t.tag===19)ah(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Y(re,i),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(s=e.child,n=null;s!==null;)t=s.alternate,t!==null&&Dr(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=e.child,e.child=null):(n=s.sibling,s.sibling=null),ta(e,!1,n,s,l);break;case"backwards":for(s=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Dr(t)===null){e.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}ta(e,!0,s,null,l);break;case"together":ta(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,s=Yt(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Yt(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function ex(t,e,s){switch(e.tag){case 3:ym(e),ti();break;case 5:Gf(e);break;case 1:De(e.type)&&Tr(e);break;case 4:cc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,n=e.memoizedProps.value;Y($r,i._currentValue),i._currentValue=n;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Y(re,re.current&1),e.flags|=128,null):s&e.child.childLanes?wm(t,e,s):(Y(re,re.current&1),t=Tt(t,e,s),t!==null?t.sibling:null);Y(re,re.current&1);break;case 19:if(i=(s&e.childLanes)!==0,t.flags&128){if(i)return Nm(t,e,s);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Y(re,re.current),i)break;return null;case 22:case 23:return e.lanes=0,gm(t,e,s)}return Tt(t,e,s)}var jm,vo,bm,Sm;jm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};vo=function(){};bm=function(t,e,s,i){var n=t.memoizedProps;if(n!==i){t=e.stateNode,hs(xt.current);var l=null;switch(s){case"input":n=Da(t,n),i=Da(t,i),l=[];break;case"select":n=ae({},n,{value:void 0}),i=ae({},i,{value:void 0}),l=[];break;case"textarea":n=Va(t,n),i=Va(t,i),l=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Lr)}Aa(s,i);var a;s=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xi.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in i){var c=i[u];if(o=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(l||(l=[]),l.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Z("scroll",t),l||o===c||(l=[])):(l=l||[]).push(u,c))}s&&(l=l||[]).push("style",s);var u=l;(e.updateQueue=u)&&(e.flags|=4)}};Sm=function(t,e,s,i){s!==i&&(e.flags|=4)};function ki(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,i=0;if(e)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=i,t.childLanes=s,e}function tx(t,e,s){var i=e.pendingProps;switch(sc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return De(e.type)&&Mr(),ke(e),null;case 3:return i=e.stateNode,ii(),te(Ie),te(_e),hc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(On(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nt!==null&&(So(nt),nt=null))),vo(t,e),ke(e),null;case 5:uc(e);var n=hs(an.current);if(s=e.type,t!==null&&e.stateNode!=null)bm(t,e,s,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(T(166));return ke(e),null}if(t=hs(xt.current),On(e)){i=e.stateNode,s=e.type;var l=e.memoizedProps;switch(i[pt]=e,i[rn]=l,t=(e.mode&1)!==0,s){case"dialog":Z("cancel",i),Z("close",i);break;case"iframe":case"object":case"embed":Z("load",i);break;case"video":case"audio":for(n=0;n<Pi.length;n++)Z(Pi[n],i);break;case"source":Z("error",i);break;case"img":case"image":case"link":Z("error",i),Z("load",i);break;case"details":Z("toggle",i);break;case"input":vu(i,l),Z("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Z("invalid",i);break;case"textarea":xu(i,l),Z("invalid",i)}Aa(s,l),n=null;for(var a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="children"?typeof o=="string"?i.textContent!==o&&(l.suppressHydrationWarning!==!0&&Fn(i.textContent,o,t),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Fn(i.textContent,o,t),n=["children",""+o]):Xi.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Z("scroll",i)}switch(s){case"input":Mn(i),gu(i,l,!0);break;case"textarea":Mn(i),yu(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Lr)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(s,{is:i.is}):(t=a.createElement(s),s==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,s),t[pt]=e,t[rn]=i,jm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Wa(s,i),s){case"dialog":Z("cancel",t),Z("close",t),n=i;break;case"iframe":case"object":case"embed":Z("load",t),n=i;break;case"video":case"audio":for(n=0;n<Pi.length;n++)Z(Pi[n],t);n=i;break;case"source":Z("error",t),n=i;break;case"img":case"image":case"link":Z("error",t),Z("load",t),n=i;break;case"details":Z("toggle",t),n=i;break;case"input":vu(t,i),n=Da(t,i),Z("invalid",t);break;case"option":n=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},n=ae({},i,{value:void 0}),Z("invalid",t);break;case"textarea":xu(t,i),n=Va(t,i),Z("invalid",t);break;default:n=i}Aa(s,n),o=n;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?ef(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qd(t,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Qi(t,c):typeof c=="number"&&Qi(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xi.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Z("scroll",t):c!=null&&Bo(t,l,c,a))}switch(s){case"input":Mn(t),gu(t,i,!1);break;case"textarea":Mn(t),yu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Zt(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Ks(t,!!i.multiple,l,!1):i.defaultValue!=null&&Ks(t,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Lr)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)Sm(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(T(166));if(s=hs(an.current),hs(xt.current),On(e)){if(i=e.stateNode,s=e.memoizedProps,i[pt]=e,(l=i.nodeValue!==s)&&(t=Ae,t!==null))switch(t.tag){case 3:Fn(i.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fn(i.nodeValue,s,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[pt]=e,e.stateNode=i}return ke(e),null;case 13:if(te(re),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&Be!==null&&e.mode&1&&!(e.flags&128))Af(),ti(),e.flags|=98560,l=!1;else if(l=On(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(T(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(T(317));l[pt]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),l=!1}else nt!==null&&(So(nt),nt=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?pe===0&&(pe=3):bc())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return ii(),vo(t,e),t===null&&sn(e.stateNode.containerInfo),ke(e),null;case 10:return lc(e.type._context),ke(e),null;case 17:return De(e.type)&&Mr(),ke(e),null;case 19:if(te(re),l=e.memoizedState,l===null)return ke(e),null;if(i=(e.flags&128)!==0,a=l.rendering,a===null)if(i)ki(l,!1);else{if(pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Dr(t),a!==null){for(e.flags|=128,ki(l,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=s,s=e.child;s!==null;)l=s,t=i,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,t=a.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Y(re,re.current&1|2),e.child}t=t.sibling}l.tail!==null&&ue()>ri&&(e.flags|=128,i=!0,ki(l,!1),e.lanes=4194304)}else{if(!i)if(t=Dr(a),t!==null){if(e.flags|=128,i=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),ki(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!ie)return ke(e),null}else 2*ue()-l.renderingStartTime>ri&&s!==1073741824&&(e.flags|=128,i=!0,ki(l,!1),e.lanes=4194304);l.isBackwards?(a.sibling=e.child,e.child=a):(s=l.last,s!==null?s.sibling=a:e.child=a,l.last=a)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ue(),e.sibling=null,s=re.current,Y(re,i?s&1|2:s&1),e):(ke(e),null);case 22:case 23:return jc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ve&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function sx(t,e){switch(sc(e),e.tag){case 1:return De(e.type)&&Mr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),te(Ie),te(_e),hc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uc(e),null;case 13:if(te(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(re),null;case 4:return ii(),null;case 10:return lc(e.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var An=!1,Ce=!1,ix=typeof WeakSet=="function"?WeakSet:Set,I=null;function As(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){oe(t,e,i)}else s.current=null}function go(t,e,s){try{s()}catch(i){oe(t,e,i)}}var oh=!1;function nx(t,e){if(Za=Cr,t=Lf(),ec(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var n=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=t,m=null;t:for(;;){for(var y;d!==s||n!==0&&d.nodeType!==3||(o=a+n),d!==l||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(y=d.firstChild)!==null;)m=d,d=y;for(;;){if(d===t)break t;if(m===s&&++u===n&&(o=a),m===l&&++h===i&&(c=a),(y=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=y}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(eo={focusedElem:t,selectionRange:s},Cr=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,j=x.memoizedState,v=e.stateNode,f=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:st(e.type,g),j);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(N){oe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return x=oh,oh=!1,x}function Vi(t,e,s){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&go(e,s,l)}n=n.next}while(n!==i)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var i=s.create;s.destroy=i()}s=s.next}while(s!==e)}}function xo(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function km(t){var e=t.alternate;e!==null&&(t.alternate=null,km(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[rn],delete e[io],delete e[Vg],delete e[Bg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cm(t){return t.tag===5||t.tag===3||t.tag===4}function ch(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yo(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Lr));else if(i!==4&&(t=t.child,t!==null))for(yo(t,e,s),t=t.sibling;t!==null;)yo(t,e,s),t=t.sibling}function wo(t,e,s){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wo(t,e,s),t=t.sibling;t!==null;)wo(t,e,s),t=t.sibling}var we=null,it=!1;function zt(t,e,s){for(s=s.child;s!==null;)_m(t,e,s),s=s.sibling}function _m(t,e,s){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Yr,s)}catch{}switch(s.tag){case 5:Ce||As(s,e);case 6:var i=we,n=it;we=null,zt(t,e,s),we=i,it=n,we!==null&&(it?(t=we,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):we.removeChild(s.stateNode));break;case 18:we!==null&&(it?(t=we,s=s.stateNode,t.nodeType===8?Xl(t.parentNode,s):t.nodeType===1&&Xl(t,s),Zi(t)):Xl(we,s.stateNode));break;case 4:i=we,n=it,we=s.stateNode.containerInfo,it=!0,zt(t,e,s),we=i,it=n;break;case 0:case 11:case 14:case 15:if(!Ce&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var l=n,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&go(s,e,a),n=n.next}while(n!==i)}zt(t,e,s);break;case 1:if(!Ce&&(As(s,e),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(o){oe(s,e,o)}zt(t,e,s);break;case 21:zt(t,e,s);break;case 22:s.mode&1?(Ce=(i=Ce)||s.memoizedState!==null,zt(t,e,s),Ce=i):zt(t,e,s);break;default:zt(t,e,s)}}function uh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ix),e.forEach(function(i){var n=fx.bind(null,t,i);s.has(i)||(s.add(i),i.then(n,n))})}}function tt(t,e){var s=e.deletions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];try{var l=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:we=o.stateNode,it=!1;break e;case 3:we=o.stateNode.containerInfo,it=!0;break e;case 4:we=o.stateNode.containerInfo,it=!0;break e}o=o.return}if(we===null)throw Error(T(160));_m(l,a,n),we=null,it=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){oe(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Em(e,t),e=e.sibling}function Em(t,e){var s=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tt(e,t),dt(t),i&4){try{Vi(3,t,t.return),rl(3,t)}catch(g){oe(t,t.return,g)}try{Vi(5,t,t.return)}catch(g){oe(t,t.return,g)}}break;case 1:tt(e,t),dt(t),i&512&&s!==null&&As(s,s.return);break;case 5:if(tt(e,t),dt(t),i&512&&s!==null&&As(s,s.return),t.flags&32){var n=t.stateNode;try{Qi(n,"")}catch(g){oe(t,t.return,g)}}if(i&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,a=s!==null?s.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Qd(n,l),Wa(o,a);var u=Wa(o,l);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?ef(n,d):h==="dangerouslySetInnerHTML"?qd(n,d):h==="children"?Qi(n,d):Bo(n,h,d,u)}switch(o){case"input":Fa(n,l);break;case"textarea":Jd(n,l);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?Ks(n,!!l.multiple,y,!1):m!==!!l.multiple&&(l.defaultValue!=null?Ks(n,!!l.multiple,l.defaultValue,!0):Ks(n,!!l.multiple,l.multiple?[]:"",!1))}n[rn]=l}catch(g){oe(t,t.return,g)}}break;case 6:if(tt(e,t),dt(t),i&4){if(t.stateNode===null)throw Error(T(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(g){oe(t,t.return,g)}}break;case 3:if(tt(e,t),dt(t),i&4&&s!==null&&s.memoizedState.isDehydrated)try{Zi(e.containerInfo)}catch(g){oe(t,t.return,g)}break;case 4:tt(e,t),dt(t);break;case 13:tt(e,t),dt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(wc=ue())),i&4&&uh(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||h,tt(e,t),Ce=u):tt(e,t),dt(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(I=t,h=t.child;h!==null;){for(d=I=h;I!==null;){switch(m=I,y=m.child,m.tag){case 0:case 11:case 14:case 15:Vi(4,m,m.return);break;case 1:As(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){i=m,s=m.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){oe(i,s,g)}}break;case 5:As(m,m.return);break;case 22:if(m.memoizedState!==null){dh(d);continue}}y!==null?(y.return=m,I=y):dh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{n=d.stateNode,u?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Zd("display",a))}catch(g){oe(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){oe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tt(e,t),dt(t),i&4&&uh(t);break;case 21:break;default:tt(e,t),dt(t)}}function dt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Cm(s)){var i=s;break e}s=s.return}throw Error(T(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Qi(n,""),i.flags&=-33);var l=ch(t);wo(t,l,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=ch(t);yo(t,o,a);break;default:throw Error(T(161))}}catch(c){oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rx(t,e,s){I=t,Lm(t)}function Lm(t,e,s){for(var i=(t.mode&1)!==0;I!==null;){var n=I,l=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||An;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Ce;o=An;var u=Ce;if(An=a,(Ce=c)&&!u)for(I=n;I!==null;)a=I,c=a.child,a.tag===22&&a.memoizedState!==null?fh(n):c!==null?(c.return=a,I=c):fh(n);for(;l!==null;)I=l,Lm(l),l=l.sibling;I=n,An=o,Ce=u}hh(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,I=l):hh(t)}}function hh(t){for(;I!==null;){var e=I;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||rl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ce)if(s===null)i.componentDidMount();else{var n=e.elementType===e.type?s.memoizedProps:st(e.type,s.memoizedProps);i.componentDidUpdate(n,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Qu(e,l,i);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Qu(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Zi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ce||e.flags&512&&xo(e)}catch(m){oe(e,e.return,m)}}if(e===t){I=null;break}if(s=e.sibling,s!==null){s.return=e.return,I=s;break}I=e.return}}function dh(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var s=e.sibling;if(s!==null){s.return=e.return,I=s;break}I=e.return}}function fh(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{rl(4,e)}catch(c){oe(e,s,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var n=e.return;try{i.componentDidMount()}catch(c){oe(e,n,c)}}var l=e.return;try{xo(e)}catch(c){oe(e,l,c)}break;case 5:var a=e.return;try{xo(e)}catch(c){oe(e,a,c)}}}catch(c){oe(e,e.return,c)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var lx=Math.ceil,Vr=Rt.ReactCurrentDispatcher,xc=Rt.ReactCurrentOwner,Ye=Rt.ReactCurrentBatchConfig,G=0,xe=null,fe=null,je=0,Ve=0,Ws=is(0),pe=0,hn=null,xs=0,ll=0,yc=0,Bi=null,$e=null,wc=0,ri=1/0,wt=null,Br=!1,No=null,Qt=null,Wn=!1,Wt=null,Ar=0,Ai=0,jo=null,pr=-1,vr=0;function Me(){return G&6?ue():pr!==-1?pr:pr=ue()}function Jt(t){return t.mode&1?G&2&&je!==0?je&-je:Wg.transition!==null?(vr===0&&(vr=ff()),vr):(t=Q,t!==0||(t=window.event,t=t===void 0?16:wf(t.type)),t):1}function lt(t,e,s,i){if(50<Ai)throw Ai=0,jo=null,Error(T(185));wn(t,s,i),(!(G&2)||t!==xe)&&(t===xe&&(!(G&2)&&(ll|=s),pe===4&&Bt(t,je)),Fe(t,i),s===1&&G===0&&!(e.mode&1)&&(ri=ue()+500,sl&&ns()))}function Fe(t,e){var s=t.callbackNode;Wv(t,e);var i=kr(t,t===xe?je:0);if(i===0)s!==null&&ju(s),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(s!=null&&ju(s),e===1)t.tag===0?Ag(mh.bind(null,t)):Of(mh.bind(null,t)),Fg(function(){!(G&6)&&ns()}),s=null;else{switch(mf(i)){case 1:s=Ko;break;case 4:s=hf;break;case 16:s=Sr;break;case 536870912:s=df;break;default:s=Sr}s=Dm(s,Mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Mm(t,e){if(pr=-1,vr=0,G&6)throw Error(T(327));var s=t.callbackNode;if(Ys()&&t.callbackNode!==s)return null;var i=kr(t,t===xe?je:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Wr(t,i);else{e=i;var n=G;G|=2;var l=Pm();(xe!==t||je!==e)&&(wt=null,ri=ue()+500,ds(t,e));do try{cx();break}catch(o){Tm(t,o)}while(!0);rc(),Vr.current=l,G=n,fe!==null?e=0:(xe=null,je=0,e=pe)}if(e!==0){if(e===2&&(n=Xa(t),n!==0&&(i=n,e=bo(t,n))),e===1)throw s=hn,ds(t,0),Bt(t,i),Fe(t,ue()),s;if(e===6)Bt(t,i);else{if(n=t.current.alternate,!(i&30)&&!ax(n)&&(e=Wr(t,i),e===2&&(l=Xa(t),l!==0&&(i=l,e=bo(t,l))),e===1))throw s=hn,ds(t,0),Bt(t,i),Fe(t,ue()),s;switch(t.finishedWork=n,t.finishedLanes=i,e){case 0:case 1:throw Error(T(345));case 2:os(t,$e,wt);break;case 3:if(Bt(t,i),(i&130023424)===i&&(e=wc+500-ue(),10<e)){if(kr(t,0)!==0)break;if(n=t.suspendedLanes,(n&i)!==i){Me(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=so(os.bind(null,t,$e,wt),e);break}os(t,$e,wt);break;case 4:if(Bt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,n=-1;0<i;){var a=31-rt(i);l=1<<a,a=e[a],a>n&&(n=a),i&=~l}if(i=n,i=ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lx(i/1960))-i,10<i){t.timeoutHandle=so(os.bind(null,t,$e,wt),i);break}os(t,$e,wt);break;case 5:os(t,$e,wt);break;default:throw Error(T(329))}}}return Fe(t,ue()),t.callbackNode===s?Mm.bind(null,t):null}function bo(t,e){var s=Bi;return t.current.memoizedState.isDehydrated&&(ds(t,e).flags|=256),t=Wr(t,e),t!==2&&(e=$e,$e=s,e!==null&&So(e)),t}function So(t){$e===null?$e=t:$e.push.apply($e,t)}function ax(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var n=s[i],l=n.getSnapshot;n=n.value;try{if(!at(l(),n))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bt(t,e){for(e&=~yc,e&=~ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-rt(e),i=1<<s;t[s]=-1,e&=~i}}function mh(t){if(G&6)throw Error(T(327));Ys();var e=kr(t,0);if(!(e&1))return Fe(t,ue()),null;var s=Wr(t,e);if(t.tag!==0&&s===2){var i=Xa(t);i!==0&&(e=i,s=bo(t,i))}if(s===1)throw s=hn,ds(t,0),Bt(t,e),Fe(t,ue()),s;if(s===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,$e,wt),Fe(t,ue()),null}function Nc(t,e){var s=G;G|=1;try{return t(e)}finally{G=s,G===0&&(ri=ue()+500,sl&&ns())}}function ys(t){Wt!==null&&Wt.tag===0&&!(G&6)&&Ys();var e=G;G|=1;var s=Ye.transition,i=Q;try{if(Ye.transition=null,Q=1,t)return t()}finally{Q=i,Ye.transition=s,G=e,!(G&6)&&ns()}}function jc(){Ve=Ws.current,te(Ws)}function ds(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Dg(s)),fe!==null)for(s=fe.return;s!==null;){var i=s;switch(sc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mr();break;case 3:ii(),te(Ie),te(_e),hc();break;case 5:uc(i);break;case 4:ii();break;case 13:te(re);break;case 19:te(re);break;case 10:lc(i.type._context);break;case 22:case 23:jc()}s=s.return}if(xe=t,fe=t=Yt(t.current,null),je=Ve=e,pe=0,hn=null,yc=ll=xs=0,$e=Bi=null,us!==null){for(e=0;e<us.length;e++)if(s=us[e],i=s.interleaved,i!==null){s.interleaved=null;var n=i.next,l=s.pending;if(l!==null){var a=l.next;l.next=n,i.next=a}s.pending=i}us=null}return t}function Tm(t,e){do{var s=fe;try{if(rc(),dr.current=Or,Fr){for(var i=le.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Fr=!1}if(gs=0,ge=me=le=null,Oi=!1,on=0,xc.current=null,s===null||s.return===null){pe=1,hn=e,fe=null;break}e:{var l=t,a=s.return,o=s,c=e;if(e=je,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=th(a);if(y!==null){y.flags&=-257,sh(y,a,o,l,e),y.mode&1&&eh(l,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){eh(l,u,e),bc();break e}c=Error(T(426))}}else if(ie&&o.mode&1){var j=th(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),sh(j,a,o,l,e),ic(ni(c,o));break e}}l=c=ni(c,o),pe!==4&&(pe=2),Bi===null?Bi=[l]:Bi.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var v=mm(l,c,e);Xu(l,v);break e;case 1:o=c;var f=l.type,p=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qt===null||!Qt.has(p)))){l.flags|=65536,e&=-e,l.lanes|=e;var N=pm(l,o,e);Xu(l,N);break e}}l=l.return}while(l!==null)}$m(s)}catch(b){e=b,fe===s&&s!==null&&(fe=s=s.return);continue}break}while(!0)}function Pm(){var t=Vr.current;return Vr.current=Or,t===null?Or:t}function bc(){(pe===0||pe===3||pe===2)&&(pe=4),xe===null||!(xs&268435455)&&!(ll&268435455)||Bt(xe,je)}function Wr(t,e){var s=G;G|=2;var i=Pm();(xe!==t||je!==e)&&(wt=null,ds(t,e));do try{ox();break}catch(n){Tm(t,n)}while(!0);if(rc(),G=s,Vr.current=i,fe!==null)throw Error(T(261));return xe=null,je=0,pe}function ox(){for(;fe!==null;)Rm(fe)}function cx(){for(;fe!==null&&!$v();)Rm(fe)}function Rm(t){var e=Im(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?$m(t):fe=e,xc.current=null}function $m(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=sx(s,e),s!==null){s.flags&=32767,fe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pe=6,fe=null;return}}else if(s=tx(s,e,Ve),s!==null){fe=s;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);pe===0&&(pe=5)}function os(t,e,s){var i=Q,n=Ye.transition;try{Ye.transition=null,Q=1,ux(t,e,s,i)}finally{Ye.transition=n,Q=i}return null}function ux(t,e,s,i){do Ys();while(Wt!==null);if(G&6)throw Error(T(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(Uv(t,l),t===xe&&(fe=xe=null,je=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Wn||(Wn=!0,Dm(Sr,function(){return Ys(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=Ye.transition,Ye.transition=null;var a=Q;Q=1;var o=G;G|=4,xc.current=null,nx(t,s),Em(s,t),Mg(eo),Cr=!!Za,eo=Za=null,t.current=s,rx(s),zv(),G=o,Q=a,Ye.transition=l}else t.current=s;if(Wn&&(Wn=!1,Wt=t,Ar=n),l=t.pendingLanes,l===0&&(Qt=null),Fv(s.stateNode),Fe(t,ue()),e!==null)for(i=t.onRecoverableError,s=0;s<e.length;s++)n=e[s],i(n.value,{componentStack:n.stack,digest:n.digest});if(Br)throw Br=!1,t=No,No=null,t;return Ar&1&&t.tag!==0&&Ys(),l=t.pendingLanes,l&1?t===jo?Ai++:(Ai=0,jo=t):Ai=0,ns(),null}function Ys(){if(Wt!==null){var t=mf(Ar),e=Ye.transition,s=Q;try{if(Ye.transition=null,Q=16>t?16:t,Wt===null)var i=!1;else{if(t=Wt,Wt=null,Ar=0,G&6)throw Error(T(331));var n=G;for(G|=4,I=t.current;I!==null;){var l=I,a=l.child;if(I.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:Vi(8,h,l)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var m=h.sibling,y=h.return;if(km(h),h===u){I=null;break}if(m!==null){m.return=y,I=m;break}I=y}}}var x=l.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var j=g.sibling;g.sibling=null,g=j}while(g!==null)}}I=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,I=a;else e:for(;I!==null;){if(l=I,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Vi(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,I=v;break e}I=l.return}}var f=t.current;for(I=f;I!==null;){a=I;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,I=p;else e:for(a=f;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rl(9,o)}}catch(b){oe(o,o.return,b)}if(o===a){I=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,I=N;break e}I=o.return}}if(G=n,ns(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Yr,t)}catch{}i=!0}return i}finally{Q=s,Ye.transition=e}}return!1}function ph(t,e,s){e=ni(s,e),e=mm(t,e,1),t=Xt(t,e,1),e=Me(),t!==null&&(wn(t,1,e),Fe(t,e))}function oe(t,e,s){if(t.tag===3)ph(t,t,s);else for(;e!==null;){if(e.tag===3){ph(e,t,s);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qt===null||!Qt.has(i))){t=ni(s,t),t=pm(e,t,1),e=Xt(e,t,1),t=Me(),e!==null&&(wn(e,1,t),Fe(e,t));break}}e=e.return}}function hx(t,e,s){var i=t.pingCache;i!==null&&i.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&s,xe===t&&(je&s)===s&&(pe===4||pe===3&&(je&130023424)===je&&500>ue()-wc?ds(t,0):yc|=s),Fe(t,e)}function zm(t,e){e===0&&(t.mode&1?(e=Rn,Rn<<=1,!(Rn&130023424)&&(Rn=4194304)):e=1);var s=Me();t=Mt(t,e),t!==null&&(wn(t,e,s),Fe(t,s))}function dx(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),zm(t,s)}function fx(t,e){var s=0;switch(t.tag){case 13:var i=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(T(314))}i!==null&&i.delete(e),zm(t,s)}var Im;Im=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ie.current)ze=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return ze=!1,ex(t,e,s);ze=!!(t.flags&131072)}else ze=!1,ie&&e.flags&1048576&&Vf(e,Rr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;mr(t,e),t=e.pendingProps;var n=ei(e,_e.current);Js(e,s),n=fc(null,e,i,t,n,s);var l=mc();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(i)?(l=!0,Tr(e)):l=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,oc(e),n.updater=nl,e.stateNode=n,n._reactInternals=e,co(e,i,t,s),e=fo(null,e,i,!0,l,s)):(e.tag=0,ie&&l&&tc(e),Le(null,e,n,s),e=e.child),e;case 16:i=e.elementType;e:{switch(mr(t,e),t=e.pendingProps,n=i._init,i=n(i._payload),e.type=i,n=e.tag=px(i),t=st(i,t),n){case 0:e=ho(null,e,i,t,s);break e;case 1:e=rh(null,e,i,t,s);break e;case 11:e=ih(null,e,i,t,s);break e;case 14:e=nh(null,e,i,st(i.type,t),s);break e}throw Error(T(306,i,""))}return e;case 0:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),ho(t,e,i,n,s);case 1:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),rh(t,e,i,n,s);case 3:e:{if(ym(e),t===null)throw Error(T(387));i=e.pendingProps,l=e.memoizedState,n=l.element,Kf(t,e),Ir(e,i,null,s);var a=e.memoizedState;if(i=a.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){n=ni(Error(T(423)),e),e=lh(t,e,i,s,n);break e}else if(i!==n){n=ni(Error(T(424)),e),e=lh(t,e,i,s,n);break e}else for(Be=Gt(e.stateNode.containerInfo.firstChild),Ae=e,ie=!0,nt=null,s=Uf(e,null,i,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ti(),i===n){e=Tt(t,e,s);break e}Le(t,e,i,s)}e=e.child}return e;case 5:return Gf(e),t===null&&lo(e),i=e.type,n=e.pendingProps,l=t!==null?t.memoizedProps:null,a=n.children,to(i,n)?a=null:l!==null&&to(i,l)&&(e.flags|=32),xm(t,e),Le(t,e,a,s),e.child;case 6:return t===null&&lo(e),null;case 13:return wm(t,e,s);case 4:return cc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=si(e,null,i,s):Le(t,e,i,s),e.child;case 11:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),ih(t,e,i,n,s);case 7:return Le(t,e,e.pendingProps,s),e.child;case 8:return Le(t,e,e.pendingProps.children,s),e.child;case 12:return Le(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(i=e.type._context,n=e.pendingProps,l=e.memoizedProps,a=n.value,Y($r,i._currentValue),i._currentValue=a,l!==null)if(at(l.value,a)){if(l.children===n.children&&!Ie.current){e=Tt(t,e,s);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){a=l.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(l.tag===1){c=Ct(-1,s&-s),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),ao(l.return,s,e),o.lanes|=s;break}c=c.next}}else if(l.tag===10)a=l.type===e.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(T(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),ao(a,s,e),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Le(t,e,n.children,s),e=e.child}return e;case 9:return n=e.type,i=e.pendingProps.children,Js(e,s),n=qe(n),i=i(n),e.flags|=1,Le(t,e,i,s),e.child;case 14:return i=e.type,n=st(i,e.pendingProps),n=st(i.type,n),nh(t,e,i,n,s);case 15:return vm(t,e,e.type,e.pendingProps,s);case 17:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:st(i,n),mr(t,e),e.tag=1,De(i)?(t=!0,Tr(e)):t=!1,Js(e,s),fm(e,i,n),co(e,i,n,s),fo(null,e,i,!0,t,s);case 19:return Nm(t,e,s);case 22:return gm(t,e,s)}throw Error(T(156,e.tag))};function Dm(t,e){return uf(t,e)}function mx(t,e,s,i){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,s,i){return new mx(t,e,s,i)}function Sc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function px(t){if(typeof t=="function")return Sc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wo)return 11;if(t===Uo)return 14}return 2}function Yt(t,e){var s=t.alternate;return s===null?(s=Je(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function gr(t,e,s,i,n,l){var a=2;if(i=t,typeof t=="function")Sc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Rs:return fs(s.children,n,l,e);case Ao:a=8,n|=8;break;case Ra:return t=Je(12,s,e,n|2),t.elementType=Ra,t.lanes=l,t;case $a:return t=Je(13,s,e,n),t.elementType=$a,t.lanes=l,t;case za:return t=Je(19,s,e,n),t.elementType=za,t.lanes=l,t;case Kd:return al(s,n,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ud:a=10;break e;case Hd:a=9;break e;case Wo:a=11;break e;case Uo:a=14;break e;case Ft:a=16,i=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Je(a,s,e,n),e.elementType=t,e.type=i,e.lanes=l,e}function fs(t,e,s,i){return t=Je(7,t,i,e),t.lanes=s,t}function al(t,e,s,i){return t=Je(22,t,i,e),t.elementType=Kd,t.lanes=s,t.stateNode={isHidden:!1},t}function sa(t,e,s){return t=Je(6,t,null,e),t.lanes=s,t}function ia(t,e,s){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vx(t,e,s,i,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dl(0),this.expirationTimes=Dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function kc(t,e,s,i,n,l,a,o,c){return t=new vx(t,e,s,o,c),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Je(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(l),t}function gx(t,e,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:i==null?null:""+i,children:t,containerInfo:e,implementation:s}}function Fm(t){if(!t)return es;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var s=t.type;if(De(s))return Ff(t,s,e)}return e}function Om(t,e,s,i,n,l,a,o,c){return t=kc(s,i,!0,t,n,l,a,o,c),t.context=Fm(null),s=t.current,i=Me(),n=Jt(s),l=Ct(i,n),l.callback=e??null,Xt(s,l,n),t.current.lanes=n,wn(t,n,i),Fe(t,i),t}function ol(t,e,s,i){var n=e.current,l=Me(),a=Jt(n);return s=Fm(s),e.context===null?e.context=s:e.pendingContext=s,e=Ct(l,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xt(n,e,a),t!==null&&(lt(t,n,a,l),hr(t,n,a)),a}function Ur(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Cc(t,e){vh(t,e),(t=t.alternate)&&vh(t,e)}function xx(){return null}var Vm=typeof reportError=="function"?reportError:function(t){console.error(t)};function _c(t){this._internalRoot=t}cl.prototype.render=_c.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ol(t,e,null,null)};cl.prototype.unmount=_c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){ol(null,t,null,null)}),e[Lt]=null}};function cl(t){this._internalRoot=t}cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=gf();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Vt.length&&e!==0&&e<Vt[s].priority;s++);Vt.splice(s,0,t),s===0&&yf(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ul(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gh(){}function yx(t,e,s,i,n){if(n){if(typeof i=="function"){var l=i;i=function(){var u=Ur(a);l.call(u)}}var a=Om(e,i,t,0,null,!1,!1,"",gh);return t._reactRootContainer=a,t[Lt]=a.current,sn(t.nodeType===8?t.parentNode:t),ys(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var u=Ur(c);o.call(u)}}var c=kc(t,0,!1,null,null,!1,!1,"",gh);return t._reactRootContainer=c,t[Lt]=c.current,sn(t.nodeType===8?t.parentNode:t),ys(function(){ol(e,c,s,i)}),c}function hl(t,e,s,i,n){var l=s._reactRootContainer;if(l){var a=l;if(typeof n=="function"){var o=n;n=function(){var c=Ur(a);o.call(c)}}ol(e,a,t,n)}else a=yx(s,e,t,n,i);return Ur(a)}pf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Ti(e.pendingLanes);s!==0&&(Go(e,s|1),Fe(e,ue()),!(G&6)&&(ri=ue()+500,ns()))}break;case 13:ys(function(){var i=Mt(t,1);if(i!==null){var n=Me();lt(i,t,1,n)}}),Cc(t,1)}};Xo=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var s=Me();lt(e,t,134217728,s)}Cc(t,134217728)}};vf=function(t){if(t.tag===13){var e=Jt(t),s=Mt(t,e);if(s!==null){var i=Me();lt(s,t,e,i)}Cc(t,e)}};gf=function(){return Q};xf=function(t,e){var s=Q;try{return Q=t,e()}finally{Q=s}};Ha=function(t,e,s){switch(e){case"input":if(Fa(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var i=s[e];if(i!==t&&i.form===t.form){var n=tl(i);if(!n)throw Error(T(90));Xd(i),Fa(i,n)}}}break;case"textarea":Jd(t,s);break;case"select":e=s.value,e!=null&&Ks(t,!!s.multiple,e,!1)}};nf=Nc;rf=ys;var wx={usingClientEntryPoint:!1,Events:[jn,Ds,tl,tf,sf,Nc]},Ci={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nx={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=of(t),t===null?null:t.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Un=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Un.isDisabled&&Un.supportsFiber)try{Yr=Un.inject(Nx),gt=Un}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wx;Ue.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(e))throw Error(T(200));return gx(t,e,null,s)};Ue.createRoot=function(t,e){if(!Ec(t))throw Error(T(299));var s=!1,i="",n=Vm;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=kc(t,1,!1,null,null,s,!1,i,n),t[Lt]=e.current,sn(t.nodeType===8?t.parentNode:t),new _c(e)};Ue.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=of(e),t=t===null?null:t.stateNode,t};Ue.flushSync=function(t){return ys(t)};Ue.hydrate=function(t,e,s){if(!ul(e))throw Error(T(200));return hl(null,t,e,!0,s)};Ue.hydrateRoot=function(t,e,s){if(!Ec(t))throw Error(T(405));var i=s!=null&&s.hydratedSources||null,n=!1,l="",a=Vm;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Om(e,null,t,1,s??null,n,!1,l,a),t[Lt]=e.current,sn(t),i)for(t=0;t<i.length;t++)s=i[t],n=s._getVersion,n=n(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,n]:e.mutableSourceEagerHydrationData.push(s,n);return new cl(e)};Ue.render=function(t,e,s){if(!ul(e))throw Error(T(200));return hl(null,t,e,!1,s)};Ue.unmountComponentAtNode=function(t){if(!ul(t))throw Error(T(40));return t._reactRootContainer?(ys(function(){hl(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ue.unstable_batchedUpdates=Nc;Ue.unstable_renderSubtreeIntoContainer=function(t,e,s,i){if(!ul(s))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return hl(t,e,s,!1,i)};Ue.version="18.3.1-next-f1338f8080-20240426";function Bm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bm)}catch(t){console.error(t)}}Bm(),Vd.exports=Ue;var jx=Vd.exports,xh=jx;Ta.createRoot=xh.createRoot,Ta.hydrateRoot=xh.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yh="popstate";function bx(t={}){function e(i,n){let{pathname:l,search:a,hash:o}=i.location;return ko("",{pathname:l,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(i,n){return typeof n=="string"?n:dn(n)}return kx(e,s,null,t)}function ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function et(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sx(){return Math.random().toString(36).substring(2,10)}function wh(t,e){return{usr:t.state,key:t.key,idx:e}}function ko(t,e,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hi(e):e,state:s,key:e&&e.key||i||Sx()}}function dn({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function hi(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function kx(t,e,s,i={}){let{window:n=document.defaultView,v5Compat:l=!1}=i,a=n.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let j=h(),v=j==null?null:j-u;u=j,c&&c({action:o,location:g.location,delta:v})}function m(j,v){o="PUSH";let f=ko(g.location,j,v);u=h()+1;let p=wh(f,u),N=g.createHref(f);try{a.pushState(p,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;n.location.assign(N)}l&&c&&c({action:o,location:g.location,delta:1})}function y(j,v){o="REPLACE";let f=ko(g.location,j,v);u=h();let p=wh(f,u),N=g.createHref(f);a.replaceState(p,"",N),l&&c&&c({action:o,location:g.location,delta:0})}function x(j){return Cx(j)}let g={get action(){return o},get location(){return t(n,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(yh,d),c=j,()=>{n.removeEventListener(yh,d),c=null}},createHref(j){return e(n,j)},createURL:x,encodeLocation(j){let v=x(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(j){return a.go(j)}};return g}function Cx(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ne(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:dn(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Am(t,e,s="/"){return _x(t,e,s,!1)}function _x(t,e,s,i){let n=typeof e=="string"?hi(e):e,l=Pt(n.pathname||"/",s);if(l==null)return null;let a=Wm(t);Ex(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=Ox(l);o=Dx(a[c],u,i)}return o}function Wm(t,e=[],s=[],i="",n=!1){let l=(a,o,c=n,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&c)return;ne(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=_t([i,h.relativePath]),m=s.concat(h);a.children&&a.children.length>0&&(ne(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Wm(a.children,e,m,d,c)),!(a.path==null&&!a.index)&&e.push({path:d,score:zx(d,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,o);else for(let u of Um(a.path))l(a,o,!0,u)}),e}function Um(t){let e=t.split("/");if(e.length===0)return[];let[s,...i]=e,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(i.length===0)return n?[l,""]:[l];let a=Um(i.join("/")),o=[];return o.push(...a.map(c=>c===""?l:[l,c].join("/"))),n&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ex(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Ix(e.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var Lx=/^:[\w-]+$/,Mx=3,Tx=2,Px=1,Rx=10,$x=-2,Nh=t=>t==="*";function zx(t,e){let s=t.split("/"),i=s.length;return s.some(Nh)&&(i+=$x),e&&(i+=Tx),s.filter(n=>!Nh(n)).reduce((n,l)=>n+(Lx.test(l)?Mx:l===""?Px:Rx),i)}function Ix(t,e){return t.length===e.length&&t.slice(0,-1).every((i,n)=>i===e[n])?t[t.length-1]-e[e.length-1]:0}function Dx(t,e,s=!1){let{routesMeta:i}=t,n={},l="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],u=o===i.length-1,h=l==="/"?e:e.slice(l.length)||"/",d=Hr({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!d&&u&&s&&!i[i.length-1].route.index&&(d=Hr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(n,d.params),a.push({params:n,pathname:_t([l,d.pathname]),pathnameBase:Wx(_t([l,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(l=_t([l,d.pathnameBase]))}return a}function Hr(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=Fx(t.path,t.caseSensitive,t.end),n=e.match(s);if(!n)return null;let l=n[0],a=l.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((u,{paramName:h,isOptional:d},m)=>{if(h==="*"){let x=o[m]||"";a=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[m];return d&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:t}}function Fx(t,e=!1,s=!0){et(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function Ox(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return et(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var Hm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=t=>Hm.test(t);function Bx(t,e="/"){let{pathname:s,search:i="",hash:n=""}=typeof t=="string"?hi(t):t,l;if(s)if(Vx(s))l=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),et(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${s}`)}s.startsWith("/")?l=jh(s.substring(1),"/"):l=jh(s,e)}else l=e;return{pathname:l,search:Ux(i),hash:Hx(n)}}function jh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function na(t,e,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ax(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Lc(t){let e=Ax(t);return e.map((s,i)=>i===e.length-1?s.pathname:s.pathnameBase)}function Mc(t,e,s,i=!1){let n;typeof t=="string"?n=hi(t):(n={...t},ne(!n.pathname||!n.pathname.includes("?"),na("?","pathname","search",n)),ne(!n.pathname||!n.pathname.includes("#"),na("#","pathname","hash",n)),ne(!n.search||!n.search.includes("#"),na("#","search","hash",n)));let l=t===""||n.pathname==="",a=l?"/":n.pathname,o;if(a==null)o=s;else{let d=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),d-=1;n.pathname=m.join("/")}o=d>=0?e[d]:"/"}let c=Bx(n,o),u=a&&a!=="/"&&a.endsWith("/"),h=(l||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var _t=t=>t.join("/").replace(/\/\/+/g,"/"),Wx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ux=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Hx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Kx=class{constructor(t,e,s,i=!1){this.status=t,this.statusText=e||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Gx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Xx(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Km=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gm(t,e){let s=t;if(typeof s!="string"||!Hm.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,n=!1;if(Km)try{let l=new URL(window.location.href),a=s.startsWith("//")?new URL(l.protocol+s):new URL(s),o=Pt(a.pathname,e);a.origin===l.origin&&o!=null?s=o+a.search+a.hash:n=!0}catch{et(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:n,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xm=["POST","PUT","PATCH","DELETE"];new Set(Xm);var Qx=["GET",...Xm];new Set(Qx);var di=w.createContext(null);di.displayName="DataRouter";var dl=w.createContext(null);dl.displayName="DataRouterState";var Jx=w.createContext(!1),Qm=w.createContext({isTransitioning:!1});Qm.displayName="ViewTransition";var Yx=w.createContext(new Map);Yx.displayName="Fetchers";var qx=w.createContext(null);qx.displayName="Await";var Ke=w.createContext(null);Ke.displayName="Navigation";var Sn=w.createContext(null);Sn.displayName="Location";var yt=w.createContext({outlet:null,matches:[],isDataRoute:!1});yt.displayName="Route";var Tc=w.createContext(null);Tc.displayName="RouteError";var Jm="REACT_ROUTER_ERROR",Zx="REDIRECT",ey="ROUTE_ERROR_RESPONSE";function ty(t){if(t.startsWith(`${Jm}:${Zx}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sy(t){if(t.startsWith(`${Jm}:${ey}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Kx(e.status,e.statusText,e.data)}catch{}}function iy(t,{relative:e}={}){ne(fi(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=w.useContext(Ke),{hash:n,pathname:l,search:a}=kn(t,{relative:e}),o=l;return s!=="/"&&(o=l==="/"?s:_t([s,l])),i.createHref({pathname:o,search:a,hash:n})}function fi(){return w.useContext(Sn)!=null}function rs(){return ne(fi(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Sn).location}var Ym="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qm(t){w.useContext(Ke).static||w.useLayoutEffect(t)}function mi(){let{isDataRoute:t}=w.useContext(yt);return t?vy():ny()}function ny(){ne(fi(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(di),{basename:e,navigator:s}=w.useContext(Ke),{matches:i}=w.useContext(yt),{pathname:n}=rs(),l=JSON.stringify(Lc(i)),a=w.useRef(!1);return qm(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(et(a.current,Ym),!a.current)return;if(typeof c=="number"){s.go(c);return}let h=Mc(c,JSON.parse(l),n,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:_t([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,l,n,t])}w.createContext(null);function kn(t,{relative:e}={}){let{matches:s}=w.useContext(yt),{pathname:i}=rs(),n=JSON.stringify(Lc(s));return w.useMemo(()=>Mc(t,JSON.parse(n),i,e==="path"),[t,n,i,e])}function ry(t,e){return Zm(t,e)}function Zm(t,e,s,i,n){var f;ne(fi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(Ke),{matches:a}=w.useContext(yt),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let p=d&&d.path||"";tp(u,!d||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let m=rs(),y;if(e){let p=typeof e=="string"?hi(e):e;ne(h==="/"||((f=p.pathname)==null?void 0:f.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${p.pathname}" was given in the \`location\` prop.`),y=p}else y=m;let x=y.pathname||"/",g=x;if(h!=="/"){let p=h.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(p.length).join("/")}let j=Am(t,{pathname:g});et(d||j!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),et(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=uy(j&&j.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:_t([h,l.encodeLocation?l.encodeLocation(p.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?h:_t([h,l.encodeLocation?l.encodeLocation(p.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathnameBase])})),a,s,i,n);return e&&v?w.createElement(Sn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},v):v}function ly(){let t=py(),e=Gx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:n},s):null,a)}var ay=w.createElement(ly,null),ep=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=sy(t.digest);s&&(t=s)}let e=t!==void 0?w.createElement(yt.Provider,{value:this.props.routeContext},w.createElement(Tc.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?w.createElement(oy,{error:t},e):e}};ep.contextType=Jx;var ra=new WeakMap;function oy({children:t,error:e}){let{basename:s}=w.useContext(Ke);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=ty(e.digest);if(i){let n=ra.get(e);if(n)throw n;let l=Gm(i.location,s);if(Km&&!ra.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw ra.set(e,a),a}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function cy({routeContext:t,match:e,children:s}){let i=w.useContext(di);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(yt.Provider,{value:t},s)}function uy(t,e=[],s=null,i=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,a=s==null?void 0:s.errors;if(a!=null){let h=l.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);ne(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let o=!1,c=-1;if(s)for(let h=0;h<l.length;h++){let d=l[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:y}=s,x=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!y||y[d.route.id]===void 0);if(d.route.lazy||x){o=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}let u=s&&i?(h,d)=>{var m,y;i(h,{location:s.location,params:((y=(m=s.matches)==null?void 0:m[0])==null?void 0:y.params)??{},unstable_pattern:Xx(s.matches),errorInfo:d})}:void 0;return l.reduceRight((h,d,m)=>{let y,x=!1,g=null,j=null;s&&(y=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||ay,o&&(c<0&&m===0?(tp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):c===m&&(x=!0,j=d.route.hydrateFallbackElement||null)));let v=e.concat(l.slice(0,m+1)),f=()=>{let p;return y?p=g:x?p=j:d.route.Component?p=w.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=h,w.createElement(cy,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:s!=null},children:p})};return s&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?w.createElement(ep,{location:s.location,revalidation:s.revalidation,component:g,error:y,children:f(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):f()},null)}function Pc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hy(t){let e=w.useContext(di);return ne(e,Pc(t)),e}function dy(t){let e=w.useContext(dl);return ne(e,Pc(t)),e}function fy(t){let e=w.useContext(yt);return ne(e,Pc(t)),e}function Rc(t){let e=fy(t),s=e.matches[e.matches.length-1];return ne(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function my(){return Rc("useRouteId")}function py(){var i;let t=w.useContext(Tc),e=dy("useRouteError"),s=Rc("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[s]}function vy(){let{router:t}=hy("useNavigate"),e=Rc("useNavigate"),s=w.useRef(!1);return qm(()=>{s.current=!0}),w.useCallback(async(n,l={})=>{et(s.current,Ym),s.current&&(typeof n=="number"?await t.navigate(n):await t.navigate(n,{fromRouteId:e,...l}))},[t,e])}var bh={};function tp(t,e,s){!e&&!bh[t]&&(bh[t]=!0,et(!1,s))}w.memo(gy);function gy({routes:t,future:e,state:s,onError:i}){return Zm(t,void 0,s,i,e)}function $c({to:t,replace:e,state:s,relative:i}){ne(fi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=w.useContext(Ke);et(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(yt),{pathname:a}=rs(),o=mi(),c=Mc(t,Lc(l),a,i==="path"),u=JSON.stringify(c);return w.useEffect(()=>{o(JSON.parse(u),{replace:e,state:s,relative:i})},[o,u,i,e,s]),null}function Ri(t){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xy({basename:t="/",children:e=null,location:s,navigationType:i="POP",navigator:n,static:l=!1,unstable_useTransitions:a}){ne(!fi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:n,static:l,unstable_useTransitions:a,future:{}}),[o,n,l,a]);typeof s=="string"&&(s=hi(s));let{pathname:u="/",search:h="",hash:d="",state:m=null,key:y="default"}=s,x=w.useMemo(()=>{let g=Pt(u,o);return g==null?null:{location:{pathname:g,search:h,hash:d,state:m,key:y},navigationType:i}},[o,u,h,d,m,y,i]);return et(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:w.createElement(Ke.Provider,{value:c},w.createElement(Sn.Provider,{children:e,value:x}))}function yy({children:t,location:e}){return ry(Co(t),e)}function Co(t,e=[]){let s=[];return w.Children.forEach(t,(i,n)=>{if(!w.isValidElement(i))return;let l=[...e,n];if(i.type===w.Fragment){s.push.apply(s,Co(i.props.children,l));return}ne(i.type===Ri,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Co(i.props.children,l)),s.push(a)}),s}var xr="get",yr="application/x-www-form-urlencoded";function fl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function wy(t){return fl(t)&&t.tagName.toLowerCase()==="button"}function Ny(t){return fl(t)&&t.tagName.toLowerCase()==="form"}function jy(t){return fl(t)&&t.tagName.toLowerCase()==="input"}function by(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sy(t,e){return t.button===0&&(!e||e==="_self")&&!by(t)}var Hn=null;function ky(){if(Hn===null)try{new FormData(document.createElement("form"),0),Hn=!1}catch{Hn=!0}return Hn}var Cy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function la(t){return t!=null&&!Cy.has(t)?(et(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yr}"`),null):t}function _y(t,e){let s,i,n,l,a;if(Ny(t)){let o=t.getAttribute("action");i=o?Pt(o,e):null,s=t.getAttribute("method")||xr,n=la(t.getAttribute("enctype"))||yr,l=new FormData(t)}else if(wy(t)||jy(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(i=c?Pt(c,e):null,s=t.getAttribute("formmethod")||o.getAttribute("method")||xr,n=la(t.getAttribute("formenctype"))||la(o.getAttribute("enctype"))||yr,l=new FormData(o,t),!ky()){let{name:u,type:h,value:d}=t;if(h==="image"){let m=u?`${u}.`:"";l.append(`${m}x`,"0"),l.append(`${m}y`,"0")}else u&&l.append(u,d)}}else{if(fl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=xr,i=null,n=yr,a=t}return l&&n==="text/plain"&&(a=l,l=void 0),{action:i,method:s.toLowerCase(),encType:n,formData:l,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ey(t,e,s){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${s}`:e&&Pt(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function Ly(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function My(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ty(t,e,s){let i=await Promise.all(t.map(async n=>{let l=e.routes[n.route.id];if(l){let a=await Ly(l,s);return a.links?a.links():[]}return[]}));return zy(i.flat(1).filter(My).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Sh(t,e,s,i,n,l){let a=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,o=(c,u)=>{var h;return s[u].pathname!==c.pathname||((h=s[u].route.path)==null?void 0:h.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return l==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):l==="data"?e.filter((c,u)=>{var d;let h=i.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((d=s[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Py(t,e,{includeHydrateFallback:s}={}){return Ry(t.map(i=>{let n=e.routes[i.route.id];if(!n)return[];let l=[n.module];return n.clientActionModule&&(l=l.concat(n.clientActionModule)),n.clientLoaderModule&&(l=l.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(l=l.concat(n.hydrateFallbackModule)),n.imports&&(l=l.concat(n.imports)),l}).flat(1))}function Ry(t){return[...new Set(t)]}function $y(t){let e={},s=Object.keys(t).sort();for(let i of s)e[i]=t[i];return e}function zy(t,e){let s=new Set;return new Set(e),t.reduce((i,n)=>{let l=JSON.stringify($y(n));return s.has(l)||(s.add(l),i.push({key:l,link:n})),i},[])}function sp(){let t=w.useContext(di);return zc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Iy(){let t=w.useContext(dl);return zc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ic=w.createContext(void 0);Ic.displayName="FrameworkContext";function ip(){let t=w.useContext(Ic);return zc(t,"You must render this element inside a <HydratedRouter> element"),t}function Dy(t,e){let s=w.useContext(Ic),[i,n]=w.useState(!1),[l,a]=w.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,m=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=v=>{v.forEach(f=>{a(f.isIntersecting)})},j=new IntersectionObserver(g,{threshold:.5});return m.current&&j.observe(m.current),()=>{j.disconnect()}}},[t]),w.useEffect(()=>{if(i){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[i]);let y=()=>{n(!0)},x=()=>{n(!1),a(!1)};return s?t!=="intent"?[l,m,{}]:[l,m,{onFocus:_i(o,y),onBlur:_i(c,x),onMouseEnter:_i(u,y),onMouseLeave:_i(h,x),onTouchStart:_i(d,y)}]:[!1,m,{}]}function _i(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function Fy({page:t,...e}){let{router:s}=sp(),i=w.useMemo(()=>Am(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?w.createElement(Vy,{page:t,matches:i,...e}):null}function Oy(t){let{manifest:e,routeModules:s}=ip(),[i,n]=w.useState([]);return w.useEffect(()=>{let l=!1;return Ty(t,e,s).then(a=>{l||n(a)}),()=>{l=!0}},[t,e,s]),i}function Vy({page:t,matches:e,...s}){let i=rs(),{manifest:n,routeModules:l}=ip(),{basename:a}=sp(),{loaderData:o,matches:c}=Iy(),u=w.useMemo(()=>Sh(t,e,c,n,i,"data"),[t,e,c,n,i]),h=w.useMemo(()=>Sh(t,e,c,n,i,"assets"),[t,e,c,n,i]),d=w.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let x=new Set,g=!1;if(e.forEach(v=>{var p;let f=n.routes[v.route.id];!f||!f.hasLoader||(!u.some(N=>N.route.id===v.route.id)&&v.route.id in o&&((p=l[v.route.id])!=null&&p.shouldRevalidate)||f.hasClientLoader?g=!0:x.add(v.route.id))}),x.size===0)return[];let j=Ey(t,a,"data");return g&&x.size>0&&j.searchParams.set("_routes",e.filter(v=>x.has(v.route.id)).map(v=>v.route.id).join(",")),[j.pathname+j.search]},[a,o,i,n,u,e,t,l]),m=w.useMemo(()=>Py(h,n),[h,n]),y=Oy(h);return w.createElement(w.Fragment,null,d.map(x=>w.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...s})),m.map(x=>w.createElement("link",{key:x,rel:"modulepreload",href:x,...s})),y.map(({key:x,link:g})=>w.createElement("link",{key:x,nonce:s.nonce,...g})))}function By(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Ay=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ay&&(window.__reactRouterVersion="7.11.0")}catch{}function Wy({basename:t,children:e,unstable_useTransitions:s,window:i}){let n=w.useRef();n.current==null&&(n.current=bx({window:i,v5Compat:!0}));let l=n.current,[a,o]=w.useState({action:l.action,location:l.location}),c=w.useCallback(u=>{s===!1?o(u):w.startTransition(()=>o(u))},[s]);return w.useLayoutEffect(()=>l.listen(c),[l,c]),w.createElement(xy,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:l,unstable_useTransitions:s})}var np=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ml=w.forwardRef(function({onClick:e,discover:s="render",prefetch:i="none",relative:n,reloadDocument:l,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m,...y},x){let{basename:g,unstable_useTransitions:j}=w.useContext(Ke),v=typeof u=="string"&&np.test(u),f=Gm(u,g);u=f.to;let p=iy(u,{relative:n}),[N,b,C]=Dy(i,y),S=Gy(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:n,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:j});function _(R){e&&e(R),R.defaultPrevented||S(R)}let $=w.createElement("a",{...y,...C,href:f.absoluteURL||p,onClick:f.isExternal||l?e:_,ref:By(x,b),target:c,"data-discover":!v&&s==="render"?"true":void 0});return N&&!v?w.createElement(w.Fragment,null,$,w.createElement(Fy,{page:p})):$});ml.displayName="Link";var Uy=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:i="",end:n=!1,style:l,to:a,viewTransition:o,children:c,...u},h){let d=kn(a,{relative:u.relative}),m=rs(),y=w.useContext(dl),{navigator:x,basename:g}=w.useContext(Ke),j=y!=null&&qy(d)&&o===!0,v=x.encodeLocation?x.encodeLocation(d).pathname:d.pathname,f=m.pathname,p=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(f=f.toLowerCase(),p=p?p.toLowerCase():null,v=v.toLowerCase()),p&&g&&(p=Pt(p,g)||p);const N=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let b=f===v||!n&&f.startsWith(v)&&f.charAt(N)==="/",C=p!=null&&(p===v||!n&&p.startsWith(v)&&p.charAt(v.length)==="/"),S={isActive:b,isPending:C,isTransitioning:j},_=b?e:void 0,$;typeof i=="function"?$=i(S):$=[i,b?"active":null,C?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(S):l;return w.createElement(ml,{...u,"aria-current":_,className:$,ref:h,style:R,to:a,viewTransition:o},typeof c=="function"?c(S):c)});Uy.displayName="NavLink";var Hy=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:i,replace:n,state:l,method:a=xr,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m,...y},x)=>{let{unstable_useTransitions:g}=w.useContext(Ke),j=Jy(),v=Yy(o,{relative:u}),f=a.toLowerCase()==="get"?"get":"post",p=typeof o=="string"&&np.test(o),N=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let C=b.nativeEvent.submitter,S=(C==null?void 0:C.getAttribute("formmethod"))||a,_=()=>j(C||b.currentTarget,{fetcherKey:e,method:S,navigate:s,replace:n,state:l,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:m});g&&s!==!1?w.startTransition(()=>_()):_()};return w.createElement("form",{ref:x,method:f,action:v,onSubmit:i?c:N,...y,"data-discover":!p&&t==="render"?"true":void 0})});Hy.displayName="Form";function Ky(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rp(t){let e=w.useContext(di);return ne(e,Ky(t)),e}function Gy(t,{target:e,replace:s,state:i,preventScrollReset:n,relative:l,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=mi(),h=rs(),d=kn(t,{relative:l});return w.useCallback(m=>{if(Sy(m,e)){m.preventDefault();let y=s!==void 0?s:dn(h)===dn(d),x=()=>u(t,{replace:y,state:i,preventScrollReset:n,relative:l,viewTransition:a,unstable_defaultShouldRevalidate:o});c?w.startTransition(()=>x()):x()}},[h,u,d,s,i,e,t,n,l,a,o,c])}var Xy=0,Qy=()=>`__${String(++Xy)}__`;function Jy(){let{router:t}=rp("useSubmit"),{basename:e}=w.useContext(Ke),s=my(),i=t.fetch,n=t.navigate;return w.useCallback(async(l,a={})=>{let{action:o,method:c,encType:u,formData:h,body:d}=_y(l,e);if(a.navigate===!1){let m=a.fetcherKey||Qy();await i(m,s,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await n(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,n,e,s])}function Yy(t,{relative:e}={}){let{basename:s}=w.useContext(Ke),i=w.useContext(yt);ne(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),l={...kn(t||".",{relative:e})},a=rs();if(t==null){l.search=a.search;let o=new URLSearchParams(l.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();l.search=h?`?${h}`:""}}return(!t||t===".")&&n.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:_t([s,l.pathname])),dn(l)}function qy(t,{relative:e}={}){let s=w.useContext(Qm);ne(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=rp("useViewTransitionState"),n=kn(t,{relative:e});if(!s.isTransitioning)return!1;let l=Pt(s.currentLocation.pathname,i)||s.currentLocation.pathname,a=Pt(s.nextLocation.pathname,i)||s.nextLocation.pathname;return Hr(n.pathname,a)!=null||Hr(n.pathname,l)!=null}const lp=w.createContext(),It={DARK:"dark",LIGHT:"light",GLASS:"glass"};function Zy({children:t}){const[e,s]=w.useState(()=>{const a=localStorage.getItem("theme");return Object.values(It).includes(a)?a:It.DARK}),i=async a=>{var o;if(Object.values(It).includes(a)){s(a),localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a);const c=localStorage.getItem("access_token");if(c)try{const d=((o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${c}`}})).json()).profile)==null?void 0:o.preferences)||{};await fetch("/profile/me",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({preferences:{...d,theme:a}})})}catch(u){console.error("Failed to sync theme to backend:",u)}}},n=async()=>{var o,c;const a=localStorage.getItem("access_token");if(a)try{const d=(c=(o=(await(await fetch("/profile/me",{headers:{Authorization:`Bearer ${a}`}})).json()).profile)==null?void 0:o.preferences)==null?void 0:c.theme;d&&Object.values(It).includes(d)&&d!==e&&(s(d),localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d))}catch(u){console.error("Failed to fetch user theme:",u)}};w.useEffect(()=>{n()},[]),w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),w.useEffect(()=>{const a=o=>{o.key==="theme"&&Object.values(It).includes(o.newValue)&&s(o.newValue)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const l={theme:e,setTheme:i,syncThemeWithBackend:n,isDark:e===It.DARK,isLight:e===It.LIGHT,isGlass:e===It.GLASS};return r.jsx(lp.Provider,{value:l,children:t})}function ap(){const t=w.useContext(lp);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const op=w.createContext(null);function e0({children:t}){const[e,s]=w.useState([]),i=w.useCallback((u,h="info",d=5e3)=>{const m=Date.now()+Math.random(),y={id:m,message:u,type:h,duration:d};return s(x=>[...x,y]),d>0&&setTimeout(()=>{s(x=>x.filter(g=>g.id!==m))},d),m},[]),n=w.useCallback(u=>{s(h=>h.filter(d=>d.id!==u))},[]),l=w.useCallback(u=>i(u,"error",6e3),[i]),a=w.useCallback(u=>i(u,"success",4e3),[i]),o=w.useCallback(u=>i(u,"info",4e3),[i]),c=w.useCallback(u=>i(u,"warning",5e3),[i]);return r.jsxs(op.Provider,{value:{toasts:e,addToast:i,removeToast:n,showError:l,showSuccess:a,showInfo:o,showWarning:c},children:[t,r.jsx(t0,{toasts:e,removeToast:n})]})}function t0({toasts:t,removeToast:e}){return t.length===0?null:r.jsx("div",{className:"toast-container",children:t.map(s=>r.jsxs("div",{className:`toast toast-${s.type}`,children:[r.jsxs("div",{className:"toast-icon",children:[s.type==="error"&&"",s.type==="success"&&"",s.type==="warning"&&"",s.type==="info"&&""]}),r.jsx("div",{className:"toast-message",children:s.message}),r.jsx("button",{className:"toast-close",onClick:()=>e(s.id),children:""})]},s.id))})}function s0(){const t=w.useContext(op);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const i0=[{id:"dashboard",label:"Dashboard",icon:"",subsections:[]},{id:"products",label:"TradeFinder Products",icon:"",subsections:[{id:"option-clock",label:"Option Clock",icon:""},{id:"option-apex",label:"Option Apex",icon:""},{id:"market-pulse",label:"Market Pulse",icon:""},{id:"insider-strategy",label:"Insider Strategy",icon:""},{id:"sector-scope",label:"Sector Scope",icon:""},{id:"swing-spectrum",label:"Swing Spectrum",icon:""}]},{id:"trading",label:"Virtual Trading",icon:"",subsections:[{id:"trade",label:"Trade Stocks"},{id:"portfolio",label:"My Portfolio"},{id:"orders",label:"Order History"}]},{id:"real-trading",label:"Real Trading",icon:"",subsections:[{id:"fyers",label:"Fyers",icon:""}]},{id:"market",label:"Market Data",icon:"",subsections:[{id:"gainers",label:"Top Gainers"},{id:"losers",label:"Top Losers"},{id:"nifty-contributors",label:"Nifty Contributors"},{id:"fii-dii",label:"FII/DII Activity"},{id:"weekly",label:"Weekly Movers"},{id:"bulk",label:"Bulk Deals"}]},{id:"wallet",label:"Wallet",icon:"",subsections:[{id:"balance",label:"Balance"},{id:"transactions",label:"Transactions"}]},{id:"watchlist",label:"Watchlist",icon:"",subsections:[]},{id:"settings",label:"Settings",icon:"",subsections:[{id:"profile",label:"Profile"},{id:"preferences",label:"Preferences"}]}];function n0({activeSection:t,onSectionChange:e,collapsed:s,onToggleCollapse:i,mobileOpen:n,onMobileClose:l}){const[a,o]=w.useState(["products"]),c=h=>{o(d=>d.includes(h)?[]:[h])},u=(h,d=null)=>{if(h.subsections.length>0&&!d)c(h.id);else{const m=d?`${h.id}.${d.id}`:h.id;e(m),n&&l&&l()}};return r.jsxs("aside",{className:`sidebar ${s?"collapsed":""} ${n?"mobile-open":""}`,children:[r.jsxs("div",{className:"sidebar-header",children:[!s&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"sidebar-brand",children:[r.jsx("span",{className:"brand-icon",children:""}),r.jsx("span",{className:"brand-text",children:"StockServs"})]}),r.jsx("p",{className:"sidebar-tagline",children:"Smart Trading Intelligence"})]}),r.jsx("button",{className:"sidebar-toggle",onClick:i,children:s?"":""})]}),r.jsx("nav",{className:"sidebar-nav",children:i0.map(h=>{const d=a.includes(h.id),m=t===h.id||t.startsWith(`${h.id}.`),y=h.subsections.length>0;return r.jsxs("div",{className:`nav-group ${m?"active":""}`,children:[r.jsxs("button",{className:`nav-item ${m&&!y?"active":""}`,onClick:()=>u(h),title:s?h.label:void 0,children:[r.jsx("span",{className:"nav-icon",children:h.icon}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"nav-label",children:h.label}),y&&r.jsx("span",{className:`nav-arrow ${d?"expanded":""}`,children:""})]})]}),!s&&y&&d&&r.jsx("div",{className:"nav-subsections",children:h.subsections.map(x=>r.jsx("button",{className:`nav-subitem ${t===`${h.id}.${x.id}`?"active":""}`,onClick:()=>u(h,x),children:x.label},x.id))})]},h.id)})}),r.jsx("div",{className:"sidebar-footer",children:!s&&r.jsxs("div",{className:"sidebar-footer-content",children:[r.jsx("span",{className:"footer-label",children:"Paper Trading Mode"}),r.jsx("span",{className:"footer-badge",children:"Demo"})]})})]})}const cp=3e4,Kn=new Map,r0=async(t,e={},s=cp)=>{const i=new AbortController,n=setTimeout(()=>i.abort(),s);try{return await fetch(t,{...e,signal:i.signal})}finally{clearTimeout(n)}},Kr=async(t,e={})=>{const s=await r0(t,e,e.timeout||cp);if(!s.ok){let i=`Request failed (${s.status})`;try{i=(await s.json()).detail||i}catch{}const n=new Error(i);throw n.status=s.status,n}return s.json()},U=async(t,e={})=>{const s=localStorage.getItem("access_token");if(!s)throw new Error("Not authenticated");const i={...e.headers||{},Authorization:`Bearer ${s}`};return Kr(t,{...e,headers:i})},qt=async(t,e={},s=null)=>{if(Kn.has(t))return Kn.get(t);const i=(async()=>{var n,l;try{return await U(t,e)}catch(a){return!(a.name==="AbortError"||((n=a.message)==null?void 0:n.includes("aborted"))||((l=a.message)==null?void 0:l.includes("signal")))&&s&&typeof s=="function"&&s(a.message||"Request failed"),null}finally{Kn.delete(t)}})();return Kn.set(t,i),i},fn=()=>localStorage.getItem("access_token");function Dc(){return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}))}function ws(){const t=Dc(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();if(e===0||e===6)return!1;const n=s*60+i,l=9*60+15,a=15*60+30;return n>=l&&n<=a}function kh(){return ws()?"Open":"Closed"}function l0(){if(ws())return 0;const t=Dc(),e=t.getDay(),s=t.getHours(),i=t.getMinutes();let n=new Date(t);return e===6?n.setDate(n.getDate()+2):e===0?n.setDate(n.getDate()+1):s>=15&&(s>15||i>30)&&(n.setDate(n.getDate()+1),n.getDay()===6&&n.setDate(n.getDate()+2)),n.setHours(9,15,0,0),n.getTime()-t.getTime()}function a0(){if(!ws())return 0;const t=Dc(),e=new Date(t);return e.setHours(15,30,0,0),e.getTime()-t.getTime()}function Ch(t){if(t<=0)return"Now";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),i=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}h ${s}m`:s>0?`${s}m ${i}s`:`${i}s`}function _h(){if(ws()){const e=a0();return{event:"close",countdown:Ch(e),ms:e}}else{const e=l0();return{event:"open",countdown:Ch(e),ms:e}}}let Gn=null;class o0{constructor(){this.subscriptions=new Map,this.timers=new Map,this.inFlight=new Map,this.isPaused=!1,this.isTabVisible=!0,this.isOnline=typeof navigator<"u"?navigator.onLine:!0,this.listeners=new Set,typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isTabVisible=!document.hidden,this.handleStateChange()}),typeof window<"u"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.handleStateChange()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.handleStateChange()}))}handleStateChange(){this.shouldRefresh()?this.resumeAll():this.pauseAll(),this.notifyListeners()}shouldRefresh(){return!this.isPaused&&this.isTabVisible&&this.isOnline&&ws()}isMarketOpen(){return ws()}subscribe(e,s,i=1e3){return this.subscriptions.set(e,{callback:s,interval:i}),this.shouldRefresh()&&this.startTimer(e),this.notifyListeners(),e}unsubscribe(e){this.stopTimer(e),this.subscriptions.delete(e),this.notifyListeners()}startTimer(e){const s=this.subscriptions.get(e);if(!s)return;this.stopTimer(e);const i=setInterval(async()=>{if(!this.inFlight.get(e))if(this.shouldRefresh())try{this.inFlight.set(e,!0),await s.callback()}catch(n){console.error(`Error in auto-refresh callback for ${e}:`,n)}finally{this.inFlight.delete(e)}else this.stopTimer(e)},s.interval);this.timers.set(e,i)}stopTimer(e){const s=this.timers.get(e);s&&(clearInterval(s),this.timers.delete(e))}pauseAll(){this.timers.forEach((e,s)=>{clearInterval(e)}),this.timers.clear()}resumeAll(){this.shouldRefresh()&&this.subscriptions.forEach((e,s)=>{this.timers.has(s)||this.startTimer(s)})}togglePause(){this.isPaused=!this.isPaused,this.handleStateChange()}setPaused(e){this.isPaused!==e&&(this.isPaused=e,this.handleStateChange())}getPaused(){return this.isPaused}getOnline(){return this.isOnline}getActiveCount(){return this.timers.size}getTotalCount(){return this.subscriptions.size}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(s){console.error("Error in refresh manager listener:",s)}})}checkMarketHours(){this.handleStateChange()}}function up(){return Gn||(Gn=new o0,setInterval(()=>{Gn.checkMarketHours()},3e4)),Gn}function pi(t,e,s=1e3,i=!0){const n=up(),l=w.useRef(e),[a,o]=w.useState(Date.now());return w.useEffect(()=>{l.current=e},[e]),w.useEffect(()=>{if(!i)return;const c=()=>{l.current(),o(Date.now())};return n.subscribe(t,c,s),()=>{n.unsubscribe(t)}},[t,s,i]),{lastUpdate:a}}function c0(){const t=up(),[e,s]=w.useState({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()});w.useEffect(()=>{const l=()=>{s({isPaused:t.getPaused(),isOnline:t.getOnline(),isMarketOpen:t.isMarketOpen(),activeCount:t.getActiveCount(),totalCount:t.getTotalCount()})};t.addListener(l);const a=setInterval(l,6e4);return()=>{t.removeListener(l),clearInterval(a)}},[]);const i=w.useCallback(()=>{t.togglePause()},[]),n=w.useCallback(l=>{t.setPaused(l)},[]);return{isPaused:e.isPaused,isOnline:e.isOnline,isMarketOpen:e.isMarketOpen,activeCount:e.activeCount,totalCount:e.totalCount,togglePause:i,setPaused:n}}function vi(t){const[e,s]=w.useState("");return w.useEffect(()=>{const i=()=>{const l=Math.floor((Date.now()-t)/1e3);if(l<2)s("Just now");else if(l<60)s(`${l}s ago`);else if(l<3600){const a=Math.floor(l/60);s(`${a}m ago`)}else{const a=Math.floor(l/3600);s(`${a}h ago`)}};i();const n=setInterval(i,1e3);return()=>clearInterval(n)},[t]),e}const Xn=window.location.origin;function Eh({onNavigate:t}){var $,R,K,X,de,z,se,V;const{showError:e}=s0(),[s,i]=w.useState(null),[n,l]=w.useState(!0),[a,o]=w.useState({gainers:[],losers:[]}),[c,u]=w.useState(null),h=w.useRef({message:"",time:0}),{lastUpdate:d}=pi("dashboard-market",()=>g(),1e4),m=vi(d);w.useEffect(()=>{v()},[]);const y=L=>{const E=Date.now();h.current.message===L&&E-h.current.time<3e4||(h.current={message:L,time:E},e(L))},x=async()=>{const L=await qt(`${Xn}/portfolio/summary`,{},E=>{y(`Error fetching portfolio: ${E}`)});L&&i(L)},g=async()=>{const[L,E]=await Promise.all([qt(`${Xn}/nse_data/top-gainers`,{},D=>{y(`Error fetching NSE data for Top Gainers: ${D}`)}),qt(`${Xn}/nse_data/top-losers`,{},D=>{y(`Error fetching NSE data for Top Losers: ${D}`)})]);o({gainers:(L==null?void 0:L.top_gainers)||[],losers:(E==null?void 0:E.top_losers)||[]})},j=async()=>{try{const L=await U(`${Xn}/nse_data/fii-dii-activity`).catch(()=>null);L&&u(L)}catch(L){console.error("Failed to load FII/DII data:",L)}},v=async()=>{l(!0);try{await Promise.all([x(),g(),j()])}catch(L){console.error("Failed to load dashboard data:",L)}finally{l(!1)}},f=L=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(L||0),p=L=>{if(!L&&L!==0)return"N/A";const E=Number(L);return isNaN(E)?"N/A":`${(E/100).toFixed(0)} Cr`},N=(s==null?void 0:s.wallet_balance)??1e5,b=(s==null?void 0:s.total_invested)??0,C=(s==null?void 0:s.current_value)??0,S=(s==null?void 0:s.total_pnl)??0,_=b>0?(S/b*100).toFixed(2):0;return r.jsxs("div",{className:"dashboard-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Dashboard"})]}),r.jsx("button",{onClick:v,disabled:n,children:n?"Loading...":"Refresh"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-value",children:f(N)}),r.jsx("div",{className:"stat-card-label",children:"Available Balance"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-value",children:f(b)}),r.jsx("div",{className:"stat-card-label",children:"Total Invested"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-value",children:f(C)}),r.jsx("div",{className:"stat-card-label",children:"Current Value"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsxs("div",{className:"stat-card-header",children:[r.jsx("div",{className:"stat-card-icon green",children:""}),r.jsxs("span",{className:`stat-card-change ${S>=0?"positive":"negative"}`,children:[S>=0?"+":"",_,"%"]})]}),r.jsxs("div",{className:`stat-card-value ${S>=0?"positive":"negative"}`,children:[S>=0?"+":"",f(S)]}),r.jsx("div",{className:"stat-card-label",children:"Total P&L"})]})]}),r.jsxs("div",{className:"dashboard-actions",children:[r.jsx("h3",{children:"Quick Actions"}),r.jsxs("div",{className:"quick-actions-grid",children:[r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.trade"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Trade Stocks"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("trading.portfolio"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"View Portfolio"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.gainers"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Top Gainers"})]}),r.jsxs("button",{className:"quick-action-btn",onClick:()=>t("market.losers"),children:[r.jsx("span",{className:"quick-action-icon",children:""}),r.jsx("span",{children:"Top Losers"})]})]})]}),c&&r.jsxs("div",{className:"fii-dii-container",children:[r.jsxs("h3",{children:[" FII/DII Activity ",c.date&&r.jsxs("span",{className:"fii-dii-date",children:["(",c.date,")"]})]}),r.jsxs("div",{className:"fii-dii-row",children:[r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"FII (Foreign)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy"}),r.jsx("span",{className:"value positive",children:p(($=c.fii)==null?void 0:$.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell"}),r.jsx("span",{className:"value negative",children:p((R=c.fii)==null?void 0:R.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((K=c.fii)==null?void 0:K.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net"}),r.jsx("span",{className:"value",children:p((X=c.fii)==null?void 0:X.netValue)})]})]})]}),r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"DII (Domestic)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy"}),r.jsx("span",{className:"value positive",children:p((de=c.dii)==null?void 0:de.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell"}),r.jsx("span",{className:"value negative",children:p((z=c.dii)==null?void 0:z.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((se=c.dii)==null?void 0:se.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net"}),r.jsx("span",{className:"value",children:p((V=c.dii)==null?void 0:V.netValue)})]})]})]})]})]}),r.jsxs("div",{className:"last-updated",children:[r.jsxs("svg",{className:"last-updated-icon",fill:"currentColor",viewBox:"0 0 16 16",children:[r.jsx("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),r.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),r.jsxs("span",{className:"last-updated-text",children:["Market data updated ",m]})]}),r.jsxs("div",{className:"dashboard-market-grid",children:[r.jsxs("div",{className:"market-card",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("h3",{children:"Top Gainers"}),r.jsx("button",{className:"link-btn",onClick:()=>t("market.gainers"),children:"View All "})]}),r.jsxs("div",{className:"market-list",children:[a.gainers.slice(0,5).map((L,E)=>r.jsxs("div",{className:"market-item",children:[r.jsxs("div",{className:"market-item-info",children:[r.jsx("span",{className:"market-symbol",children:L.symbol}),r.jsxs("span",{className:"market-price",children:["",Number(L.lastPrice||0).toLocaleString()]})]}),r.jsxs("span",{className:"market-change positive",children:["+",Number(L.pChange||0).toFixed(2),"%"]})]},L.symbol||E)),a.gainers.length===0&&r.jsx("div",{className:"loading",children:"No data available"})]})]}),r.jsxs("div",{className:"market-card",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("h3",{children:"Top Losers"}),r.jsx("button",{className:"link-btn",onClick:()=>t("market.losers"),children:"View All "})]}),r.jsxs("div",{className:"market-list",children:[a.losers.slice(0,5).map((L,E)=>r.jsxs("div",{className:"market-item",children:[r.jsxs("div",{className:"market-item-info",children:[r.jsx("span",{className:"market-symbol",children:L.symbol}),r.jsxs("span",{className:"market-price",children:["",Number(L.lastPrice||0).toLocaleString()]})]}),r.jsxs("span",{className:"market-change negative",children:[Number(L.pChange||0).toFixed(2),"%"]})]},L.symbol||E)),a.losers.length===0&&r.jsx("div",{className:"loading",children:"No data available"})]})]})]})]})}function ee(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function ms(t,e){return t.width===e.width&&t.height===e.height}var u0=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){s._observers=s._observers.filter(function(n){return n!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function h0(t){return new u0(t)}var d0=function(){function t(e,s,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ee({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(l){return l},this._allowResizeObserver=(n=i==null?void 0:i.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ee({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ee(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;ms(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,i=ee(this._transformBitmapSize(e,this._canvasElementClientSize)),n=ms(this.bitmapSize,i)?null:i;s===null&&n===null||s!==null&&n!==null&&ms(s,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(s,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}m0().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=Lh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=h0(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var i=Lh(this._canvasElement);if(i!==null){var n=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:i.devicePixelRatio,l=this._canvasElement.getClientRects(),a=l[0]!==void 0?p0(l[0],n):ee({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var i=s.find(function(a){return a.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],l=ee({width:n.inlineSize,height:n.blockSize});e._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function f0(t,e){return new d0(t,e.transform,e.options)}function Lh(t){return t.ownerDocument.defaultView}function m0(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function p0(t,e){return ee({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var v0=function(){function t(e,s,i){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ns(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var n=t.canvasElement.getContext("2d",e);return n===null?null:new v0(n,s,i)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const g0={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},x0={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},y0={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},w0={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},N0={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},j0={color:"#26a69a",base:0},hp={color:"#2196f3"},dp={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Mh,Gr;function js(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function fp(t,e,s,i){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(s,e+n),t.lineTo(i,e+n),t.stroke()}function ts(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Te(t){if(t===void 0)throw new Error("Value is undefined");return t}function M(t){if(t===null)throw new Error("Value is null");return t}function Us(t){return M(Te(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Mh||(Mh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Gr||(Gr={}));const Th={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Ge(t){return t<0?0:t>255?255:Math.round(t)||0}function mp(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const b0=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,S0=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,k0=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,C0=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function mn(t){(t=t.toLowerCase())in Th&&(t=Th[t]);{const e=C0.exec(t)||k0.exec(t);if(e)return[Ge(parseInt(e[1],10)),Ge(parseInt(e[2],10)),Ge(parseInt(e[3],10)),mp(e.length<5?1:parseFloat(e[4]))]}{const e=S0.exec(t);if(e)return[Ge(parseInt(e[1],16)),Ge(parseInt(e[2],16)),Ge(parseInt(e[3],16)),1]}{const e=b0.exec(t);if(e)return[Ge(17*parseInt(e[1],16)),Ge(17*parseInt(e[2],16)),Ge(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function pp(t){return .199*t[0]+.687*t[1]+.114*t[2]}function pl(t){const e=mn(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:pp(e)>160?"black":"white"}}class he{constructor(){this.h=[]}l(e,s,i){const n={o:e,_:s,u:i===!0};this.h.push(n)}v(e){const s=this.h.findIndex(i=>e===i.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,i){const n=[...this.h];this.h=this.h.filter(l=>!l.u),n.forEach(l=>l.o(e,s,i))}M(){return this.h.length>0}S(){this.h=[]}}function ot(t,...e){for(const s of e)for(const i in s)s[i]!==void 0&&Object.prototype.hasOwnProperty.call(s,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof s[i]!="object"||t[i]===void 0||Array.isArray(s[i])?t[i]=s[i]:ot(t[i],s[i]));return t}function vt(t){return typeof t=="number"&&isFinite(t)}function pn(t){return typeof t=="number"&&t%1==0}function Cn(t){return typeof t=="string"}function Qn(t){return typeof t=="boolean"}function St(t){const e=t;if(!e||typeof e!="object")return e;let s,i,n;for(i in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(n=e[i],s[i]=n&&typeof n=="object"?St(n):n);return s}function _0(t){return t!==null}function vn(t){return t===null?void 0:t}const Fc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function li(t,e,s){return e===void 0&&(e=Fc),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class E0{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),i=this.H();return e.P===s&&e.D===i||(e.P=s,e.D=i,e.R=li(s,i),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Oc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,i){this.Y.forEach(n=>{n.X(e,s,i)})}}class ct{X(e,s,i){e.useBitmapCoordinateSpace(n=>this.K(n,s,i))}}class L0 extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const n=this.G.tt,l=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let u=n.to-1;u>=n.from;--u){const h=l.it[u],d=Math.round(h.nt*s)+a,m=h.st*i,y=c*i+a;e.moveTo(d,m),e.arc(d,m,y,0,2*Math.PI)}e.fill()};l.et>0&&(e.fillStyle=l.rt,o(l.ht+l.et)),e.fillStyle=l.lt,o(l.ht)}}function M0(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const T0={from:0,to:1};class P0{constructor(e,s){this.ut=new Oc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(M0),this.ct=this.dt.map(i=>{const n=new L0;return n.J(i),n}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),i=this.vt.xt(),n=this.F.St();s.forEach((l,a)=>{var o;const c=this.dt[a],u=l.kt(i);if(e||u===null||!l.yt())return void(c.tt=null);const h=M(l.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=l.Dt().Rt(u._t,h.Vt),c.rt=(o=u.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/l.Dt().At()),c.it[0].ot=i,c.it[0].nt=n.It(i),c.tt=T0})}}class R0 extends ct{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const l=this.zt.Lt.yt,a=this.zt.Et.yt;if(!l&&!a)return;const o=Math.round(this.zt.nt*i),c=Math.round(this.zt.st*n);e.lineCap="butt",l&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*i),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,js(e,this.zt.Lt.Nt),function(u,h,d,m){u.beginPath();const y=u.lineWidth%2?.5:0;u.moveTo(h+y,d),u.lineTo(h+y,m),u.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*n),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,js(e,this.zt.Et.Nt),fp(e,c,0,s.width))}}class $0{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new R0(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=M(this.jt.Ht()),i=s.$t().W().crosshair,n=this.Ft;if(i.mode===2)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=e&&this.jt.Ut(s),n.Lt.yt=e&&this.jt.qt(),n.Et.et=i.horzLine.width,n.Et.Nt=i.horzLine.style,n.Et.V=i.horzLine.color,n.Lt.et=i.vertLine.width,n.Lt.Nt=i.vertLine.style,n.Lt.V=i.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Zt()}}function z0(t,e,s,i,n,l){t.fillRect(e+l,s,i-2*l,l),t.fillRect(e+l,s+n-l,i-2*l,l),t.fillRect(e,s,l,n),t.fillRect(e+i-l,s,l,n)}function vl(t,e,s,i,n,l){t.save(),t.globalCompositeOperation="copy",t.fillStyle=l,t.fillRect(e,s,i,n),t.restore()}function Ph(t,e,s,i,n,l){t.beginPath(),t.roundRect?t.roundRect(e,s,i,n,l):(t.lineTo(e+i-l[1],s),l[1]!==0&&t.arcTo(e+i,s,e+i,s+l[1],l[1]),t.lineTo(e+i,s+n-l[2]),l[2]!==0&&t.arcTo(e+i,s+n,e+i-l[2],s+n,l[2]),t.lineTo(e+l[3],s+n),l[3]!==0&&t.arcTo(e,s+n,e,s+n-l[3],l[3]),t.lineTo(e,s+l[0]),l[0]!==0&&t.arcTo(e,s,e+l[0],s,l[0]))}function Rh(t,e,s,i,n,l,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===l)return Ph(t,e,s,i,n,o),t.fillStyle=l,t.fill(),void t.restore();const u=a/2;var h;Ph(t,e+u,s+u,i-a,n-a,(h=-u,o.map(d=>d===0?d:d+h))),l!=="transparent"&&(t.fillStyle=l,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function vp(t,e,s,i,n,l,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,n);o.addColorStop(0,l),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,i,n),t.restore()}class $h{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,i,n){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const h=this.Gt(c,s,i,n),d=h.Jt;return h.Qt?Rh(u,d.ti,d.ii,d.ni,d.si,a,d.ei,[d.ht,0,0,d.ht],a):Rh(u,d.ri,d.ii,d.ni,d.si,a,d.ei,[0,d.ht,d.ht,0],a),this.zt.hi&&(u.fillStyle=l,u.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(h.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=l,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,i,n){var l;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:h}=e,d=this.zt.hi||!this.zt.mi?s.T:0,m=this.zt.bi?s.C:0,y=s.L+this.Xt.wi,x=s.B+this.Xt.gi,g=s.A,j=s.I,v=this.zt.Kt,f=s.P,p=i.Mi(a,v),N=Math.ceil(i.xi(a,v)),b=f+y+x,C=s.C+g+j+N+d,S=Math.max(1,Math.floor(h));let _=Math.round(b*h);_%2!=S%2&&(_+=1);const $=m>0?Math.max(1,Math.floor(m*u)):0,R=Math.round(C*u),K=Math.round(d*u),X=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,de=Math.round(X*h)-Math.floor(.5*h),z=Math.floor(de+S/2-_/2),se=z+_,V=n==="right",L=V?c.width-m:m,E=V?o.width-$:$;let D,F,H;return V?(D=E-R,F=E-K,H=L-d-g-m):(D=E+R,F=E+K,H=L+d+g),{Qt:V,Jt:{ii:z,li:de,ci:se,ni:R,si:_,ht:2*u,ei:$,ti:D,ri:E,ai:F,oi:S,ui:o.width},di:{ii:z/h,ci:se/h,fi:H,pi:p}}}}class gl{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||$h)(this.Ci,this.yi),this.Ri=new(e||$h)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class I0 extends gl{constructor(e,s,i){super(),this.jt=e,this.Li=s,this.Ei=i}zi(e,s,i){if(e.yt=!1,this.jt.W().mode===2)return;const n=this.jt.W().horzLine;if(!n.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const a=pl(n.labelBackgroundColor);i.t=a.t,e.V=a.i;const o=2/12*this.Li.P();i.wi=o,i.gi=o;const c=this.Ei(this.Li);i.ki=c.ki,e.Kt=this.Li.Fi(c._t,l),e.yt=!0}}const D0=/[1-9]/g;class gp{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=e.useMediaCoordinateSpace(({context:m})=>(m.font=s.R,Math.round(s.Wi.xi(m,M(this.zt).Kt,D0))));if(i<=0)return;const n=s.ji,l=i+2*n,a=l/2,o=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+l>o&&(c-=Math.abs(o-(u+l)),u=Math.floor(c-a)+.5);const h=u+l,d=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:m,horizontalPixelRatio:y,verticalPixelRatio:x})=>{const g=M(this.zt);m.fillStyle=g.t;const j=Math.round(u*y),v=Math.round(0*x),f=Math.round(h*y),p=Math.round(d*x),N=Math.round(2*y);if(m.beginPath(),m.moveTo(j,v),m.lineTo(j,p-N),m.arcTo(j,p,j+N,p,N),m.lineTo(f-N,p),m.arcTo(f,p,f,p-N,N),m.lineTo(f,v),m.fill(),g.hi){const b=Math.round(g.ki*y),C=v,S=Math.round((C+s.T)*x);m.fillStyle=g.V;const _=Math.max(1,Math.floor(y)),$=Math.floor(.5*y);m.fillRect(b-$,C,_,S-C)}}),e.useMediaCoordinateSpace(({context:m})=>{const y=M(this.zt),x=0+s.C+s.T+s.L+s.P/2;m.font=s.R,m.textAlign="left",m.textBaseline="middle",m.fillStyle=y.V;const g=s.Wi.Mi(m,"Apr0");m.translate(u+n,x+g),m.fillText(y.Kt,0,0)})}}class F0{constructor(e,s,i){this.ft=!0,this.Wt=new gp,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const i=this.$i.St();if(i.Ni())return;e.Hi=i.Hi();const n=this.Ei();if(n===null)return;e.ki=n.ki;const l=i.Ui(this.vt.xt());e.Kt=i.qi(M(l)),e.yt=!0;const a=pl(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=i.W().ticksVisible}}class Vc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Wi;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Wi||(Wi={}));class O0 extends Vc{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new P0(e,this),this.fn=((n,l)=>a=>{const o=l(),c=n();if(a===M(this.tn).vn())return{_t:c,ki:o};{const u=M(a.Ct());return{_t:a.pn(o,u),ki:o}}})(()=>this.nn,()=>this.an);const i=((n,l)=>()=>{const a=this.$i.St().mn(n()),o=l();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new F0(this,e,i),this.wn=new $0(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,i){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const i=[];return this.tn===e&&i.push(this.Dn(this.rn,s,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,i){this.Bn(e,s,i)&&this.Vn()}Bn(e,s,i){const n=this.ln,l=this.an,a=this.nn,o=this.sn,c=this.tn,u=this.On(i);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=i;const h=u!==null?u.Ct():null;return u!==null&&h!==null?(this.nn=s,this.an=u.Rt(s,h)):(this.nn=NaN,this.an=NaN),n!==this.ln||l!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(i=>i.In().An()).filter(_0),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,i){let n=e.get(s);return n===void 0&&(n=new I0(this,s,i),e.set(s,n)),n}}function xl(t){return t==="left"||t==="right"}class Ne{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const i=function(n,l){return n===void 0?l:{Fn:Math.max(n.Fn,l.Fn),Wn:n.Wn||l.Wn}}(this.zn.get(e),s);this.zn.set(e,i)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,i)=>{this.Nn(i,s)})}static ss(){return new Ne(2)}static es(){return new Ne(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const zh=".";function kt(t,e){if(!vt(t))return"n/a";if(!pn(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class yl{constructor(e,s){if(s||(s=1),vt(e)&&pn(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let i=Math.floor(e),n="";const l=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-i*s).toFixed(this._s);a>=s&&(a-=s,i+=1),n=zh+kt(+a.toFixed(this._s)*this.rs,l)}else i=Math.round(i*s)/s,l>0&&(n=zh+kt(0,l));return i.toFixed(0)+n}}class xp extends yl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class V0{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const i=Math.pow(10,this.us);return s=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(n,l)=>l)}}function yp(t,e,s,i,n,l,a){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[i.from];let d=l(t,h),m=h;if(i.to-i.from<2){const y=n/2;o.beginPath();const x={nt:h.nt-y,st:h.st},g={nt:h.nt+y,st:h.st};o.moveTo(x.nt*c,x.st*u),o.lineTo(g.nt*c,g.st*u),a(t,d,x,g)}else{const y=(g,j)=>{a(t,d,m,j),o.beginPath(),d=g,m=j};let x=m;o.beginPath(),o.moveTo(h.nt*c,h.st*u);for(let g=i.from+1;g<i.to;++g){x=e[g];const j=l(t,x);switch(s){case 0:o.lineTo(x.nt*c,x.st*u);break;case 1:o.lineTo(x.nt*c,e[g-1].st*u),j!==d&&(y(j,x),o.lineTo(x.nt*c,e[g-1].st*u)),o.lineTo(x.nt*c,x.st*u);break;case 2:{const[v,f]=B0(e,g-1,g);o.bezierCurveTo(v.nt*c,v.st*u,f.nt*c,f.st*u,x.nt*c,x.st*u);break}}s!==1&&j!==d&&(y(j,x),o.moveTo(x.nt*c,x.st*u))}(m!==x||m===x&&s===1)&&a(t,d,m,x)}}const Ih=6;function aa(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Dh(t,e){return{nt:t.nt/e,st:t.st/e}}function B0(t,e,s){const i=Math.max(0,e-1),n=Math.min(t.length-1,s+1);var l,a;return[(l=t[e],a=Dh(aa(t[s],t[i]),Ih),{nt:l.nt+a.nt,st:l.st+a.st}),aa(t[s],Dh(aa(t[n],t[e]),Ih))]}function A0(t,e,s,i,n){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=e;l.lineTo(n.nt*a,t*o),l.lineTo(i.nt*a,t*o),l.closePath(),l.fillStyle=s,l.fill()}class wp extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:i,tt:n,ds:l,et:a,Nt:o,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(n===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=a,js(h,o),h.lineWidth=1,yp(e,i,c,n,l,this.bs.bind(this),A0.bind(null,u))}}function _o(t,e,s){return Math.min(Math.max(t,e),s)}function Jn(t,e,s){return e-t<=s}function Np(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Bc{ws(e,s){const i=this.gs,{Ms:n,xs:l,Ss:a,ks:o,ys:c,vs:u}=s;if(this.Cs===void 0||i===void 0||i.Ms!==n||i.xs!==l||i.Ss!==a||i.ks!==o||i.vs!==u||i.ys!==c){const h=e.context.createLinearGradient(0,0,0,c);if(h.addColorStop(0,n),u!=null){const d=_o(u*e.verticalPixelRatio/c,0,1);h.addColorStop(d,l),h.addColorStop(d,a)}h.addColorStop(1,o),this.Cs=h,this.gs=s}return this.Cs}}class W0 extends wp{constructor(){super(...arguments),this.Ts=new Bc}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function U0(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class jp extends ct{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:i,ds:n,fs:l,et:a,Nt:o,Ds:c}=this.G;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,js(u,o),u.lineJoin="round";const h=this.Vs.bind(this);l!==void 0&&yp(e,s,l,i,n,h,U0),c&&function(d,m,y,x,g){const{horizontalPixelRatio:j,verticalPixelRatio:v,context:f}=d;let p=null;const N=Math.max(1,Math.floor(j))%2/2,b=y*v+N;for(let C=x.to-1;C>=x.from;--C){const S=m[C];if(S){const _=g(d,S);_!==p&&(f.beginPath(),p!==null&&f.fill(),f.fillStyle=_,p=_);const $=Math.round(S.nt*j)+N,R=S.st*v;f.moveTo($,R),f.arc($,R,b,0,2*Math.PI)}}f.fill()}(e,s,c,i,h)}}class bp extends jp{Vs(e,s){return s.lt}}function Sp(t,e,s,i,n=0,l=e.length){let a=l-n;for(;0<a;){const o=a>>1,c=n+o;i(e[c],s)===t?(n=c+1,a-=o+1):a=o}return n}const _n=Sp.bind(null,!0),kp=Sp.bind(null,!1);function H0(t,e){return t.ot<e}function K0(t,e){return e<t.ot}function Cp(t,e,s){const i=e.Os(),n=e.ui(),l=_n(t,i,H0),a=kp(t,n,K0);if(!s)return{from:l,to:a};let o=l,c=a;return l>0&&l<t.length&&t[l].ot>=i&&(o=l-1),a>0&&a<t.length&&t[a-1].ot<=n&&(c=a+1),{from:o,to:c}}class Ac{constructor(e,s,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=i}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const i=s.Xs();if(i===null||this.Es.In().Ks()===0)return;const n=this.Es.Ct();n!==null&&(this.Ls=Cp(this.zs,i,this.Fs),this.Gs(e,s,n.Vt),this.Js())}}class wl extends Ac{constructor(e,s){super(e,s,!0)}Gs(e,s,i){s.Qs(this.zs,vn(this.Ls)),e.te(this.zs,i,vn(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const i=s.Vt[3];return this.se(s.ee,i,e)})}}class G0 extends wl{constructor(e,s){super(e,s),this.js=new Oc,this.re=new W0,this.he=new bp,this.js.Z([this.re,this.he])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class X0 extends ct{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let n=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];n!==o.ce&&(e.fillStyle=o.ce,n=o.ce);const c=Math.floor(.5*this.oe),u=Math.round(o.nt*s),h=u-c,d=this.oe,m=h+d-1,y=Math.min(o.de,o.fe),x=Math.max(o.de,o.fe),g=Math.round(y*i)-c,j=Math.round(x*i)+c,v=Math.max(j-g,this.oe);e.fillRect(h,g,d,v);const f=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const C=u-f;let S=Math.max(g,Math.round(o.pe*i)-c),_=S+d-1;_>g+v-1&&(_=g+v-1,S=_-d+1),e.fillRect(C,S,h-C,_-S+1)}const p=u+f;let N=Math.max(g,Math.round(o.me*i)-c),b=N+d-1;b>g+v-1&&(b=g+v-1,N=b-d+1),e.fillRect(m+1,N,p-m,b-N+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(i,n){return Math.floor(.3*i*n)}(M(this.zt).le,e)))}}class _p extends Ac{constructor(e,s){super(e,s,!1)}Gs(e,s,i){s.Qs(this.zs,vn(this.Ls)),e.be(this.zs,i,vn(this.Ls))}we(e,s,i){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class Q0 extends _p{constructor(){super(...arguments),this.js=new X0}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class J0 extends wp{constructor(){super(...arguments),this.Ts=new Bc}bs(e,s){const i=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:i.vs})}}class Y0 extends jp{constructor(){super(...arguments),this.Pe=new Bc}Vs(e,s){const i=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:i.vs})}}class q0 extends wl{constructor(e,s){super(e,s),this.js=new Oc,this.Ve=new J0,this.Oe=new Y0,this.js.Z([this.Ve,this.Oe])}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),i=this.Es.Dt().Rt(s.baseValue.price,e.Vt),n=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:i,ps:!1,tt:this.Ls,ds:n}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:n})}}class Z0 extends ct{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(l,a){if(l>=2.5&&l<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),c=Math.floor(l*o*a),u=Math.floor(l*a),h=Math.min(c,u);return Math.max(Math.floor(a),h)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(e,i,this.zt.tt),this.zt._i&&this.Ie(e,i,this.zt.tt);const n=this.ze(s);(!this.zt._i||this.ae>2*n)&&this.Le(e,i,this.zt.tt)}Ae(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(l),Math.floor(this.zt.le*l));c=Math.max(Math.floor(l),Math.min(c,this.ae));const u=Math.floor(.5*c);let h=null;for(let d=i.from;d<i.to;d++){const m=s[d];m.Ee!==o&&(n.fillStyle=m.Ee,o=m.Ee);const y=Math.round(Math.min(m.pe,m.me)*a),x=Math.round(Math.max(m.pe,m.me)*a),g=Math.round(m.de*a),j=Math.round(m.fe*a);let v=Math.round(l*m.nt)-u;const f=v+c-1;h!==null&&(v=Math.max(h+1,v),v=Math.min(v,f));const p=f-v+1;n.fillRect(v,g,p,y-g),n.fillRect(v,x+1,p,j-x),h=f}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(e),s);return this.ae<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}Ie(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);let u=null;for(let h=i.from;h<i.to;h++){const d=s[h];d.Ne!==o&&(n.fillStyle=d.Ne,o=d.Ne);let m=Math.round(d.nt*l)-Math.floor(.5*this.ae);const y=m+this.ae-1,x=Math.round(Math.min(d.pe,d.me)*a),g=Math.round(Math.max(d.pe,d.me)*a);if(u!==null&&(m=Math.max(u+1,m),m=Math.min(m,y)),this.zt.le*l>2*c)z0(n,m,x,y-m+1,g-x+1,c);else{const j=y-m+1;n.fillRect(m,x,j,g-x+1)}u=y}}Le(e,s,i){if(this.zt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);for(let u=i.from;u<i.to;u++){const h=s[u];let d=Math.round(Math.min(h.pe,h.me)*a),m=Math.round(Math.max(h.pe,h.me)*a),y=Math.round(h.nt*l)-Math.floor(.5*this.ae),x=y+this.ae-1;if(h.ce!==o){const g=h.ce;n.fillStyle=g,o=g}this.zt._i&&(y+=c,d+=c,x-=c,m-=c),d>m||n.fillRect(y,d,x-y+1,m-d+1)}}}class ew extends _p{constructor(){super(...arguments),this.js=new Z0}se(e,s,i){return Object.assign(Object.assign({},this.we(e,s,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class tw{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,i){this.Fe.draw(e,this.Li,s,i)}}class oa extends Ac{constructor(e,s,i){super(e,s,!1),this.wn=i,this.js=new tw(this.wn.renderer(),n=>{const l=e.Ct();return l===null?null:e.Dt().Rt(n,l.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,vn(this.Ls))}Js(){this.wn.update({bars:this.zs.map(sw),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function sw(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class iw extends ct{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const n=Math.max(1,Math.floor(i)),l=Math.round(this.zt.Ye*i)-Math.floor(n/2),a=l+n;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],u=this.Ue[o-this.zt.tt.from],h=Math.round(c.st*i);let d,m;e.fillStyle=c.ce,h<=l?(d=h,m=a):(d=l,m=h-Math.floor(n/2)+n),e.fillRect(u.Os,d,u.ui-u.Os+1,m-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.zt.it[l],o=Math.round(a.nt*e);let c,u;if(i%2){const h=(i-1)/2;c=o-h,u=o+h}else{const h=i/2;c=o-h,u=o+h-1}this.Ue[l-this.zt.tt.from]={Os:c,ui:u,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from],o=this.Ue[l-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let n=Math.ceil(this.zt.le*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;n=Math.min(o,n)}if(s>0&&n<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui-a.Os+1>n&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class nw extends wl{constructor(){super(...arguments),this.js=new iw}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,M(this.Es.Ct()).Vt)};this.js.J(e)}}class rw extends wl{constructor(){super(...arguments),this.js=new bp}se(e,s,i){return Object.assign(Object.assign({},this.ie(e,s)),i.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const lw=/[2-9]/g;class gn{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,i){return this.sr(e,s,i).width}Mi(e,s,i){const n=this.sr(e,s,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}sr(e,s,i){const n=i||lw,l=String(s).replace(n,"0");if(this.tr.has(l))return Te(this.tr.get(l)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(l);return e.restore(),a.width===0&&s.length||(this.tr.set(l,{er:a,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),a}}class aw{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,i){this.hr=e,this.k=s,this.lr=i}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class Ep{constructor(e,s,i){this.ur=e,this.ar=new gn(50),this.cr=s,this.F=i,this.j=-1,this.Wt=new aw(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const i=e.mr(s);if(i==="overlay")return null;const n=this.F.br();return n.P!==this.j&&(this.j=n.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),n,i),this.Wt}}class ow extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:n,et:l,gr:a}=this.zt;return s>=n-l-7&&s<=n+l+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*n);l<0||l>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*i),js(e,this.zt.Nt),fp(e,l,0,s.width))}}class Wc{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new ow,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class cw extends Wc{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const n=this.Es.Ct();n!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(n.Vt,n.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class uw extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i}){const n=this.zt;if(n===null)return;const l=Math.max(1,Math.floor(s)),a=l%2/2,o=Math.round(n.Xe.x*s)+a,c=n.Xe.y*i;e.fillStyle=n.Tr,e.beginPath();const u=Math.max(2,1.5*n.Pr)*s;e.arc(o,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=n.Rr,e.beginPath(),e.arc(o,c,n.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=l,e.strokeStyle=n.Dr,e.beginPath(),e.arc(o,c,n.ht*s+l/2,0,2*Math.PI,!1),e.stroke()}}const hw=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Fh(t,e,s,i){return function(n,l){if(n==="transparent")return n;const a=mn(n),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${l*o})`}(t,s+(i-s)*e)}function Oh(t,e){const s=t%2600/2600;let i;for(const c of hw)if(s>=c.Vr&&s<=c.Or){i=c;break}ts(i!==void 0,"Last price animation internal logic error");const n=(s-i.Vr)/(i.Or-i.Vr);return{Rr:Fh(e,n,i.Ir,i.zr),Dr:Fh(e,n,i.Lr,i.Er),ht:(l=n,a=i.Br,o=i.Ar,a+(o-a)*l)};var l,a,o}class dw{constructor(e){this.Wt=new uw,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),i=this.jr.Ct();if(s===null||i===null)return;const n=this.jr.Zr(!0);if(n.Xr||!s.Kr(n.ee))return;const l={x:e.It(n.ee),y:this.jr.Dt().Rt(n._t,i.Vt)},a=n.V,o=this.jr.W().lineWidth,c=Oh(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:l})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Oh(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ui(t,e){return Np(Math.min(Math.max(t,12),30)*e)}function xn(t,e){switch(t){case"arrowDown":case"arrowUp":return Ui(e,1);case"circle":return Ui(e,.8);case"square":return Ui(e,.7)}}function Lp(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Ui(t,1))}function Vh(t){return Math.max(Ui(t,.1),3)}function Bh(t,e,s){return e?t:s?Math.ceil(t/2):0}function Mp(t,e,s,i,n){const l=xn("square",s),a=(l-1)/2,o=t-a,c=e-a;return i>=o&&i<=o+l&&n>=c&&n<=c+l}function Ah(t,e,s,i){const n=(xn("arrowUp",i)-1)/2*s.Jr,l=(Np(i/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st-n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st+n),e.lineTo(s.nt-l,s.st+n),e.lineTo(s.nt-l,s.st)):(e.moveTo(s.nt-n,s.st),e.lineTo(s.nt,s.st+n),e.lineTo(s.nt+n,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st-n),e.lineTo(s.nt-l,s.st-n),e.lineTo(s.nt-l,s.st)),e.fill()}function fw(t,e,s,i,n,l){return Mp(e,s,i,n,l)}class mw extends ct{constructor(){super(...arguments),this.zt=null,this.ar=new gn,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=li(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const n=this.zt.it[i];if(vw(n,e,s))return{Mr:n.th,gr:n.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:i},n,l){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),pw(o,e,s,i)}}}}function pw(t,e,s,i){e.fillStyle=t.V,t.Kt!==void 0&&function(n,l,a,o,c,u){n.save(),n.scale(c,u),n.fillText(l,a,o),n.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,i),function(n,l,a){if(n.Ks!==0){switch(n.nh){case"arrowDown":return void Ah(!1,l,a,n.Ks);case"arrowUp":return void Ah(!0,l,a,n.Ks);case"circle":return void function(o,c,u){const h=(xn("circle",u)-1)/2;o.beginPath(),o.arc(c.nt,c.st,h*c.Jr,0,2*Math.PI,!1),o.fill()}(l,a,n.Ks);case"square":return void function(o,c,u){const h=xn("square",u),d=(h-1)*c.Jr/2,m=c.nt-d,y=c.st-d;o.fillRect(m,y,h*c.Jr,h*c.Jr)}(l,a,n.Ks)}n.nh}}(t,e,function(n,l,a){const o=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(n.nt*l)+o,st:n.st*a,Jr:l}}(t,s,i))}function vw(t,e,s){return!(t.Kt===void 0||!function(i,n,l,a,o,c){const u=a/2;return o>=i&&o<=i+l&&c>=n-u&&c<=n+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(i,n,l){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return fw(0,i.nt,i.st,i.Ks,n,l);case"circle":return function(a,o,c,u,h){const d=2+xn("circle",c)/2,m=a-u,y=o-h;return Math.sqrt(m*m+y*y)<=d}(i.nt,i.st,i.Ks,n,l);case"square":return Mp(i.nt,i.st,i.Ks,n,l)}}(t,e,s)}function gw(t,e,s,i,n,l,a,o,c){const u=vt(s)?s:s.Se,h=vt(s)?s:s.Me,d=vt(s)?s:s.xe,m=vt(e.size)?Math.max(e.size,0):1,y=Lp(o.le())*m,x=y/2;switch(t.Ks=y,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+x+l+.6*n));case"aboveBar":return t.st=a.Rt(h,c)-x-i.sh,t.Kt!==void 0&&(t.Kt.st=t.st-x-.6*n,i.sh+=1.2*n),void(i.sh+=y+l);case"belowBar":return t.st=a.Rt(d,c)+x+i.eh,t.Kt!==void 0&&(t.Kt.st=t.st+x+l+.6*n,i.eh+=1.2*n),void(i.eh+=y+l)}e.position}class xw{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new mw,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=Vh(e),i=1.5*Lp(e)+2*s,n=this.fh();this.ah={above:Bh(i,n.aboveBar,n.inBar),below:Bh(i,n.belowBar,n.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const n=this.$i.W().layout;this.zt.tt=null;const l=s.Xs();if(l===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=Vh(s.le()),u={sh:c,eh:c};this.zt.tt=Cp(this.zt.it,l,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=i[h];d.time!==o&&(u.sh=c,u.eh=c,o=d.time);const m=this.zt.it[h];m.nt=s.It(d.time),d.text!==void 0&&d.text.length>0&&(m.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const y=this.jr.ph(d.time);y!==null&&gw(m,d,y,u,n.fontSize,c,e,s,a.Vt)}this.ft=!1}}class yw extends Wc{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(s.priceLineSource===0);i.Xr||(e.yt=!0,e.st=i.ki,e.V=this.Es.mh(i.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class ww extends gl{constructor(e){super(),this.jt=e}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.jt;if(!n.yt())return;const l=n.W(),a=l.lastValueVisible,o=n.bh()!=="",c=l.seriesLastValueMode===0,u=n.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(u,a,o,c),s.yt=s.Kt.length>0);const h=n.mh(u.V),d=pl(h);i.t=d.t,i.ki=u.ki,s.Ot=n.$t().Bt(u.ki/n.Dt().At()),e.Ot=h,e.V=d.i,s.V=d.i}gh(e,s,i,n){let l="";const a=this.jt.bh();return i&&a.length!==0&&(l+=`${a} `),s&&n&&(l+=this.jt.Dt().Mh()?e.xh:e.Sh),l.trim()}wh(e,s,i){return s?i?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Wh(t,e,s,i){const n=Number.isFinite(e),l=Number.isFinite(s);return n&&l?t(e,s):n||l?n?e:s:i}class Oe{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Oe(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Oe(Wh(Math.min,this.Ph(),e.Ph(),-1/0),Wh(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!vt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let i=this.yh-s,n=this.kh-s;i*=e,n*=e,this.yh=s+i,this.kh=s+n}Oh(e){vt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Oe(e.minValue,e.maxValue)}}class Xr{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Xr(Oe.Ah(e.priceRange),e.margins)}}class Nw extends Wc{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const i=this.Nh.Fh();i!==null&&(e.yt=!0,e.st=i,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class jw extends gl{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,i){e.yt=!1,s.yt=!1;const n=this.Nh.W(),l=n.axisLabelVisible,a=n.title!=="",o=this.jr;if(!l||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=n.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(n.price),e.yt=!0;const u=pl(n.axisLabelColor||n.color);i.t=u.t;const h=n.axisLabelTextColor||u.i;e.V=h,s.V=h,i.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class bw{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Nw(e,this),this.ur=new jw(e,this),this.Hh=new Ep(this.ur,e,e.$t())}$h(e){ot(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const i=e.Ct();return i===null?null:s.Rt(this.cn.price,i.Vt)}}class Sw extends Vc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const kw={Bar:(t,e,s,i)=>{var n;const l=e.upColor,a=e.downColor,o=M(t(s,i)),c=Us(o.Vt[0])<=Us(o.Vt[3]);return{ce:(n=o.V)!==null&&n!==void 0?n:c?l:a}},Candlestick:(t,e,s,i)=>{var n,l,a;const o=e.upColor,c=e.downColor,u=e.borderUpColor,h=e.borderDownColor,d=e.wickUpColor,m=e.wickDownColor,y=M(t(s,i)),x=Us(y.Vt[0])<=Us(y.Vt[3]);return{ce:(n=y.V)!==null&&n!==void 0?n:x?o:c,Ne:(l=y.Ot)!==null&&l!==void 0?l:x?u:h,Ee:(a=y.Xh)!==null&&a!==void 0?a:x?d:m}},Custom:(t,e,s,i)=>{var n;return{ce:(n=M(t(s,i)).V)!==null&&n!==void 0?n:e.color}},Area:(t,e,s,i)=>{var n,l,a,o;const c=M(t(s,i));return{ce:(n=c.lt)!==null&&n!==void 0?n:e.lineColor,lt:(l=c.lt)!==null&&l!==void 0?l:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,i)=>{var n,l,a,o,c,u;const h=M(t(s,i));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(n=h.Re)!==null&&n!==void 0?n:e.topLineColor,De:(l=h.De)!==null&&l!==void 0?l:e.bottomLineColor,ke:(a=h.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=h.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=h.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=h.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,i)=>{var n,l;const a=M(t(s,i));return{ce:(n=a.V)!==null&&n!==void 0?n:e.color,lt:(l=a.V)!==null&&l!==void 0?l:e.color}},Histogram:(t,e,s,i)=>{var n;return{ce:(n=M(t(s,i)).V)!==null&&n!==void 0?n:e.color}}};class Cw{constructor(e){this.Kh=(s,i)=>i!==void 0?i.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=kw[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var Uh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Uh||(Uh={}));const Dt=30;class _w{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const i=this.hl(e,s);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(e,s,i){if(this.Ni())return null;let n=null;for(const l of i)n=Yn(n,this._l(e,s,l));return n}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const i=this.ul(e);if(i===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return i}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return _n(this.tl,e,(s,i)=>s.ee<i)}vl(e){return kp(this.tl,e,(s,i)=>s.ee>i)}pl(e,s,i){let n=null;for(let l=e;l<s;l++){const a=this.tl[l].Vt[i];Number.isNaN(a)||(n===null?n={ml:a,bl:a}:(a<n.ml&&(n.ml=a),a>n.bl&&(n.bl=a)))}return n}_l(e,s,i){if(this.Ni())return null;let n=null;const l=M(this.el()),a=M(this.An()),o=Math.max(e,l),c=Math.min(s,a),u=Math.ceil(o/Dt)*Dt,h=Math.max(u,Math.floor(c/Dt)*Dt);{const m=this.fl(o),y=this.vl(Math.min(c,u,s));n=Yn(n,this.pl(m,y,i))}let d=this.il.get(i);d===void 0&&(d=new Map,this.il.set(i,d));for(let m=Math.max(u+1,o);m<h;m+=Dt){const y=Math.floor(m/Dt);let x=d.get(y);if(x===void 0){const g=this.fl(y*Dt),j=this.vl((y+1)*Dt-1);x=this.pl(g,j,i),d.set(y,x)}n=Yn(n,x)}{const m=this.fl(h),y=this.vl(c);n=Yn(n,this.pl(m,y,i))}return n}}function Yn(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class Ew{constructor(e){this.wl=e}X(e,s,i){this.wl.draw(e)}gl(e,s,i){var n,l;(l=(n=this.wl).drawBackground)===null||l===void 0||l.call(n,e)}}class ca{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const i=new Ew(s);return this.tr={Ml:s,xl:i},i}Sl(){var e,s,i;return(i=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:"normal"}}function Tp(t){var e,s,i,n,l;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(i=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||i===void 0||i,hi:(l=(n=t.tickVisible)===null||n===void 0?void 0:n.call(t))===null||l===void 0||l}}class Lw{constructor(e,s){this.Wt=new gp,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Tp(this.kl))),this.Wt}}class Mw extends gl{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,i){const n=Tp(this.kl);i.t=n.t,e.V=n.V;const l=2/12*this.Li.P();i.wi=l,i.gi=l,i.ki=n.ki,i.Si=n.Si,e.Kt=n.Kt,e.yt=n.yt,e.hi=n.hi}}class Tw{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,i,n;const l=(i=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Cl)===null||n===void 0?void 0:n.Ml)===l)return this.Cl.xl;const a=l.map(o=>new ca(o));return this.Cl={Ml:l,xl:a},a}Qi(){var e,s,i,n;const l=(i=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Tl)===null||n===void 0?void 0:n.Ml)===l)return this.Tl.xl;const a=this.jr.$t().St(),o=l.map(c=>new Lw(c,a));return this.Tl={Ml:l,xl:o},o}Rn(){var e,s,i,n;const l=(i=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Pl)===null||n===void 0?void 0:n.Ml)===l)return this.Pl.xl;const a=this.jr.Dt(),o=l.map(c=>new Mw(c,a));return this.Pl={Ml:l,xl:o},o}Bl(){var e,s,i,n;const l=(i=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Rl)===null||n===void 0?void 0:n.Ml)===l)return this.Rl.xl;const a=l.map(o=>new ca(o));return this.Rl={Ml:l,xl:a},a}Al(){var e,s,i,n;const l=(i=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&i!==void 0?i:[];if(((n=this.Dl)===null||n===void 0?void 0:n.Ml)===l)return this.Dl.xl;const a=l.map(o=>new ca(o));return this.Dl={Ml:l,xl:a},a}Il(e,s){var i,n,l;return(l=(n=(i=this.Vl).autoscaleInfo)===null||n===void 0?void 0:n.call(i,e,s))!==null&&l!==void 0?l:null}wr(e,s){var i,n,l;return(l=(n=(i=this.Vl).hitTest)===null||n===void 0?void 0:n.call(i,e,s))!==null&&l!==void 0?l:null}}function ua(t,e,s,i){t.forEach(n=>{e(n).forEach(l=>{l.Sl()===s&&i.push(l)})})}function ha(t){return t.Pn()}function Pw(t){return t.Bl()}function Rw(t){return t.Al()}class Uc extends Sw{constructor(e,s,i,n,l){super(e),this.zt=new _w,this.jh=new yw(this),this.zl=[],this.Ll=new cw(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=i;const a=new ww(this);this.rn=[a],this.Hh=new Ep(a,this,e),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new dw(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return s;const n=this.$t().St().Xs(),l=this.Ct();if(n===null||l===null)return s;let a,o;if(e){const d=this.zt.sl();if(d===null)return s;a=d,o=d.ee}else{const d=this.zt.ll(n.ui(),-1);if(d===null||(a=this.zt.Gh(d.ee),a===null))return s;o=d.ee}const c=a.Vt[3],u=this.Us().$s(o,{Vt:a}),h=i.Rt(c,l.Vt);return{Xr:!1,_t:c,Kt:i.Fi(c,l.Vt),xh:i.Yl(c),Sh:i.Zl(c,l.Vt),V:u.ce,ki:h,ee:o}}Us(){return this.Nl!==null||(this.Nl=new Cw(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),ot(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new bw(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];ua(this.Hl,ha,"top",s);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),s.unshift(i)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(i=>i.qh());return e.push(...s),ua(this.Hl,ha,"normal",e),e}ua(){return this.ca(ha,"bottom")}da(e){return this.ca(Pw,e)}fa(e){return this.ca(Rw,e)}va(e,s){return this.Hl.map(i=>i.wr(e,s)).filter(i=>i!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const n of this.zl)i.push(n.Zh());return this.Hl.forEach(n=>{i.push(...n.Rn())}),i}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const n=this.pa(e,s);return n===null?null:n.Bh()});return Xr.Ah(i)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return M(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new Tw(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof oa)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof oa)return e=>this.wn.je(e)}_a(){return!xl(this.Dt().Pa())}pa(e,s){if(!pn(e)||!pn(s)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],n=this.zt.ol(e,s,i);let l=n!==null?new Oe(n.ml,n.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new Oe(o,o);l=l!==null?l.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const y=new Oe(c.priceRange.minValue,c.priceRange.maxValue);l=l!==null?l.ts(y):y}var u,h,d,m;c!=null&&c.margins&&(u=a,h=c.margins,a={above:Math.max((d=u==null?void 0:u.above)!==null&&d!==void 0?d:0,h.above),below:Math.max((m=u==null?void 0:u.below)!==null&&m!==void 0?m:0,h.below)})}),new Xr(l,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new V0(this.cn.priceFormat.precision);break;case"percent":this.wa=new xp(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new yl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=M(this.zt.el());this.Wl=this.Fl.map((i,n)=>{const l=M(e.Va(i.time,!0)),a=l<s?1:-1;return{time:M(this.zt.ll(l,a)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:n,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(e){switch(this.dn=new xw(this,this.$t()),this.$l){case"Bar":this.wn=new Q0(this,this.$t());break;case"Candlestick":this.wn=new ew(this,this.$t());break;case"Line":this.wn=new rw(this,this.$t());break;case"Custom":this.wn=new oa(this,this.$t(),Te(e));break;case"Area":this.wn=new G0(this,this.$t());break;case"Baseline":this.wn=new q0(this,this.$t());break;case"Histogram":this.wn=new nw(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const i=[];return ua(this.Hl,e,s,i),i}}class $w{constructor(e){this.cn=e}Oa(e,s,i){let n=e;if(this.cn.mode===0)return n;const l=i.vn(),a=l.Ct();if(a===null)return n;const o=l.Rt(e,a),c=i.Ba().filter(h=>h instanceof Uc).reduce((h,d)=>{if(i.vr(d)||!d.yt())return h;const m=d.Dt(),y=d.In();if(m.Ni()||!y.Kr(s))return h;const x=y.Gh(s);if(x===null)return h;const g=Us(d.Ct());return h.concat([m.Rt(x.Vt[3],g.Vt)])},[]);if(c.length===0)return n;c.sort((h,d)=>Math.abs(h-o)-Math.abs(d-o));const u=c[0];return n=l.pn(u,a),n}}class zw extends ct{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;const l=Math.max(1,Math.floor(i));e.lineWidth=l,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=M(this.zt);if(a.Aa){e.strokeStyle=a.Ia,js(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*i);e.moveTo(c,-l),e.lineTo(c,s.height+l)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,js(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*n);e.moveTo(-l,c),e.lineTo(s.width+l,c)}e.stroke()}})}}class Iw{constructor(e){this.Wt=new zw,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class Dw{constructor(e){this.wn=new Iw(e)}qh(){return this.wn}}const da={$a:4,Ua:1e-4};function Hs(t,e){const s=100*(t-e)/e;return e<0?-s:s}function Fw(t,e){const s=Hs(t.Ph(),e),i=Hs(t.Rh(),e);return new Oe(s,i)}function Hi(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function Ow(t,e){const s=Hi(t.Ph(),e),i=Hi(t.Rh(),e);return new Oe(s,i)}function Qr(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.log10(s+e.Ua)+e.$a;return t<0?-i:i}function Ki(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const i=Math.pow(10,s-e.$a)-e.Ua;return t<0?-i:i}function Ei(t,e){if(t===null)return null;const s=Qr(t.Ph(),e),i=Qr(t.Rh(),e);return new Oe(s,i)}function qn(t,e){if(t===null)return null;const s=Ki(t.Ph(),e),i=Ki(t.Rh(),e);return new Oe(s,i)}function fa(t){if(t===null)return da;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return da;const s=Math.ceil(Math.abs(Math.log10(e))),i=da.$a+s;return{$a:i,Ua:1/Math.pow(10,i)}}class ma{constructor(e,s){if(this.qa=e,this.Ya=s,function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,i){const n=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const d=Jn(l,n,1e-14)&&l>n+1e-14,m=Jn(l,i*o,1e-14),y=Jn(l,1,1e-14);if(!(d&&m&&y))break;l/=o,o=this.Ya[++a%this.Ya.length]}if(l<=n+1e-14&&(l=n),l=Math.max(1,l),this.Za.length>0&&(c=l,u=1,h=1e-14,Math.abs(c-u)<h))for(a=0,o=this.Za[0];Jn(l,i*o,1e-14)&&l>n+1e-14;)l/=o,o=this.Za[++a%this.Za.length];var c,u,h;return l}}class Hh{constructor(e,s,i,n){this.Ka=[],this.Li=e,this.qa=s,this.Ga=i,this.Ja=n}Xa(e,s){if(e<s)throw new Error("high < low");const i=this.Li.At(),n=(e-s)*this.Qa()/i,l=new ma(this.qa,[2,2.5,2]),a=new ma(this.qa,[2,2,2.5]),o=new ma(this.qa,[2.5,2,2]),c=[];return c.push(l.Xa(e,s,n),a.Xa(e,s,n),o.Xa(e,s,n)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const i=e.At(),n=this.Ga(i-1,s),l=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=i-1-a,u=Math.max(n,l),h=Math.min(n,l);if(u===h)return void(this.Ka=[]);let d=this.Xa(u,h),m=u%d;m+=m<0?d:0;const y=u>=h?1:-1;let x=null,g=0;for(let j=u-m;j>h;j-=d){const v=this.Ja(j,s,!0);x!==null&&Math.abs(v-x)<this.Qa()||v<o||v>c||(g<this.Ka.length?(this.Ka[g].Ea=v,this.Ka[g].so=e.eo(j)):this.Ka.push({Ea:v,so:e.eo(j)}),g++,x=v,e.ro()&&(d=this.Xa(j*y,h)))}this.Ka.length=g}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function Pp(t){return t.slice().sort((e,s)=>M(e.Xi())-M(s.Xi()))}var Kh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Kh||(Kh={}));const Gh=new xp,Xh=new yl(100,1);class Vw{constructor(e,s,i,n){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new he,this.vo=new he,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Xh,this.xo=fa(null),this.So=e,this.cn=s,this.ko=i,this.yo=n,this.Co=new Hh(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(ot(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Te(e.scaleMargins.top),i=Te(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(s+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let i=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(l,a){if(l===null)return!1;const o=Ki(l.Ph(),a),c=Ki(l.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(i=qn(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(i=Ei(this.Ih,this.xo),i!==null&&this.Ao(i));const n=s.Cr!==this.cn.mode;n&&(s.Cr===2||this.Mh())&&this.Ra(),n&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const i=this.Ih;(s||i===null&&e!==null||i!==null&&!i.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=Hs(e,s):this.Oo()&&(e=Hi(e,s)),this.Po(e,s)}te(e,s,i){this.Wo();const n=this.Fo(),l=M(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=i===void 0?0:i.from,m=i===void 0?e.length:i.to,y=this.Ho();for(let x=d;x<m;x++){const g=e[x],j=g._t;if(isNaN(j))continue;let v=j;y!==null&&(v=y(g._t,s));const f=n+h*(v-a),p=u?f:this.ho-1-f;g.st=p}}be(e,s,i){this.Wo();const n=this.Fo(),l=M(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),h=c/(o-a),d=i===void 0?0:i.from,m=i===void 0?e.length:i.to,y=this.Ho();for(let x=d;x<m;x++){const g=e[x];let j=g.ge,v=g.Me,f=g.xe,p=g.Se;y!==null&&(j=y(g.ge,s),v=y(g.Me,s),f=y(g.xe,s),p=y(g.Se,s));let N=n+h*(j-a),b=u?N:this.ho-1-N;g.pe=b,N=n+h*(v-a),b=u?N:this.ho-1-N,g.de=b,N=n+h*(f-a),b=u?N:this.ho-1-N,g.fe=b,N=n+h*(p-a),b=u?N:this.ho-1-N,g.me=b}}pn(e,s){const i=this.To(e,s);return this.$o(i,s)}$o(e,s){let i=e;return this.Mh()?i=function(n,l){return l<0&&(n=-n),n/100*l+l}(i,s):this.Oo()&&(i=function(n,l){return n-=100,l<0&&(n=-n),n/100*l+l}(i,s)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const i=this.po[s];i.Xi()===null&&i.Ki(s+1),e.push(i)}return e=Pp(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const i=s.Ct();i!==null&&(e===null||i.la<e.la)&&(e=i)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=M(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const i=M(this.ao).Th();s=Math.max(s,.1),i.Vh(s),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=M(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=M(this.Lh()).Dh()/(this.Eo()-1);let i=e-this.Mo;this.Bo()&&(i*=-1);const n=i*s,l=M(this.ao).Th();l.Oh(n),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(Hs(e,s));case 3:return this.ba().format(Hi(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,M(this.e_()).ba())}Zl(e,s){return e=Hs(e,s),this.s_(e,Gh)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=Xh,this.Mh()?(this.wa=Gh,s=100):this.Oo()?(this.wa=new yl(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new Hh(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Qr(e,this.xo):e;const i=M(this.Lh()),n=this.Fo()+(this.Eo()-1)*(e-i.Ph())/i.Dh();return this.jo(n)}To(e,s){if(this.Wo(),this.Ni())return 0;const i=this.jo(e),n=M(this.Lh()),l=n.Ph()+n.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?Ki(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const i=this.r_();let n=0,l=0;for(const c of i){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const h=c.Il(e.Os(),e.ui());let d=h&&h.Lh();if(d!==null){switch(this.cn.mode){case 1:d=Ei(d,this.xo);break;case 2:d=Fw(d,u.Vt);break;case 3:d=Ow(d,u.Vt)}if(s=s===null?d:s.ts(M(d)),h!==null){const m=h.Eh();m!==null&&(n=Math.max(n,m.above),l=Math.max(l,m.below))}}}if(n===this.co&&l===this.do||(this.co=n,this.do=l,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=qn(s,this.xo)),s=new Oe(s.Ph()-u,s.Rh()+u),this.ro()&&(s=Ei(s,this.xo))}if(this.ro()){const c=qn(s,this.xo),u=fa(c);if(a=u,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const h=this.ao!==null?qn(this.ao,this.xo):null;this.xo=u,s=Ei(c,u),h!==null&&(this.ao=Ei(h,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Oe(-.5,.5)),this.xo=fa(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?Hs:this.Oo()?Hi:this.ro()?e=>Qr(e,this.xo):null}a_(e,s,i){return s===void 0?(i===void 0&&(i=this.ba()),i.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class Bw{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new he,this.yl=e,this.$i=s,this.d_=new Dw(this);const i=s.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const i of s){const n=M(i[0].Dt());n.$h(e.overlayPriceScales),e.localization&&n.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Te(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const i=s.Dt();i!==null&&i.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,i){const n=i!==void 0?i:this.C_().y_+1;this.T_(e,s,n)}Zo(e){const s=this.po.indexOf(e);ts(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const i=M(e.Dt()).Pa();if(this.o_.has(i)){const l=Te(this.o_.get(i)),a=l.indexOf(e);a!==-1&&(l.splice(a,1),l.length===0&&this.o_.delete(i))}const n=e.Dt();n&&n.Ba().indexOf(e)>=0&&n.Zo(e),n!==null&&(n.Yo(),this.P_(n)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=Pp(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&e.h_(i)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,i=0;for(let n=0;n<e.length;n++){const l=e[n].Xi();l!==null&&(l<s&&(s=l),l>i&&(i=l))}return{H_:s,y_:i}}T_(e,s,i){let n=this.w_(s);if(n===null&&(n=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!xl(s)){const l=this.o_.get(s)||[];l.push(e),this.o_.set(s,l)}n.qo(e),e.Gi(n),e.Ki(i),this.P_(n),this.mo=null}m_(e,s,i){s.Cr!==i.Cr&&this.L_(e)}v_(e,s){const i=Object.assign({visible:!0,autoScale:!0},St(s)),n=new Vw(e,i,this.$i.W().layout,this.$i.W().localization);return n.Lo(this.At()),n}}class Aw{constructor(e,s,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=i}Y_(e){const s=e.time,i=this.q_.cacheKey(s),n=this.tr.get(i);if(n!==void 0)return n.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Te(a)),this.Je++,this.Ke--}const l=this.U_(e);return this.tr.set(i,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,l}}class Gi{constructor(e,s){ts(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Qh(t,e){return t===null||e===null?t===e:t.Ch(e)}class Ww{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let i=s;i<e.length;++i){const n=e[i];let l=this.J_.get(n.timeWeight);l===void 0&&(l=[],this.J_.set(n.timeWeight,l)),l.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}su(e,s){const i=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((i,n)=>{e<=i[0].index?s.push(n):i.splice(_n(i,e,l=>l.index<e),1/0)});for(const i of s)this.J_.delete(i)}ru(e){let s=[];for(const i of Array.from(this.J_.keys()).sort((n,l)=>l-n)){if(!this.J_.get(i))continue;const n=s;s=[];const l=n.length;let a=0;const o=Te(this.J_.get(i)),c=o.length;let u=1/0,h=-1/0;for(let d=0;d<c;d++){const m=o[d],y=m.index;for(;a<l;){const x=n[a],g=x.index;if(!(g<y)){u=g;break}a++,s.push(x),h=g,u=1/0}if(u-y>=e&&y-h>=e)s.push(m),h=y;else if(this.Q_)return n}for(;a<l;a++)s.push(n[a])}return s}}class qs{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Gi(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new qs(null)}}function Uw(t,e){return t.weight>e.weight?t:e}class Hw{constructor(e,s,i,n){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new Ww,this.du=new Map,this.fu=qs.ou(),this.vu=!0,this.pu=new he,this.mu=new he,this.bu=new he,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=i,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=n,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){ot(this.yo,e),this.Cu(),this.ku()}$h(e,s){var i;ot(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((i=e.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,i;return(i=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&i!==void 0?i:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const i=_n(this.uu,this.q_.key(e),(n,l)=>this.q_.key(n.time)<l);return this.q_.key(e)<this.q_.key(this.uu[i].time)?s?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),i=Math.round(e.to),n=M(this.Bu()),l=M(this.Au());return{from:M(this.Ui(Math.max(n,s))),to:M(this.Ui(Math.min(l,i)))}}Iu(e){return{from:M(this.Va(e.from,!0)),to:M(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),i=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const n=this.Su*e/i;this.Su=n}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const n=i-e;this.xu-=Math.round(n/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!pn(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const i=this.Eu(),n=s===void 0?0:s.from,l=s===void 0?e.length:s.to;for(let a=n;a<l;a++){const o=e[a].ot,c=i+this.xu-o,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(s/e),n=M(this.Xs()),l=Math.max(n.Os(),n.Os()-i),a=Math.max(n.ui(),n.ui()-i),o=this.cu.su(e,s),c=this.Bu()+i,u=this.Au()-i,h=this.$u(),d=this.cn.fixLeftEdge||h,m=this.cn.fixRightEdge||h;let y=0;for(const x of o){if(!(l<=x.index&&x.index<=a))continue;let g;y<this.Mu.length?(g=this.Mu[y],g.coord=this.It(x.index),g.label=this.Uu(x),g.weight=x.weight):(g={needAlignCoordinate:!1,coord:this.It(x.index),label:this.Uu(x),weight:x.weight},this.Mu.push(g)),this.Su>s/2&&!h?g.needAlignCoordinate=!1:g.needAlignCoordinate=d&&x.index<=c||m&&x.index>=u,y++}return this.Mu.length=y,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const i=this.Fu(e),n=this.le(),l=n+s*(n/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=_o(this.__-e,0,this.__),i=_o(this.__-M(this.wo),0,this.__);s!==0&&i!==0&&this.Gn(this.wu.le*s/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=M(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,n=performance.now();this.$i.Zn({Qu:l=>(l-n)/s>=1,tc:l=>{const a=(l-n)/s;return a>=1?e:i+(e-i)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new Gi(e,s+this.cn.rightOffset))}lc(e){const s=new Gi(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),i=this.Eu()+this.xu-s;return Math.round(1e6*i)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(qs.ou());const e=this.Eu(),s=this.__/this.Su,i=this.xu+e,n=new Gi(i-s+1,i);this._c(new qs(n))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new Aw(i=>this.fc(i),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,Qh(s.lu(),this.fu.lu())||this.pu.m(),Qh(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const i=s.Os()-e;if(i<0){const n=this.xu-i-1;this.Jn(n)}this.zu()}Pu(){this.Lu(),this.zu()}}class Kw{X(e,s,i){e.useMediaCoordinateSpace(n=>this.K(n,s,i))}gl(e,s,i){e.useMediaCoordinateSpace(n=>this.vc(n,s,i))}vc(e,s,i){}}class Gw extends Kw{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:i}=e;let n=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>i.width?a.Zu=i.width/o:a.Zu=1,n+=a.gc*a.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((i.height-n)/2,0);break;case"bottom":l=Math.max(i.height-n,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=i.width/2;break;case"right":s.textAlign="right",o=i.width-1-a.gc/2}s.translate(o,l),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),l+=a.gc*a.Zu}}wc(e,s){const i=this.kc(e.font);let n=i.get(s);return n===void 0&&(n=e.measureText(s).width,i.set(s,n)),n}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class Xw{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new Gw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:li(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Qw extends Vc{constructor(e,s){super(),this.cn=s,this.wn=new Xw(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Jh,Yh,qh,Zh,ed;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Jh||(Jh={}));class Jw{constructor(e,s,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new he,this.Rc=new he,this.Dc=null,this.Vc=e,this.cn=s,this.q_=i,this.Oc=new E0(this),this.yl=new Hw(this,s.timeScale,this.cn.localization,i),this.vt=new O0(this,s.crosshair),this.Bc=new $w(s.crosshair),this.Ac=new Qw(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Ne.es())}Uh(){this.Nc(Ne.ss())}oa(){this.Nc(new Ne(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){ot(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const i=this.Uc(e);i!==null&&(i.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const i=s.w_(e);if(i!==null)return{Ht:s,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new Bw(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const i=e===void 0?this.yc.length-1:e,n=Ne.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Nc(n),s}V_(e,s,i){e.V_(s,i)}O_(e,s,i){e.O_(s,i),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,i){s.Vo()||e.A_(s,i)}I_(e,s,i){s.Vo()||(e.I_(s,i),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const i=this.St();if(i.Ni()||s===0)return;const n=i.Hi();e=Math.max(1,Math.min(e,n)),i.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,i,n,l){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const u=n.vn(),h=u.Ct();h!==null&&(a=u.pn(s,h)),a=this.Bc.Oa(a,o,n),this.vt.kn(o,a,n),this.oa(),l||this.Rc.m(this.vt.xt(),{x:e,y:s},i)}ad(e,s,i){const n=i.vn(),l=n.Ct(),a=n.Rt(e,M(l)),o=this.yl.Va(s,!0),c=this.yl.It(M(o));this.ld(c,a,null,i,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),i=this.vt.Sn();this.ld(s,i,null,e)}this.vt.Vn()}_d(e,s,i){const n=this.yl.mn(0);s!==void 0&&i!==void 0&&this.yl.bt(s,i);const l=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&n!==null&&l!==null){const c=o.Kr(a),u=this.q_.key(n)>this.q_.key(l),h=e!==null&&e>a&&!u,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,m=c&&(i!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!m){const y=e-a;this.yl.Jn(this.yl.Hu()-y)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(i=>i.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,i){const n=this.yc[0],l=this.fd(s,e,n,i);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(e){const s=this.dr(e),i=this.Cc.indexOf(e);ts(i!==-1,"Series not found"),this.Cc.splice(i,1),M(s).Zo(e),e.S&&e.S()}Xl(e,s){const i=M(this.dr(e));i.Zo(e);const n=this.Uc(s);if(n===null){const l=e.Xi();i.qo(e,s,l)}else{const l=n.Ht===i?e.Xi():void 0;n.Ht.qo(e,s,l)}}hc(){const e=Ne.ss();e.$n(),this.Nc(e)}pd(e){const s=Ne.ss();s.Yn(e),this.Nc(s)}Kn(){const e=Ne.ss();e.Kn(),this.Nc(e)}Gn(e){const s=Ne.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=Ne.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=Ne.ss();s.Zn(e),this.Nc(s)}Un(){const e=Ne.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,i=this.zc;if(s===i)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==s)this.Dc={Ps:i,Rs:s,wd:new Map};else{const l=this.Dc.wd.get(e);if(l!==void 0)return l}const n=function(l,a,o){const[c,u,h,d]=mn(l),[m,y,x,g]=mn(a),j=[Ge(c+o*(m-c)),Ge(u+o*(y-u)),Ge(h+o*(x-h)),mp(d+o*(g-d))];return`rgba(${j[0]}, ${j[1]}, ${j[2]}, ${j[3]})`}(i,s,e/100);return this.Dc.wd.set(e,n),n}Gc(e,s){const i=new Ne(s);if(e!==null){const n=this.yc.indexOf(e);i.Nn(n,{Fn:s})}return i}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,i,n){const l=new Uc(this,e,s,i,n),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return i.qo(l,a),xl(a)||l.$h(e),l}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function Eo(t){return!vt(t)&&!Cn(t)}function Rp(t){return vt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Yh||(Yh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(qh||(qh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Zh||(Zh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(ed||(ed={}));const td=t=>t.getUTCFullYear();function Yw(t,e,s){return e.replace(/yyyy/g,(i=>kt(td(i),4))(t)).replace(/yy/g,(i=>kt(td(i)%100,2))(t)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(t,s)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(t,s)).replace(/MM/g,(i=>kt((n=>n.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>kt((n=>n.getUTCDate())(i),2))(t))}class $p{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return Yw(e,this.gd,this.Md)}}class qw{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",kt(e.getUTCHours(),2)).replace("%m",kt(e.getUTCMinutes(),2)).replace("%s",kt(e.getUTCSeconds(),2))}}const Zw={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class eN{constructor(e={}){const s=Object.assign(Object.assign({},Zw),e);this.Td=new $p(s.Sd,s.Cd),this.Pd=new qw(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function Zn(t){return 60*t*60*1e3}function pa(t){return 60*t*1e3}const er=[{Dd:(sd=1,1e3*sd),Vd:10},{Dd:pa(1),Vd:20},{Dd:pa(5),Vd:21},{Dd:pa(30),Vd:22},{Dd:Zn(1),Vd:30},{Dd:Zn(3),Vd:31},{Dd:Zn(6),Vd:32},{Dd:Zn(12),Vd:33}];var sd;function id(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=er.length-1;s>=0;--s)if(Math.floor(e.getTime()/er[s].Dd)!==Math.floor(t.getTime()/er[s].Dd))return er[s].Vd;return 0}function va(t){let e=t;if(Cn(t)&&(e=Hc(t)),!Eo(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function nd(t){if(!Rp(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Hc(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function rd(t){Cn(t.time)&&(t.time=Hc(t.time))}class ld{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(rd)}(e):rd(e)}createConverterToInternalObj(e){return M(function(s){return s.length===0?null:Eo(s[0].time)||Cn(s[0].time)?va:nd}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return Rp(s=e)?nd(s):Eo(s)?va(s):va(Hc(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new eN({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new $p(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const i=function(l,a,o){switch(l){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const l=n.tickMarkFormatter(e.originalTime,i,s.locale);if(l!==null)return l}return function(l,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,i,s.locale)}maxTickMarkWeight(e){let s=e.reduce(Uw,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(i,n=0){if(i.length===0)return;let l=n===0?null:i[n-1].time.Od,a=l!==null?new Date(1e3*l):null,o=0;for(let c=n;c<i.length;++c){const u=i[c],h=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=id(h,a)),o+=u.time.Od-(l||u.time.Od),l=u.time.Od,a=h}if(n===0&&i.length>1){const c=Math.ceil(o/(i.length-1)),u=new Date(1e3*(i[0].time.Od-c));i[0].timeWeight=id(new Date(1e3*i[0].time.Od),u)}})(e,s)}static Id(e){return ot({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const ai=typeof window<"u";function ad(){return!!ai&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ga(){return!!ai&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Lo(t){return t+t%2}function xa(t,e){return t.zd-e.zd}function ya(t,e,s){const i=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(i)*Math.min(Math.abs(i),s)}class tN{constructor(e,s,i,n){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=i,this.rs=n}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let i=0;const n=ya(this.Ld,this.Ed,this.Ud),l=xa(this.Ld,this.Ed),a=[n],o=[l];if(i+=l,this.Nd!==null){const u=ya(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(n)){const h=xa(this.Ed,this.Nd);if(a.push(u),o.push(h),i+=h,this.Fd!==null){const d=ya(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(n)){const m=xa(this.Nd,this.Fd);a.push(d),o.push(m),i+=m}}}}let c=0;for(let u=0;u<a.length;++u)c+=o[u]/i*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.qd))}tc(e){const s=M(this.Wd),i=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-M(this.Wd).ot;return Math.min(s,this.jd)}}class sN{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return pp(mn(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function bs(t,e){const s=M(t.ownerDocument).createElement("canvas");t.appendChild(s);const i=f0(s,{options:{allowResizeObserver:!1},transform:(n,l)=>({width:Math.max(n.width,l.width),height:Math.max(n.height,l.height)})});return i.resizeCanvasElement(e),i}function Ss(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Mo(t,e,s,i){t.gl&&t.gl(e,s,i)}function wr(t,e,s,i){t.X(e,s,i)}function To(t,e,s,i){const n=t(s,i);for(const l of n){const a=l.gt();a!==null&&e(a)}}function iN(t){ai&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Kc{constructor(e,s,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!ga(),this.Af=n=>{this.If(n)},this.zf=n=>{if(this.Lf(n)){const l=this.Ef(n);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(ft(n),this.cf);a<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(n);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(ft(n),this.af);a<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=wa(e.changedTouches,M(this.Of));if(s===null||(this.Vf=tr(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(ft(s),M(this.pf)),{nv:n,sv:l,Nf:a}=i;if(this.mf||!(a<5)){if(!this.mf){const o=.5*n,c=l>=o&&!this.cn.ev(),u=o>l&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),Ts(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(ft(e),M(this.vf)),{Nf:i}=s;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const n=this.Ef(e);this.Uf(n,this.Hf.av)}}Ff(e,s){const i=Math.abs(s.nt-e.nt),n=Math.abs(s.st-e.st);return{nv:i,sv:n,Nf:i+n}}ov(e){let s=wa(e.changedTouches,M(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=tr(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(e,s);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:n}=this.Ff(ft(s),this.cf);n<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&Ts(e));this._f===0&&Ts(e),e.touches.length===0&&this.ff&&(this.ff=!1,Ts(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),ad()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(ft(e),this.af);i<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=tr(e);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=ft(s),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",l),i.removeEventListener("touchend",a)},i.addEventListener("touchmove",l,{passive:!1}),i.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const n=this.Ef(e,s);this.Wf(n,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=ft(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;ad()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=ft(e),this.kf&&(this.kf(),this.kf=null);{const n=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",l)},s.addEventListener("mousemove",n),s.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=ft(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}ga()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),iN(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=od(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),Ts(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=od(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!ga()}vv(e){const s=wa(e.touches,M(this.Of));if(s===null)return;const i=this.Ef(e,s);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:tr(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const i=s||e,n=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:i.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Ts(e)}}}}function od(t,e){const s=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(s*s+i*i)}function Ts(t){t.cancelable&&t.preventDefault()}function ft(t){return{nt:t.pageX,st:t.pageY}}function tr(t){return t.timeStamp||performance.now()}function wa(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function sr(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function nN(t,e,s){for(const i of t){const n=i.gt();if(n!==null&&n.wr){const l=n.wr(e,s);if(l!==null)return{Bv:i,Iv:l}}}return null}function Na(t,e){return s=>{var i,n,l,a;return((n=(i=s.Dt())===null||i===void 0?void 0:i.Pa())!==null&&n!==void 0?n:"")!==e?[]:(a=(l=s.da)===null||l===void 0?void 0:l.call(s,t))!==null&&a!==void 0?a:[]}}function cd(t,e,s,i){if(!t.length)return;let n=0;const l=s/2,a=t[0].At(i,!0);let o=e===1?l-(t[0].Vi()-a/2):t[0].Vi()-a/2-l;o=Math.max(0,o);for(let c=1;c<t.length;c++){const u=t[c],h=t[c-1],d=h.At(i,!1),m=u.Vi(),y=h.Vi();if(e===1?m>y-d:m<y+d){const x=y-d*e;u.Oi(x);const g=x-e*d/2;if((e===1?g<0:g>s)&&o>0){const j=e===1?-1-g:g-s,v=Math.min(j,o);for(let f=n;f<t.length;f++)t[f].Oi(t[f].Vi()+e*v);o-=v}}else n=c,o=e===1?y-d-m:m-(y+d)}}class ud{constructor(e,s,i,n){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new gn(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=i,this.qv=n==="left",this.Yv=Na("normal",n),this.Zv=Na("top",n),this.Xv=Na("bottom",n),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=bs(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=bs(this.Kv,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Kc(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ss(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ss(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),i=M(this.Gv.canvasElement.getContext("2d"));i.save();const n=this.Li.Ha();i.font=this._p(),n.length>0&&(e=Math.max(this.Fv.xi(i,n[0].so),this.Fv.xi(i,n[n.length-1].so)));const l=this.up();for(let u=l.length;u--;){const h=this.Fv.xi(i,l[u].Kt());h>e&&(e=h)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const u=this.Li.pn(1,a),h=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(u,h))+.11111111111111,a)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(u,h))-.11111111111111,a)))}var o;i.restore();const c=e||34;return Lo(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return M(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,M(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,s.V_(i,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp(),n=this.Li;s.O_(i,n,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,i))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,s.B_(i,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const l=i[n].Rn(this.tn.fp(),s);for(let a=0;a<l.length;a++)e.push(l[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,l=this.tn.fp().$t(),a=l.q(),o=l.bd();a===o?vl(e,0,0,i,n,a):vp(e,0,0,i,n,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.ap().C*i));let l;l=this.qv?s.width-n:0,e.fillRect(l,0,n,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),i=this.Li.W(),n=this.ap(),l=this.qv?this.Ev.width-n.T:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=i.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(n.T*o);a.beginPath();for(const m of s)a.rect(Math.floor(l*o),Math.round(m.Ea*c)-h,d,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=i.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(l-n.A):Math.round(l+n.T+n.A),u=s.map(h=>this.Fv.Mi(a,h.so));for(let h=s.length;h--;){const d=s[h];a.fillText(d.so,c,d.Ea+u[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),i=this.tn.fp(),n=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(a=>{i.vr(a)&&s.push(a)});const l=this.Li;s.forEach(a=>{a.Rn(i,l).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,n)}yp(e,s){if(this.Ev===null)return;const i=this.Ev.height/2,n=e.filter(a=>a.ki()<=i),l=e.filter(a=>a.ki()>i);n.sort((a,o)=>o.ki()-a.ki()),l.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}cd(n,1,this.Ev.height,s),cd(l,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),i=this.ap(),n=this.qv?"right":"left";s.forEach(l=>{l.Ai()&&l.gt(M(this.Li)).X(e,i,this.Fv,n)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),i=[],n=this.tn.fp(),l=s.Zc().Rn(n,this.Li);l.length&&i.push(l);const a=this.ap(),o=this.qv?"right":"left";i.forEach(c=>{c.forEach(u=>{u.gt(M(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return li(this.ko.fontSize,this.ko.fontFamily)}}function rN(t,e){var s,i;return(i=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function ir(t,e){var s,i;return(i=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function lN(t,e){var s,i;return(i=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}function aN(t,e){var s,i;return(i=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&i!==void 0?i:[]}class Gc{constructor(e,s){this.Ev=ee({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new he,this.Op=new he,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=bs(i,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=bs(i,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Kc(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ss(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ss(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return M(this.Np)}qp(e){var s,i;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Gc.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new sN(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(M(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(M(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,i=e.localY;this.Gp(s,i,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const i=e.localX,n=e.localY;this.Gp(i,n,e);const l=this.wr(i,n);this.Qd.Qp((s=l==null?void 0:l.Lv)!==null&&s!==void 0?s:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const i=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,i)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,i=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const n=M(this.Lp),l=n.x+(s-this.Ip.x),a=n.y+(i-this.Ip.y);this.Gp(l,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const i=this.Np;return i===null?null:function(n,l,a){const o=n.Uo(),c=function(u,h,d){var m,y;let x,g;for(const f of u){const p=(y=(m=f.va)===null||m===void 0?void 0:m.call(f,h,d))!==null&&y!==void 0?y:[];for(const N of p)j=N.zOrder,(!(v=x==null?void 0:x.zOrder)||j==="top"&&v!=="top"||j==="normal"&&v==="bottom")&&(x=N,g=f)}var j,v;return x&&g?{zv:x,Hc:g}:null}(o,l,a);if((c==null?void 0:c.zv.zOrder)==="top")return sr(c);for(const u of o){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return sr(c);const h=nN(u.Pn(n),l,a);if(h!==null)return{Hc:u,Bv:h.Bv,Iv:h.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return sr(c)}return c!=null&&c.zv?sr(c):null}(i,e,s)}_m(e,s){M(s==="left"?this.Cp:this.Tp).cp(ee({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=M(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const i=s.Dt();i!==null&&e.P_(i),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n)}),this.Np&&(this.fm(i,rN),this.vm(i),this.pm(i),this.fm(i,ir),this.fm(i,lN)))}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.bm(s),this.fm(s,aN))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const i=s.localX,n=s.localY;e.M()&&e.m(this.$i().St().Nu(i),{x:i,y:n},s)}mp({context:e,bitmapSize:s}){const{width:i,height:n}=s,l=this.$i(),a=l.q(),o=l.bd();a===o?vl(e,0,0,i,n,o):vp(e,0,0,i,n,a,o)}vm(e){const s=M(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,ir,Mo,s),this.Mm(e,ir,wr,s)}bm(e){this.Mm(e,ir,wr,this.$i().Zc())}fm(e,s){const i=M(this.Np).Uo();for(const n of i)this.Mm(e,s,Mo,n);for(const n of i)this.Mm(e,s,wr,n)}Mm(e,s,i,n){const l=M(this.Np),a=l.$t().Wc(),o=a!==null&&a.Hc===n,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;To(s,u=>i(u,e,o,c),n,l)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,i=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const n=e.$t().ud();s&&this.Cp===null&&(this.Cp=new ud(this,e.W(),n,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new ud(this,e.W(),n,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,i){this.$i().ld(this.Sm(e),this.km(s),i,M(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,i){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,i);const n=this.$i().Zc();this.Lp={x:n.Yt(),y:n.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),i=this.fp();if(s.z_(i,i.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const n=performance.now(),l=s.St();this.Ep.Vr(l.Hu(),n),this.Ep.Qu(n)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)M(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),i=s.St();if(i.Ni())return;const n=this.Qd.W(),l=n.handleScroll,a=n.kineticScroll;if((!l.pressedMouseMove||e.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=i.le();this.Ep=new tN(.2/u,7/u,.997,15/u),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),c))}}class hd{constructor(e,s,i,n,l){this.ft=!0,this.Ev=ee({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=i.ud,this.cn=s,this.Tm=n,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=bs(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ss(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){ms(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Ns(this.Gv);s!==null&&s.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*i),a=Math.floor(this.Oc.W().C*n),o=this.qv?s.width-l:0;e.fillRect(o,0,l,a)}mp({context:e,bitmapSize:s}){vl(e,0,0,s.width,s.height,this.Pm())}}function Xc(t){return e=>{var s,i;return(i=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&i!==void 0?i:[]}}const oN=Xc("normal"),cN=Xc("top"),uN=Xc("bottom");class hN{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=ee({width:0,height:0}),this.Om=new he,this.Fv=new gn(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=bs(this.Im,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=bs(this.Im,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const n=this.Jv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Kc(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ss(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ss(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,i){ms(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(ee({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(ee({width:i,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,i){const n=this.xp();n.width>0&&n.height>0&&e.drawImage(this.Gv.canvasElement,s,i)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n),this.$m(i,uN)}),this.wp(i),this.$m(i,oN)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Ns(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,cN))}$m(e,s){const i=this.Qd.$t().wt();for(const n of i)To(s,l=>Mo(l,e,!1,void 0),n,void 0);for(const n of i)To(s,l=>wr(l,e,!1,void 0),n,void 0)}mp({context:e,bitmapSize:s}){vl(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const n=Math.max(1,Math.floor(this.jm().C*i));e.fillRect(0,0,s.width,n)}}wp(e){const s=this.Qd.$t().St(),i=s.Ha();if(!i||i.length===0)return;const n=this.q_.maxTickMarkWeight(i),l=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:u})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);o.beginPath();const m=Math.round(l.T*u);for(let y=i.length;y--;){const x=Math.round(i[y].coord*c);o.rect(x-d,0,h,m)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=l.C+l.T+l.L+l.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const u of i)if(u.weight<n){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const u of i)if(u.weight>=n){const h=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,h,c)}})}Ym(e,s,i){const n=this.Fv.xi(e,i),l=n/2,a=Math.floor(s-l)+.5;return a<0?s+=Math.abs(0-a):a+n>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+n))),s}Um(e,s){const i=this.jm();for(const n of e)for(const l of n.Qi())l.gt().X(s,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return li(this.j(),this.cn.fontFamily)}Zm(){return li(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new gn,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const i=this.j();e.P=i,e.R=s,e.L=3*i/12,e.B=3*i/12,e.ji=9*i/12,e.N=0,e.Hm=4*i/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},n=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,l=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new hd("left",s,i,n,l),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new hd("right",s,i,n,l),this.Am.appendChild(this.Dm.lp()))}}const dN=!!ai&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!ai&&(!((ja=navigator==null?void 0:navigator.userAgentData)===null||ja===void 0)&&ja.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var ja;class fN{constructor(e,s,i){var n;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new he,this.Op=new he,this.Rc=new he,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(n=this.Xd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ba(this.cn)&&this.hb(!0),this.$i=new Jw(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new hN(this,this.q_),this.sb.appendChild(this.ab.lp());const l=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(l||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],M(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,i=!1){if(this.ho===s&&this.__===e)return;const n=function(o){const c=Math.floor(o.width),u=Math.floor(o.height);return ee({width:c-c%2,height:u-u%2})}(ee({width:e,height:s}));this.ho=n.height,this.__=n.width;const l=this.ho+"px",a=this.__+"px";M(this.Xd).style.height=l,M(this.Xd).style.width=a,this.sb.style.height=l,this.sb.style.width=a,i?this.mb(Ne.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Ne.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=ba(this.cn);this.$i.$h(e);const i=ba(this.cn);i!==s&&this.hb(i),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const i=M(s.getContext("2d"));return this.gb(i),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:M(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Te(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,i=0;const n=this.Xm[0],l=(o,c)=>{let u=0;for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],m=M(o==="left"?d.wm():d.gm()),y=m.xp();e!==null&&m.Sp(e,c,u),u+=y.height}};this.xb()&&(l("left",0),s+=M(n.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],u=c.xp();e!==null&&c.Sp(e,s,i),i+=u.height}s+=n.xp().width,this.Sb()&&(l("right",s),s+=M(n.gm()).xp().width);const a=(o,c,u)=>{M(o==="left"?this.ab.Lm():this.ab.Em()).Sp(M(e),c,u)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,i),c=M(n.wm()).xp().width),this.ab.Sp(e,c,i),c+=o.width,this.Sb()&&a("right",c,i)}i+=o.height}return ee({width:s,height:i})}Pb(){let e=0,s=0,i=0;for(const x of this.Xm)this.xb()&&(s=Math.max(s,M(x.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,M(x.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=x.M_();s=Lo(s),i=Lo(i);const n=this.__,l=this.ho,a=Math.max(n-s-i,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const h=0+c,d=l<h?0:l-h,m=d/e;let y=0;for(let x=0;x<this.Xm.length;++x){const g=this.Xm[x];g.qp(this.$i.qc()[x]);let j=0,v=0;v=x===this.Xm.length-1?d-y:Math.round(g.M_()*m),j=Math.max(v,2),y+=j,g.cp(ee({width:a,height:j})),this.xb()&&g._m(s,"left"),this.Sb()&&g._m(i,"right"),g.fp()&&this.$i.Kc(g.fp(),j)}this.ab.Fm(ee({width:o?a:0,height:c}),o?s:0,o?i:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==i&&(this.Jm=i)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return dN?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),i=s*e.deltaX/100,n=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(n)*Math.min(1,Math.abs(n)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,l)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(e,s){var i;const n=e.jn();n===3&&this.Db(),n!==3&&n!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const i of e.Qn())this.ns(i,s)}Vb(e){const s=this.$i.qc();for(let i=0;i<s.length;i++)e.Hn(i).Wn&&s[i].N_()}ns(e,s){const i=this.$i.St();switch(e.qn){case 0:i.hc();break;case 1:i.lc(e.Vt);break;case 2:i.Gn(e.Vt);break;case 3:i.Jn(e.Vt);break;case 4:i.qu();break;case 5:e.Vt.Qu(s)||i.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,s);for(const n of i.Qn())if(n.qn===5&&!n.Vt.Qu(s)){this.$t().Zn(n.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,i=this.Xm.length;for(let n=s;n<i;n++){const l=Te(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let n=i;n<s;n++){const l=new Gc(this,e[n]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let n=0;n<s;n++){const l=e[n],a=this.Xm[n];a.fp()!==l?a.qp(l):a.Up()}this.cb(),this.Pb()}Ib(e,s,i){var n;const l=new Map;e!==null&&this.$i.wt().forEach(h=>{const d=h.In().ll(e);d!==null&&l.set(h,d)});let a;if(e!==null){const h=(n=this.$i.St().Ui(e))===null||n===void 0?void 0:n.originalTime;h!==void 0&&(a=h)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Uc?o.Hc:void 0,u=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:l,Fb:u,Wb:i??void 0}}Bb(e,s,i){this.Vp.m(()=>this.Ib(e,s,i))}Ab(e,s,i){this.Op.m(()=>this.Ib(e,s,i))}lb(e,s,i){this.Rc.m(()=>this.Ib(e,s,i))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(i=>i.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ba(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function mN(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function zp(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]])}return s}function dd(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.color!==void 0&&(l.V=s.color),l}function pN(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.lineColor!==void 0&&(l.lt=s.lineColor),s.topColor!==void 0&&(l.Ps=s.topColor),s.bottomColor!==void 0&&(l.Rs=s.bottomColor),l}function vN(t,e,s,i){const n=s.value,l={ee:e,ot:t,Vt:[n,n,n,n],zb:i};return s.topLineColor!==void 0&&(l.Re=s.topLineColor),s.bottomLineColor!==void 0&&(l.De=s.bottomLineColor),s.topFillColor1!==void 0&&(l.ke=s.topFillColor1),s.topFillColor2!==void 0&&(l.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(l.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(l.Te=s.bottomFillColor2),l}function gN(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),n}function xN(t,e,s,i){const n={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:i};return s.color!==void 0&&(n.V=s.color),s.borderColor!==void 0&&(n.Ot=s.borderColor),s.wickColor!==void 0&&(n.Xh=s.wickColor),n}function yN(t,e,s,i,n){const l=Te(n)(s),a=Math.max(...l),o=Math.min(...l),c=l[l.length-1],u=[c,a,o,c],h=s,{time:d,color:m}=h;return{ee:e,ot:t,Vt:u,zb:i,$e:zp(h,["time","color"]),V:m}}function nr(t){return t.Vt!==void 0}function fd(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function ls(t){return(e,s,i,n,l,a)=>function(o,c){return c?c(o):(u=o).open===void 0&&u.value===void 0;var u}(i,a)?fd({ot:e,ee:s,zb:n},i):fd(t(e,s,i,n,l),i)}function md(t){return{Candlestick:ls(xN),Bar:ls(gN),Area:ls(pN),Baseline:ls(vN),Histogram:ls(dd),Line:ls(dd),Custom:ls(yN)}[t]}function pd(t){return{ee:0,Hb:new Map,la:t}}function vd(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function gd(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Te(e)}class wN{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let i=this.qb.size!==0,n=!1;const l=this.Yb.get(e);if(l!==void 0)if(this.Yb.size===1)i=!1,n=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(n=!0);let a=[];if(s.length!==0){const c=s.map(y=>y.time),u=this.q_.createConverterToInternalObj(s),h=md(e.Qh()),d=e.Ca(),m=e.Ta();a=s.map((y,x)=>{const g=u(y.time),j=this.q_.key(g);let v=this.qb.get(j);v===void 0&&(v=pd(g),this.qb.set(j,v),n=!0);const f=h(g,v.ee,y,c[x],d,m);return v.Hb.set(e,f),f})}i&&this.Gb(),this.Jb(e,a);let o=-1;if(n){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:gd(u.Hb)})}),c.sort((u,h)=>this.q_.key(u.time)-this.q_.key(h.time)),o=this.Qb(c)}return this.tw(e,o,function(c,u,h){const d=vd(c,h),m=vd(u,h);if(d!==void 0&&m!==void 0)return{ta:d.Ub>=m.Ub&&d.$b>=m.$b}}(this.Yb.get(e),l,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const i=s;(function(g){g.zb===void 0&&(g.zb=g.time)})(i),this.q_.preprocessData(s);const n=this.q_.createConverterToInternalObj([s])(s.time),l=this.Zb.get(e);if(l!==void 0&&this.q_.key(n)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${n}`);let a=this.qb.get(this.q_.key(n));const o=a===void 0;a===void 0&&(a=pd(n),this.qb.set(this.q_.key(n),a));const c=md(e.Qh()),u=e.Ca(),h=e.Ta(),d=c(n,a.ee,s,i.zb,u,h);a.Hb.set(e,d),this.nw(e,d);const m={ta:nr(d)};if(!o)return this.tw(e,-1,m);const y={timeWeight:0,time:a.la,pointData:a,originalTime:gd(a.Hb)},x=_n(this.Xb,this.q_.key(y.time),(g,j)=>this.q_.key(g.time)<j);this.Xb.splice(x,0,y);for(let g=x;g<this.Xb.length;++g)Sa(this.Xb[g].pointData,g);return this.q_.fillWeightsForPoints(this.Xb,x),this.tw(e,x,m)}nw(e,s){let i=this.Yb.get(e);i===void 0&&(i=[],this.Yb.set(e,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.q_.key(s.ot)>this.q_.key(n.ot)?nr(s)&&i.push(s):nr(s)?i[i.length-1]=s:i.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(nr)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let i=0;i<this.Xb.length&&i<e.length;++i){const n=this.Xb[i],l=e[i];if(this.q_.key(n.time)!==this.q_.key(l.time)){s=i;break}l.timeWeight=n.timeWeight,Sa(l.pointData,i)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let i=s;i<e.length;++i)Sa(e[i].pointData,i);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,i){const n={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((l,a)=>{n.ew.set(a,{$e:l,rw:a===e?i:void 0})}),this.Yb.has(e)||n.ew.set(e,{$e:[],rw:i}),n.St.hw=this.Xb,n.St.lw=s;else{const l=this.Yb.get(e);n.ew.set(e,{$e:l||[],rw:i})}return n}}function Sa(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function Qc(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function xd(t){const e=Qc(t);return t.V!==void 0&&(e.color=t.V),e}function NN(t){const e=Qc(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function jN(t){const e=Qc(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function Ip(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function bN(t){const e=Ip(t);return t.V!==void 0&&(e.color=t.V),e}function SN(t){const e=Ip(t),{V:s,Ot:i,Xh:n}=t;return s!==void 0&&(e.color=s),i!==void 0&&(e.borderColor=i),n!==void 0&&(e.wickColor=n),e}function Po(t){return{Area:NN,Line:xd,Baseline:jN,Histogram:xd,Bar:bN,Candlestick:SN,Custom:kN}[t]}function kN(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const CN={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},_N={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},EN={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Fc,attributionLogo:!0},ka={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},LN={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},MN={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Fc,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function yd(){return{width:0,height:0,autoSize:!1,layout:EN,crosshair:CN,grid:_N,overlayPriceScales:Object.assign({},ka),leftPriceScale:Object.assign(Object.assign({},ka),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ka),{visible:!0}),timeScale:LN,watermark:MN,localization:{locale:ai?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class TN{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return xl(this.ow)?this.aw.Mb(this.ow):0}Li(){return M(this.aw.$t().Uc(this.ow)).Dt}}function wd(t,e,s){const i=zp(t,["time","originalTime"]),n=Object.assign({time:e},i);return s!==void 0&&(n.originalTime=s),n}const PN={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class RN{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class $N{constructor(e,s,i,n,l){this.uw=new he,this.Es=e,this.cw=s,this.dw=i,this.q_=l,this.fw=n}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new qs(new Gi(e.from,e.to)).lu(),i=this.Es.In();if(i.Ni())return null;const n=i.ll(s.Os(),1),l=i.ll(s.ui(),-1),a=M(i.el()),o=M(i.An());if(n!==null&&l!==null&&n.ee>l.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:n===null||n.ee===a?e.from-a:n.ee-a,barsAfter:l===null||l.ee===o?o-e.to:o-l.ee};return n!==null&&l!==null&&(c.from=n.zb,c.to=l.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const i=this.Es.In().ll(e,s);return i===null?null:Po(this.seriesType())(i)}data(){const e=Po(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(i=>wd(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>wd(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return St(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=ot(St(PN),e),i=this.Es.ea(s);return new RN(i)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class zN{constructor(e,s,i){this.ww=new he,this.mu=new he,this.Om=new he,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},i=this.yl.Iu(s);this.$i.pd(i)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){ts(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),i=this.yl.Va(s,!1);return i===null?null:this.yl.It(i)}coordinateToTime(e){const s=this.$i.St(),i=s.Nu(e),n=s.Ui(i);return n===null?null:n.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},St(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function IN(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(s);if(Math.abs(n-s)<1e-8)return i;s*=10}return i}(e.minMove))}function Nd(t){return function(e){if(Qn(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=e.handleScale;Qn(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Qn(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const s=e.handleScroll;Qn(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class DN{constructor(e,s,i){this.Sw=new Map,this.kw=new Map,this.yw=new he,this.Cw=new he,this.Tw=new he,this.Pw=new wN(s);const n=i===void 0?St(yd()):ot(St(yd()),Nd(i));this.q_=s,this.aw=new fN(e,n,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const l=this.aw.$t();this.Dw=new zN(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,i){this.autoSizeActive()||this.aw._b(e,s,i)}addCustomSeries(e,s){const i=Us(e),n=Object.assign(Object.assign({},hp),i.defaultOptions());return this.Vw("Custom",n,s,i)}addAreaSeries(e){return this.Vw("Area",w0,e)}addBaselineSeries(e){return this.Vw("Baseline",N0,e)}addBarSeries(e){return this.Vw("Bar",x0,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",g0,e)}addHistogramSeries(e){return this.Vw("Histogram",j0,e)}addLineSeries(e){return this.Vw("Line",y0,e)}removeSeries(e){const s=Te(this.Sw.get(e)),i=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(i),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new TN(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(Nd(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,i){const n=this.Sw.get(i);if(n===void 0)return;const l=this.aw.$t().dr(n);l!==null&&this.aw.$t().ad(e,s,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,i={},n){IN(i.priceFormat);const l=ot(St(dp),St(s),i),a=this.aw.$t().dd(e,l,n),o=new $N(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((i,n)=>n.J(i.$e,i.rw)),s.Wu()}Bw(e){return Te(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((n,l)=>{const a=l.Qh(),o=Po(a)(n);if(a!=="Custom")ts(mN(o));else{const c=l.Ta();ts(!c||c(o)===!1)}s.set(this.Bw(l),o)});const i=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:i,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function FN(t,e,s){let i;if(Cn(t)){const l=document.getElementById(t);ts(l!==null,`Cannot find element in DOM with id=${t}`),i=l}else i=t;const n=new DN(i,e,s);return e.setOptions(n.options()),n}function Ca(t,e){return FN(t,new ld,ld.Id(e))}Object.assign(Object.assign({},dp),hp);const ve=window.location.origin,ON=[{label:"5m",interval:"5m",period:"5d"},{label:"15m",interval:"15m",period:"1mo"},{label:"1D",interval:"1d",period:"6mo"}],Ro=({initialTab:t="trade"})=>{const e=()=>{switch(t){case"trade":return"stocks";case"portfolio":return"portfolio";case"orders":return"orders";default:return"stocks"}},[s,i]=w.useState(e()),[n,l]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState(""),[h,d]=w.useState(null),[m,y]=w.useState([]),[x,g]=w.useState(1e5),[j,v]=w.useState([]),[f,p]=w.useState({stocks:!1,portfolio:!1,trade:!1,wallet:!1,fyers:!1,watchlists:!1}),[N,b]=w.useState({quantity:1,price:"",orderType:"market",broker:"virtual"}),[C,S]=w.useState(!1),[_,$]=w.useState([]),[R,K]=w.useState(!1),[X,de]=w.useState({message:"",type:"",show:!1}),[z,se]=w.useState([]),[V,L]=w.useState(null),[E,D]=w.useState([]),[F,H]=w.useState(!1),[J,ut]=w.useState([]),[Ee,_s]=w.useState(!1),[ye,Es]=w.useState({interval:"5m",period:"5d"}),[gi,Jc]=w.useState({loading:!1,error:""}),[ht,jl]=w.useState({sma:!1,ema:!1,rsi:!1}),bl=w.useRef(null),Sl=w.useRef(null),kl=w.useRef(null),W=w.useRef({chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}),Yc=!!h||Ee||F,{lastUpdate:Fp}=pi("trading-stocks",()=>Op(),1e4);vi(Fp);const Op=async()=>{var O;if(!V)return;const k=E.map(q=>q.symbol)||[],P=m.map(q=>q.symbol)||[];if([...new Set([...k,...P])].length!==0)try{const q=await qt(`${ve}/watchlist/${V.id}/stocks`);((O=q==null?void 0:q.stocks)==null?void 0:O.length)>0&&D(q.stocks)}catch(q){console.error("Failed to refresh watchlist stocks",q)}};w.useEffect(()=>(document.body.classList.toggle("modal-open",Yc),()=>document.body.classList.remove("modal-open")),[Yc]);const ce=(k,P="info")=>{de({message:k,type:P,show:!0}),setTimeout(()=>de({message:"",type:"",show:!1}),3e3)},Vp=()=>{h&&(Jc({loading:!1,error:""}),_s(!0))},qc=()=>{_s(!1),Zc()},Zc=()=>{W.current.chart&&W.current.chart.remove(),W.current.volumeChart&&W.current.volumeChart.remove(),W.current.rsiChart&&W.current.rsiChart.remove(),W.current={chart:null,volumeChart:null,rsiChart:null,candleSeries:null,volumeSeries:null,smaSeries:null,emaSeries:null,rsiSeries:null}},Cl=(k,P="")=>{Jc({loading:k,error:P})},_l=()=>{const k=W.current.chart,P=W.current.volumeChart,B=W.current.rsiChart,O=bl.current,q=Sl.current,$t=kl.current;k&&O&&k.applyOptions({width:O.clientWidth,height:O.clientHeight}),P&&q&&P.applyOptions({width:q.clientWidth,height:q.clientHeight}),B&&$t&&B.applyOptions({width:$t.clientWidth,height:$t.clientHeight})},Bp=()=>{if(W.current.chart&&W.current.volumeChart)return _l(),!0;const k=bl.current;if(!k)return!1;const P=Sl.current,B=kl.current;return W.current.chart=Ca(k,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Wi.Normal}}),W.current.candleSeries=W.current.chart.addCandlestickSeries({upColor:"#00d09c",downColor:"#ff4d4d",wickUpColor:"#00d09c",wickDownColor:"#ff4d4d",borderVisible:!1}),W.current.smaSeries=W.current.chart.addLineSeries({color:"#f5c542",lineWidth:2,priceLineVisible:!1}),W.current.emaSeries=W.current.chart.addLineSeries({color:"#4f9cf7",lineWidth:2,priceLineVisible:!1}),P&&(W.current.volumeChart=Ca(P,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!1,visible:!1},crosshair:{mode:Wi.Normal}}),W.current.volumeSeries=W.current.volumeChart.addHistogramSeries({priceFormat:{type:"volume"},color:"#26a69a",priceScaleId:""}),W.current.chart.timeScale().subscribeVisibleLogicalRangeChange(O=>{O&&W.current.volumeChart&&W.current.volumeChart.timeScale().setVisibleLogicalRange(O)})),B&&(W.current.rsiChart=Ca(B,{layout:{background:{color:"#181b21"},textColor:"#e1e3e6",fontFamily:"Inter, system-ui, sans-serif"},grid:{vertLines:{color:"#1f242d"},horzLines:{color:"#1f242d"}},rightPriceScale:{borderColor:"#2d333b"},timeScale:{timeVisible:!0,visible:!0},crosshair:{mode:Wi.Normal}}),W.current.rsiSeries=W.current.rsiChart.addLineSeries({color:"#9b74ff",lineWidth:2,priceLineVisible:!1}),W.current.rsiChart.priceScale("right").applyOptions({minValue:0,maxValue:100}),W.current.rsiSeries.createPriceLine({price:70,color:"#4f9cf7",lineWidth:1,lineStyle:Gr.Dashed}),W.current.rsiSeries.createPriceLine({price:30,color:"#ff4d4d",lineWidth:1,lineStyle:Gr.Dashed}),W.current.chart.timeScale().subscribeVisibleLogicalRangeChange(O=>{O&&W.current.rsiChart&&W.current.rsiChart.timeScale().setVisibleLogicalRange(O)})),_l(),!0},Ap=k=>{var au,ou,cu;if(!k)return;const{candleSeries:P,volumeSeries:B,smaSeries:O,emaSeries:q,rsiSeries:$t,chart:ru,rsiChart:lu}=W.current;P&&P.setData(k.candles||[]),B&&B.setData(k.volume||[]),O&&O.setData(ht.sma?((au=k.indicators)==null?void 0:au.sma20)||[]:[]),q&&q.setData(ht.ema?((ou=k.indicators)==null?void 0:ou.ema20)||[]:[]),$t&&$t.setData(ht.rsi?((cu=k.indicators)==null?void 0:cu.rsi14)||[]:[]),ru&&ru.timeScale().fitContent(),lu&&lu.timeScale().fitContent()},eu=async(k,P,B)=>{if(k){Cl(!0,"");try{const O=`${ve}/market-data/candles?symbol=${encodeURIComponent(k)}&interval=${P}&period=${B}`,q=await U(O);Ap(q),Cl(!1,"")}catch(O){Cl(!1,O.message||"Failed to load chart")}}},El=async()=>{p(k=>({...k,portfolio:!0}));try{const k=await U(`${ve}/portfolio/summary`);y(k.holdings||[]),g(k.wallet_balance||1e5)}catch(k){console.error("Failed to load portfolio",k);try{const P=await U(`${ve}/portfolio`);y(P.holdings||[])}catch{ce("Failed to load portfolio","error")}}finally{p(k=>({...k,portfolio:!1}))}},tu=async()=>{try{const k=await U(`${ve}/portfolio/orders?limit=20`);v(k.orders||[])}catch(k){console.error("Failed to load orders",k)}},Ll=async()=>{try{const k=await U(`${ve}/fyers/status`);if(S(k.connected),k.connected){p(B=>({...B,fyers:!0}));const P=await U(`${ve}/fyers/holdings`);$(P.holdings||[]),p(B=>({...B,fyers:!1}))}}catch(k){console.error("Failed to fetch Fyers data",k),p(P=>({...P,fyers:!1}))}},xi=async()=>{p(k=>({...k,watchlists:!0}));try{const P=(await U(`${ve}/watchlist`)).watchlists||[];se(P),P.length>0&&!V?(L(P[0]),Ls(P[0].id)):P.length===0&&Up()}catch(k){console.error("Failed to load watchlists",k),ce("Failed to load watchlists","error")}finally{p(k=>({...k,watchlists:!1}))}},Ls=async k=>{p(P=>({...P,stocks:!0}));try{const P=await U(`${ve}/watchlist/${k}/stocks`);D(P.stocks||[])}catch(P){console.error("Failed to load watchlist stocks",P),ce("Failed to load stocks","error")}finally{p(P=>({...P,stocks:!1}))}},Wp=async()=>{if(z.length>=15){ce("Maximum 15 watchlists allowed","error");return}const k=`Watchlist ${z.length+1}`,P=z.length;try{const B=await U(`${ve}/watchlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k,position:P})});ce(`Created ${k}`,"success"),xi()}catch(B){console.error("Failed to create watchlist",B),ce("Failed to create watchlist","error")}},Up=async()=>{try{await U(`${ve}/watchlist/initialize`,{method:"POST"}),xi()}catch(k){console.error("Failed to initialize watchlists",k)}},Hp=async k=>{if(z.length===1){ce("Cannot delete the last watchlist","error");return}try{if(await U(`${ve}/watchlist/${k}`,{method:"DELETE"}),ce("Watchlist deleted","success"),(V==null?void 0:V.id)===k){const P=z.filter(B=>B.id!==k);P.length>0&&(L(P[0]),Ls(P[0].id))}xi()}catch(P){console.error("Failed to delete watchlist",P),ce("Failed to delete watchlist","error")}},su=async k=>{if(V)try{await U(`${ve}/watchlist/${V.id}/stocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:k})}),ce(`Added ${k} to watchlist`,"success"),Ls(V.id),H(!1)}catch(P){console.error("Failed to add stock",P),ce(P.message||"Failed to add stock","error")}},Kp=async k=>{if(V)try{await U(`${ve}/watchlist/${V.id}/stocks/${k}`,{method:"DELETE"}),ce(`Removed ${k} from watchlist`,"success"),Ls(V.id)}catch(P){console.error("Failed to remove stock",P),ce("Failed to remove stock","error")}},Gp=async()=>{try{const k=await U(`${ve}/nse_data/all-stocks`);ut(k.stocks||[])}catch(k){console.error("Failed to load stocks for search",k)}};w.useEffect(()=>{if(!c.trim())o(E);else{const k=c.toUpperCase();o(E.filter(P=>P.symbol.includes(k)))}},[c,E]),w.useEffect(()=>{xi(),El(),Ll()},[]),w.useEffect(()=>{if(!Ee||!h)return;const k=Bp();k&&eu(h.symbol,ye.interval,ye.period);const P=setInterval(()=>{k&&eu(h.symbol,ye.interval,ye.period)},6e4);return()=>clearInterval(P)},[Ee,h,ye]),w.useEffect(()=>{if(!Ee){document.body.style.overflow="";return}document.body.style.overflow="hidden";const k=()=>_l();return window.addEventListener("resize",k),()=>{document.body.style.overflow="",window.removeEventListener("resize",k)}},[Ee]),w.useEffect(()=>()=>{Zc()},[]);const Xp=k=>{var P;d(k),b({quantity:1,price:((P=k.lastPrice)==null?void 0:P.toFixed(2))||"",orderType:"market"})},Qp=k=>{var B;const P={symbol:k.symbol,lastPrice:k.ltp||k.average_price,pChange:k.pnl_percent||0,dayHigh:k.ltp||k.average_price,dayLow:k.ltp||k.average_price,open:k.average_price,quantity:k.quantity,avgPrice:k.average_price,pnl:k.pnl};d(P),b({quantity:k.quantity,price:((B=P.lastPrice)==null?void 0:B.toFixed(2))||"",orderType:"market"})},Ml=()=>{d(null)},iu=async k=>{var P;if(h){if(!N.quantity||N.quantity<=0){ce("Enter a valid quantity","error");return}if(!N.price||parseFloat(N.price)<=0){ce("Enter a valid price","error");return}p(B=>({...B,trade:!0}));try{if(N.broker==="fyers"){const B={symbol:`NSE:${h.symbol}-EQ`,qty:parseInt(N.quantity),type:N.orderType==="market"?2:1,side:k==="BUY"?1:-1,productType:"CNC",limitPrice:N.orderType==="limit"?parseFloat(N.price):0,stopPrice:0,validity:"DAY",disclosedQty:0,offlineOrder:!1},O=await U(`${ve}/fyers/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});O&&O.s==="ok"?ce(`Live ${k} Order Placed on Fyers: ${O.id}`,"success"):ce(`Fyers Error: ${(O==null?void 0:O.message)||"Order failed"}`,"error")}else{const B={symbol:h.symbol,quantity:parseInt(N.quantity),price:parseFloat(N.price),side:k,order_type:N.orderType.toUpperCase(),limit_price:N.orderType==="limit"?parseFloat(N.price):null},O=await U(`${ve}/portfolio/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});y(O.holdings||[]),O.wallet_balance!==void 0&&g(O.wallet_balance);const q=N.orderType==="limit"?"(Limit)":"(Market)";ce(`${k} ${N.quantity} ${h.symbol} @ ${parseFloat(((P=O.order)==null?void 0:P.price)||N.price).toFixed(2)} ${q}`,"success")}setTimeout(()=>Ml(),1200)}catch(B){console.error("Trade failed",B),ce(B.message||"Trade failed","error")}finally{p(B=>({...B,trade:!1}))}}},Tl=m.reduce((k,P)=>k+(P.pnl||0),0),nu=m.reduce((k,P)=>k+(P.ltp||P.average_price)*P.quantity,0);return r.jsxs("div",{className:"virtual-trading",children:[X.show&&r.jsx("div",{className:`virtual-toast ${X.type}`,children:X.message}),r.jsxs("div",{className:"virtual-tabs",children:[r.jsx("button",{className:`virtual-tab ${s==="stocks"?"active":""}`,onClick:()=>i("stocks"),children:"Trade Stocks"}),r.jsx("button",{className:`virtual-tab ${s==="portfolio"?"active":""}`,onClick:()=>{i("portfolio"),El()},children:"Portfolio"}),r.jsx("button",{className:`virtual-tab ${s==="orders"?"active":""}`,onClick:()=>{i("orders"),tu()},children:"Order History"})]}),s==="stocks"&&r.jsxs("div",{className:"virtual-stocks-container",children:[r.jsxs("div",{className:"watchlist-tabs-container",children:[r.jsxs("div",{className:"watchlist-tabs",children:[z.map(k=>r.jsxs("button",{className:`watchlist-tab ${(V==null?void 0:V.id)===k.id?"active":""}`,onClick:()=>{L(k),Ls(k.id)},onDoubleClick:()=>{const P=prompt("Rename watchlist:",k.name);P&&P.trim()&&U(`${ve}/watchlist/${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:P.trim()})}).then(()=>{ce("Watchlist renamed","success"),xi()}).catch(()=>ce("Failed to rename","error"))},children:[k.name,r.jsx("span",{className:"watchlist-count",children:k.stock_count||0})]},k.id)),z.length<15&&r.jsx("button",{className:"watchlist-tab add-tab",onClick:Wp,title:"Create new watchlist",children:"+"})]}),V&&z.length>1&&r.jsx("button",{className:"delete-watchlist-btn",onClick:()=>{confirm(`Delete "${V.name}"?`)&&Hp(V.id)},title:"Delete watchlist",children:""})]}),r.jsxs("div",{className:"virtual-stocks-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("p",{className:"eyebrow",children:(V==null?void 0:V.name)||"WATCHLIST"}),r.jsxs("div",{className:"live-badge",children:[r.jsx("span",{className:"pulse-dot"}),"LIVE"]})]}),r.jsx("h2",{children:"Pick a stock to trade"}),r.jsx("p",{className:"muted",children:"Search within watchlist or add new stocks"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"primary-btn",onClick:()=>{H(!0),Gp()},children:"+ Add Stock"}),r.jsx("button",{className:"ghost-btn",onClick:()=>V&&Ls(V.id),disabled:f.stocks,children:f.stocks?"Loading...":"Refresh"})]})]}),r.jsx("div",{className:"search-row",children:r.jsx("input",{type:"text",placeholder:"Search symbol in watchlist...",value:c,onChange:k=>u(k.target.value),className:"search-input"})}),r.jsx("div",{className:"stock-grid",children:f.stocks?r.jsx("div",{className:"loading",children:"Loading stocks..."}):V?a.length===0?r.jsx("div",{className:"loading",children:c?"No stocks found":'No stocks in this watchlist. Click "Add Stock" to add some.'}):a.map(k=>r.jsxs("div",{className:"stock-item",onClick:()=>Xp(k),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:k.symbol}),r.jsxs("span",{className:"stock-price",children:["",Number(k.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("span",{className:`stock-change ${k.pChange>=0?"positive":"negative"}`,children:[k.pChange>=0?"+":"",Number(k.pChange||0).toFixed(2),"%"]}),r.jsx("button",{className:"remove-stock-btn",onClick:P=>{P.stopPropagation(),confirm(`Remove ${k.symbol} from watchlist?`)&&Kp(k.symbol)},title:"Remove from watchlist",children:""})]})]},k.symbol)):r.jsx("div",{className:"loading",children:"Create a watchlist to get started"})})]}),h&&(s==="stocks"||s==="portfolio")&&!Ee&&r.jsx("div",{className:"stock-trade-modal",onClick:Ml,children:r.jsxs("div",{className:"stock-trade-shell",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[r.jsx("h3",{style:{margin:0},children:h.symbol}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[r.jsx("button",{className:`broker-toggle ${N.broker==="virtual"?"active":""}`,onClick:()=>b({...N,broker:"virtual"}),children:"Virtual"}),C&&r.jsx("button",{className:`broker-toggle ${N.broker==="fyers"?"active":""}`,onClick:()=>b({...N,broker:"fyers"}),children:"Fyers"})]})]}),r.jsx("button",{className:"icon-button",onClick:Ml,children:""})]}),r.jsxs("div",{className:"stock-trade-content",children:[r.jsxs("div",{className:"stock-trade-price-row",children:[r.jsxs("div",{className:"stock-trade-price-block",children:[r.jsx("span",{className:"stock-trade-label",children:"Current Price"}),r.jsxs("span",{className:"stock-trade-price",children:["",Number(h.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:`chip large ${h.pChange>=0?"positive":"negative"}`,children:[h.pChange>=0?"+":"",Number(h.pChange||0).toFixed(2),"%"]})]}),r.jsxs("div",{className:"stock-trade-stats",children:[r.jsxs("div",{className:"stock-trade-stat",children:[r.jsx("span",{className:"stock-trade-stat-label",children:"High"}),r.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.dayHigh||h.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:"stock-trade-stat",children:[r.jsx("span",{className:"stock-trade-stat-label",children:"Low"}),r.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.dayLow||h.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:"stock-trade-stat",children:[r.jsx("span",{className:"stock-trade-stat-label",children:"Open"}),r.jsxs("span",{className:"stock-trade-stat-value",children:["",Number(h.open||h.lastPrice||0).toFixed(2)]})]})]}),r.jsxs("div",{className:"order-type-selector",children:[r.jsx("button",{className:`order-type-btn ${N.orderType==="market"?"active":""}`,onClick:()=>{var k;return b({...N,orderType:"market",price:((k=h.lastPrice)==null?void 0:k.toFixed(2))||""})},children:"Market Order"}),r.jsx("button",{className:`order-type-btn ${N.orderType==="limit"?"active":""}`,onClick:()=>b({...N,orderType:"limit"}),children:"Limit Order"})]}),r.jsxs("div",{className:"stock-trade-input-row",children:[r.jsxs("div",{className:"stock-trade-input-group",children:[r.jsx("label",{children:"Quantity"}),r.jsx("input",{type:"number",min:"1",value:N.quantity,onChange:k=>b({...N,quantity:k.target.value})})]}),r.jsxs("div",{className:"stock-trade-input-group",children:[r.jsx("label",{children:N.orderType==="market"?"Market Price ()":"Limit Price ()"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:N.price,onChange:k=>b({...N,price:k.target.value}),disabled:N.orderType==="market",className:N.orderType==="market"?"price-disabled":""}),N.orderType==="limit"&&r.jsx("span",{className:"limit-hint",children:"Enter your desired price"})]})]}),r.jsxs("div",{className:"stock-trade-wallet",children:[r.jsx("span",{children:"Available Balance"}),r.jsxs("span",{className:"stock-trade-wallet-value",children:["",x.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),N.orderType==="limit"&&r.jsxs("div",{className:"limit-order-info",children:[r.jsx("span",{className:"info-icon",children:""}),r.jsxs("span",{children:["Limit order will execute at ",N.price||"0.00"," or better"]})]}),r.jsxs("div",{className:"stock-trade-total",children:[r.jsx("span",{children:"Order Value"}),r.jsxs("span",{className:`stock-trade-total-value ${(N.quantity||0)*(parseFloat(N.price)||0)>x?"negative":"positive"}`,children:["",((N.quantity||0)*(parseFloat(N.price)||0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"stock-trade-actions",children:[r.jsx("button",{className:"buy-btn",onClick:()=>iu("BUY"),disabled:f.trade,children:f.trade?"Processing...":"BUY"}),r.jsx("button",{className:"sell-btn",onClick:()=>iu("SELL"),disabled:f.trade,children:f.trade?"Processing...":"SELL"}),r.jsx("button",{className:"chart-btn",onClick:Vp,disabled:gi.loading,children:"View chart"})]})]})]})}),s==="portfolio"&&r.jsxs("div",{className:"portfolio-section",children:[r.jsxs("div",{className:"portfolio-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Portfolio"}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[r.jsx("button",{className:`virtual-tab mini ${R?"":"active"}`,onClick:()=>K(!1),children:"Virtual"}),C&&r.jsx("button",{className:`virtual-tab mini ${R?"active":""}`,onClick:()=>{K(!0),Ll()},children:"Fyers Real"})]})]}),r.jsx("button",{className:"ghost-btn",onClick:()=>R?Ll():El(),disabled:f.portfolio||f.fyers,children:f.portfolio||f.fyers?"Loading...":"Refresh"})]}),R?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"portfolio-summary",children:[r.jsxs("div",{className:"summary-card highlight",children:[r.jsx("span",{className:"label",children:"Fyers Balance"}),r.jsx("span",{className:"value",children:"--"})]}),r.jsxs("div",{className:"summary-card",children:[r.jsx("span",{className:"label",children:"Live Holdings"}),r.jsxs("span",{className:"value",children:[_.length," Positions"]})]})]}),r.jsx("div",{className:"table-container",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{className:"text-right",children:"Qty"}),r.jsx("th",{className:"text-right",children:"Avg Price"}),r.jsx("th",{className:"text-right",children:"LTP"}),r.jsx("th",{className:"text-right",children:"P&L"})]})}),r.jsx("tbody",{children:f.fyers?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"loading",children:"Fetching data from Fyers..."})}):_.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"loading",children:"No holdings found in your Fyers account."})}):_.map((k,P)=>{const B=(k.lp-k.costPrice)*k.quantity,O=B>0?"positive":B<0?"negative":"";return r.jsxs("tr",{children:[r.jsx("td",{children:k.symbol.replace("NSE:","").replace("-EQ","")}),r.jsx("td",{className:"text-right",children:k.quantity}),r.jsxs("td",{className:"text-right",children:["",Number(k.costPrice).toFixed(2)]}),r.jsxs("td",{className:"text-right",children:["",Number(k.lp).toFixed(2)]}),r.jsxs("td",{className:`text-right ${O}`,children:[B>=0?"+":"","",Number(B).toFixed(2)]})]},k.symbol+P)})})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"portfolio-summary",children:[r.jsxs("div",{className:"summary-card wallet",children:[r.jsx("span",{className:"label",children:"Wallet Balance"}),r.jsxs("span",{className:"value",children:["",x.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"summary-card",children:[r.jsx("span",{className:"label",children:"Holdings Value"}),r.jsxs("span",{className:"value",children:["",nu.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:`summary-card ${Tl>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total P&L"}),r.jsxs("span",{className:"value",children:[Tl>=0?"+":"","",Tl.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"summary-card highlight",children:[r.jsx("span",{className:"label",children:"Net Worth"}),r.jsxs("span",{className:"value",children:["",(x+nu).toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("div",{className:"table-container",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{className:"text-right",children:"Qty"}),r.jsx("th",{className:"text-right",children:"Avg Price"}),r.jsx("th",{className:"text-right",children:"LTP"}),r.jsx("th",{className:"text-right",children:"P&L"})]})}),r.jsx("tbody",{children:f.portfolio?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"loading",children:"Loading portfolio..."})}):m.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"loading",children:"No holdings yet. Start trading!"})}):m.map(k=>{const P=k.pnl>0?"positive":k.pnl<0?"negative":"";return r.jsxs("tr",{className:"clickable-row",onClick:()=>Qp(k),children:[r.jsx("td",{className:"stock-link",children:k.symbol}),r.jsx("td",{className:"text-right",children:k.quantity}),r.jsxs("td",{className:"text-right",children:["",Number(k.average_price).toFixed(2)]}),r.jsx("td",{className:"text-right",children:k.ltp!=null?`${Number(k.ltp).toFixed(2)}`:"--"}),r.jsx("td",{className:`text-right ${P}`,children:k.pnl!=null?`${k.pnl>=0?"+":""}${Number(k.pnl).toFixed(2)}`:"--"})]},k.symbol)})})]})})]})]}),s==="orders"&&r.jsxs("div",{className:"portfolio-section",children:[r.jsxs("div",{className:"portfolio-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Order History"}),r.jsx("p",{className:"muted",children:"View all your virtual trades"})]}),r.jsx("button",{className:"ghost-btn",onClick:tu,children:"Refresh"})]}),r.jsx("div",{className:"table-container",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date & Time"}),r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{className:"text-right",children:"Qty"}),r.jsx("th",{className:"text-right",children:"Price"}),r.jsx("th",{className:"text-right",children:"Total"})]})}),r.jsx("tbody",{children:j.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"loading",children:"No orders yet. Start trading!"})}):j.map((k,P)=>{var O;const B=k.created_at?new Date(k.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-";return r.jsxs("tr",{children:[r.jsx("td",{children:B}),r.jsx("td",{children:k.symbol}),r.jsx("td",{children:r.jsx("span",{className:`order-side ${(O=k.side)==null?void 0:O.toLowerCase()}`,children:k.side})}),r.jsx("td",{className:"text-right",children:k.quantity}),r.jsxs("td",{className:"text-right",children:["",Number(k.price||0).toFixed(2)]}),r.jsxs("td",{className:"text-right",children:["",Number(k.total_value||0).toLocaleString()]})]},k.id||P)})})]})})]}),F&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>H(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsxs("h3",{children:["Add Stock to ",V==null?void 0:V.name]}),r.jsx("button",{className:"icon-button",onClick:()=>H(!1),children:""})]}),r.jsxs("div",{className:"stock-trade-content",children:[r.jsx("div",{className:"search-row",children:r.jsx("input",{type:"text",placeholder:"Search all NSE stocks...",value:c,onChange:k=>u(k.target.value),className:"search-input",autoFocus:!0})}),r.jsx("div",{className:"add-stock-list",children:J.length===0?r.jsx("div",{className:"loading",children:"Loading stocks..."}):(()=>{const k=c.toUpperCase(),P=k?J.filter(O=>O.symbol.includes(k)):J,B=new Set(E.map(O=>O.symbol));return P.length===0?r.jsx("div",{className:"loading",children:"No stocks found"}):P.slice(0,50).map(O=>{const q=B.has(O.symbol);return r.jsxs("div",{className:`add-stock-item ${q?"disabled":""}`,onClick:()=>!q&&su(O.symbol),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:O.symbol}),r.jsxs("span",{className:"stock-price",children:["",Number(O.lastPrice||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("span",{className:`stock-change ${O.pChange>=0?"positive":"negative"}`,children:[O.pChange>=0?"+":"",Number(O.pChange||0).toFixed(2),"%"]}),q?r.jsx("span",{className:"added-badge",children:" Added"}):r.jsx("button",{className:"add-btn-small",onClick:$t=>{$t.stopPropagation(),su(O.symbol)},children:"+ Add"})]})]},O.symbol)})})()})]})]})}),Ee&&h&&r.jsx("div",{className:"chart-modal",onClick:qc,children:r.jsxs("div",{className:"chart-shell",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"chart-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:[h.symbol," Chart"]}),r.jsxs("span",{className:"muted",children:[ye.interval.toUpperCase(),"  ",ye.period]})]}),r.jsx("button",{className:"icon-button",onClick:qc,children:""})]}),r.jsxs("div",{className:"chart-controls",children:[r.jsx("div",{className:"chart-ranges",children:ON.map(k=>r.jsx("button",{className:`chart-range ${ye.interval===k.interval&&ye.period===k.period?"active":""}`,onClick:()=>Es({interval:k.interval,period:k.period}),children:k.label},`${k.interval}-${k.period}`))}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("button",{className:`legend-item sma ${ht.sma?"active":""}`,onClick:()=>jl(k=>({...k,sma:!k.sma})),children:["SMA 20 ",ht.sma?"":""]}),r.jsxs("button",{className:`legend-item ema ${ht.ema?"active":""}`,onClick:()=>jl(k=>({...k,ema:!k.ema})),children:["EMA 20 ",ht.ema?"":""]}),r.jsxs("button",{className:`legend-item rsi ${ht.rsi?"active":""}`,onClick:()=>jl(k=>({...k,rsi:!k.rsi})),children:["RSI 14 ",ht.rsi?"":""]})]})]}),(gi.loading||gi.error)&&r.jsx("div",{className:"loading",children:gi.error||"Loading chart..."}),r.jsxs("div",{className:`chart-content ${gi.loading?"is-loading":""}`,children:[r.jsx("div",{ref:bl,className:"chart-canvas"}),r.jsx("div",{ref:Sl,className:"chart-canvas volume"}),ht.rsi&&r.jsx("div",{ref:kl,className:"chart-canvas small"})]})]})})]})},_a=window.location.origin,VN=({initialTab:t="trade"})=>{const[e,s]=w.useState({connected:!1,loading:!0,error:null}),[i,n]=w.useState(!1);w.useEffect(()=>{l()},[]);const l=async()=>{try{const c=await U(`${_a}/fyers/status`);s({connected:c.connected,loading:!1,error:null,connectedAt:c.connected_at,expiresAt:c.expires_at})}catch(c){console.error("Failed to check Fyers status:",c),s({connected:!1,loading:!1,error:c.message||"Failed to check Fyers status"})}},a=async()=>{n(!0);try{const c=await U(`${_a}/fyers/auth-url`);c.url?window.location.href=c.url:alert("Failed to get Fyers auth URL")}catch(c){console.error("Failed to get Fyers auth URL:",c),alert("Error: "+(c.message||"Failed to connect to Fyers"))}finally{n(!1)}},o=async()=>{if(confirm("Are you sure you want to disconnect Fyers?"))try{await U(`${_a}/fyers/disconnect`,{method:"DELETE"}),s({connected:!1,loading:!1,error:null})}catch(c){console.error("Failed to disconnect Fyers:",c),alert("Error: "+(c.message||"Failed to disconnect Fyers"))}};return e.loading?r.jsx("div",{className:"real-trading-container",children:r.jsxs("div",{className:"real-trading-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Checking broker connection..."})]})}):e.connected?r.jsxs("div",{className:"real-trading-container",children:[r.jsxs("div",{className:"broker-status-banner connected",children:[r.jsxs("div",{className:"broker-status-info",children:[r.jsx("span",{className:"status-icon",children:""}),r.jsxs("span",{className:"status-text",children:[r.jsx("strong",{children:"Fyers Connected"}),r.jsx("span",{className:"status-detail",children:"Live trading enabled"})]})]}),r.jsx("button",{className:"disconnect-btn",onClick:o,children:"Disconnect"})]}),r.jsx(Ro,{initialTab:t})]}):r.jsx("div",{className:"real-trading-container",children:r.jsxs("div",{className:"real-trading-connect-prompt",children:[r.jsx("div",{className:"connect-icon",children:""}),r.jsx("h2",{children:"Connect Your Broker"}),r.jsx("p",{className:"connect-description",children:"Connect your Fyers account to start real trading. Your credentials are securely handled through Fyers' official OAuth flow."}),r.jsxs("div",{className:"broker-options",children:[r.jsxs("div",{className:"broker-card fyers",children:[r.jsxs("div",{className:"broker-header",children:[r.jsx("span",{className:"broker-logo",children:""}),r.jsx("span",{className:"broker-name",children:"Fyers"})]}),r.jsx("p",{className:"broker-desc",children:"India's trusted stockbroker with low brokerage and advanced trading platform"}),r.jsx("button",{className:"connect-btn primary",onClick:a,disabled:i,children:i?"Connecting...":"Connect Fyers"})]}),r.jsxs("div",{className:"broker-card coming-soon",children:[r.jsxs("div",{className:"broker-header",children:[r.jsx("span",{className:"broker-logo",children:""}),r.jsx("span",{className:"broker-name",children:"More Brokers"})]}),r.jsx("p",{className:"broker-desc",children:"Support for Zerodha, Angel One, and more coming soon"}),r.jsx("button",{className:"connect-btn disabled",disabled:!0,children:"Coming Soon"})]})]}),e.error&&r.jsxs("div",{className:"error-message",children:[r.jsx("span",{className:"error-icon",children:""}),e.error]})]})})},BN=window.location.origin;function AN({subSection:t}){var x,g,j,v,f,p,N,b,C;const[e,s]=w.useState([]),[i,n]=w.useState(null),[l,a]=w.useState(null),[o,c]=w.useState(!0);w.useEffect(()=>{u()},[t]);const u=async()=>{c(!0);try{let S="";switch(t){case"gainers":S="/nse_data/top-gainers";break;case"losers":S="/nse_data/top-losers";break;case"bulk":S="/nse_data/bulk-deals";break;case"weekly":S="/nse_data/weekly-gainers?days=5";break;case"fii-dii":S="/nse_data/fii-dii-activity";break;default:S="/nse_data/top-gainers"}const _=await U(`${BN}${S}`);t==="weekly"?n(_):t==="bulk"?s(_.bulk_deals||[]):t==="fii-dii"?a(_):s(_.top_gainers||_.top_losers||[])}catch(S){console.error("Failed to load market data:",S)}finally{c(!1)}},h=S=>{if(!S&&S!==0)return"N/A";const _=Number(S);return isNaN(_)?"N/A":`${(_/100).toFixed(0)} Cr`},d=()=>{switch(t){case"gainers":return"Top Gainers";case"losers":return"Top Losers";case"bulk":return"Bulk Deals";case"weekly":return"Weekly Movers";case"fii-dii":return"FII/DII Activity";default:return"Market Data"}},m=()=>{switch(t){case"gainers":return"";case"losers":return"";case"bulk":return"";case"weekly":return"";case"fii-dii":return"";default:return""}};if(t==="fii-dii")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:m()}),r.jsx("h2",{children:d()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading FII/DII data..."}):l?r.jsxs("div",{className:"fii-dii-container",children:[l.date&&r.jsxs("div",{className:"fii-dii-date-header",children:["Data as of: ",r.jsx("strong",{children:l.date})]}),r.jsxs("div",{className:"fii-dii-row",children:[r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"FII (Foreign Institutional Investors)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy Value"}),r.jsx("span",{className:"value positive",children:h((x=l.fii)==null?void 0:x.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell Value"}),r.jsx("span",{className:"value negative",children:h((g=l.fii)==null?void 0:g.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((j=l.fii)==null?void 0:j.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net Value"}),r.jsx("span",{className:"value",children:h((v=l.fii)==null?void 0:v.netValue)})]})]})]}),r.jsxs("div",{className:"fii-dii-block",children:[r.jsx("div",{className:"fii-dii-title",children:"DII (Domestic Institutional Investors)"}),r.jsxs("div",{className:"fii-dii-stats",children:[r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Buy Value"}),r.jsx("span",{className:"value positive",children:h((f=l.dii)==null?void 0:f.buyValue)})]}),r.jsxs("div",{className:"fii-dii-stat",children:[r.jsx("span",{className:"label",children:"Sell Value"}),r.jsx("span",{className:"value negative",children:h((p=l.dii)==null?void 0:p.sellValue)})]}),r.jsxs("div",{className:`fii-dii-stat net ${Number((N=l.dii)==null?void 0:N.netValue)>=0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Net Value"}),r.jsx("span",{className:"value",children:h((b=l.dii)==null?void 0:b.netValue)})]})]})]})]})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No FII/DII Data"}),r.jsx("div",{className:"empty-state-text",children:"FII/DII activity data is not available at this time."})]})]});if(t==="weekly")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:m()}),r.jsx("h2",{children:d()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading weekly data..."}):(C=i==null?void 0:i.weeklyData)!=null&&C.length?r.jsx("div",{className:"weekly-container",children:i.weeklyData.map(S=>r.jsxs("div",{className:"weekly-column",children:[r.jsxs("div",{className:"weekly-header",children:[r.jsx("div",{children:S.dayName}),r.jsx("span",{className:"muted",children:S.date})]}),r.jsxs("div",{className:"weekly-block",children:[r.jsx("div",{className:"section-label positive",children:"Top Gainers"}),(S.gainers||[]).slice(0,5).map(_=>{var $;return r.jsxs("div",{className:"mini-row",children:[r.jsx("span",{children:_.symbol}),r.jsxs("span",{className:"text-right positive",children:[($=_.pChange)==null?void 0:$.toFixed(2),"%"]})]},`g-${_.symbol}`)}),r.jsx("div",{className:"section-label negative",children:"Top Losers"}),(S.losers||[]).slice(0,5).map(_=>{var $;return r.jsxs("div",{className:"mini-row",children:[r.jsx("span",{children:_.symbol}),r.jsxs("span",{className:"text-right negative",children:[($=_.pChange)==null?void 0:$.toFixed(2),"%"]})]},`l-${_.symbol}`)})]})]},S.dayName+S.date))}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Weekly Data"}),r.jsx("div",{className:"empty-state-text",children:"Weekly movers data is not available."})]})]});if(t==="bulk")return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:m()}),r.jsx("h2",{children:d()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading bulk deals..."}):e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Bulk Deals"}),r.jsx("div",{className:"empty-state-text",children:"Bulk deals data is not available."})]}):r.jsx("div",{className:"orders-table-container",children:r.jsxs("table",{className:"orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Client"}),r.jsx("th",{className:"text-right",children:"Quantity"}),r.jsx("th",{className:"text-right",children:"Price"})]})}),r.jsx("tbody",{children:e.map((S,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"order-symbol",children:S.symbol||S.BD_SYMBOL||"N/A"}),r.jsx("td",{children:S.clientName||S.client_name||S.BD_CLIENT_NAME||"N/A"}),r.jsx("td",{className:"text-right",children:(S.quantity||S.quantityTraded||S.BD_QTY_TRD||0).toLocaleString()}),r.jsxs("td",{className:"text-right",children:["",Number(S.tradePrice||S.price||S.BD_TP_WATP||0).toFixed(2)]})]},`${S.symbol}-${_}`))})]})})]});const y=t==="gainers";return r.jsxs("div",{className:"market-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:m()}),r.jsx("h2",{children:d()})]}),r.jsx("button",{onClick:u,disabled:o,children:o?"Loading...":"Refresh"})]}),o?r.jsx("div",{className:"loading",children:"Loading market data..."}):e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:m()}),r.jsx("div",{className:"empty-state-title",children:"No Data Available"}),r.jsx("div",{className:"empty-state-text",children:"Market data is not available at this time."})]}):r.jsx("div",{className:"market-grid",children:e.map((S,_)=>r.jsxs("div",{className:"market-card-item",children:[r.jsxs("div",{className:"market-card-header",children:[r.jsx("span",{className:"market-symbol",children:S.symbol}),r.jsxs("span",{className:`market-change-badge ${y?"positive":"negative"}`,children:[y?"+":"",Number(S.pChange||0).toFixed(2),"%"]})]}),r.jsxs("div",{className:"market-card-body",children:[r.jsxs("div",{className:"market-price-main",children:["",Number(S.lastPrice||0).toLocaleString()]}),r.jsxs("div",{className:"market-stats",children:[r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Open"}),r.jsxs("span",{children:["",Number(S.open||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"High"}),r.jsxs("span",{children:["",Number(S.dayHigh||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Low"}),r.jsxs("span",{children:["",Number(S.dayLow||0).toLocaleString()]})]}),r.jsxs("div",{className:"market-stat",children:[r.jsx("span",{className:"market-stat-label",children:"Prev Close"}),r.jsxs("span",{children:["",Number(S.previousClose||0).toLocaleString()]})]})]})]})]},S.symbol||_))})]})}const $o={HDFCBANK:12.96,RELIANCE:9.87,ICICIBANK:7.68,INFY:6.12,ITC:4.48,TCS:4.02,LT:3.89,BHARTIARTL:3.71,AXISBANK:3.01,SBIN:2.91,KOTAKBANK:2.62,BAJFINANCE:2.29,HINDUNILVR:2.25,MARUTI:1.68,ASIANPAINT:1.63,SUNPHARMA:1.6,TITAN:1.59,HCLTECH:1.54,NTPC:1.49,BAJAJFINSV:1.48,POWERGRID:1.44,"M&M":1.43,TATAMOTORS:1.38,ULTRACEMCO:1.36,ONGC:1.28,TECHM:1.15,NESTLEIND:1.14,TATASTEEL:1.09,WIPRO:1.05,ADANIENT:1.02,JSWSTEEL:.98,COALINDIA:.95,INDUSINDBK:.94,ADANIPORTS:.92,GRASIM:.88,HINDALCO:.85,BPCL:.82,DRREDDY:.78,BRITANNIA:.75,DIVISLAB:.72,CIPLA:.68,APOLLOHOSP:.65,HEROMOTOCO:.62,EICHERMOT:.58,TATACONSUM:.55,SBILIFE:.52,HDFCLIFE:.48,"BAJAJ-AUTO":.45,UPL:.42,LTIM:.38},Dp=24500;function WN(t,e,s,i=Dp){const n=$o[t]||0;if(!n||!s||s===0)return 0;const l=e/s*n*(i/100);return Math.round(l*100)/100}const jd={LONG_BUILDUP:{signal:"LONG_BUILDUP",label:"Long Buildup",emoji:"",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",description:"Fresh Buying - Trust this move"},SHORT_COVERING:{signal:"SHORT_COVERING",label:"Short Covering",emoji:"",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.15)",description:"Sellers Exiting - Weak move, be careful"},SHORT_BUILDUP:{signal:"SHORT_BUILDUP",label:"Short Buildup",emoji:"",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",description:"Fresh Selling - Trust the fall"},LONG_UNWINDING:{signal:"LONG_UNWINDING",label:"Long Unwinding",emoji:"",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",description:"Profit Booking - Just a dip"}};function UN(t,e){const s=t>0,i=e>0;return s&&i?"LONG_BUILDUP":s&&!i?"SHORT_COVERING":!s&&i?"SHORT_BUILDUP":"LONG_UNWINDING"}function HN(t,e=Dp){if(!t||!Array.isArray(t))return{movers:[],draggers:[],totalPositive:0,totalNegative:0};const i=[...t.filter(c=>$o[c.symbol]).map(c=>{const u=(c.lastPrice||c.ltp||0)-(c.previousClose||c.prevClose||0),h=WN(c.symbol,u,c.previousClose||c.prevClose||0,e),d=c.oiChange||0,m=c.oiChangePct||0;return{symbol:c.symbol,ltp:c.lastPrice||c.ltp||0,prevClose:c.previousClose||c.prevClose||0,priceChange:u,priceChangePct:c.pChange||u/(c.previousClose||1)*100,weight:$o[c.symbol]||0,contributionPoints:h,oiChange:d,oiChangePct:m,oiSignal:UN(u,d),dayHigh:c.dayHigh||0,dayLow:c.dayLow||0}})].sort((c,u)=>Math.abs(u.contributionPoints)-Math.abs(c.contributionPoints)),n=i.filter(c=>c.contributionPoints>0),l=i.filter(c=>c.contributionPoints<0),a=n.reduce((c,u)=>c+u.contributionPoints,0),o=l.reduce((c,u)=>c+u.contributionPoints,0);return{movers:n.slice(0,10),draggers:l.slice(0,10),totalPositive:Math.round(a*100)/100,totalNegative:Math.round(o*100)/100,netContribution:Math.round((a+o)*100)/100}}function KN(t){if(!t||t.length===0)return{strength:"neutral",message:"No data available",color:"text-gray-400 bg-gray-500/20",longBuildupCount:0,shortCoveringCount:0};const e=t.slice(0,3),s=e.filter(o=>o.oiSignal==="LONG_BUILDUP").length,i=e.filter(o=>o.oiSignal==="SHORT_COVERING").length;let n,l,a;return s>=2?(n="strong",l="Strong Trend - Fresh buying in top movers",a="strength-strong"):i>=2?(n="weak",l="Weak Rally - Mostly short covering",a="strength-weak"):(n="neutral",l="Mixed Signals - Watch carefully",a="strength-neutral"),{strength:n,message:l,color:a,longBuildupCount:s,shortCoveringCount:i}}function bd({stock:t,rank:e,type:s}){const i=jd[t.oiSignal]||jd.LONG_BUILDUP,n=s==="mover";return r.jsxs("div",{className:`contributor-card ${n?"contributor-mover":"contributor-dragger"}`,children:[r.jsxs("div",{className:"contributor-left",children:[r.jsx("span",{className:`contributor-rank ${n?"rank-positive":"rank-negative"}`,children:e}),r.jsxs("div",{className:"contributor-info",children:[r.jsx("div",{className:"contributor-symbol",children:t.symbol}),r.jsxs("div",{className:"contributor-price",children:["",Number(t.ltp).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"oi-signal-badge",style:{backgroundColor:i.bgColor,color:i.color,borderColor:i.color+"40"},title:i.description,children:[r.jsx("span",{className:"oi-signal-emoji",children:i.emoji}),r.jsx("span",{className:"oi-signal-label",children:i.label}),t.oiChangePct!==0&&r.jsxs("span",{className:"oi-signal-pct",children:["(",t.oiChangePct>0?"+":"",t.oiChangePct.toFixed(1),"%)"]})]}),r.jsxs("div",{className:"contributor-right",children:[r.jsxs("div",{className:`contribution-points ${n?"points-positive":"points-negative"}`,children:[t.contributionPoints>0?"+":"",t.contributionPoints.toFixed(1)," pts"]}),r.jsxs("div",{className:"contribution-pct",children:[t.priceChangePct>0?"+":"",Number(t.priceChangePct).toFixed(2),"%"]})]})]})}function GN({movers:t}){const e=KN(t),s=()=>{switch(e.strength){case"strong":return"";case"weak":return"";default:return""}};return r.jsxs("div",{className:`market-strength-indicator ${e.color}`,children:[r.jsxs("div",{className:"strength-message",children:[r.jsx("span",{className:"strength-icon",children:s()}),r.jsx("span",{className:"strength-text",children:e.message})]}),r.jsxs("div",{className:"strength-details",children:["Top 3: ",e.longBuildupCount," Long Buildup, ",e.shortCoveringCount," Short Covering"]})]})}const Ea=window.location.origin;function XN(){const[t,e]=w.useState([]),[s,i]=w.useState(24500),[n,l]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=pi("nifty-contributors",()=>m(),5e3),h=vi(u);w.useEffect(()=>{d()},[]);const d=async()=>{l(!0),o(null);try{const[x,g]=await Promise.all([U(`${Ea}/nse_data/nifty-contributors`),U(`${Ea}/nse_data/indices`).catch(()=>null)]);if(x!=null&&x.stocks&&e(x.stocks),g!=null&&g.indices){const j=g.indices.find(v=>v.index==="NIFTY 50"||v.indexSymbol==="NIFTY 50");(j!=null&&j.last||j!=null&&j.lastPrice)&&i(j.last||j.lastPrice)}}catch(x){console.error("Failed to load Nifty contributors:",x),o(x.message||"Failed to load data")}finally{l(!1),c.current=!1}},m=async()=>{const x=await qt(`${Ea}/nse_data/nifty-contributors`);x!=null&&x.stocks&&e(x.stocks)},y=w.useMemo(()=>HN(t,s),[t,s]);return n&&c.current?r.jsxs("div",{className:"nifty-contributors-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading Nifty contributors..."})]}):a&&t.length===0?r.jsxs("div",{className:"nifty-contributors-error",children:[r.jsx("div",{className:"error-icon",children:""}),r.jsx("p",{children:a}),r.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]}):r.jsxs("div",{className:"nifty-contributors",children:[r.jsxs("div",{className:"contributors-header",children:[r.jsxs("div",{className:"contributors-title-section",children:[r.jsxs("h2",{className:"contributors-title",children:[r.jsx("span",{className:"contributors-icon",children:""}),"Nifty Index Contributors"]}),r.jsx("p",{className:"contributors-subtitle",children:"Who's lifting vs dragging the index - Sorted by Points, not %"})]}),r.jsxs("div",{className:"contributors-header-right",children:[r.jsx(GN,{movers:y.movers}),r.jsx("button",{onClick:d,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]})]}),r.jsxs("div",{className:"contribution-summary",children:[r.jsxs("div",{className:"summary-item summary-positive",children:[r.jsx("span",{className:"summary-label",children:"Total Positive"}),r.jsxs("span",{className:"summary-value",children:["+",y.totalPositive.toFixed(1)," pts"]})]}),r.jsxs("div",{className:"summary-item summary-net",children:[r.jsx("span",{className:"summary-label",children:"Net Contribution"}),r.jsxs("span",{className:`summary-value ${y.netContribution>=0?"positive":"negative"}`,children:[y.netContribution>=0?"+":"",y.netContribution.toFixed(1)," pts"]})]}),r.jsxs("div",{className:"summary-item summary-negative",children:[r.jsx("span",{className:"summary-label",children:"Total Negative"}),r.jsxs("span",{className:"summary-value",children:[y.totalNegative.toFixed(1)," pts"]})]})]}),r.jsxs("div",{className:"contributors-grid",children:[r.jsxs("div",{className:"contributors-column movers-column",children:[r.jsxs("div",{className:"column-header",children:[r.jsxs("h3",{className:"column-title movers-title",children:[r.jsx("span",{children:""})," Index Movers"]}),r.jsxs("span",{className:"column-total positive",children:["+",y.totalPositive.toFixed(1)," pts"]})]}),r.jsx("div",{className:"contributors-list",children:y.movers.length===0?r.jsx("div",{className:"empty-contributors",children:r.jsx("p",{children:"No positive contributors"})}):y.movers.map((x,g)=>r.jsx(bd,{stock:x,rank:g+1,type:"mover"},x.symbol))})]}),r.jsxs("div",{className:"contributors-column draggers-column",children:[r.jsxs("div",{className:"column-header",children:[r.jsxs("h3",{className:"column-title draggers-title",children:[r.jsx("span",{children:""})," Index Draggers"]}),r.jsxs("span",{className:"column-total negative",children:[y.totalNegative.toFixed(1)," pts"]})]}),r.jsx("div",{className:"contributors-list",children:y.draggers.length===0?r.jsx("div",{className:"empty-contributors",children:r.jsx("p",{children:"No negative contributors"})}):y.draggers.map((x,g)=>r.jsx(bd,{stock:x,rank:g+1,type:"dragger"},x.symbol))})]})]}),r.jsxs("div",{className:"oi-legend",children:[r.jsx("div",{className:"legend-title",children:"OI Signal Guide:"}),r.jsxs("div",{className:"legend-items",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Long Buildup"}),r.jsx("span",{className:"legend-desc",children:"Fresh buying - trust the move"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Short Covering"}),r.jsx("span",{className:"legend-desc",children:"Weak move - be careful"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Short Buildup"}),r.jsx("span",{className:"legend-desc",children:"Fresh selling - trust the fall"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-emoji",children:""}),r.jsx("span",{className:"legend-label",children:"Long Unwinding"}),r.jsx("span",{className:"legend-desc",children:"Profit booking - just a dip"})]})]})]}),u&&r.jsx("div",{className:"contributors-footer",children:r.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const La=window.location.origin;function QN(){const[t,e]=w.useState(null),[s,i]=w.useState([]),[n,l]=w.useState(!0),[a,o]=w.useState(null),c=w.useRef(!0),{lastUpdate:u}=pi("fii-dii",()=>m(),6e4),h=vi(u);w.useEffect(()=>{d()},[]);const d=async()=>{l(!0),o(null);try{const[b,C]=await Promise.all([U(`${La}/nse_data/fii-dii-activity`),U(`${La}/nse_data/fii-dii-history?limit=30`)]);e(b),i((C==null?void 0:C.records)||[])}catch(b){console.error("Failed to load FII/DII data:",b),o(b.message||"Failed to load data")}finally{l(!1),c.current=!1}},m=async()=>{const b=await qt(`${La}/nse_data/fii-dii-activity`);b&&e(b)},y=b=>{if(b==null)return"";const C=b/100;return`${Math.abs(C).toFixed(2)} Cr`},x=b=>{if(b==null)return"";const C=b/100;return`${C>=0?"+":""}${C.toFixed(2)} Cr`},g=b=>b==null?"neutral":b>=0?"bullish":"bearish",v=(()=>{if(!s.length)return{fiiTotal:0,diiTotal:0,days:0};let b=0,C=0,S=0;return s.forEach(_=>{_.fii_net_value!==null&&(b+=_.fii_net_value,S++),_.dii_net_value!==null&&(C+=_.dii_net_value)}),{fiiTotal:b,diiTotal:C,days:S}})();if(n&&c.current)return r.jsxs("div",{className:"fii-dii-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading FII/DII activity..."})]});if(a&&!t)return r.jsxs("div",{className:"fii-dii-error",children:[r.jsx("div",{className:"error-icon",children:""}),r.jsx("p",{children:a}),r.jsx("button",{onClick:d,className:"retry-btn",children:"Retry"})]});const f=t==null?void 0:t.fii,p=t==null?void 0:t.dii,N=t==null?void 0:t.date;return r.jsxs("div",{className:"fii-dii-activity",children:[r.jsxs("div",{className:"fii-dii-header",children:[r.jsxs("div",{className:"fii-dii-title-section",children:[r.jsxs("h2",{className:"fii-dii-title",children:[r.jsx("span",{className:"fii-dii-icon",children:""}),"FII / DII Activity"]}),r.jsxs("p",{className:"fii-dii-subtitle",children:["Foreign & Domestic Institutional Investor flows",N&&r.jsxs("span",{className:"trade-date",children:["  ",N]})]})]}),r.jsx("button",{onClick:d,disabled:n,className:"refresh-btn",children:n?"Loading...":"Refresh"})]}),r.jsxs("div",{className:"fii-dii-cards",children:[r.jsxs("div",{className:`institutional-card fii-card ${g(f==null?void 0:f.netValue)}`,children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"FII (Foreign)"})]}),r.jsx("div",{className:`net-badge ${g(f==null?void 0:f.netValue)}`,children:(f==null?void 0:f.netValue)>=0?"Net Buyer":"Net Seller"})]}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(f==null?void 0:f.netValue)}`,children:x(f==null?void 0:f.netValue)})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Buy Value"}),r.jsx("span",{className:"detail-value buy",children:y(f==null?void 0:f.buyValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Sell Value"}),r.jsx("span",{className:"detail-value sell",children:y(f==null?void 0:f.sellValue)})]})]})]}),r.jsxs("div",{className:`institutional-card dii-card ${g(p==null?void 0:p.netValue)}`,children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"DII (Domestic)"})]}),r.jsx("div",{className:`net-badge ${g(p==null?void 0:p.netValue)}`,children:(p==null?void 0:p.netValue)>=0?"Net Buyer":"Net Seller"})]}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(p==null?void 0:p.netValue)}`,children:x(p==null?void 0:p.netValue)})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Buy Value"}),r.jsx("span",{className:"detail-value buy",children:y(p==null?void 0:p.buyValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Sell Value"}),r.jsx("span",{className:"detail-value sell",children:y(p==null?void 0:p.sellValue)})]})]})]}),r.jsxs("div",{className:`institutional-card combined-card ${g(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))}`,children:[r.jsx("div",{className:"card-header",children:r.jsxs("div",{className:"card-title",children:[r.jsx("span",{className:"card-icon",children:""}),r.jsx("span",{children:"Combined Flow"})]})}),r.jsx("div",{className:"card-net-value",children:r.jsx("span",{className:`net-amount ${g(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))}`,children:x(((f==null?void 0:f.netValue)||0)+((p==null?void 0:p.netValue)||0))})}),r.jsxs("div",{className:"card-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"FII Net"}),r.jsx("span",{className:`detail-value ${g(f==null?void 0:f.netValue)}`,children:x(f==null?void 0:f.netValue)})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"DII Net"}),r.jsx("span",{className:`detail-value ${g(p==null?void 0:p.netValue)}`,children:x(p==null?void 0:p.netValue)})]})]})]})]}),s.length>0&&r.jsxs("div",{className:"fii-dii-history",children:[r.jsxs("h3",{className:"history-title",children:["Last ",v.days," Trading Days Summary"]}),r.jsxs("div",{className:"history-summary",children:[r.jsxs("div",{className:`summary-card ${g(v.fiiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"FII Cumulative"}),r.jsx("div",{className:`summary-value ${g(v.fiiTotal)}`,children:x(v.fiiTotal)})]}),r.jsxs("div",{className:`summary-card ${g(v.diiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"DII Cumulative"}),r.jsx("div",{className:`summary-value ${g(v.diiTotal)}`,children:x(v.diiTotal)})]}),r.jsxs("div",{className:`summary-card ${g(v.fiiTotal+v.diiTotal)}`,children:[r.jsx("div",{className:"summary-label",children:"Total Institutional"}),r.jsx("div",{className:`summary-value ${g(v.fiiTotal+v.diiTotal)}`,children:x(v.fiiTotal+v.diiTotal)})]})]}),r.jsx("div",{className:"history-table-container",children:r.jsxs("table",{className:"history-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{className:"text-right",children:"FII Net"}),r.jsx("th",{className:"text-right",children:"DII Net"}),r.jsx("th",{className:"text-right",children:"Total"})]})}),r.jsx("tbody",{children:s.slice(0,10).map((b,C)=>{const S=(b.fii_net_value||0)+(b.dii_net_value||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"date-cell",children:b.trade_date?new Date(b.trade_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):""}),r.jsx("td",{className:`text-right ${g(b.fii_net_value)}`,children:x(b.fii_net_value)}),r.jsx("td",{className:`text-right ${g(b.dii_net_value)}`,children:x(b.dii_net_value)}),r.jsx("td",{className:`text-right ${g(S)}`,children:x(S)})]},b.trade_date||C)})})]})})]}),r.jsxs("div",{className:"fii-dii-insight",children:[r.jsx("div",{className:"insight-icon",children:""}),r.jsxs("div",{className:"insight-content",children:[r.jsx("div",{className:"insight-title",children:"Market Insight"}),r.jsx("div",{className:"insight-text",children:(()=>{const b=(f==null?void 0:f.netValue)||0,C=(p==null?void 0:p.netValue)||0;return b>0&&C>0?"Both FII & DII are buying - Strong bullish sentiment with institutional support.":b<0&&C<0?"Both FII & DII are selling - Bearish sentiment, institutions are risk-off.":b<0&&C>0?"FII selling, DII buying - DIIs absorbing FII selling pressure. Watch for support levels.":b>0&&C<0?"FII buying, DII selling - Foreign interest increasing. DIIs may be booking profits.":"Mixed institutional activity. Monitor for clearer directional signals."})()})]})]}),u&&r.jsx("div",{className:"fii-dii-footer",children:r.jsxs("span",{className:"last-update",children:["Last updated: ",h]})})]})}const Sd=window.location.origin;function JN({subSection:t,onNavigate:e}){const[s,i]=w.useState(null),[n,l]=w.useState([]),[a,o]=w.useState(!0);w.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[j,v]=await Promise.all([U(`${Sd}/portfolio/summary`).catch(()=>null),U(`${Sd}/portfolio/orders`).catch(()=>({orders:[]}))]);i(j),l(v.orders||[])}catch(j){console.error("Failed to load wallet data:",j)}finally{o(!1)}},u=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(j||0),h=j=>j?new Date(j).toLocaleDateString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",d=(s==null?void 0:s.wallet_balance)??1e5,m=(s==null?void 0:s.total_invested)??0,y=(s==null?void 0:s.current_value)??0,x=(s==null?void 0:s.total_pnl)??0,g=d+y;return t==="transactions"?r.jsxs("div",{className:"wallet-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Transactions"})]}),r.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?r.jsx("div",{className:"loading",children:"Loading transactions..."}):n.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Transactions"}),r.jsx("div",{className:"empty-state-text",children:"Start trading to see your transaction history here."}),r.jsx("button",{className:"primary-btn",onClick:()=>e("trading.trade"),children:"Start Trading"})]}):r.jsx("div",{className:"orders-table-container",children:r.jsxs("table",{className:"orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Type"}),r.jsx("th",{className:"text-right",children:"Amount"})]})}),r.jsx("tbody",{children:n.map((j,v)=>{var f;return r.jsxs("tr",{children:[r.jsx("td",{children:h(j.created_at)}),r.jsxs("td",{children:[j.side==="BUY"?"Bought":"Sold"," ",j.quantity," ",j.symbol]}),r.jsx("td",{children:r.jsx("span",{className:`order-side ${(f=j.side)==null?void 0:f.toLowerCase()}`,children:j.side})}),r.jsxs("td",{className:`text-right ${j.side==="BUY"?"negative":"positive"}`,children:[j.side==="BUY"?"-":"+","",Number(j.total_value||0).toLocaleString()]})]},j.id||v)})})]})})]}):r.jsxs("div",{className:"wallet-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Wallet"})]}),r.jsx("button",{onClick:c,disabled:a,children:a?"Loading...":"Refresh"})]}),a?r.jsx("div",{className:"loading",children:"Loading wallet..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"wallet-overview",children:[r.jsxs("div",{className:"wallet-balance-card",children:[r.jsx("div",{className:"wallet-balance-label",children:"Available Balance"}),r.jsx("div",{className:"wallet-balance-value",children:u(d)}),r.jsx("div",{className:"wallet-balance-change",children:r.jsxs("span",{className:x>=0?"positive":"negative",children:[x>=0?"":""," ",u(Math.abs(x))," today"]})})]}),r.jsxs("div",{className:"wallet-actions-card",children:[r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.trade"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"Trade Stocks"})]}),r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("wallet.transactions"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"View Transactions"})]}),r.jsxs("button",{className:"wallet-action-btn",onClick:()=>e("trading.portfolio"),children:[r.jsx("span",{className:"wallet-action-icon",children:""}),r.jsx("span",{children:"View Portfolio"})]})]})]}),r.jsxs("div",{className:"wallet-stats-grid",children:[r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Net Worth"}),r.jsx("span",{className:"wallet-stat-value",children:u(g)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Invested"}),r.jsx("span",{className:"wallet-stat-value",children:u(m)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Current Value"}),r.jsx("span",{className:"wallet-stat-value",children:u(y)})]})]}),r.jsxs("div",{className:"wallet-stat-card",children:[r.jsx("div",{className:"wallet-stat-icon",children:""}),r.jsxs("div",{className:"wallet-stat-content",children:[r.jsx("span",{className:"wallet-stat-label",children:"Total P&L"}),r.jsxs("span",{className:`wallet-stat-value ${x>=0?"positive":"negative"}`,children:[x>=0?"+":"",u(x)]})]})]})]}),n.length>0&&r.jsxs("div",{className:"wallet-recent",children:[r.jsxs("div",{className:"wallet-recent-header",children:[r.jsx("h3",{children:"Recent Transactions"}),r.jsx("button",{className:"link-btn",onClick:()=>e("wallet.transactions"),children:"View All "})]}),r.jsx("div",{className:"wallet-recent-list",children:n.slice(0,5).map((j,v)=>{var f;return r.jsxs("div",{className:"wallet-recent-item",children:[r.jsxs("div",{className:"wallet-recent-info",children:[r.jsx("span",{className:`order-side ${(f=j.side)==null?void 0:f.toLowerCase()}`,children:j.side}),r.jsxs("span",{className:"wallet-recent-desc",children:[j.quantity," ",j.symbol]})]}),r.jsxs("span",{className:j.side==="BUY"?"negative":"positive",children:[j.side==="BUY"?"-":"+","",Number(j.total_value||0).toLocaleString()]})]},j.id||v)})})]})]})]})}const kd=window.location.origin;function YN({onNavigate:t}){const[e,s]=w.useState([]),[i,n]=w.useState([]),[l,a]=w.useState(!0),[o,c]=w.useState(""),[u,h]=w.useState(!1),{lastUpdate:d}=pi("watchlist-prices",()=>x(),5e3);vi(d),w.useEffect(()=>{m(),y()},[]);const m=async()=>{const f=localStorage.getItem("watchlist");f&&s(JSON.parse(f))},y=async()=>{a(!0);try{const f=await U(`${kd}/nse_data/all-stocks`);n(f.stocks||[])}catch(f){console.error("Failed to load stocks:",f)}finally{a(!1)}},x=async()=>{var p;const f=await qt(`${kd}/nse_data/all-stocks`);if(((p=f==null?void 0:f.stocks)==null?void 0:p.length)>0){n(f.stocks);const N=localStorage.getItem("watchlist");if(N){const C=JSON.parse(N).map(S=>f.stocks.find($=>$.symbol===S.symbol)||S);s(C)}}},g=f=>{if(!e.find(N=>N.symbol===f.symbol)){const N=[...e,f];s(N),localStorage.setItem("watchlist",JSON.stringify(N))}h(!1),c("")},j=f=>{const p=e.filter(N=>N.symbol!==f);s(p),localStorage.setItem("watchlist",JSON.stringify(p))},v=i.filter(f=>{var p,N;return((p=f.symbol)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))||((N=f.identifier)==null?void 0:N.toLowerCase().includes(o.toLowerCase()))});return r.jsxs("div",{className:"watchlist-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Watchlist"})]}),r.jsxs("div",{className:"section-actions",children:[r.jsx("button",{onClick:()=>h(!0),children:"+ Add Stock"}),r.jsx("button",{onClick:y,disabled:l,children:l?"Loading...":"Refresh"})]})]}),e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Stocks in Watchlist"}),r.jsx("div",{className:"empty-state-text",children:"Add stocks to your watchlist to track them easily."}),r.jsx("button",{className:"primary-btn",onClick:()=>h(!0),children:"Add Your First Stock"})]}):r.jsx("div",{className:"watchlist-grid",children:e.map(f=>{const p=i.find(C=>C.symbol===f.symbol),N=(p==null?void 0:p.lastPrice)||f.lastPrice||0,b=(p==null?void 0:p.pChange)||f.pChange||0;return r.jsxs("div",{className:"watchlist-item",children:[r.jsxs("div",{className:"watchlist-info",children:[r.jsx("span",{className:"watchlist-symbol",children:f.symbol}),r.jsx("span",{className:"watchlist-name",children:f.identifier||"Equity"})]}),r.jsxs("div",{className:"watchlist-price-info",children:[r.jsxs("div",{className:"watchlist-price",children:["",Number(N).toLocaleString()]}),r.jsxs("div",{className:`watchlist-change ${b>=0?"positive":"negative"}`,children:[b>=0?"+":"",Number(b).toFixed(2),"%"]})]}),r.jsxs("div",{className:"watchlist-actions",children:[r.jsx("button",{className:"watchlist-action-btn",onClick:()=>t("trading.trade"),title:"Trade",children:""}),r.jsx("button",{className:"watchlist-action-btn remove",onClick:()=>j(f.symbol),title:"Remove",children:""})]})]},f.symbol)})}),u&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>h(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsxs("div",{children:[r.jsx("h3",{children:"Add to Watchlist"}),r.jsx("p",{className:"muted",children:"Search and add stocks to your watchlist"})]}),r.jsx("button",{className:"icon-button",onClick:()=>h(!1),children:""})]}),r.jsx("input",{type:"text",className:"search-input",placeholder:"Search stocks by symbol or name...",value:o,onChange:f=>c(f.target.value),autoFocus:!0}),r.jsx("div",{className:"stock-list",style:{maxHeight:"400px"},children:l?r.jsx("div",{className:"loading",children:"Loading stocks..."}):v.length===0?r.jsx("div",{className:"loading",children:"No stocks found"}):v.slice(0,20).map(f=>{const p=e.find(N=>N.symbol===f.symbol);return r.jsxs("div",{className:`stock-item ${p?"selected":""}`,onClick:()=>!p&&g(f),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:f.symbol}),r.jsx("span",{className:"stock-price",children:f.identifier||"Equity"})]}),r.jsx("div",{className:"stock-change",children:p?r.jsx("span",{className:"muted",children:"Added "}):f.lastPrice?r.jsxs("span",{className:f.pChange>=0?"positive":"negative",children:["",Number(f.lastPrice).toLocaleString()]}):r.jsx("span",{className:"muted",children:"-"})})]},f.symbol)})})]})})]})}function qN({subSection:t}){const e=mi(),{theme:s,setTheme:i}=ap(),n=localStorage.getItem("user_email")||"User",l=localStorage.getItem("user_name")||n.split("@")[0],[a,o]=w.useState(l),[c,u]=w.useState(localStorage.getItem("profile_pic")||""),[h,d]=w.useState(!1),[m,y]=w.useState(!1),[x,g]=w.useState(!1),j=w.useRef(null);Ma.useEffect(()=>{v()},[]),Ma.useEffect(()=>{v()},[t]);const v=async()=>{try{const $=await(await fetch("/fyers/status",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();y($.connected)}catch(_){console.error("Error checking Fyers status:",_)}},f=async()=>{g(!0);try{const $=await(await fetch("/fyers/auth-url",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();$.url&&(window.location.href=$.url)}catch(_){console.error("Error getting Fyers auth URL:",_),alert("Failed to connect to Fyers. Please try again later.")}finally{g(!1)}},p=async()=>{if(confirm("Are you sure you want to disconnect your Fyers account?"))try{await fetch("/fyers/disconnect",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),y(!1)}catch(_){console.error("Error disconnecting Fyers:",_)}},N=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),e("/login")},b=()=>{d(!1),alert("Wallet reset feature coming soon!")},C=_=>{var R;const $=(R=_.target.files)==null?void 0:R[0];if($){const K=new FileReader;K.onloadend=()=>{const X=K.result;u(X),localStorage.setItem("profile_pic",X)},K.readAsDataURL($)}},S=()=>{localStorage.setItem("user_name",a),alert("Display name saved!")};return t==="preferences"?r.jsxs("div",{className:"settings-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Preferences"})]})}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Display Settings"}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Theme"}),r.jsx("span",{className:"settings-item-desc",children:"Choose your preferred theme"})]}),r.jsxs("select",{className:"settings-select",value:s,onChange:_=>{i(_.target.value)},children:[r.jsx("option",{value:"dark",children:"Dark Mode"}),r.jsx("option",{value:"light",children:"Light Mode"}),r.jsx("option",{value:"glass",children:"Glass Mode"})]})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Currency Format"}),r.jsx("span",{className:"settings-item-desc",children:"Display currency format"})]}),r.jsx("select",{className:"settings-select",defaultValue:"inr",children:r.jsx("option",{value:"inr",children:" INR (Indian Rupee)"})})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Chart Default Interval"}),r.jsx("span",{className:"settings-item-desc",children:"Default time interval for charts"})]}),r.jsxs("select",{className:"settings-select",defaultValue:"1d",children:[r.jsx("option",{value:"1m",children:"1 Minute"}),r.jsx("option",{value:"5m",children:"5 Minutes"}),r.jsx("option",{value:"15m",children:"15 Minutes"}),r.jsx("option",{value:"1h",children:"1 Hour"}),r.jsx("option",{value:"1d",children:"1 Day"})]})]})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Notifications"}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Trade Notifications"}),r.jsx("span",{className:"settings-item-desc",children:"Get notified when trades are executed"})]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0}),r.jsx("span",{className:"toggle-slider"})]})]}),r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Price Alerts"}),r.jsx("span",{className:"settings-item-desc",children:"Receive alerts when stocks hit target prices"})]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0}),r.jsx("span",{className:"toggle-slider"})]})]})]})]})]}):r.jsxs("div",{className:"settings-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Profile"})]})}),r.jsx("div",{className:"settings-card",children:r.jsxs("div",{className:"profile-header",children:[r.jsxs("div",{className:"profile-avatar clickable",onClick:()=>{var _;return(_=j.current)==null?void 0:_.click()},title:"Click to change profile picture",style:c?{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[!c&&a.charAt(0).toUpperCase(),r.jsx("div",{className:"avatar-overlay",children:""})]}),r.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:C,style:{display:"none"}}),r.jsxs("div",{className:"profile-info",children:[r.jsx("h3",{children:a}),r.jsx("span",{className:"profile-email",children:n}),r.jsx("span",{className:"profile-badge",children:"Paper Trading Account"})]})]})}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Personal Information"}),r.jsx("div",{className:"settings-list",children:r.jsxs("div",{className:"settings-item",children:[r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Display Name"}),r.jsx("span",{className:"settings-item-desc",children:"This name will be shown in the app"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",className:"settings-input",value:a,onChange:_=>o(_.target.value),placeholder:"Enter your name"}),r.jsx("button",{className:"settings-action-link primary",onClick:S,children:"Save"})]})]})})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Broker Connections"}),r.jsx("p",{className:"settings-desc",children:"Connect your real broker accounts to view holdings and place real trades."}),r.jsxs("div",{className:"settings-list",children:[r.jsxs("div",{className:"settings-item",children:[r.jsx("div",{className:"settings-item-info",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.5rem"},children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"settings-item-label",children:"Fyers"}),r.jsx("span",{className:"settings-item-desc",children:"Trade with your Fyers account"})]})]})}),m?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("span",{className:"badge-connected",children:"Connected"}),r.jsx("button",{className:"settings-action-link danger",onClick:p,children:"Disconnect"})]}):r.jsx("button",{className:"settings-action-link primary",onClick:f,disabled:x,children:x?"Connecting...":"Connect"})]}),r.jsx("div",{className:"settings-item disabled",children:r.jsx("div",{className:"settings-item-info",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.5rem"},children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"settings-item-label",children:"Zerodha"}),r.jsx("span",{className:"settings-item-desc",children:"Coming Soon"})]})]})})})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Account Information"}),r.jsxs("div",{className:"settings-list",children:[r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Email"}),r.jsx("span",{className:"settings-item-value",children:n})]})}),r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Account Type"}),r.jsx("span",{className:"settings-item-value",children:"Virtual Trading (Demo)"})]})}),r.jsx("div",{className:"settings-item",children:r.jsxs("div",{className:"settings-item-info",children:[r.jsx("span",{className:"settings-item-label",children:"Starting Balance"}),r.jsx("span",{className:"settings-item-value",children:"1,00,000"})]})})]})]}),r.jsxs("div",{className:"settings-card",children:[r.jsx("h3",{children:"Account Actions"}),r.jsxs("div",{className:"settings-actions",children:[r.jsxs("button",{className:"settings-action-btn warning",onClick:()=>d(!0),children:[r.jsx("span",{children:""}),"Reset Wallet"]}),r.jsxs("button",{className:"settings-action-btn danger",onClick:N,children:[r.jsx("span",{children:""}),"Logout"]})]})]}),h&&r.jsx("div",{className:"stock-trade-modal",onClick:()=>d(!1),children:r.jsxs("div",{className:"stock-trade-shell",onClick:_=>_.stopPropagation(),style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"stock-trade-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Reset Wallet?"})}),r.jsx("button",{className:"icon-button",onClick:()=>d(!1),children:""})]}),r.jsx("p",{style:{marginBottom:"1.5rem"},children:"This will reset your wallet balance to 1,00,000 and clear all your holdings and order history. This action cannot be undone."}),r.jsxs("div",{className:"stock-trade-actions",style:{gridTemplateColumns:"1fr 1fr"},children:[r.jsx("button",{className:"chart-btn",onClick:()=>d(!1),children:"Cancel"}),r.jsx("button",{className:"sell-btn",onClick:b,children:"Reset Wallet"})]})]})})]})}const rr=window.location.origin;function Cd(){var $,R,K,X,de,z,se,V;const[t,e]=w.useState("NIFTY"),[s,i]=w.useState(null),[n,l]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(!0),[h,d]=w.useState(null),m=w.useRef(!0),{lastUpdate:y}=pi("option-clock",()=>j(),6e4),x=vi(y);w.useEffect(()=>{g()},[t]);const g=async()=>{u(!0),d(null);try{const[L,E,D]=await Promise.all([U(`${rr}/option-clock/overview`),U(`${rr}/option-clock/intraday/${t}`),U(`${rr}/option-clock/strike-analysis/${t}`)]);i(L),l((E==null?void 0:E.snapshots)||[]),o(D)}catch(L){console.error("Failed to load Option Clock data:",L),d(L.message||"Failed to load data")}finally{u(!1),m.current=!1}},j=async()=>{try{const L=await qt(`${rr}/option-clock/overview`);L&&i(L)}catch(L){console.error("Silent refresh failed:",L)}},v=L=>{switch(L){case"LONG_BUILDUP":return"bullish";case"SHORT_COVERING":return"bullish";case"SHORT_BUILDUP":return"bearish";case"LONG_UNWINDING":return"bearish";default:return"neutral"}},f=L=>{switch(L){case"LONG_BUILDUP":return"Price + OI Rising - Fresh Buying";case"SHORT_COVERING":return"Price Rising, OI Falling - Short Exit";case"SHORT_BUILDUP":return"Price Falling, OI Rising - Fresh Selling";case"LONG_UNWINDING":return"Price + OI Falling - Long Exit";default:return"No clear signal"}},p=L=>L?L.replace(/_/g," "):"N/A",N=L=>L?L>1.5?{text:"Heavy Put Writing - Bullish",color:"bullish"}:L>1.2?{text:"Put Heavy - Moderate Bullish",color:"bullish"}:L<.7?{text:"Heavy Call Writing - Bearish",color:"bearish"}:L<.9?{text:"Call Heavy - Moderate Bearish",color:"bearish"}:{text:"Balanced - Neutral",color:"neutral"}:{text:"No Data",color:"neutral"},b=s==null?void 0:s[t.toLowerCase()];if(c&&m.current)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]})}),r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading Option Clock data..."})]})]});const C=L=>{if(!L)return!0;const E=new Date(L);return(new Date-E)/(1e3*60*60)>1},S=L=>{if(!L)return"No data";const E=new Date(L),F=new Date-E,H=Math.floor(F/(1e3*60)),J=Math.floor(F/(1e3*60*60)),ut=Math.floor(F/(1e3*60*60*24));return ut>0?`${ut} day${ut>1?"s":""} ago`:J>0?`${J} hour${J>1?"s":""} ago`:H>0?`${H} min${H>1?"s":""} ago`:"Just now"};if(h&&!b&&!s)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]})}),r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),r.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",r.jsx("br",{}),r.jsx("br",{}),"Data is fetched every 15 minutes when the market is open.",r.jsx("br",{}),"Once collected, the last available data will be shown here even when market is closed."]}),r.jsx("button",{className:"refresh-btn",onClick:g,style:{marginTop:"1rem"},children:"Check Again"})]})]});const _=N(b==null?void 0:b.pcr);return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Clock"})]}),r.jsxs("p",{className:"section-subtitle",children:["OI-based market timing - Last updated: ",x]})]}),r.jsx("div",{className:"card symbol-selector-card",children:r.jsxs("div",{className:"symbol-toggle",children:[r.jsx("button",{className:`symbol-btn ${t==="NIFTY"?"active":""}`,onClick:()=>e("NIFTY"),children:"NIFTY 50"}),r.jsx("button",{className:`symbol-btn ${t==="BANKNIFTY"?"active":""}`,onClick:()=>e("BANKNIFTY"),children:"BANK NIFTY"})]})}),b&&(C(b.timestamp)?r.jsxs("div",{className:"stale-data-banner",children:[r.jsx("span",{className:"stale-data-icon",children:""}),r.jsxs("span",{className:"stale-data-text",children:[r.jsx("strong",{children:"Market Closed"})," - Showing last available data from ",S(b.timestamp),b.timestamp&&r.jsxs("span",{className:"stale-data-time",children:["(",new Date(b.timestamp).toLocaleString("en-IN",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),")"]})]})]}):r.jsxs("div",{className:"live-data-banner",children:[r.jsx("span",{className:"live-data-icon"}),r.jsxs("span",{className:"live-data-text",children:["Live Data - Updated ",S(b.timestamp)]})]})),b?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`signal-card ${v(b.signal)}`,children:[r.jsxs("div",{className:"signal-header",children:[r.jsx("span",{className:"signal-label",children:"Current Signal"}),r.jsx("span",{className:`signal-badge ${v(b.signal)}`,children:b.signal_strength})]}),r.jsx("div",{className:"signal-value",children:p(b.signal)}),r.jsx("div",{className:"signal-description",children:f(b.signal)})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsxs("div",{className:"stat-card-label",children:[t," Spot"]}),r.jsx("div",{className:"stat-card-value",children:($=b.spot_price)==null?void 0:$.toLocaleString("en-IN",{maximumFractionDigits:2})}),r.jsxs("div",{className:`stat-card-change ${b.price_change>=0?"positive":"negative"}`,children:[b.price_change>=0?"+":"",(R=b.price_change)==null?void 0:R.toFixed(2)," (",(K=b.price_change_pct)==null?void 0:K.toFixed(2),"%)"]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:`stat-card-icon ${_.color==="bullish"?"green":_.color==="bearish"?"red":"blue"}`,children:""})}),r.jsx("div",{className:"stat-card-label",children:"Put-Call Ratio"}),r.jsx("div",{className:"stat-card-value",children:((X=b.pcr)==null?void 0:X.toFixed(3))||"N/A"}),r.jsx("div",{className:`stat-card-change ${_.color}`,children:_.text})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Max Pain Strike"}),r.jsx("div",{className:"stat-card-value",children:((de=b.max_pain_strike)==null?void 0:de.toLocaleString("en-IN"))||"N/A"}),r.jsx("div",{className:"stat-card-change neutral",children:"Expected expiry level"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Data Timestamp"}),r.jsx("div",{className:"stat-card-value",style:{fontSize:"1rem"},children:b.timestamp?new Date(b.timestamp).toLocaleTimeString("en-IN"):"N/A"}),r.jsx("div",{className:"stat-card-change neutral",children:"Updates every 15 min"})]})]}),a&&r.jsxs("div",{className:"card strike-levels-card",children:[r.jsx("h3",{children:"Key Strike Levels"}),r.jsxs("div",{className:"strike-levels-grid",children:[r.jsxs("div",{className:"strike-level-item support",children:[r.jsx("span",{className:"strike-label",children:"Highest Put OI (Support)"}),r.jsx("span",{className:"strike-value",children:((z=a.highest_put_oi_strike)==null?void 0:z.toLocaleString("en-IN"))||"N/A"})]}),r.jsxs("div",{className:"strike-level-item current",children:[r.jsx("span",{className:"strike-label",children:"Current Spot"}),r.jsx("span",{className:"strike-value",children:((se=a.spot_price)==null?void 0:se.toLocaleString("en-IN",{maximumFractionDigits:2}))||"N/A"})]}),r.jsxs("div",{className:"strike-level-item resistance",children:[r.jsx("span",{className:"strike-label",children:"Highest Call OI (Resistance)"}),r.jsx("span",{className:"strike-value",children:((V=a.highest_call_oi_strike)==null?void 0:V.toLocaleString("en-IN"))||"N/A"})]})]})]}),n.length>0&&r.jsxs("div",{className:"card intraday-timeline-card",children:[r.jsx("h3",{children:"Today's PCR Timeline"}),r.jsx("div",{className:"pcr-timeline",children:n.slice(-10).map((L,E)=>{var D,F;return r.jsxs("div",{className:`timeline-item ${v(L.signal)}`,title:`${new Date(L.timestamp).toLocaleTimeString()} - ${p(L.signal)}`,children:[r.jsx("div",{className:"timeline-time",children:new Date(L.timestamp).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),r.jsx("div",{className:"timeline-pcr",children:(D=L.pcr)==null?void 0:D.toFixed(2)}),r.jsx("div",{className:`timeline-signal ${v(L.signal)}`,children:(F=L.signal)==null?void 0:F.split("_")[0]})]},E)})})]}),(a==null?void 0:a.strikes)&&a.strikes.length>0&&r.jsxs("div",{className:"card strike-table-card",children:[r.jsx("h3",{children:"Strike-wise Open Interest"}),r.jsx("div",{className:"strike-table-container",children:r.jsxs("table",{className:"strike-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Call OI"}),r.jsx("th",{children:"Call Chg"}),r.jsx("th",{children:"Strike"}),r.jsx("th",{children:"Put Chg"}),r.jsx("th",{children:"Put OI"})]})}),r.jsx("tbody",{children:a.strikes.filter(L=>Math.abs(L.strike-a.spot_price)<=500).map((L,E)=>r.jsxs("tr",{className:L.is_atm?"atm-row":"",children:[r.jsxs("td",{className:L.is_resistance?"highlight-cell bearish":"",children:[(L.call_oi/1e5).toFixed(1),"L"]}),r.jsxs("td",{className:L.call_oi_change>0?"positive":L.call_oi_change<0?"negative":"",children:[L.call_oi_change>0?"+":"",(L.call_oi_change/1e5).toFixed(2),"L"]}),r.jsx("td",{className:"strike-col",children:L.strike}),r.jsxs("td",{className:L.put_oi_change>0?"positive":L.put_oi_change<0?"negative":"",children:[L.put_oi_change>0?"+":"",(L.put_oi_change/1e5).toFixed(2),"L"]}),r.jsxs("td",{className:L.is_support?"highlight-cell bullish":"",children:[(L.put_oi/1e5).toFixed(1),"L"]})]},E))})]})})]}),r.jsxs("div",{className:"card signal-legend-card",children:[r.jsx("h3",{children:"Signal Legend"}),r.jsxs("div",{className:"signal-legend-grid",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bullish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Long Buildup:"})," Bullish - Fresh buying (Price + OI rising)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bullish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Short Covering:"})," Weak Bullish - Shorts exiting (Price rising, OI falling)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bearish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Short Buildup:"})," Bearish - Fresh selling (Price falling, OI rising)"]})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot bearish"}),r.jsxs("span",{className:"legend-text",children:[r.jsx("strong",{children:"Long Unwinding:"})," Weak Bearish - Longs exiting (Price + OI falling)"]})]})]})]})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state-icon",children:""}),r.jsx("div",{className:"empty-state-title",children:"No Data Available Yet"}),r.jsxs("div",{className:"empty-state-text",children:["Option Clock data will be collected during market hours (9:15 AM - 3:30 PM IST).",r.jsx("br",{}),r.jsx("br",{}),"Once data is collected, it will be displayed here even when market is closed."]})]})]})}function ZN(){const[t,e]=w.useState("5m"),[s,i]=w.useState("all"),[n,l]=w.useState(!0),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,d]=w.useState(null),m=[{id:"all",label:"All Signals",icon:""},{id:"ENTRY",label:"Entry Signals",icon:""},{id:"EXIT",label:"Exit Signals",icon:""}];w.useEffect(()=>{(async()=>{try{const p=fn(),N=await fetch("http://localhost:8000/option-apex/timeframes",{headers:{Authorization:`Bearer ${p}`}});if(N.ok){const b=await N.json();u(b.timeframes||[])}}catch(p){console.error("Error fetching timeframes:",p)}})()},[]),w.useEffect(()=>{const f=async()=>{l(!0),d(null);try{const N=fn();let C="http://localhost:8000/option-apex/signals/active?min_confidence=0";s!=="all"&&(C+=`&signal_type=${s}`);const S=await fetch(C,{headers:{Authorization:`Bearer ${N}`}});if(S.ok){const _=await S.json();o(_.signals||[])}}catch(N){console.error("Error fetching Option Apex data:",N),d("Failed to load Option Apex data")}finally{l(!1)}};f();const p=setInterval(f,3e4);return()=>clearInterval(p)},[s]);const y=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Direction"}),r.jsx("th",{children:"Confidence"}),r.jsx("th",{children:"Entry"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Stop Loss"}),r.jsx("th",{children:"Generated"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No active signals found"})}):a.slice(0,20).map((f,p)=>{var N,b,C,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:f.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.signal_type==="ENTRY"?"badge-green":"badge-red"}`,children:f.signal_type})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.direction==="BULLISH"?"badge-green":"badge-red"}`,children:f.direction})}),r.jsx("td",{children:r.jsxs("span",{className:`badge ${f.confidence_score>=80?"badge-green":f.confidence_score>=60?"badge-blue":"badge-yellow"}`,children:[(N=f.confidence_score)==null?void 0:N.toFixed(0),"%"]})}),r.jsxs("td",{children:["",(b=f.entry_level)==null?void 0:b.toFixed(2)]}),r.jsxs("td",{children:["",(C=f.target_level)==null?void 0:C.toFixed(2)]}),r.jsxs("td",{children:["",(S=f.stop_loss_level)==null?void 0:S.toFixed(2)]}),r.jsx("td",{style:{fontSize:"0.85rem",opacity:.8},children:f.generated_at?new Date(f.generated_at).toLocaleTimeString():"-"})]},p)})})]})}),x=a.filter(f=>f.signal_type==="ENTRY"),g=a.filter(f=>f.signal_type==="EXIT"),j=a.filter(f=>f.direction==="BULLISH"),v=a.filter(f=>f.confidence_score>=80);return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Option Apex"})]}),r.jsx("p",{className:"section-subtitle",children:"Real-time option candle analysis with institutional flow detection"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Entry Signals"}),r.jsx("div",{className:"stat-card-value",children:x.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon red",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Exit Signals"}),r.jsx("div",{className:"stat-card-value",children:g.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Bullish Signals"}),r.jsx("div",{className:"stat-card-value",children:j.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"High Confidence (80+)"}),r.jsx("div",{className:"stat-card-value",children:v.length})]})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Select Timeframe"}),r.jsx("div",{className:"filter-buttons",children:c.length>0?c.map(f=>r.jsxs("button",{className:`filter-btn ${t===f.value?"active":""}`,onClick:()=>e(f.value),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),f.label]},f.value)):r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:`filter-btn ${t==="1m"?"active":""}`,onClick:()=>e("1m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"1 Minute"]}),r.jsxs("button",{className:`filter-btn ${t==="5m"?"active":""}`,onClick:()=>e("5m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"5 Minutes"]}),r.jsxs("button",{className:`filter-btn ${t==="15m"?"active":""}`,onClick:()=>e("15m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"15 Minutes"]}),r.jsxs("button",{className:`filter-btn ${t==="30m"?"active":""}`,onClick:()=>e("30m"),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"30 Minutes"]})]})})]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Filter Signals"}),r.jsx("div",{className:"filter-buttons",children:m.map(f=>r.jsxs("button",{className:`filter-btn ${s===f.id?"active":""}`,onClick:()=>i(f.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:f.icon}),f.label]},f.id))})]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Active Signals"}),n?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Option Apex signals..."}):h?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:h}):y()]}),r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"How Option Apex Works"}),r.jsxs("div",{style:{lineHeight:"1.8",opacity:.9},children:[r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Timeframe Analysis:"})," Select your preferred candle interval (1m, 5m, 15m, 30m) to match your trading style."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Signal Types:"})," Entry signals identify new opportunities, while Exit signals suggest profit booking or position closures."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Confidence Score:"})," Based on OI buildup, volume spikes, IV changes, and institutional flow patterns (0-100%)."]}),r.jsxs("p",{style:{marginBottom:"0.75rem"},children:[r.jsx("strong",{children:"Direction:"})," Bullish signals suggest buying calls/selling puts. Bearish signals suggest buying puts/selling calls."]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Levels:"})," Entry, Target, and Stop Loss levels are calculated using risk-reward ratios and volatility analysis."]})]})]})]})}function ej(){const[t,e]=w.useState("volume"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,d]=w.useState(null),m=[{id:"volume",label:"Volume Surge",icon:""},{id:"delivery",label:"High Delivery %",icon:""},{id:"blocks",label:"Block Deals",icon:""}];w.useEffect(()=>{const j=async()=>{i(!0),d(null);try{const f=fn(),p="http://localhost:8000",N=await fetch(`${p}/market-pulse/volume-surge?min_ratio=2.0`,{headers:{Authorization:`Bearer ${f}`}});if(N.ok){const S=await N.json();l(S.stocks||[])}const b=await fetch(`${p}/market-pulse/delivery-leaders?min_pct=60`,{headers:{Authorization:`Bearer ${f}`}});if(b.ok){const S=await b.json();o(S.stocks||[])}const C=await fetch(`${p}/market-pulse/block-activity?days=1`,{headers:{Authorization:`Bearer ${f}`}});if(C.ok){const S=await C.json();u(S.deals||[])}}catch(f){console.error("Error fetching Market Pulse data:",f),d("Failed to load Market Pulse data")}finally{i(!1)}};j();const v=setInterval(j,6e4);return()=>clearInterval(v)},[]);const y=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No volume surges detected"})}):n.slice(0,20).map((j,v)=>{var f,p,N;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:j.symbol}),r.jsxs("td",{children:["",(f=j.ltp)==null?void 0:f.toFixed(2)]}),r.jsxs("td",{className:j.priceChangePct>=0?"positive":"negative",children:[j.priceChangePct>=0?"+":"",(p=j.priceChangePct)==null?void 0:p.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(N=j.volumeRatio)==null?void 0:N.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${j.priceChangePct>=3?"badge-green":"badge-yellow"}`,children:j.priceChangePct>=3?"Strong":"Moderate"})})]},v)})})]})}),x=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Delivery %"}),r.jsx("th",{children:"Signal"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No high delivery stocks found"})}):a.slice(0,20).map((j,v)=>{var f,p,N;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:j.symbol}),r.jsxs("td",{children:["",(f=j.ltp)==null?void 0:f.toFixed(2)]}),r.jsxs("td",{className:j.priceChangePct>=0?"positive":"negative",children:[j.priceChangePct>=0?"+":"",(p=j.priceChangePct)==null?void 0:p.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(N=j.deliveryPct)==null?void 0:N.toFixed(1),"%"]})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-blue",children:j.deliveryPct>=70?"Institutional":"Smart Money"})})]},v)})})]})}),g=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Client"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"})]})}),r.jsx("tbody",{children:c.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No block deals found"})}):c.slice(0,20).map((j,v)=>{var f,p,N,b;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:j.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${j.dealType==="buy"?"badge-green":"badge-red"}`,children:(f=j.dealType)==null?void 0:f.toUpperCase()})}),r.jsxs("td",{style:{fontSize:"0.85rem",opacity:.8},children:[(p=j.clientName)==null?void 0:p.substring(0,30),"..."]}),r.jsx("td",{children:(N=j.quantity)==null?void 0:N.toLocaleString()}),r.jsxs("td",{children:["",(b=j.price)==null?void 0:b.toFixed(2)]})]},v)})})]})});return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Market Pulse"})]}),r.jsx("p",{className:"section-subtitle",children:"Detect institutional activity and smart money flow"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Volume Surges"}),r.jsx("div",{className:"stat-card-value",children:n.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Delivery Leaders"}),r.jsx("div",{className:"stat-card-value",children:a.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Block Deals"}),r.jsx("div",{className:"stat-card-value",children:c.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Active Signals"}),r.jsx("div",{className:"stat-card-value",children:n.filter(j=>j.priceChangePct>=3).length})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:m.map(j=>r.jsxs("button",{className:`filter-btn ${t===j.id?"active":""}`,onClick:()=>e(j.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:j.icon}),j.label]},j.id))})}),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Market Pulse data..."}):h?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:h}):r.jsxs(r.Fragment,{children:[t==="volume"&&y(),t==="delivery"&&x(),t==="blocks"&&g()]})})]})}function tj(){var g,j,v,f,p;const[t,e]=w.useState("all"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(null),[h,d]=w.useState(null),m=[{id:"all",label:"All Grades",icon:"",color:"blue"},{id:"A",label:"Grade A (80+)",icon:"",color:"green"},{id:"B",label:"Grade B (60-79)",icon:"",color:"blue"},{id:"C",label:"Grade C (40-59)",icon:"",color:"yellow"},{id:"D",label:"Grade D (<40)",icon:"",color:"gray"}];w.useEffect(()=>{const N=async()=>{i(!0),d(null);try{const C=fn(),S="http://localhost:8000";let _=`${S}/insider-strategy/picks/active`;t!=="all"&&(_=`${S}/insider-strategy/top-picks?grade=${t}&limit=20`);const $=await fetch(_,{headers:{Authorization:`Bearer ${C}`}});if($.ok){const X=await $.json();l(X.picks||[])}const R=await fetch(`${S}/insider-strategy/grade-distribution`,{headers:{Authorization:`Bearer ${C}`}});if(R.ok){const X=await R.json();o(X)}const K=await fetch(`${S}/insider-strategy/performance`,{headers:{Authorization:`Bearer ${C}`}});if(K.ok){const X=await K.json();u(X)}}catch(C){console.error("Error fetching Insider Strategy data:",C),d("Failed to load Insider Strategy data")}finally{i(!1)}};N();const b=setInterval(N,6e4);return()=>clearInterval(b)},[t]);const y=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Grade"}),r.jsx("th",{children:"Composite Score"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Entry"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Stop Loss"}),r.jsx("th",{children:"R:R"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No picks found for selected grade"})}):n.slice(0,20).map((N,b)=>{var C,S,_,$,R;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:N.symbol}),r.jsx("td",{children:r.jsx("span",{className:`badge ${N.grade==="A"?"badge-green":N.grade==="B"?"badge-blue":N.grade==="C"?"badge-yellow":"badge-gray"}`,children:N.grade})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-blue",children:(C=N.composite_score)==null?void 0:C.toFixed(1)})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${N.pick_type==="BULLISH"?"badge-green":"badge-red"}`,children:N.pick_type})}),r.jsxs("td",{children:["",(S=N.entry_price)==null?void 0:S.toFixed(2)]}),r.jsxs("td",{children:["",(_=N.target_price)==null?void 0:_.toFixed(2)]}),r.jsxs("td",{children:["",($=N.stop_loss)==null?void 0:$.toFixed(2)]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(R=N.risk_reward_ratio)==null?void 0:R.toFixed(1),":1"]})})]},b)})})]})}),x=()=>{var b,C,S,_;if(n.length===0)return null;const N=n[0];return r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsxs("h3",{style:{marginBottom:"1rem"},children:["Top Pick Score Breakdown: ",N.symbol]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Momentum Score (40%)"}),r.jsx("div",{className:"stat-card-value",children:(b=N.momentum_score)==null?void 0:b.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Volume Score (30%)"}),r.jsx("div",{className:"stat-card-value",children:(C=N.volume_score)==null?void 0:C.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon orange",children:""})}),r.jsx("div",{className:"stat-card-label",children:"OI Score (30%)"}),r.jsx("div",{className:"stat-card-value",children:(S=N.oi_score)==null?void 0:S.toFixed(1)})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Composite Score"}),r.jsx("div",{className:"stat-card-value",children:(_=N.composite_score)==null?void 0:_.toFixed(1)})]})]})]})};return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Insider Strategy"})]}),r.jsx("p",{className:"section-subtitle",children:"Multi-factor composite scoring: Momentum (40%) + Volume (30%) + OI (30%)"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Grade A Picks"}),r.jsx("div",{className:"stat-card-value",children:(Array.isArray(a==null?void 0:a.distribution)?(g=a.distribution.find(N=>N.grade==="A"))==null?void 0:g.count:0)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Grade B Picks"}),r.jsx("div",{className:"stat-card-value",children:(Array.isArray(a==null?void 0:a.distribution)?(j=a.distribution.find(N=>N.grade==="B"))==null?void 0:j.count:0)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon yellow",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Total Active Picks"}),r.jsx("div",{className:"stat-card-value",children:(a==null?void 0:a.total_picks)||0})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Avg Accuracy"}),r.jsxs("div",{className:"stat-card-value",children:[((f=(v=c==null?void 0:c.overall)==null?void 0:v.avg_accuracy)==null?void 0:f.toFixed(1))||0,"%"]})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:m.map(N=>r.jsxs("button",{className:`filter-btn ${t===N.id?"active":""}`,onClick:()=>e(N.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:N.icon}),N.label]},N.id))})}),!s&&!h&&n.length>0&&x(),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Insider Strategy picks..."}):h?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:h}):y()}),c&&c.overall&&r.jsxs("div",{className:"card",style:{marginTop:"1rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Performance Metrics"}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Total Trades"}),r.jsx("div",{className:"stat-card-value",children:c.overall.total_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Winning Trades"}),r.jsx("div",{className:"stat-card-value",style:{color:"var(--success)"},children:c.overall.winning_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Losing Trades"}),r.jsx("div",{className:"stat-card-value",style:{color:"var(--danger)"},children:c.overall.losing_trades})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-label",children:"Avg Return"}),r.jsxs("div",{className:"stat-card-value",style:{color:c.overall.avg_return>=0?"var(--success)":"var(--danger)"},children:[(p=c.overall.avg_return)==null?void 0:p.toFixed(2),"%"]})]})]})]})]})}const _d=window.location.origin;function sj(){var _,$,R,K,X,de;const[t,e]=w.useState("heatmap"),[s,i]=w.useState(!0),[n,l]=w.useState(null),[a,o]=w.useState(null),[c,u]=w.useState(null),[h,d]=w.useState(null),[m,y]=w.useState(!1),x=[{id:"heatmap",label:"Sector Heatmap"},{id:"leaders",label:"Leaders"},{id:"laggards",label:"Laggards"},{id:"rotation",label:"Rotation"}];w.useEffect(()=>{g()},[]),w.useEffect(()=>{c&&j(c)},[c]);const g=async()=>{i(!0),l(null);try{const z=await U(`${_d}/sectors/heatmap`);o(z)}catch(z){console.error("Failed to load sector data:",z),l(z.message||"Failed to load sector data")}finally{i(!1)}},j=async z=>{y(!0);try{const se=await U(`${_d}/sectors/${z}/stocks`);d(se)}catch(se){console.error("Failed to load sector stocks:",se),d(null)}finally{y(!1)}},v=z=>z>2?"rgba(34, 197, 94, 0.4)":z>1?"rgba(34, 197, 94, 0.25)":z>0?"rgba(34, 197, 94, 0.1)":z>-1?"rgba(239, 68, 68, 0.1)":z>-2?"rgba(239, 68, 68, 0.25)":"rgba(239, 68, 68, 0.4)";if(s)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]})}),r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading sector data..."})]})]});if(n&&!a)return r.jsxs("div",{className:"product-section",children:[r.jsx("div",{className:"section-header",children:r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]})}),r.jsx("div",{className:"error-container",children:r.jsxs("div",{className:"error-message",children:[r.jsx("span",{className:"error-icon",children:""}),r.jsx("p",{children:n}),r.jsx("button",{className:"refresh-btn",onClick:g,children:"Retry"})]})})]});const f=(a==null?void 0:a.sectors)||[],p=a==null?void 0:a.benchmark,N=a==null?void 0:a.rotation,b=a==null?void 0:a.summary,S=(()=>{switch(t){case"leaders":return f.filter(z=>z.percentChange>0).slice(0,8);case"laggards":return[...f].sort((z,se)=>z.percentChange-se.percentChange).slice(0,8);default:return f}})();return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Sector Scope"})]}),r.jsx("p",{className:"section-subtitle",children:"Sector performance analysis and rotation detection"})]}),p&&r.jsxs("div",{className:"card benchmark-card",children:[r.jsxs("div",{className:"benchmark-info",children:[r.jsx("span",{className:"benchmark-label",children:"Market Benchmark"}),r.jsx("span",{className:"benchmark-name",children:p.name})]}),r.jsxs("div",{className:"benchmark-value",children:[r.jsx("span",{className:"benchmark-price",children:(_=p.lastValue)==null?void 0:_.toLocaleString("en-IN")}),r.jsxs("span",{className:`benchmark-change ${p.percentChange>=0?"positive":"negative"}`,children:[p.percentChange>=0?"+":"",($=p.percentChange)==null?void 0:$.toFixed(2),"%"]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"view-buttons",children:x.map(z=>r.jsx("button",{className:`view-btn ${t===z.id?"active":""}`,onClick:()=>{e(z.id),u(null)},children:z.label},z.id))})}),b&&t==="heatmap"&&r.jsxs("div",{className:"dashboard-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Total Sectors"}),r.jsx("div",{className:"stat-card-value",children:b.totalSectors})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Advancing"}),r.jsx("div",{className:"stat-card-value positive",children:b.advancing})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Declining"}),r.jsx("div",{className:"stat-card-value negative",children:b.declining})]}),r.jsxs("div",{className:"stat-card mini",children:[r.jsx("div",{className:"stat-card-label",children:"Breadth"}),r.jsxs("div",{className:`stat-card-value ${b.breadth>=50?"positive":"negative"}`,children:[b.breadth,"%"]})]})]}),t==="rotation"&&N&&r.jsxs("div",{className:"card rotation-card",children:[r.jsx("h3",{children:"Market Rotation Analysis"}),r.jsxs("div",{className:"rotation-phase",children:[r.jsx("span",{className:"phase-label",children:"Current Phase:"}),r.jsx("span",{className:`phase-badge ${(R=N.phase)==null?void 0:R.toLowerCase()}`,children:(K=N.phase)==null?void 0:K.replace("_"," ")})]}),r.jsx("p",{className:"rotation-insight",children:N.insight}),r.jsxs("div",{className:"rotation-sectors",children:[r.jsxs("div",{className:"rotation-group",children:[r.jsx("span",{className:"rotation-group-label",children:"Leading Sectors:"}),r.jsx("div",{className:"rotation-tags",children:(X=N.leaders)==null?void 0:X.map(z=>r.jsx("span",{className:"rotation-tag leader",children:z},z))})]}),r.jsxs("div",{className:"rotation-group",children:[r.jsx("span",{className:"rotation-group-label",children:"Lagging Sectors:"}),r.jsx("div",{className:"rotation-tags",children:(de=N.laggards)==null?void 0:de.map(z=>r.jsx("span",{className:"rotation-tag laggard",children:z},z))})]})]})]}),t!=="rotation"&&r.jsxs("div",{className:"card",children:[r.jsx("h3",{children:t==="heatmap"?"Sector Performance":t==="leaders"?"Top Performing Sectors":"Worst Performing Sectors"}),r.jsx("div",{className:"sector-heatmap-grid",children:S.map(z=>{var se;return r.jsxs("div",{className:`sector-heatmap-cell ${c===z.shortName?"selected":""}`,style:{backgroundColor:v(z.percentChange)},onClick:()=>u(z.shortName),children:[r.jsx("div",{className:"sector-heatmap-name",children:z.name}),r.jsxs("div",{className:`sector-heatmap-change ${z.percentChange>=0?"positive":"negative"}`,children:[z.percentChange>=0?"+":"",(se=z.percentChange)==null?void 0:se.toFixed(2),"%"]}),r.jsxs("div",{className:"sector-heatmap-rs",children:[r.jsx("span",{className:"rs-label",children:"RS:"}),r.jsxs("span",{className:`rs-value ${z.relativeStrength>=0?"positive":"negative"}`,children:[z.relativeStrength>=0?"+":"",z.relativeStrength]})]}),r.jsx("div",{className:`sector-position-badge ${z.statusColor}`,children:z.position})]},z.indexName)})})]}),c&&r.jsxs("div",{className:"card sector-stocks-card",children:[r.jsxs("div",{className:"sector-stocks-header",children:[r.jsxs("h3",{children:[(h==null?void 0:h.sectorName)||c," Stocks",r.jsxs("span",{className:"stock-count",children:["(",(h==null?void 0:h.stockCount)||0," stocks)"]})]}),r.jsx("button",{className:"close-btn",onClick:()=>{u(null),d(null)},children:""})]}),m?r.jsx("div",{className:"loading-container",style:{padding:"2rem"},children:r.jsx("div",{className:"loading-spinner"})}):h!=null&&h.stocks?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"sector-stocks-summary",children:[r.jsxs("span",{className:"advancing",children:[" ",h.advancing," Advancing"]}),r.jsxs("span",{className:"declining",children:[" ",h.declining," Declining"]})]}),r.jsx("div",{className:"sector-stocks-table",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change"}),r.jsx("th",{children:"Volume"})]})}),r.jsx("tbody",{children:h.stocks.slice(0,15).map(z=>{var se,V;return r.jsxs("tr",{children:[r.jsx("td",{className:"stock-symbol",children:z.symbol}),r.jsx("td",{children:(se=z.lastPrice)==null?void 0:se.toLocaleString("en-IN",{maximumFractionDigits:2})}),r.jsxs("td",{className:z.percentChange>=0?"positive":"negative",children:[z.percentChange>=0?"+":"",(V=z.percentChange)==null?void 0:V.toFixed(2),"%"]}),r.jsxs("td",{children:[(z.volume/1e5).toFixed(2),"L"]})]},z.symbol)})})]})})]}):r.jsx("p",{className:"no-data",children:"No stocks data available"})]}),r.jsx("div",{className:"card",style:{textAlign:"center",padding:"1rem"},children:r.jsx("button",{className:"refresh-btn",onClick:g,children:"Refresh Data"})})]})}function ij(){const[t,e]=w.useState("breakouts-high"),[s,i]=w.useState(!0),[n,l]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,d]=w.useState(null),[m,y]=w.useState(null),x=[{id:"breakouts-high",label:"52W High Breakouts",icon:""},{id:"breakouts-low",label:"52W Low Breakouts",icon:""},{id:"momentum",label:"High Momentum",icon:""}];w.useEffect(()=>{const f=async()=>{i(!0),y(null);try{const N=fn(),b="http://localhost:8000",C=await fetch(`${b}/swing-spectrum/breakouts?type=high&min_distance=0`,{headers:{Authorization:`Bearer ${N}`}});if(C.ok){const R=await C.json();l(R.breakouts||[])}const S=await fetch(`${b}/swing-spectrum/breakouts?type=low&min_distance=0`,{headers:{Authorization:`Bearer ${N}`}});if(S.ok){const R=await S.json();o(R.breakouts||[])}const _=await fetch(`${b}/swing-spectrum/momentum?min_score=70`,{headers:{Authorization:`Bearer ${N}`}});if(_.ok){const R=await _.json();u(R.stocks||[])}const $=await fetch(`${b}/swing-spectrum/stats`,{headers:{Authorization:`Bearer ${N}`}});if($.ok){const R=await $.json();d(R)}}catch(N){console.error("Error fetching Swing Spectrum data:",N),y("Failed to load Swing Spectrum data")}finally{i(!1)}};f();const p=setInterval(f,6e4);return()=>clearInterval(p)},[]);const g=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Distance from 52W High"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Strength"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No 52-week high breakouts found"})}):n.slice(0,20).map((f,p)=>{var N,b,C,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:f.symbol}),r.jsxs("td",{children:["",(N=f.ltp)==null?void 0:N.toFixed(2)]}),r.jsxs("td",{className:f.priceChangePct>=0?"positive":"negative",children:[f.priceChangePct>=0?"+":"",(b=f.priceChangePct)==null?void 0:b.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-green",children:[(C=f.distanceFrom52WHigh)==null?void 0:C.toFixed(2),"%"]})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=f.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.breakoutStrength==="STRONG"?"badge-green":f.breakoutStrength==="MODERATE"?"badge-yellow":"badge-gray"}`,children:f.breakoutStrength})})]},p)})})]})}),j=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Distance from 52W Low"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Strength"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No 52-week low breakouts found"})}):a.slice(0,20).map((f,p)=>{var N,b,C,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:f.symbol}),r.jsxs("td",{children:["",(N=f.ltp)==null?void 0:N.toFixed(2)]}),r.jsxs("td",{className:f.priceChangePct>=0?"positive":"negative",children:[f.priceChangePct>=0?"+":"",(b=f.priceChangePct)==null?void 0:b.toFixed(2),"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-red",children:[(C=f.distanceFrom52WLow)==null?void 0:C.toFixed(2),"%"]})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=f.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.breakoutStrength==="STRONG"?"badge-green":f.breakoutStrength==="MODERATE"?"badge-yellow":"badge-gray"}`,children:f.breakoutStrength})})]},p)})})]})}),v=()=>r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Change %"}),r.jsx("th",{children:"Momentum Score"}),r.jsx("th",{children:"Volume Ratio"}),r.jsx("th",{children:"Trend"})]})}),r.jsx("tbody",{children:c.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"2rem",opacity:.6},children:"No high momentum stocks found"})}):c.slice(0,20).map((f,p)=>{var N,b,C,S;return r.jsxs("tr",{children:[r.jsx("td",{className:"symbol-cell",children:f.symbol}),r.jsxs("td",{children:["",(N=f.ltp)==null?void 0:N.toFixed(2)]}),r.jsxs("td",{className:f.priceChangePct>=0?"positive":"negative",children:[f.priceChangePct>=0?"+":"",(b=f.priceChangePct)==null?void 0:b.toFixed(2),"%"]}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-green",children:(C=f.momentumScore)==null?void 0:C.toFixed(0)})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-blue",children:[(S=f.volumeRatio)==null?void 0:S.toFixed(1),"x"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.trend==="BULLISH"?"badge-green":"badge-red"}`,children:f.trend})})]},p)})})]})});return r.jsxs("div",{className:"product-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"section-title",children:[r.jsx("span",{className:"section-title-icon",children:""}),r.jsx("h2",{children:"Swing Spectrum"})]}),r.jsx("p",{className:"section-subtitle",children:"Stocks breaking barriers and signaling new trends for medium-term trading"})]}),r.jsxs("div",{className:"dashboard-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"52W High Breakouts"}),r.jsx("div",{className:"stat-card-value",children:n.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon red",children:""})}),r.jsx("div",{className:"stat-card-label",children:"52W Low Breakouts"}),r.jsx("div",{className:"stat-card-value",children:a.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon green",children:""})}),r.jsx("div",{className:"stat-card-label",children:"High Momentum"}),r.jsx("div",{className:"stat-card-value",children:c.length})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card-header",children:r.jsx("div",{className:"stat-card-icon blue",children:""})}),r.jsx("div",{className:"stat-card-label",children:"Strong Breakouts"}),r.jsx("div",{className:"stat-card-value",children:n.filter(f=>f.breakoutStrength==="STRONG").length})]})]}),r.jsx("div",{className:"card",style:{marginTop:"1.5rem"},children:r.jsx("div",{className:"filter-buttons",children:x.map(f=>r.jsxs("button",{className:`filter-btn ${t===f.id?"active":""}`,onClick:()=>e(f.id),children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:f.icon}),f.label]},f.id))})}),r.jsx("div",{className:"card",style:{marginTop:"1rem"},children:s?r.jsx("div",{style:{textAlign:"center",padding:"3rem",opacity:.6},children:"Loading Swing Spectrum data..."}):m?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--danger)",opacity:.8},children:m}):r.jsxs(r.Fragment,{children:[t==="breakouts-high"&&g(),t==="breakouts-low"&&j(),t==="momentum"&&v()]})})]})}function nj(){const{isPaused:t,isOnline:e,togglePause:s,activeCount:i}=c0(),[n,l]=w.useState(kh()),[a,o]=w.useState(_h());w.useEffect(()=>{const u=setInterval(()=>{l(kh()),o(_h())},1e3);return()=>clearInterval(u)},[]);const c=ws();return e?r.jsxs("div",{className:"refresh-control",children:[r.jsxs("div",{className:"market-status",children:[r.jsxs("span",{className:`market-status-indicator ${c?"open":"closed"}`,children:[r.jsx("span",{className:"status-dot"}),n]}),r.jsxs("span",{className:"market-countdown",children:[a.event==="close"?"Closes":"Opens"," in ",a.countdown]})]}),c?r.jsxs("button",{className:`refresh-toggle-btn ${t?"paused":"active"}`,onClick:s,title:t?"Resume auto-refresh":"Pause auto-refresh",children:[t?r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:r.jsx("path",{d:"M3 2l10 6-10 6V2z"})}):r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:r.jsx("path",{d:"M2 2h4v12H2V2zm8 0h4v12h-4V2z"})}),r.jsx("span",{className:"refresh-toggle-text",children:t?"Paused":`Live (${i})`})]}):r.jsx("span",{className:"refresh-status-text",children:"Auto-refresh paused (market closed)"})]}):r.jsx("div",{className:"refresh-control",children:r.jsxs("div",{className:"offline-indicator",children:[r.jsx("span",{className:"offline-dot"}),r.jsx("span",{children:"Offline"})]})})}function rj(){const t=mi(),{syncThemeWithBackend:e}=ap();localStorage.getItem("access_token");const s=localStorage.getItem("user_email")||"User",i=localStorage.getItem("user_name")||s.split("@")[0],[n,l]=w.useState("dashboard"),[a,o]=w.useState(!1),[c,u]=w.useState(!1),[h,d]=w.useState("");w.useEffect(()=>{e(),fetch("/static/version.json?t="+Date.now()).then($=>$.json()).then($=>d(`v${$.version}`)).catch(()=>d("v1.0.0"));const p=new URLSearchParams(window.location.search),N=p.get("s"),b=p.get("auth_code")||p.get("code"),C=p.get("id"),S=p.get("fyers_connected"),_=p.get("fyers_error");S==="true"?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):_?(alert("Fyers connection failed: "+_),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):N==="ok"&&b&&m(N,b,C)},[]);const m=async(p,N,b)=>{try{const C=await fetch(`/fyers/callback?s=${p}&code=${N}&id=${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),S=await C.json();C.ok?(alert("Fyers connected successfully!"),window.history.replaceState({},document.title,window.location.pathname),l("settings.profile")):alert("Failed to connect Fyers: "+S.detail)}catch(C){console.error("Error handling Fyers callback:",C)}},y=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_email"),t("/login")},x=p=>{l(p),u(!1)},[g,j]=n.split("."),v=()=>{switch(g){case"dashboard":return r.jsx(Eh,{onNavigate:x});case"products":switch(j){case"option-clock":return r.jsx(Cd,{});case"option-apex":return r.jsx(ZN,{});case"market-pulse":return r.jsx(ej,{});case"insider-strategy":return r.jsx(tj,{});case"sector-scope":return r.jsx(sj,{});case"swing-spectrum":return r.jsx(ij,{});default:return r.jsx(Cd,{})}case"trading":return j==="portfolio"||j==="orders"?r.jsx(Ro,{initialTab:j==="orders"?"orders":"portfolio"}):r.jsx(Ro,{initialTab:"trade"});case"real-trading":return r.jsx(VN,{initialTab:"trade"});case"market":return j==="nifty-contributors"?r.jsx(XN,{}):j==="fii-dii"?r.jsx(QN,{}):r.jsx(AN,{subSection:j||"gainers"});case"wallet":return r.jsx(JN,{subSection:j||"balance",onNavigate:x});case"watchlist":return r.jsx(YN,{onNavigate:x});case"settings":return r.jsx(qN,{subSection:j||"profile"});default:return r.jsx(Eh,{onNavigate:x})}},f=()=>{const p={dashboard:"Dashboard",products:"TradeFinder Products","products.option-clock":"Option Clock","products.option-apex":"Option Apex","products.market-pulse":"Market Pulse","products.insider-strategy":"Insider Strategy","products.sector-scope":"Sector Scope","products.swing-spectrum":"Swing Spectrum",trading:"Virtual Trading","trading.trade":"Trade Stocks","trading.portfolio":"My Portfolio","trading.orders":"Order History","real-trading":"Real Trading","real-trading.fyers":"Fyers Trading",market:"Market Data","market.gainers":"Top Gainers","market.losers":"Top Losers","market.nifty-contributors":"Nifty Contributors","market.fii-dii":"FII / DII Activity","market.weekly":"Weekly Movers","market.bulk":"Bulk Deals",wallet:"Wallet","wallet.balance":"Balance","wallet.transactions":"Transactions",watchlist:"Watchlist",settings:"Settings","settings.profile":"Profile","settings.preferences":"Preferences"};return p[n]||p[g]||"Dashboard"};return r.jsxs("div",{className:"app-layout",children:[c&&r.jsx("div",{className:"mobile-overlay",onClick:()=>u(!1)}),r.jsx(n0,{activeSection:n,onSectionChange:x,collapsed:a,onToggleCollapse:()=>o(!a),mobileOpen:c,onMobileClose:()=>u(!1)}),r.jsxs("main",{className:`main-content ${a?"sidebar-collapsed":""}`,children:[r.jsxs("header",{className:"main-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsxs("button",{className:"mobile-menu-btn",onClick:()=>u(!c),"aria-label":"Toggle menu",children:[r.jsx("span",{className:"hamburger-line"}),r.jsx("span",{className:"hamburger-line"}),r.jsx("span",{className:"hamburger-line"})]}),r.jsx("h1",{className:"page-title",children:f()}),h&&r.jsx("span",{className:"version-badge",children:h})]}),r.jsxs("div",{className:"header-right",children:[r.jsx(nj,{}),r.jsx("span",{className:"user-email",children:i}),r.jsx("button",{className:"logout-btn",onClick:y,children:"Logout"})]})]}),r.jsx("div",{className:"content-area",children:v()})]})]})}function lj(){const t=mi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[l,a]=w.useState(""),[o,c]=w.useState({message:"",type:""}),[u,h]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/");const g=localStorage.getItem("GOOGLE_CLIENT_ID");g&&a(g);const j=()=>{const v=localStorage.getItem("GOOGLE_CLIENT_ID");v&&window.google&&(window.google.accounts.id.initialize({client_id:v,callback:d}),window.google.accounts.id.renderButton(document.getElementById("google-signin"),{theme:"outline",size:"large",width:280}))};if(window.google)j();else{const v=setInterval(()=>{window.google&&(clearInterval(v),j())},200);return()=>clearInterval(v)}},[t]);const d=async g=>{if(!(g!=null&&g.credential)){c({message:"Google sign-in failed",type:"error"});return}h(!0),c({message:"Signing in with Google...",type:"info"});try{const j=await Kr("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:g.credential})});m(j)}catch(j){c({message:j.message,type:"error"})}finally{h(!1)}},m=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):c({message:"Unexpected response from server",type:"error"})},y=async g=>{g.preventDefault(),h(!0),c({message:"Logging in...",type:"info"});try{const j=new URLSearchParams;j.append("username",e),j.append("password",i);const v=await Kr("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.toString()});m(v)}catch(j){c({message:j.message,type:"error"})}finally{h(!1)}},x=()=>{l&&(localStorage.setItem("GOOGLE_CLIENT_ID",l),c({message:"Saved Google Client ID. Reloading...",type:"info"}),setTimeout(()=>window.location.reload(),500))};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Welcome Back"}),r.jsx("p",{className:"muted",children:"Sign in to access your dashboard"})]}),r.jsxs("form",{onSubmit:y,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:e,onChange:g=>s(g.target.value),placeholder:"you@example.com",required:!0,disabled:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:g=>n(g.target.value),placeholder:"",required:!0,disabled:u})]}),r.jsx("button",{type:"submit",className:"primary-btn",disabled:u,children:u?"Signing in...":"Sign In"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or continue with"})}),r.jsxs("div",{className:"google-section",children:[r.jsx("div",{id:"google-signin",className:"google-placeholder",children:!localStorage.getItem("GOOGLE_CLIENT_ID")&&r.jsx("span",{className:"muted",children:"Set Google Client ID below to enable"})}),r.jsxs("div",{className:"google-config",children:[r.jsx("input",{type:"text",value:l,onChange:g=>a(g.target.value),placeholder:"Google Client ID (optional)"}),r.jsx("button",{type:"button",className:"ghost-btn",onClick:x,children:"Save"})]})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsx("span",{className:"muted",children:"Don't have an account?"}),r.jsx(ml,{to:"/signup",children:"Create one"})]}),o.message&&r.jsx("div",{className:`auth-message ${o.type}`,children:o.message})]})})}function aj(){const t=mi(),[e,s]=w.useState(""),[i,n]=w.useState(""),[l,a]=w.useState(""),[o,c]=w.useState(""),[u,h]=w.useState({message:"",type:""}),[d,m]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("access_token")&&t("/")},[t]);const y=g=>{g!=null&&g.access_token&&(g!=null&&g.user)?(localStorage.setItem("access_token",g.access_token),localStorage.setItem("user_email",g.user.email||""),t("/")):h({message:"Unexpected response from server",type:"error"})},x=async g=>{if(g.preventDefault(),l!==o){h({message:"Passwords do not match",type:"error"});return}if(l.length<6){h({message:"Password must be at least 6 characters",type:"error"});return}m(!0),h({message:"Creating account...",type:"info"});try{const j=await Kr("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:l,display_name:e||i.split("@")[0]})});y(j)}catch(j){h({message:j.message,type:"error"})}finally{m(!1)}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Create Account"}),r.jsx("p",{className:"muted",children:"Join Stock Servs to start trading"})]}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"displayName",children:"Display Name"}),r.jsx("input",{id:"displayName",type:"text",value:e,onChange:g=>s(g.target.value),placeholder:"John Doe",disabled:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:i,onChange:g=>n(g.target.value),placeholder:"you@example.com",required:!0,disabled:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:l,onChange:g=>a(g.target.value),placeholder:"",required:!0,disabled:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:g=>c(g.target.value),placeholder:"",required:!0,disabled:d})]}),r.jsx("button",{type:"submit",className:"primary-btn",disabled:d,children:d?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsx("span",{className:"muted",children:"Already have an account?"}),r.jsx(ml,{to:"/login",children:"Sign in"})]}),u.message&&r.jsx("div",{className:`auth-message ${u.type}`,children:u.message})]})})}const Nl=document.createElement("script");Nl.src="https://accounts.google.com/gsi/client";Nl.async=!0;Nl.defer=!0;document.head.appendChild(Nl);function oj({children:t}){return!!localStorage.getItem("access_token")?t:r.jsx($c,{to:"/login",replace:!0})}function Ed({children:t}){return!!localStorage.getItem("access_token")?r.jsx($c,{to:"/",replace:!0}):t}Ta.createRoot(document.getElementById("root")).render(r.jsx(Ma.StrictMode,{children:r.jsx(Zy,{children:r.jsx(e0,{children:r.jsx(Wy,{children:r.jsxs(yy,{children:[r.jsx(Ri,{path:"/",element:r.jsx(oj,{children:r.jsx(rj,{})})}),r.jsx(Ri,{path:"/login",element:r.jsx(Ed,{children:r.jsx(lj,{})})}),r.jsx(Ri,{path:"/signup",element:r.jsx(Ed,{children:r.jsx(aj,{})})}),r.jsx(Ri,{path:"*",element:r.jsx($c,{to:"/",replace:!0})})]})})})})}));
